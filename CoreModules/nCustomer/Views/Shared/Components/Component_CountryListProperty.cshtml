@{
    Layout = null;
}

<script type="text/ng-template" id="country-list-property.html">
    <div ng-if="$ctrl.m">
        <div class="row">
            <div class="col-sm-offset-2 col-xs-8">
                <div class="editblock">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="control-label col-xs-6">{{$ctrl.initialData.labelText}}</label>
                            <div class="col-xs-6">
                                <div class="row pb-1" ng-repeat="c in $ctrl.m.countryIsoCodes">
                                    <p class="col-xs-8 form-control-static">{{$ctrl.getCountryName(c)}}</p>
                                    <button ng-click="$ctrl.removeCountry(c, $event)" class="n-icon-btn n-red-btn"><span class="glyphicon glyphicon-minus"></span></button>
                                </div>
                                <div class="row pb-1">
                                    <div class="col-xs-8">
                                        <select class="form-control" ng-model="$ctrl.m.editCountryCode" ng-change="$ctrl.onCountryChosen()">
                                            <option value="">Choose country to add</option>
                                            <option ng-repeat="c in $ctrl.m.allCountryIsoCodes" value="{{c}}">{{$ctrl.getCountryName(c)}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-3">
                        <div class="col-xs-6 text-right"><button ng-click="$ctrl.cancelEdit($event)" class="n-main-btn n-white-btn">Cancel</button></div>
                        <div class="col-xs-6"><button ng-click="$ctrl.saveEdit($event)" class="n-main-btn n-green-btn">Save</button></div>
                    </div>
                </div>
            </div>
        </div>
        

        <div ng-if="$ctrl.initialData.historyItems" class="pt-3">
            <h2 class="custom-header">History</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th class="col-xs-3">Date</th>
                        <th class="col-xs-3">Value</th>
                        <th class="col-xs-3 text-right">By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="h in $ctrl.initialData.historyItems track by $index">
                        <td>{{h.Date | date:'short'}}</td>
                        <td><span class="comma" ng-repeat="i in h.CountryIsoCodes">{{$ctrl.getCountryName(i)}}</span></td>
                        <td class="text-right">{{h.ByUserDisplayName}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>