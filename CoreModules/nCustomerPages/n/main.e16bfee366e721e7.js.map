{"version":3,"file":"main.e16bfee366e721e7.js","mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["./projects/customerpages/src/app/app-routing.module.ts","./projects/customerpages/src/app/app.component.ts","./projects/customerpages/src/app/app.component.html","./projects/customerpages/src/app/app.module.ts","./projects/customerpages/src/app/common-services/customer-pages-api.service.ts","./projects/customerpages/src/app/common-services/customer-pages-config.service.ts","./projects/customerpages/src/app/common-services/customer-pages-validation.service.ts","./projects/customerpages/src/app/common-services/customer-pages.auth.guard.ts","./projects/customerpages/src/app/common-services/customerpages-event.service.ts","./projects/customerpages/src/app/common-services/customerpages.loader.interceptor.ts","./projects/customerpages/src/app/kyc-questions/kyc-questions-routing.module.ts","./projects/customerpages/src/app/kyc-questions/kyc-questions.module.ts","./projects/customerpages/src/app/kyc-questions/pages/kyc-overview/kyc-overview.component.ts","./projects/customerpages/src/app/kyc-questions/pages/kyc-overview/kyc-overview.component.html","./projects/customerpages/src/app/kyc-questions/pages/kyc-overview/kyc-overview.service.ts","./projects/customerpages/src/app/kyc-questions/pages/questions-session/questions-session.component.ts","./projects/customerpages/src/app/kyc-questions/pages/questions-session/questions-session.component.html","./projects/customerpages/src/app/mortgage-loan-applications/components/ml-shell/ml-shell.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/components/ml-shell/ml-shell.component.html","./projects/customerpages/src/app/mortgage-loan-applications/mortgage-loan-applications-routing.module.ts","./projects/customerpages/src/app/mortgage-loan-applications/mortgage-loan-applications.module.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/application-created/application-created.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/application-created/application-created.component.html","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-additionalloan/calculator-tab-additionalloan.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-additionalloan/calculator-tab-additionalloan.component.html","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-move/calculator-tab-move.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-move/calculator-tab-move.component.html","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-purchase/calculator-tab-purchase.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/calculator-tab-purchase/calculator-tab-purchase.component.html","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/loan-calculator.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/open-pages/loan-calculator/loan-calculator.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-applicants/application-step-applicants.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-applicants/application-step-applicants.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-consent/application-step-consent.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-consent/application-step-consent.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-economy/application-step-economy.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-economy/application-step-economy.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-object/application-step-object.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-step-object/application-step-object.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-wizard-shell/application-wizard-shell.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/components/application-wizard-shell/application-wizard-shell.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/start-webapplication/start-webapplication.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/initial-application/start-webapplication/start-webapplication.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/kyc-task-application/kyc-task-application.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/kyc-task-application/kyc-task-application.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/ongoing-application/ongoing-application.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/ongoing-application/ongoing-application.component.html","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/overview/overview.component.ts","./projects/customerpages/src/app/mortgage-loan-applications/secure-pages/overview/overview.component.html","./projects/customerpages/src/app/mortgage-loan-applications/services/customer-pages-ml-api.service.ts","./projects/customerpages/src/app/mypages/components/mypages-shell/mypages-shell.component.ts","./projects/customerpages/src/app/mypages/components/mypages-shell/mypages-shell.component.html","./projects/customerpages/src/app/mypages/components/unpaid-notifications/unpaid-notifications.component.ts","./projects/customerpages/src/app/mypages/components/unpaid-notifications/unpaid-notifications.component.html","./projects/customerpages/src/app/mypages/mypages-routing.module.ts","./projects/customerpages/src/app/mypages/mypages.module.ts","./projects/customerpages/src/app/mypages/pages/loan/capital-transaction-history/capital-transaction-history.component.ts","./projects/customerpages/src/app/mypages/pages/loan/capital-transaction-history/capital-transaction-history.component.html","./projects/customerpages/src/app/mypages/pages/loan/interest-history/interest-history.component.ts","./projects/customerpages/src/app/mypages/pages/loan/interest-history/interest-history.component.html","./projects/customerpages/src/app/mypages/pages/loan/loan.component.ts","./projects/customerpages/src/app/mypages/pages/loan/loan.component.html","./projects/customerpages/src/app/mypages/pages/loan/ml-amortization-plan/ml-amortization-plan.component.ts","./projects/customerpages/src/app/mypages/pages/loan/ml-amortization-plan/ml-amortization-plan.component.html","./projects/customerpages/src/app/mypages/pages/loan/ul-amortization-plan/ul-amortization-plan.component.ts","./projects/customerpages/src/app/mypages/pages/loan/ul-amortization-plan/ul-amortization-plan.component.html","./projects/customerpages/src/app/mypages/pages/my-data/my-contactinfo/my-contactinfo.component.ts","./projects/customerpages/src/app/mypages/pages/my-data/my-contactinfo/my-contactinfo.component.html","./projects/customerpages/src/app/mypages/pages/my-data/my-data.component.ts","./projects/customerpages/src/app/mypages/pages/my-data/my-data.component.html","./projects/customerpages/src/app/mypages/pages/my-documents/my-documents.component.ts","./projects/customerpages/src/app/mypages/pages/my-documents/my-documents.component.html","./projects/customerpages/src/app/mypages/pages/my-loans/my-loans.component.ts","./projects/customerpages/src/app/mypages/pages/my-loans/my-loans.component.html","./projects/customerpages/src/app/mypages/pages/my-messages/my-messages.component.ts","./projects/customerpages/src/app/mypages/pages/my-messages/my-messages.component.html","./projects/customerpages/src/app/mypages/pages/mypages-overview/mypages-overview-loans/mypages-overview-loans.component.ts","./projects/customerpages/src/app/mypages/pages/mypages-overview/mypages-overview-loans/mypages-overview-loans.component.html","./projects/customerpages/src/app/mypages/pages/mypages-overview/mypages-overview.component.ts","./projects/customerpages/src/app/mypages/pages/mypages-overview/mypages-overview.component.html","./projects/customerpages/src/app/mypages/pages/mypages-testpage/mypages-testpage.component.ts","./projects/customerpages/src/app/mypages/pages/mypages-testpage/mypages-testpage.component.html","./projects/customerpages/src/app/mypages/services/mypages-api.service.ts","./projects/customerpages/src/app/shared-components/applications-list/applications-list.component.ts","./projects/customerpages/src/app/shared-components/applications-list/applications-list.component.html","./projects/customerpages/src/app/shared-components/calculator-slider/calculator-slider.component.ts","./projects/customerpages/src/app/shared-components/calculator-slider/calculator-slider.component.html","./projects/customerpages/src/app/shared-components/customer-messages-helper.ts","./projects/customerpages/src/app/shared-components/customer-pages-application-messages/customer-pages-application-messages.component.ts","./projects/customerpages/src/app/shared-components/customer-pages-application-messages/customer-pages-application-messages.component.html","./projects/customerpages/src/app/shared-components/customerpages-shell/customerpages-shell.component.ts","./projects/customerpages/src/app/shared-components/customerpages-shell/customerpages-shell.component.html","./projects/customerpages/src/app/shared-components/secure-messages-edit-list/secure-messages-edit-list.component.ts","./projects/customerpages/src/app/shared-components/secure-messages-edit-list/secure-messages-edit-list.component.html","./projects/customerpages/src/app/shared-components/services/employment-form.service.ts","./projects/customerpages/src/app/shared-components/shared-components.module.ts","./projects/customerpages/src/app/shared-components/task-kyc-questions/task-kyc-questions.component.ts","./projects/customerpages/src/app/shared-components/task-kyc-questions/task-kyc-questions.component.html","./projects/customerpages/src/app/shared-components/task-page/task-page.component.ts","./projects/customerpages/src/app/shared-components/task-page/task-page.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-agreement/customer-pages-agreement.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-agreement/customer-pages-agreement.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-application-offer/customer-pages-application-offer.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-application-offer/customer-pages-application-offer.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-bankaccounts/customer-pages-bankaccounts.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-bankaccounts/customer-pages-bankaccounts.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-direct-debit/customer-pages-direct-debit.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/customer-pages-direct-debit/customer-pages-direct-debit.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/shell/shell.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/shell/shell.component.html","./projects/customerpages/src/app/unsecured-loan-applications/components/task-toggle-block/task-toggle-block.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/components/task-toggle-block/task-toggle-block.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/customer-pages-application/customer-pages-application-tasks.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/customer-pages-application/customer-pages-application.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/customer-pages-application/customer-pages-application.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/overview/overview.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/overview/overview.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-applicants/pre-application-applicants.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-applicants/pre-application-applicants.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-calculator/pre-application-calculator.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-calculator/pre-application-calculator.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-datashare/pre-application-datashare.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-datashare/pre-application-datashare.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-economy/pre-application-economy.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-economy/pre-application-economy.component.html","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-received/pre-application-received.component.ts","./projects/customerpages/src/app/unsecured-loan-applications/pages/pre-application-received/pre-application-received.component.html","./projects/customerpages/src/app/unsecured-loan-applications/services/customer-pages-applications-api.service.ts","./projects/customerpages/src/app/unsecured-loan-applications/services/pre-application.service.ts","./projects/customerpages/src/app/unsecured-loan-applications/unsecured-loan-applications-routing.module.ts","./projects/customerpages/src/app/unsecured-loan-applications/unsecured-loan-applications.module.ts","./projects/customerpages/src/environments/environment.ts","./projects/customerpages/src/main.ts","./projects/ntech-components/src/lib/kreditz-datashare-iframe/kreditz-datashare-iframe.component.ts","./projects/ntech-components/src/lib/kreditz-datashare-iframe/kreditz-datashare-iframe.component.html","./projects/ntech-components/src/lib/kyc-answers-editor/kyc-answers-editor.component.ts","./projects/ntech-components/src/lib/kyc-answers-editor/kyc-answers-editor.component.html","./projects/ntech-components/src/lib/kyc-answers-view/kyc-answers-view.component.ts","./projects/ntech-components/src/lib/kyc-answers-view/kyc-answers-view.component.html","./projects/ntech-components/src/lib/kyc-questions-overview-base.ts","./projects/ntech-components/src/lib/ml-se-amortization-basis/ml-se-amortization-basis.component.ts","./projects/ntech-components/src/lib/ml-se-amortization-basis/ml-se-amortization-basis.component.html","./projects/ntech-components/src/lib/ntech-components.module.ts","./projects/ntech-components/src/public-api.ts","./src/app/common-components/pipes/join.pipe.ts","./src/app/common-services/complex-application-list.ts","./src/app/common-services/effective-interest-rate.calculator.ts","./src/app/common-services/loader.interceptor.ts","./src/app/common-services/ml-standard-functions.ts","./src/app/common-services/ntech-event.service.ts","./src/app/common-services/ntech-forms-helper.ts","./src/app/common-services/ntech-paymentplan.service.ts","./src/app/common-services/ntech-validation-shared-base.service.ts","./src/app/common-services/ntech.math.ts","./src/app/common-services/randomizer.ts","./src/app/common-services/size-and-time-limited-cache.ts","./src/app/common.types.ts","./src/app/country-specific/country-specific-validator.ts","./src/app/secure-messages/shared.quill.settings.ts","./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nconst routes: Routes = [];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { setTheme } from 'ngx-bootstrap/utils';\r\n\r\nsetTheme('bs3'); //Ensure that the bootstrap 3 theme is used\r\n\r\n@Component({\r\n    selector: 'np-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: [],\r\n})\r\nexport class AppComponent {\r\n    //@ts-ignore TODO remove unused locals\r\n    constructor(private httpClient: HttpClient) {}\r\n\r\n    ngOnInit(): void {}\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { getLocaleCurrencySymbol, PlatformLocation, registerLocaleData } from '@angular/common';\r\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ApplicationRef, APP_INITIALIZER, DEFAULT_CURRENCY_CODE, LOCALE_ID, NgModule, NgZone } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport localeFi from '@angular/common/locales/fi';\r\nimport localeSv from '@angular/common/locales/sv';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { UnsecuredLoanApplicationsModule } from './unsecured-loan-applications/unsecured-loan-applications.module';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesConfigService } from './common-services/customer-pages-config.service';\r\nimport { CustomerPagesLoaderInterceptor } from './common-services/customerpages.loader.interceptor';\r\nimport { MortgageLoanApplicationsModule } from './mortgage-loan-applications/mortgage-loan-applications.module';\r\nimport { MypagesModule } from './mypages/mypages.module';\r\nimport { SharedComponentsModule } from './shared-components/shared-components.module';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ToastrModule } from 'ngx-toastr';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { KycQuestionsModule } from './kyc-questions/kyc-questions.module';\r\n\r\nregisterLocaleData(localeFi, 'fi');\r\nregisterLocaleData(localeSv, 'sv');\r\nlet selectedLocale = 'sv';\r\n\r\nfunction createCurrencyCode() {\r\n    return getLocaleCurrencySymbol(selectedLocale);\r\n}\r\n\r\nlet isInitialized = new BehaviorSubject<boolean>(false);\r\n\r\nlet boostrapLoadingIndicator = document?.querySelector('#boostrapLoadingIndicator');\r\nexport function initializeConfig(\r\n    configService: CustomerPagesConfigService,\r\n    httpClient: HttpClient,\r\n    platform: PlatformLocation\r\n) {\r\n    return () => {\r\n        configService.initialize((cfg) => {\r\n            if (!cfg.isConfigLoaded()) {\r\n                if (boostrapLoadingIndicator) {\r\n                    boostrapLoadingIndicator.textContent = 'Failed to load configuration from server';\r\n                }\r\n                return;\r\n            }\r\n            let baseCountry = cfg.config()?.Client.BaseCountry;\r\n            if (baseCountry == 'SE') {\r\n                selectedLocale = 'sv';\r\n            } else if (baseCountry == 'FI') {\r\n                selectedLocale = 'fi';\r\n            }\r\n\r\n            isInitialized.next(true);\r\n        });\r\n    };\r\n}\r\n\r\nlet wasBootstrapped = false;\r\n\r\n@NgModule({\r\n    declarations: [AppComponent],\r\n    imports: [\r\n        SharedComponentsModule,\r\n        UnsecuredLoanApplicationsModule,\r\n        MortgageLoanApplicationsModule,\r\n        MypagesModule,\r\n        KycQuestionsModule,\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        HttpClientModule,\r\n        BrowserAnimationsModule, // required for ToastrModule\r\n        ToastrModule.forRoot(),\r\n        ModalModule.forRoot(),\r\n    ],\r\n    providers: [\r\n        {\r\n            provide: APP_INITIALIZER,\r\n            useFactory: initializeConfig,\r\n            deps: [CustomerPagesConfigService, HttpClient, PlatformLocation], // dependancy\r\n            multi: true,\r\n        },\r\n        { provide: LOCALE_ID, useValue: selectedLocale },\r\n        { provide: DEFAULT_CURRENCY_CODE, useFactory: createCurrencyCode, deps: [APP_INITIALIZER] },\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: CustomerPagesLoaderInterceptor,\r\n            multi: true,\r\n        },\r\n    ],\r\n    bootstrap: [],\r\n})\r\nexport class AppModule {\r\n    constructor(private ngZone: NgZone) {}\r\n    ngDoBootstrap(app: ApplicationRef) {\r\n        isInitialized.subscribe((x) => {\r\n            this.ngZone.run(() => {\r\n                if (x && !wasBootstrapped) {\r\n                    wasBootstrapped = true;\r\n                    if (boostrapLoadingIndicator) {\r\n                        boostrapLoadingIndicator.remove();\r\n                    }\r\n                    app.bootstrap(AppComponent);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { IsoCountry } from 'projects/ntech-components/src/public-api';\r\nimport { normalizeStringSlashes } from 'src/app/common.types';\r\nimport { CustomerPagesConfigService } from './customer-pages-config.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesApiService {\r\n    constructor(private config: CustomerPagesConfigService) {}\r\n\r\n    /** Post thru the nCustomerPages proxy towards another module.  */\r\n    public post<TResponse>(\r\n        moduleName: string,\r\n        relativeUrl: string,\r\n        request: any,\r\n        options?: {\r\n            handleNTechError?: (error: NTechApiErrorResponse) => TResponse;\r\n            skipLoadingIndicator?: boolean;\r\n            isAnonymous?: boolean;\r\n        }\r\n    ): Promise<TResponse> {\r\n        let normalizedRelativeUrl = normalizeStringSlashes(relativeUrl, false, false);\r\n        let url = `/api/embedded-customerpages/${\r\n            options?.isAnonymous ? 'anonymous-' : ''\r\n        }proxy/${moduleName}/${normalizedRelativeUrl}`;\r\n        let result = this.config\r\n            .post<TResponse>(url, request, { skipLoadingIndicator: options?.skipLoadingIndicator })\r\n            .toPromise();\r\n        if (options?.handleNTechError) {\r\n            return result.catch((x: HttpErrorResponse) => {\r\n                let error: NTechApiErrorResponse = x?.error;\r\n                if (error?.errorCode && error?.errorMessage) {\r\n                    return options.handleNTechError(error);\r\n                } else {\r\n                    throw x;\r\n                }\r\n            });\r\n        } else {\r\n            return result;\r\n        }\r\n    }\r\n\r\n    public download(moduleName: string, relativeUrl: string, request: any): Promise<Blob> {\r\n        let normalizedRelativeUrl = normalizeStringSlashes(relativeUrl, false, false);\r\n        let url = `/api/embedded-customerpages/proxy/${moduleName}/${normalizedRelativeUrl}`;\r\n\r\n        return this.config.download(url, request).toPromise();\r\n    }\r\n\r\n    public getArchiveDocumentUrl(archiveKey: string, skipFilename?: boolean) {\r\n        let url = `/api/embedded-customerpages/download-document?archiveKey=${encodeURIComponent(archiveKey)}`;\r\n        if (skipFilename) {\r\n            url += '&skipFilename=True';\r\n        }\r\n        return url;\r\n    }\r\n\r\n    public fetchLoggedInUserDetails(): Promise<{ name: string; civicRegNr: string }> {\r\n        return this.config\r\n            .post<{ name: string; civicRegNr: string }>('/api/embedded-customerpages/fetch-loggedin-user-details', {})\r\n            .toPromise();\r\n    }\r\n\r\n    private isoCountries: IsoCountry[] = null;\r\n    public async getIsoCountries(): Promise<IsoCountry[]> {\r\n        if (this.isoCountries) {\r\n            return new Promise<IsoCountry[]>((resolve) => resolve(this.isoCountries));\r\n        } else {\r\n            this.isoCountries = await this.config\r\n                .post<IsoCountry[]>('/api/embedded-customerpages/iso-countries', {})\r\n                .toPromise();\r\n            return this.isoCountries;\r\n        }\r\n    }\r\n\r\n    public parseCivicRegNr(civicRegNr: string) {\r\n        return this.config.post<{\r\n            isValid: boolean\r\n            normalizedValue: string\r\n            ageInYears: number\r\n            isMale: boolean\r\n        }>('/api/embedded-customerpages/parse-civicregnr', { civicRegNr }).toPromise();\r\n    }\r\n\r\n    /** HttpPost towards nCustomerPages specifically.  */\r\n    public postLocal<TResponse>(\r\n        localUrl: string,\r\n        request: any,\r\n        options?: {\r\n            handleNTechError?: (error: NTechApiErrorResponse) => TResponse;\r\n            skipLoadingIndicator?: boolean;\r\n        }\r\n    ): Promise<TResponse> {\r\n        let url = `/${normalizeStringSlashes(localUrl, false, false)}`;\r\n        let result = this.config\r\n            .post<TResponse>(url, request, { skipLoadingIndicator: options?.skipLoadingIndicator })\r\n            .toPromise();\r\n        if (options?.handleNTechError) {\r\n            return result.catch((x: HttpErrorResponse) => {\r\n                let error: NTechApiErrorResponse = x?.error;\r\n                if (error?.errorCode && error?.errorMessage) {\r\n                    return options.handleNTechError(error);\r\n                } else {\r\n                    throw x;\r\n                }\r\n            });\r\n        } else {\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nexport interface NTechApiErrorResponse {\r\n    errorCode: string;\r\n    errorMessage: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport * as moment from 'moment';\r\nimport { Dictionary, parseQueryStringParameters, StringDictionary } from 'src/app/common.types';\r\nimport { LoaderInterceptorSkipHeader } from 'src/app/common-services/loader.interceptor';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesConfigService {\r\n    private serverData?: {\r\n        queryStringParameters: StringDictionary;\r\n        configResult: ConfigResult;\r\n    } = undefined;\r\n\r\n    constructor(private httpClient: HttpClient) {}\r\n\r\n    initialize(withLoadedConfig?: (c: CustomerPagesConfigService) => void): Promise<Object> {\r\n        let queryStringParameters = parseQueryStringParameters();\r\n        return this.fetchConfigFromServer()\r\n            .pipe(\r\n                tap((config) => {\r\n                    this.serverData = {\r\n                        queryStringParameters: queryStringParameters,\r\n                        configResult: config,\r\n                    };\r\n                    if (withLoadedConfig) {\r\n                        withLoadedConfig(this);\r\n                    }\r\n                })\r\n            )\r\n            .toPromise();\r\n    }\r\n\r\n    hasAuthenticatedRole(roleName: string) {\r\n        return this.withServerData((x) => x.configResult.AuthenticatedRoles.indexOf(roleName) >= 0);\r\n    }\r\n\r\n    isAuthenticated() {\r\n        return this.withServerData((x) => x.configResult.IsAuthenticated);\r\n    }\r\n\r\n    getLoginUrl(targetName: string, targetCustomData?: string) {\r\n        if (!targetName) {\r\n            throw 'targetName required';\r\n        }\r\n        let pattern = this.withServerData((x) =>\r\n            targetCustomData ? x.configResult.LoginUrlWithCustomDataPattern : x.configResult.LoginUrlPattern\r\n        );\r\n        pattern = pattern.replace('___targetname___', encodeURIComponent(targetName));\r\n        if (targetCustomData) {\r\n            pattern = pattern.replace('___targetcustomdata___', encodeURIComponent(targetCustomData));\r\n        }\r\n        return pattern;\r\n    }\r\n\r\n    getQueryStringParameters() {\r\n        return this.withServerData((x) => x.queryStringParameters);\r\n    }\r\n\r\n    isNTechTest() {\r\n        return this.withServerData((x) => x.configResult?.IsTest);\r\n    }\r\n\r\n    isConfigLoaded() {\r\n        return !!this.serverData;\r\n    }\r\n\r\n    config() {\r\n        return this.withServerData((x) => x.configResult);\r\n    }\r\n\r\n    baseCountry(): string {\r\n        return this.withServerData((x) => x.configResult?.Client?.BaseCountry);\r\n    }\r\n\r\n    uiLanguage(): string {\r\n        let country = this.baseCountry();\r\n        if (country === 'SE') {\r\n            return 'sv';\r\n        } else {\r\n            return 'sv';\r\n        }\r\n    }\r\n\r\n    userDisplayName() {\r\n        return this.withServerData((x) => x.configResult?.UserDisplayName);\r\n    }\r\n\r\n    getClient(): {\r\n        ClientName: string;\r\n        BaseCountry: string;\r\n        BaseCurrency: string;\r\n    } | null {\r\n        return this.withServerData((x) => x?.configResult?.Client);\r\n    }\r\n\r\n    isFeatureEnabled(featureName: string) {\r\n        //ActiveFeatures is always all lowercase from the serverside\r\n        return this.withServerData((x) => x.configResult?.ActiveFeatures?.indexOf(featureName?.toLowerCase()) > 0);\r\n    }\r\n\r\n    isAnyFeatureEnabled(featureNames: string[]) {\r\n        return this.withServerData((x) =>\r\n            x.configResult?.ActiveFeatures?.some((af) => featureNames.some((fn) => fn === af))\r\n        );\r\n    }\r\n\r\n    isMortgageLoansStandardEnabled() {\r\n        return this.isFeatureEnabled('ntech.feature.mortgageloans.standard');\r\n    }\r\n\r\n    isUnsecuredLoansStandardEnabled() {\r\n        return this.isFeatureEnabled('ntech.feature.unsecuredloans.standard');\r\n    }\r\n\r\n    isLoansStandardEnabled() {\r\n        return this.isMortgageLoansStandardEnabled() || this.isUnsecuredLoansStandardEnabled();\r\n    }\r\n\r\n    getCurrentDateAndTime(): moment.Moment {\r\n        return this.withServerData((x) => moment(x.configResult.CurrentDateAndTime));\r\n    }\r\n\r\n    getEnums() {\r\n        return this.withServerData((x) => x.configResult.Enums);\r\n    }\r\n\r\n    private withServerData<T>(\r\n        f: (cfg: { queryStringParameters?: StringDictionary; configResult?: ConfigResult }) => T\r\n    ): T {\r\n        if (!this.serverData) {\r\n            throw new Error(\r\n                'Config has not been loaded from the server yet. Call initialize and wait for it to complete first!'\r\n            );\r\n        }\r\n        return f(this.serverData);\r\n    }\r\n\r\n    private fetchConfigFromServer(): Observable<ConfigResult> {\r\n        return this.post('/api/embedded-customerpages/fetch-config', {});\r\n    }\r\n\r\n    public fetchMlWebappSettings(): Observable<{ MortgageLoanExternalApplicationSettings: Dictionary<string> }> {\r\n        return this.post('/api/embedded-customerpages/fetch-ml-webapp-settings', {});\r\n    }\r\n\r\n    public post<TResponse>(\r\n        url: string,\r\n        request: any,\r\n        options?: { skipLoadingIndicator?: boolean }\r\n    ): Observable<TResponse> {\r\n        var reqHeader = new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n        });\r\n        if (options?.skipLoadingIndicator === true) {\r\n            reqHeader = reqHeader.append(LoaderInterceptorSkipHeader, '1'); //NOTE: Not intented to actually be sent to the server. See interceptor for why this is here.\r\n        }\r\n        return this.httpClient.post<TResponse>(url, request, { headers: reqHeader });\r\n    }\r\n\r\n    public download(url: string, request: any): Observable<any> {\r\n        var reqHeader = new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n        });\r\n        const requestOptions: any = {\r\n            //Because the typescript compiler is stupid\r\n            headers: reqHeader,\r\n            responseType: 'blob',\r\n        };\r\n        return this.httpClient.post<any>(url, request, requestOptions);\r\n    }\r\n}\r\n\r\ninterface ConfigResult {\r\n    IsTest: boolean;\r\n    LogoutUrl: string;\r\n    LoginUrlPattern: string;\r\n    LoginUrlWithCustomDataPattern: string;\r\n    Client: {\r\n        ClientName: string;\r\n        BaseCountry: string;\r\n        BaseCurrency: string;\r\n    };\r\n    Skinning?: {\r\n        LogoUrl: string;\r\n    };\r\n    ActiveServiceNames: string[];\r\n    ActiveFeatures: string[];\r\n    CurrentDateAndTime: string;\r\n    UserDisplayName: string;\r\n    AuthenticatedRoles: string[];\r\n    IsAuthenticated: boolean;\r\n    Enums: {\r\n        CivilStatuses: NTechEnum[];\r\n        EmploymentStatuses: NTechEnum[];\r\n        HousingTypes: NTechEnum[];\r\n        OtherLoanTypes: NTechEnum[];\r\n    };\r\n}\r\n\r\nexport interface NTechEnum {\r\n    Code: string;\r\n    DisplayName: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { NTechValidationSharedBaseService } from 'src/app/common-services/ntech-validation-shared-base.service';\r\nimport { CustomerPagesConfigService } from './customer-pages-config.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesValidationService extends NTechValidationSharedBaseService {\r\n    constructor(configService: CustomerPagesConfigService) {\r\n        super(configService.baseCountry());\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { CustomerPagesConfigService } from './customer-pages-config.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesAuthGuard  {\r\n    constructor(private configService: CustomerPagesConfigService, private router: Router) {}\r\n\r\n    canActivate(\r\n        route: ActivatedRouteSnapshot,\r\n        state: RouterStateSnapshot\r\n    ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n        let loginTargetName = route.data.loginTargetName as string;\r\n        let requiredUserRole = route.data.requiredUserRole as string;\r\n\r\n        if (!this.hasRequiredFeatures(route)) {\r\n            return this.router.createUrlTree(['/not-found']);\r\n        }\r\n\r\n        let getNoAccessUrl = () => \r\n            loginTargetName ? this.configService.getLoginUrl(loginTargetName) : '/access-denied';\r\n\r\n        if (!this.configService.isAuthenticated) {\r\n            document.location.href = getNoAccessUrl();\r\n            return false;\r\n        }\r\n\r\n        if (!requiredUserRole) {\r\n            return true;\r\n        }\r\n        if (this.configService.hasAuthenticatedRole(requiredUserRole)) {\r\n            return true;\r\n        } else {\r\n            document.location.href = getNoAccessUrl();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private hasRequiredFeatures(route: ActivatedRouteSnapshot) {\r\n        let requireAllTheseFeatures = route.data.requireFeatures as Array<string>;\r\n        let requireFeature = route.data.requireFeature as string;\r\n        let requireAnyOfTheseFeatures = route.data.requireAnyFeature as Array<string>;\r\n\r\n        if (!requireAllTheseFeatures && !requireFeature && !requireAnyOfTheseFeatures) {\r\n            return true;\r\n        }\r\n\r\n        if (requireFeature && !this.configService.isFeatureEnabled(requireFeature)) {\r\n            return false;\r\n        }\r\n\r\n        if (requireAllTheseFeatures) {\r\n            for (let f of requireAllTheseFeatures) {\r\n                if (!this.configService.isFeatureEnabled(f)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (requireAnyOfTheseFeatures) {\r\n            if (!this.configService.isAnyFeatureEnabled(requireAnyOfTheseFeatures)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { NtechEventServiceBase } from 'src/app/common-services/ntech-event.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesEventService extends NtechEventServiceBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core'; //From https://medium.com/grensesnittet/loading-status-in-angular-done-right-aeed09cfbea6\r\nimport { HttpInterceptor } from '@angular/common/http';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesEventService } from './customerpages-event.service';\r\nimport { LoaderInterceptorBase } from 'src/app/common-services/loader.interceptor';\r\n\r\n@Injectable()\r\nexport class CustomerPagesLoaderInterceptor extends LoaderInterceptorBase implements HttpInterceptor {\r\n    constructor(private eventService: CustomerPagesEventService) {\r\n        super();\r\n    }\r\n\r\n    isLoadingSubject(): BehaviorSubject<boolean> {\r\n        return this.eventService.isLoading;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CustomerPagesAuthGuard } from '../common-services/customer-pages.auth.guard';\r\nimport { KycOverviewComponent } from './pages/kyc-overview/kyc-overview.component';\r\nimport { QuestionsSessionComponent } from './pages/questions-session/questions-session.component';\r\n\r\nconst loggedInRoutes: Routes = [\r\n    { path: 'overview', component: KycOverviewComponent }\r\n];\r\n\r\nconst publicRoutes : Routes = [\r\n    { path: 'questions-session/:sessionId', component: QuestionsSessionComponent }\r\n];\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'kyc',\r\n        children: loggedInRoutes,\r\n        resolve: {},\r\n        data: {\r\n            requireFeatures: ['feature.customerpages.kyc'],\r\n            loginTargetName: 'KycQuestions',\r\n            requiredUserRole: 'EmbeddedCustomerPagesStandardCustomer',\r\n        },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n    {\r\n        path: 'public-kyc',\r\n        children: publicRoutes,\r\n        resolve: {},\r\n        data: {\r\n            requireFeatures: ['feature.customerpages.kyc']\r\n        },\r\n        canActivate: [],\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class KycQuestionsRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { KycQuestionsRoutingModule } from './kyc-questions-routing.module';\r\nimport { SharedComponentsModule } from '../shared-components/shared-components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { QuillModule } from 'ngx-quill';\r\nimport { KycOverviewComponent } from './pages/kyc-overview/kyc-overview.component';\r\nimport { NtechComponentsModule } from 'projects/ntech-components/src/public-api';\r\nimport { QuestionsSessionComponent } from './pages/questions-session/questions-session.component';\r\n\r\n@NgModule({\r\n  declarations: [  \r\n    KycOverviewComponent, QuestionsSessionComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedComponentsModule,\r\n    KycQuestionsRoutingModule,\r\n    ReactiveFormsModule,\r\n    QuillModule.forRoot(),\r\n    NtechComponentsModule\r\n  ]\r\n})\r\nexport class KycQuestionsModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n    KycAnswersEditorComponentInitialDataModel,\r\n    KycAnswersViewInitialDataModel,\r\n    KycCustomerStatus,\r\n    KycQuestionsOverviewBase,\r\n} from 'projects/ntech-components/src/public-api';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { KycOverviewService } from './kyc-overview.service';\r\nimport { parseQueryStringParameters } from 'src/app/common.types';\r\n\r\n@Component({\r\n    selector: 'np-kyc-overview',\r\n    templateUrl: './kyc-overview.component.html',\r\n    styleUrls: ['./kyc-overview.component.css'],\r\n})\r\nexport class KycOverviewComponent extends KycQuestionsOverviewBase implements OnInit {\r\n    constructor(\r\n        private config: CustomerPagesConfigService,\r\n        private apiService: KycOverviewService,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {\r\n        super();\r\n    }\r\n\r\n    public m: Model;\r\n\r\n    async ngOnInit() {\r\n        let fromTarget = this.config.getQueryStringParameters()['fromTarget'];\r\n\r\n        if (!fromTarget) {\r\n            const queryString = parseQueryStringParameters();\r\n            fromTarget = queryString?.fromTarget;\r\n        }\r\n\r\n        let targetUrlPart = fromTarget ? `?targetName=${fromTarget}` : '';\r\n        let language = this.config.getQueryStringParameters()['lang'];\r\n        let hideBackUntilAnswered = this.config.getQueryStringParameters()['hbu'] === '1';\r\n\r\n        this.setup(this.config.baseCountry(), language);\r\n\r\n        let backUrl = targetUrlPart ? `/portal/navigate${targetUrlPart}` : null;\r\n\r\n        this.reload(backUrl, hideBackUntilAnswered);\r\n    }\r\n\r\n    async reload(backUrl: string, hideBackUntilAnswered: boolean) {\r\n        let customerStatus = await this.apiService.getCustomerStatus();\r\n        this.reset(customerStatus, backUrl, hideBackUntilAnswered);\r\n    }\r\n\r\n    private reset(customerStatus: KycCustomerStatus, backUrl: string, hideBackUntilAnswered: boolean) {\r\n        let m: Model = {\r\n            isUpdateRequired: false,\r\n            backUrl: backUrl,\r\n            productTypes: [],\r\n            hideBackUntilAnswered: hideBackUntilAnswered,\r\n        };\r\n\r\n        let isEditDisabled = new BehaviorSubject<boolean>(false);\r\n\r\n        let setupProductType = (isSavings: boolean) => {\r\n            let productType: ProductTypeModel = {\r\n                titleTranslationKey: isSavings ? 'savingsTitle' : 'loanTitle',\r\n                relations: customerStatus.activeRelations\r\n                    .filter((x) => x.relationType.startsWith('Savings') === isSavings)\r\n                    .map((relation) => {\r\n                        let latestAnswers = customerStatus.latestAnswers?.find(\r\n                            (x) => x.relationType == relation.relationType && x.relationId === relation.relationId\r\n                        );\r\n                        let relationModel: ProductRelationModel = {\r\n                            relationType: relation.relationType,\r\n                            relationId: relation.relationId,\r\n                            isUpdateRequired: relation.isUpdateRequired,\r\n                            answersViewData: {\r\n                                titleText: relation.relationId,\r\n                                isUpdateRequired: relation.isUpdateRequired,\r\n                                nrOfDaysSinceAnswer: relation.nrOfDaysSinceAnswer,\r\n                                answers: latestAnswers?.answers,\r\n                                isEditDisabled: isEditDisabled,\r\n                            },\r\n                        };\r\n                        let { currentQuestionsTemplate } = customerStatus.questionTemplates.activeProducts.find(\r\n                            (x) => x.relationType === relation.relationType\r\n                        );\r\n                        relationModel.answersViewData.onEdit = async () => {\r\n                            isEditDisabled.next(true);\r\n                            relationModel.edit = {\r\n                                data: {\r\n                                    titleText: relation.relationId,\r\n                                    language: this.language,\r\n                                    currentQuestionsTemplate: currentQuestionsTemplate,\r\n                                    onCancel: async () => {\r\n                                        relationModel.edit = null;\r\n                                        isEditDisabled.next(false);\r\n                                    },\r\n                                    onAnswersSubmitted: async (answers) => {\r\n                                        let newCustomerStatus = await this.apiService.updateAnswers({\r\n                                            relationId: relation.relationId,\r\n                                            relationType: relation.relationType,\r\n                                            answers: answers,\r\n                                        });\r\n                                        isEditDisabled.next(false);\r\n                                        this.reset(newCustomerStatus, this.m.backUrl, this.m.hideBackUntilAnswered);\r\n                                    },\r\n                                    getCountries: () => this.sharedApiService.getIsoCountries(),\r\n                                    clientTwoLetterCountryIsoCode: this.config.baseCountry(),\r\n                                },\r\n                            };\r\n                        };\r\n                        return relationModel;\r\n                    }),\r\n            };\r\n            if (productType.relations.length > 0) {\r\n                m.productTypes.push(productType);\r\n            }\r\n        };\r\n        setupProductType(false);\r\n        setupProductType(true);\r\n\r\n        m.isUpdateRequired = m.productTypes.some((x) => x.relations.some((y) => y.isUpdateRequired));\r\n\r\n        this.m = m;\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    backUrl: string;\r\n    hideBackUntilAnswered: boolean;\r\n    isUpdateRequired: boolean;\r\n    productTypes: ProductTypeModel[];\r\n}\r\n\r\ninterface ProductTypeModel {\r\n    titleTranslationKey: string;\r\n    relations: ProductRelationModel[];\r\n}\r\n\r\ninterface ProductRelationModel {\r\n    relationType: string;\r\n    relationId: string;\r\n    isUpdateRequired: boolean;\r\n    answersViewData: KycAnswersViewInitialDataModel;\r\n    edit?: {\r\n        data: KycAnswersEditorComponentInitialDataModel;\r\n    };\r\n}\r\n","<div *ngIf=\"m\" class=\"flex-content-area\">\r\n    <div class=\"content-area pt-5 pb-2\">\r\n        <div class=\"pb-2\" *ngIf=\"m.backUrl && (!m.hideBackUntilAnswered || !m.isUpdateRequired)\">\r\n            <a class=\"n-anchor\" [href]=\"m.backUrl\">{{getStaticTranslation('back')}}</a>            \r\n        </div>        \r\n        <h1>{{getStaticTranslation('kyc')}}</h1>\r\n        <p class=\"pb-2 explanation-text\" [ngClass]=\"{ 'update-text': m.isUpdateRequired }\">\r\n            {{getStaticTranslation(m.isUpdateRequired ? 'explanationTextUpdate' : 'explanationText')}}\r\n        </p>        \r\n        <div *ngFor=\"let productType of m.productTypes; let first = first\" [ngClass]=\"{ 'pt-2': !first }\">\r\n            <h2 class=\"pt-2\">{{getStaticTranslation(productType.titleTranslationKey)}}</h2>\r\n            <hr class=\"hr-section\" />\r\n            <div *ngFor=\"let relation of productType.relations; let first = first\" [ngClass]=\"{ 'pt-2': !first }\">\r\n                <kyc-answers-view *ngIf=\"!relation.edit\" [initialData]=\"relation.answersViewData\"></kyc-answers-view>\r\n                <kyc-answers-editor *ngIf=\"relation.edit\" [initialData]=\"relation?.edit?.data\"></kyc-answers-editor>\r\n            </div>\r\n        </div>\r\n    </div>    \r\n</div>","import { Injectable } from \"@angular/core\";\r\nimport { KycCustomerStatus, KycQuestionAnswerModel } from \"projects/ntech-components/src/public-api\";\r\nimport { CustomerPagesApiService } from \"../../../common-services/customer-pages-api.service\";\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class KycOverviewService {\r\n    constructor(private apiService: CustomerPagesApiService) {\r\n\r\n    }\r\n\r\n    public async getCustomerStatus() {\r\n        return await this.apiService.post<KycCustomerStatus>('NTechHost', 'Api/Customer/KycQuestionUpdate/GetCustomerStatus', {});\r\n    }\r\n\r\n    public async updateAnswers(request: {\r\n        relationType: string,\r\n        relationId: string,\r\n        answers: KycQuestionAnswerModel[]\r\n    }) {\r\n        return await this.apiService.post<KycCustomerStatus>('NTechHost', 'Api/Customer/KycQuestionUpdate/UpdateAnswers', request);\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { KycAnswersEditorComponentInitialDataModel, KycQuestionAnswerModel, KycQuestionsSet } from 'projects/ntech-components/src/public-api';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\n\r\ntype Translations = { [index: string]: { [index: string]: string } }\r\n\r\nconst staticTranslations : Translations =  {\r\n    'sessionCompleteText': {\r\n        'sv': 'Frågorna är nu besvarade. Du kan stänga sidan.',\r\n        'fi': 'Kysymykset on nyt vastattu. Voit sulkea sivun.'\r\n    },\r\n    'sessionCompleteRedirectText': {\r\n        'sv': 'Frågorna är nu besvarande. Du kommer inom kort att skickas vidare.',\r\n        'fi': 'Kysymykset on nyt vastattu. Sinut ohjataan pian eteenpäin.',\r\n    },\r\n    'redirectLinkText': {\r\n        'sv': 'Nästa sida...',\r\n        'fi': 'Seuraava sivu...'\r\n    },\r\n    'kyc': {\r\n        'sv': 'Kundkännedom',\r\n        'fi': 'Asiakkaan tuntemus'\r\n    },\r\n    'saveAnswers': {\r\n        'sv': 'Skicka in svar',\r\n        'fi': 'Lähetä vastaukset'\r\n    },\r\n    'backLinkText': {\r\n        'sv': 'Tillbaka',\r\n        'fi': 'Takaisin'\r\n    }\r\n}\r\n\r\n@Component({\r\n    selector: 'np-questions-session',\r\n    templateUrl: './questions-session.component.html',\r\n    styles: [\r\n    ]\r\n})\r\nexport class QuestionsSessionComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute, private apiService: CustomerPagesApiService, private config: CustomerPagesConfigService) { }\r\n\r\n    async ngOnInit() {\r\n        this.reload(this.route.snapshot.params['sessionId']);\r\n    }\r\n\r\n    public m: Model;\r\n\r\n    public getStaticTranslation(name: string) {\r\n        let t = staticTranslations[name];\r\n        let s = t ? t[this.m.language] : null;\r\n        return s ?? name;\r\n    }\r\n\r\n    private async reload(sessionId: string) {\r\n        this.m = null;\r\n\r\n        if(!sessionId) {\r\n            return;\r\n        }\r\n\r\n        let session = await this.loadSession(sessionId);\r\n        \r\n         let m: Model = {\r\n            sessionId: session.sessionId,\r\n            language: session.language,\r\n            isActive: false,\r\n            isCompleted: false,\r\n            allowBackToRedirectUrl: session.allowBackToRedirectUrl,\r\n            redirectUrl: session.allowBackToRedirectUrl ? session.redirectUrl : null\r\n        };\r\n\r\n        if(session.isActive) {\r\n            m.isActive = true;\r\n            m.customers = session.customers.map(x => ({\r\n                fullName: x.fullName,\r\n                birthDate: x.birthDate,\r\n                customerKey: x.customerKey,\r\n                kycAnswersInitialData: {\r\n                    language: new BehaviorSubject<string>(session.language),\r\n                    currentQuestionsTemplate: session.questionsTemplate,\r\n                    editState: new BehaviorSubject<{ isSavePossible: boolean, answers: KycQuestionAnswerModel[] }>(null),\r\n                    getCountries: () => this.apiService.getIsoCountries(),\r\n                    clientTwoLetterCountryIsoCode: this.config.baseCountry(),\r\n                },\r\n            }));\r\n        } else if(session.isCompleted) {\r\n            if(session.redirectUrl) {\r\n                m.isRedirecting = true;\r\n                setTimeout(() => {\r\n                    document.location.href = session.redirectUrl;\r\n                }, 1500);\r\n            } else {\r\n                m.isCompleted = true;\r\n            }\r\n        }\r\n\r\n        this.m = m;\r\n    }\r\n\r\n    public isSavePossible() {\r\n        return this.m.customers.every(x => x.kycAnswersInitialData.editState.value?.isSavePossible === true);\r\n    }\r\n\r\n    public async submitAnswers(evt ?: Event) {\r\n        evt?.preventDefault();\r\n        \r\n        this.m.isSaving = true;\r\n\r\n        let saveRequest : HandleAnswersRequest = {\r\n            sessionId: this.m.sessionId,\r\n            customerAnswers: this.m.customers.map(x => ({\r\n                customerKey: x.customerKey,\r\n                answers: x.kycAnswersInitialData.editState.value.answers\r\n            }))\r\n        }\r\n\r\n        await this.handleAnswers(saveRequest);\r\n        this.reload(this.m.sessionId);\r\n    }\r\n\r\n    private loadSession(sessionId: string) {\r\n        return this.apiService.post<LoadSessionResponse>('NTechHost', \r\n            'Api/Customer/KycQuestionSession/LoadCustomerPagesSession', { sessionId }, {\r\n                isAnonymous: true\r\n            });\r\n    }\r\n\r\n    private handleAnswers(request: HandleAnswersRequest) {\r\n        return this.apiService.post<{ wasCompleted: boolean }>('NTechHost', \r\n            'Api/Customer/KycQuestionSession/HandleAnswers', request, { \r\n                isAnonymous: true \r\n        });\r\n    }\r\n}\r\n\r\ninterface HandleAnswersRequest {\r\n    sessionId: string,\r\n    customerAnswers: {\r\n        customerKey: string,\r\n        answers: KycQuestionAnswerModel[]\r\n    }[]\r\n}\r\n\r\ninterface Model {\r\n    sessionId?: string\r\n    allowBackToRedirectUrl: boolean\r\n    language: string\r\n    isActive: boolean\r\n    isCompleted: boolean\r\n    isSaving?: boolean\r\n    isRedirecting?: boolean\r\n    redirectUrl?: string\r\n    customers?: {\r\n        fullName: string,\r\n        birthDate: string,\r\n        customerKey: string,\r\n        kycAnswersInitialData?: KycAnswersEditorComponentInitialDataModel        \r\n    }[]\r\n}\r\n\r\ninterface LoadSessionResponse {\r\n    sessionId: string\r\n    language: string\r\n    isExisting: boolean\r\n    isActive: boolean\r\n    isCompleted: boolean\r\n    redirectUrl: string\r\n    allowBackToRedirectUrl: boolean\r\n    questionsTemplate: KycQuestionsSet\r\n    customers: {\r\n        fullName: string,\r\n        birthDate: string,\r\n        customerKey: string        \r\n    }[]    \r\n}\r\n","<div *ngIf=\"m?.isActive && !m?.isSaving\" class=\"flex-content-area\">\r\n    <div class=\"content-area pt-5 pb-2\">\r\n        <div>\r\n            <div *ngIf=\"m?.allowBackToRedirectUrl\">\r\n                <b><a [href]=\"m.redirectUrl\">{{getStaticTranslation('backLinkText')}}</a></b>\r\n            </div>            \r\n            <div class=\"pt-1 pb-1 text-center\">\r\n                <h1>{{getStaticTranslation('kyc')}}</h1>\r\n            </div>\r\n            <div class=\"clearfix\"></div>\r\n        </div>\r\n        <div>\r\n            <div *ngFor=\"let customer of m.customers;let isLast=last\">\r\n                <kyc-answers-editor [initialData]=\"customer.kycAnswersInitialData\">\r\n                    <div kyc-answers-header-content>\r\n                        <h2>{{customer.fullName}}{{(customer.birthDate ? ', ' : '')}}{{customer.birthDate}}</h2>\r\n                        <hr class=\"hr-section\" />\r\n                    </div>\r\n                    <div *ngIf=\"isLast\" kyc-answers-footer-content class=\"text-center\">\r\n                        <button [disabled]=\"!isSavePossible()\" (click)=\"submitAnswers($event)\" class=\"n-direct-btn n-green-btn\">\r\n                            {{getStaticTranslation('saveAnswers')}}\r\n                        </button>\r\n                    </div>\r\n                </kyc-answers-editor>\r\n            </div>\r\n        </div>\r\n    </div>    \r\n</div>\r\n\r\n<div *ngIf=\"m?.isCompleted\">\r\n    <h2>{{getStaticTranslation('sessionCompleteText')}}</h2>\r\n</div>\r\n\r\n<div *ngIf=\"m?.isRedirecting\">\r\n    <h2>{{getStaticTranslation('sessionCompleteRedirectText')}}</h2>\r\n    <p><a [href]=\"m.redirectUrl\">{{getStaticTranslation('redirectLinkText')}}</a></p>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\n\r\n@Component({\r\n    selector: 'ml-shell',\r\n    templateUrl: './ml-shell.component.html',\r\n    styles: [],\r\n})\r\nexport class MlShellComponent implements OnInit {\r\n    constructor(public config: CustomerPagesConfigService, private eventService: CustomerPagesEventService) {}\r\n\r\n    isLoading: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n\r\n    ngOnInit(): void {\r\n        this.eventService.isLoading.subscribe((x) => {\r\n            //Good old ExpressionChangedAfterItHasBeenCheckedError: https://stackoverflow.com/questions/49914840/expressionchangedafterithasbeencheckederror-on-loadingindicator\r\n            Promise.resolve(null).then(() => this.isLoading.next(x));\r\n        });\r\n    }\r\n\r\n    logOut(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        document.location.href = this.config.config()?.LogoutUrl;\r\n    }\r\n}\r\n","<customerpages-shell\r\n  [initialData]=\"{ logoRouterLink: ['/unsecured-loan-applications/overview'] }\"\r\n>\r\n  <ng-container shell-body>\r\n    <ng-content select=\"[shell-body]\"></ng-content>\r\n  </ng-container>\r\n  <ng-container navigation-area>\r\n    <ul class=\"navigation-list\">\r\n      <li>\r\n        <a\r\n          *ngIf=\"config?.isAuthenticated()\"\r\n          (click)=\"logOut($event)\"\r\n          href=\"#\"\r\n          class=\"n-direct-btn n-white-btn\"\r\n          >Logga ut</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </ng-container>\r\n</customerpages-shell>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CustomerPagesAuthGuard } from '../common-services/customer-pages.auth.guard';\r\nimport { ApplicationCreatedComponent } from './open-pages/application-created/application-created.component';\r\nimport { LoanCalculatorComponent } from './open-pages/loan-calculator/loan-calculator.component';\r\nimport { StartWebapplicationComponent } from './secure-pages/initial-application/start-webapplication/start-webapplication.component';\r\nimport { KycTaskApplicationComponent } from './secure-pages/kyc-task-application/kyc-task-application.component';\r\nimport { OngoingApplicationComponent } from './secure-pages/ongoing-application/ongoing-application.component';\r\nimport { OverviewComponent } from './secure-pages/overview/overview.component';\r\n\r\nconst secureRoutes = [\r\n    { path: 'webapplication/:sessionId/start', component: StartWebapplicationComponent },\r\n    { path: 'overview', component: OverviewComponent },\r\n    { path: 'application/:applicationNr', component: OngoingApplicationComponent },\r\n    { path: 'application/:applicationNr/kyc', component: KycTaskApplicationComponent },\r\n];\r\nconst openRoutes = [\r\n    { path: 'calculator', component: LoanCalculatorComponent },\r\n    { path: 'application/:applicationNr/created', component: ApplicationCreatedComponent },\r\n];\r\n\r\nconst features = ['ntech.feature.mortgageloans', 'ntech.feature.mortgageloans.standard'];\r\nconst routes: Routes = [\r\n    {\r\n        path: 'mortgage-loan-applications/secure',\r\n        children: secureRoutes,\r\n        resolve: {},\r\n        data: { requireFeatures: features, requiredUserRole: 'EmbeddedCustomerPagesStandardCustomer' },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n    {\r\n        path: 'mortgage-loan-applications/open',\r\n        children: openRoutes,\r\n        resolve: {},\r\n        data: { requireFeatures: features },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class MortgageLoanApplicationsRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MortgageLoanApplicationsRoutingModule } from './mortgage-loan-applications-routing.module';\r\nimport { StartWebapplicationComponent } from './secure-pages/initial-application/start-webapplication/start-webapplication.component';\r\nimport { LoanCalculatorComponent } from './open-pages/loan-calculator/loan-calculator.component';\r\nimport { MlShellComponent } from './components/ml-shell/ml-shell.component';\r\nimport { CalculatorTabMoveComponent } from './open-pages/loan-calculator/calculator-tab-move/calculator-tab-move.component';\r\nimport { CalculatorTabPurchaseComponent } from './open-pages/loan-calculator/calculator-tab-purchase/calculator-tab-purchase.component';\r\nimport { CalculatorTabAdditionalloanComponent } from './open-pages/loan-calculator/calculator-tab-additionalloan/calculator-tab-additionalloan.component';\r\nimport { ApplicationWizardShellComponent } from './secure-pages/initial-application/components/application-wizard-shell/application-wizard-shell.component';\r\nimport { ApplicationStepObjectComponent } from './secure-pages/initial-application/components/application-step-object/application-step-object.component';\r\nimport { ApplicationStepApplicantsComponent } from './secure-pages/initial-application/components/application-step-applicants/application-step-applicants.component';\r\nimport { ApplicationStepEconomyComponent } from './secure-pages/initial-application/components/application-step-economy/application-step-economy.component';\r\nimport { ApplicationStepConsentComponent } from './secure-pages/initial-application/components/application-step-consent/application-step-consent.component';\r\nimport { ApplicationCreatedComponent } from './open-pages/application-created/application-created.component';\r\nimport { SharedComponentsModule } from '../shared-components/shared-components.module';\r\nimport { JoinPipe } from 'src/app/common-components/pipes/join.pipe';\r\nimport { OverviewComponent } from './secure-pages/overview/overview.component';\r\nimport { OngoingApplicationComponent } from './secure-pages/ongoing-application/ongoing-application.component';\r\nimport { KycTaskApplicationComponent } from './secure-pages/kyc-task-application/kyc-task-application.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        StartWebapplicationComponent,\r\n        LoanCalculatorComponent,\r\n        MlShellComponent,\r\n        CalculatorTabMoveComponent,\r\n        CalculatorTabPurchaseComponent,\r\n        CalculatorTabAdditionalloanComponent,\r\n        ApplicationWizardShellComponent,\r\n        ApplicationStepObjectComponent,\r\n        ApplicationStepApplicantsComponent,\r\n        ApplicationStepEconomyComponent,\r\n        ApplicationStepConsentComponent,\r\n        ApplicationCreatedComponent,\r\n        JoinPipe,\r\n        OverviewComponent,\r\n        OngoingApplicationComponent,\r\n        KycTaskApplicationComponent,\r\n    ],\r\n    imports: [\r\n        SharedComponentsModule,\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MortgageLoanApplicationsRoutingModule,\r\n    ],\r\n})\r\nexport class MortgageLoanApplicationsModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'np-application-created',\r\n    templateUrl: './application-created.component.html',\r\n    styles: [],\r\n})\r\nexport class ApplicationCreatedComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.m = {\r\n            applicationNr: this.route.snapshot.params['applicationNr'],\r\n        };\r\n    }\r\n}\r\n\r\nclass Model {\r\n    applicationNr: string;\r\n}\r\n","<ml-shell>\r\n  <div shell-body>\r\n    <div class=\"row\" *ngIf=\"m\">\r\n      <div class=\"col-xs-12\">\r\n        <div class=\"flex-container\">\r\n          <div class=\"align-center frame\">\r\n            <h1 class=\"header-light text-center pb-3\">Ansökan inskickad</h1>\r\n            <p>\r\n              Din ansökan {{ m.applicationNr }} behandlas nu och du kommer att\r\n              få ett besked inom kort.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ml-shell>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { CalculatorSliderInitialData } from '../../../../shared-components/calculator-slider/calculator-slider.component';\r\nimport { MortgageLoanWebappSettings } from '../loan-calculator.component';\r\n\r\n@Component({\r\n    selector: 'calculator-tab-additionalloan',\r\n    templateUrl: './calculator-tab-additionalloan.component.html',\r\n    styles: [],\r\n})\r\nexport class CalculatorTabAdditionalloanComponent implements OnInit {\r\n    constructor(private fb: UntypedFormBuilder) {}\r\n\r\n    public m: Model;\r\n\r\n    @Input()\r\n    public settings: MortgageLoanWebappSettings;\r\n\r\n    @Output()\r\n    public additionalLoanDataChanged = new EventEmitter<CalculatorAdditionalLoanData>();\r\n\r\n    private subs: Subscription[] = [];\r\n\r\n    ngOnInit(): void {\r\n        let set = this.settings;\r\n        let initialAdditionalLoanData: CalculatorAdditionalLoanData = {\r\n            isValid: true,\r\n            objectValueAmount: this.getStartValue(set.MinEstimatedValue, set.MaxEstimatedValue, 0.7),\r\n            currentDebtAmount: this.getStartValue(\r\n                set.MinCurrentMortgageLoanAmount,\r\n                set.MaxCurrentMortgageLoanAmount,\r\n                0.3\r\n            ),\r\n            paidToCustomerAmount: this.getStartValue(set.MinAdditionalLoanAmount, set.MaxAdditionalLoanAmount, 0.3),\r\n        };\r\n\r\n        let f = this.fb.group({\r\n            objectValueAmount: [initialAdditionalLoanData.objectValueAmount, [Validators.required]],\r\n            currentDebtAmount: [initialAdditionalLoanData.currentDebtAmount, [Validators.required]],\r\n            paidToCustomerAmount: [initialAdditionalLoanData.paidToCustomerAmount, [Validators.required]],\r\n        });\r\n\r\n        let form = new FormsHelper(f);\r\n\r\n        this.m = {\r\n            form: form,\r\n            currentDebtAmountSliderData: {\r\n                minValue: set.MinCurrentMortgageLoanAmount,\r\n                maxValue: set.MaxCurrentMortgageLoanAmount,\r\n                stepSize: 10000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'currentDebtAmount',\r\n                form: form,\r\n            },\r\n            objectValueAmountSliderData: {\r\n                minValue: set.MinEstimatedValue,\r\n                maxValue: set.MaxEstimatedValue,\r\n                stepSize: 10000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'objectValueAmount',\r\n                form: form,\r\n            },\r\n            paidToCustomerAmountSliderData: {\r\n                minValue: set.MinAdditionalLoanAmount,\r\n                maxValue: set.MaxAdditionalLoanAmount,\r\n                stepSize: 1000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'paidToCustomerAmount',\r\n                form: form,\r\n            },\r\n        };\r\n\r\n        this.additionalLoanDataChanged.emit(initialAdditionalLoanData);\r\n\r\n        this.subs.push(\r\n            f.valueChanges.subscribe((_) => {\r\n                let f = this.m.form;\r\n                if (f.invalid()) {\r\n                    this.additionalLoanDataChanged.emit({ isValid: false });\r\n                } else {\r\n                    this.additionalLoanDataChanged.emit({\r\n                        isValid: true,\r\n                        paidToCustomerAmount: parseInt(f.getValue('paidToCustomerAmount')),\r\n                        objectValueAmount: parseInt(f.getValue('objectValueAmount')),\r\n                        currentDebtAmount: parseInt(f.getValue('currentDebtAmount')),\r\n                    });\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private getStartValue(min: number, max: number, multi: number) {\r\n        return min + (max - min) * multi;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n                this.subs = [];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    form: FormsHelper;\r\n    paidToCustomerAmountSliderData: CalculatorSliderInitialData;\r\n    currentDebtAmountSliderData: CalculatorSliderInitialData;\r\n    objectValueAmountSliderData: CalculatorSliderInitialData;\r\n}\r\n\r\nexport class CalculatorAdditionalLoanData {\r\n    isValid: boolean;\r\n    paidToCustomerAmount?: number;\r\n    currentDebtAmount?: number;\r\n    objectValueAmount?: number;\r\n}\r\n","<div class=\"row text-center pt-3\">\r\n  <div class=\"col-sm-12\">\r\n    <p>Hur mycket vill du låna?</p>\r\n    <h2>{{ m.form.getValue(\"paidToCustomerAmount\") | number: \"1.0-2\" }} kr</h2>\r\n  </div>\r\n</div>\r\n\r\n<calculator-slider\r\n  [initialData]=\"m.paidToCustomerAmountSliderData\"\r\n></calculator-slider>\r\n\r\n<div class=\"row text-center pt-3\">\r\n  <div class=\"col-sm-12\">\r\n    <p>Hur mycket har du i befintliga bolån?</p>\r\n    <h2>{{ m.form.getValue(\"currentDebtAmount\") | number: \"1.0-2\" }} kr</h2>\r\n  </div>\r\n</div>\r\n\r\n<calculator-slider\r\n  [initialData]=\"m.currentDebtAmountSliderData\"\r\n></calculator-slider>\r\n\r\n<div class=\"row text-center pt-3\">\r\n  <div class=\"col-sm-12\">\r\n    <p>Vad är det uppskattade värdet på bostaden?</p>\r\n    <h2>{{ m.form.getValue(\"objectValueAmount\") | number: \"1.0-2\" }} kr</h2>\r\n  </div>\r\n</div>\r\n\r\n<calculator-slider\r\n  [initialData]=\"m.objectValueAmountSliderData\"\r\n></calculator-slider>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { CalculatorSliderInitialData } from '../../../../shared-components/calculator-slider/calculator-slider.component';\r\nimport { MortgageLoanWebappSettings } from '../loan-calculator.component';\r\n\r\n@Component({\r\n    selector: 'calculator-tab-move',\r\n    templateUrl: './calculator-tab-move.component.html',\r\n    styles: [],\r\n})\r\nexport class CalculatorTabMoveComponent implements OnInit {\r\n    constructor(private fb: UntypedFormBuilder) {}\r\n\r\n    public m: Model;\r\n\r\n    @Input()\r\n    public settings: MortgageLoanWebappSettings;\r\n\r\n    @Output()\r\n    public moveDataChanged = new EventEmitter<CalculatorMoveData>();\r\n\r\n    private subs: Subscription[] = [];\r\n\r\n    ngOnInit(): void {\r\n        if (!this.settings) {\r\n            return;\r\n        }\r\n\r\n        let set = this.settings;\r\n        let initialMoveData: CalculatorMoveData = {\r\n            isValid: true,\r\n            objectValueAmount: this.getStartValue(set.MinEstimatedValue, set.MaxEstimatedValue, 0.7),\r\n            currentDebtAmount: this.getStartValue(\r\n                set.MinCurrentMortgageLoanAmount,\r\n                set.MaxCurrentMortgageLoanAmount,\r\n                0.3\r\n            ),\r\n            paidToCustomerAmount: 0,\r\n        };\r\n\r\n        let f = this.fb.group({\r\n            objectValueAmount: [initialMoveData.objectValueAmount, [Validators.required]],\r\n            currentDebtAmount: [initialMoveData.currentDebtAmount, [Validators.required]],\r\n            paidToCustomerAmount: [initialMoveData.paidToCustomerAmount, [Validators.required]],\r\n            isPayoutRequested: [false, []], //This is just used to hide/show the paidToCustomerAmount slider, it has no semanti meaning in the model\r\n        });\r\n\r\n        let form = new FormsHelper(f);\r\n\r\n        this.m = {\r\n            form: form,\r\n            currentDebtAmountSliderData: {\r\n                minValue: set.MinCurrentMortgageLoanAmount,\r\n                maxValue: set.MaxCurrentMortgageLoanAmount,\r\n                stepSize: 10000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'currentDebtAmount',\r\n                form: form,\r\n            },\r\n            objectValueAmountSliderData: {\r\n                minValue: set.MinEstimatedValue,\r\n                maxValue: set.MaxEstimatedValue,\r\n                stepSize: 10000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'objectValueAmount',\r\n                form: form,\r\n            },\r\n            paidToCustomerAmountSliderData: {\r\n                minValue: set.MinAdditionalLoanAmount,\r\n                maxValue: set.MaxAdditionalLoanAmount,\r\n                stepSize: 1000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'paidToCustomerAmount',\r\n                form: form,\r\n            },\r\n        };\r\n\r\n        this.moveDataChanged.emit(initialMoveData);\r\n\r\n        this.subs.push(\r\n            f.valueChanges.subscribe((_) => {\r\n                let f = this.m.form;\r\n                let isChecked = f.getValue('isPayoutRequested');\r\n\r\n                if (f.invalid()) {\r\n                    this.moveDataChanged.emit({ isValid: false });\r\n                } else {\r\n                    this.moveDataChanged.emit({\r\n                        isValid: true,\r\n                        paidToCustomerAmount: isChecked ? parseInt(f.getValue('paidToCustomerAmount')) : 0,\r\n                        objectValueAmount: parseInt(f.getValue('objectValueAmount')),\r\n                        currentDebtAmount: parseInt(f.getValue('currentDebtAmount')),\r\n                    });\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private getStartValue(min: number, max: number, multi: number) {\r\n        return min + (max - min) * multi;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n                this.subs = [];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    form: FormsHelper;\r\n    objectValueAmountSliderData: CalculatorSliderInitialData;\r\n    currentDebtAmountSliderData: CalculatorSliderInitialData;\r\n    paidToCustomerAmountSliderData: CalculatorSliderInitialData;\r\n}\r\n\r\nexport class CalculatorMoveData {\r\n    isValid: boolean;\r\n    objectValueAmount?: number;\r\n    currentDebtAmount?: number;\r\n    paidToCustomerAmount?: number;\r\n}\r\n","<form [formGroup]=\"m.form.form\">\r\n  <div class=\"row text-center pt-3\">\r\n    <div class=\"col-sm-12\">\r\n      <p>Hur mycket har du i befintliga bolån?</p>\r\n      <h2>{{ m.form.getValue(\"currentDebtAmount\") | number: \"1.0-2\" }} kr</h2>\r\n    </div>\r\n  </div>\r\n\r\n  <calculator-slider\r\n    [initialData]=\"m.currentDebtAmountSliderData\"\r\n  ></calculator-slider>\r\n\r\n  <div class=\"row text-center pt-3\">\r\n    <div class=\"col-sm-12\">\r\n      <p>Vad är det uppskattade värdet på bostaden?</p>\r\n      <h2>{{ m.form.getValue(\"objectValueAmount\") | number: \"1.0-2\" }} kr</h2>\r\n    </div>\r\n  </div>\r\n\r\n  <calculator-slider\r\n    [initialData]=\"m.objectValueAmountSliderData\"\r\n  ></calculator-slider>\r\n\r\n  <div class=\"pt-1\">\r\n    <div class=\"checkbox\">\r\n      <label\r\n        ><input type=\"checkbox\" formControlName=\"isPayoutRequested\" /> Jag vill\r\n        utöka lånet</label\r\n      >\r\n    </div>\r\n  </div>\r\n\r\n  <div\r\n    *ngIf=\"m.form.getValue('isPayoutRequested')\"\r\n    class=\"row text-center pt-3\"\r\n  >\r\n    <div class=\"col-sm-12\">\r\n      <p>Hur mycket extra vill du låna?</p>\r\n      <h2>\r\n        {{ m.form.getValue(\"paidToCustomerAmount\") | number: \"1.0-2\" }} kr\r\n      </h2>\r\n    </div>\r\n  </div>\r\n\r\n  <calculator-slider\r\n    *ngIf=\"m.form.getValue('isPayoutRequested')\"\r\n    [initialData]=\"m.paidToCustomerAmountSliderData\"\r\n  ></calculator-slider>\r\n</form>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CalculatorSliderInitialData } from '../../../../shared-components/calculator-slider/calculator-slider.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { MortgageLoanWebappSettings } from '../loan-calculator.component';\r\n\r\n@Component({\r\n    selector: 'calculator-tab-purchase',\r\n    templateUrl: './calculator-tab-purchase.component.html',\r\n    styles: [],\r\n})\r\nexport class CalculatorTabPurchaseComponent implements OnInit {\r\n    constructor(private fb: UntypedFormBuilder) {}\r\n\r\n    public m: Model;\r\n\r\n    @Input()\r\n    public settings: MortgageLoanWebappSettings;\r\n\r\n    @Output()\r\n    public purchaseDataChanged = new EventEmitter<CalculatorPurchaseData>();\r\n\r\n    private subs: Subscription[] = [];\r\n\r\n    ngOnInit(): void {\r\n        let set = this.settings;\r\n        let initialPurchaseData: CalculatorPurchaseData = {\r\n            isValid: true,\r\n            objectPriceAmount: this.getStartValue(set.MinEstimatedValue, set.MaxEstimatedValue, 0.7),\r\n            ownSavingsAmount: this.getStartValue(set.MinCashAmount, set.MaxCashAmount, 0.3),\r\n        };\r\n\r\n        let f = this.fb.group({\r\n            objectPriceAmount: [initialPurchaseData.objectPriceAmount, [Validators.required]],\r\n            ownSavingsAmount: [initialPurchaseData.ownSavingsAmount, [Validators.required]],\r\n        });\r\n\r\n        let form = new FormsHelper(f);\r\n        this.m = {\r\n            form: form,\r\n            objectPriceSliderData: {\r\n                minValue: set.MinEstimatedValue,\r\n                maxValue: set.MaxEstimatedValue,\r\n                stepSize: 10000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'objectPriceAmount',\r\n                form: form,\r\n            },\r\n            ownSavingsSliderData: {\r\n                minValue: set.MinCashAmount,\r\n                maxValue: set.MaxCashAmount,\r\n                stepSize: 1000,\r\n                tickButtonStepSize: 1000,\r\n                formControlName: 'ownSavingsAmount',\r\n                form: form,\r\n            },\r\n        };\r\n\r\n        this.purchaseDataChanged.emit(initialPurchaseData);\r\n\r\n        this.subs.push(\r\n            f.valueChanges.subscribe((_) => {\r\n                let f = this.m.form;\r\n                if (f.invalid()) {\r\n                    this.purchaseDataChanged.emit({ isValid: false });\r\n                } else {\r\n                    this.purchaseDataChanged.emit({\r\n                        isValid: true,\r\n                        objectPriceAmount: parseInt(f.getValue('objectPriceAmount')),\r\n                        ownSavingsAmount: parseInt(f.getValue('ownSavingsAmount')),\r\n                    });\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private getStartValue(min: number, max: number, multi: number) {\r\n        return min + (max - min) * multi;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n                this.subs = [];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    form: FormsHelper;\r\n    objectPriceSliderData: CalculatorSliderInitialData;\r\n    ownSavingsSliderData: CalculatorSliderInitialData;\r\n}\r\n\r\nexport class CalculatorPurchaseData {\r\n    isValid: boolean;\r\n    objectPriceAmount?: number;\r\n    ownSavingsAmount?: number;\r\n}\r\n","<form [formGroup]=\"m.form.form\">\r\n    <div class=\"row text-center pt-3\">\r\n        <div class=\"col-sm-12\">\r\n            <p>Vad är priset på bostaden?</p>\r\n            <h2>{{m.form.getValue('objectPriceAmount') | number:'1.0-2'}} kr</h2>\r\n        </div>\r\n    </div>\r\n    \r\n    <calculator-slider [initialData]=\"m.objectPriceSliderData\"></calculator-slider>\r\n    \r\n    <div class=\"row text-center pt-3\">\r\n        <div class=\"col-sm-12\">\r\n            <p>Hur mycket kan du lägga i kontantinsats?</p>\r\n            <h2>{{m.form.getValue('ownSavingsAmount') | number:'1.0-2'}} kr</h2>\r\n        </div>\r\n    </div>\r\n\r\n    <calculator-slider [initialData]=\"m.ownSavingsSliderData\"></calculator-slider>\r\n</form>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { Dictionary, generateUniqueId } from 'src/app/common.types';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerPagesValidationService } from '../../../common-services/customer-pages-validation.service';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\nimport {\r\n    getMlApplicationSessionModelStorageKey,\r\n    MlApplicationSessionModel,\r\n} from '../../secure-pages/initial-application/start-webapplication/start-webapplication.component';\r\nimport { CalculatorAdditionalLoanData } from './calculator-tab-additionalloan/calculator-tab-additionalloan.component';\r\nimport { CalculatorMoveData } from './calculator-tab-move/calculator-tab-move.component';\r\nimport { CalculatorPurchaseData } from './calculator-tab-purchase/calculator-tab-purchase.component';\r\n\r\n@Component({\r\n    selector: 'np-loan-calculator',\r\n    templateUrl: './loan-calculator.component.html',\r\n    styles: [\r\n        `\r\n            #summary {\r\n                background-color: #023365;\r\n                color: white;\r\n                border-radius: 6px;\r\n                padding: 12px;\r\n                margin-top: 30px;\r\n            }\r\n            div.notice {\r\n                color: red;\r\n            }\r\n        `,\r\n    ],\r\n})\r\nexport class LoanCalculatorComponent implements OnInit {\r\n    constructor(\r\n        private configService: CustomerPagesConfigService,\r\n        private changeDetector: ChangeDetectorRef,\r\n        private eventService: CustomerPagesEventService,\r\n        private validationService: CustomerPagesValidationService\r\n    ) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.configService\r\n            .fetchMlWebappSettings()\r\n            .toPromise()\r\n            .then((x) => {\r\n                let settings = new MortgageLoanWebappSettings(\r\n                    x.MortgageLoanExternalApplicationSettings,\r\n                    this.validationService\r\n                );\r\n                let startTab = settings.IsPurchaseTabActive\r\n                    ? 'purchase'\r\n                    : settings.IsAdditionalLoanTabActive\r\n                    ? 'additionalloan'\r\n                    : settings.IsMoveTabActive\r\n                    ? 'move'\r\n                    : null;\r\n\r\n                this.m = new Model(startTab, settings);\r\n                this.calculateSummary();\r\n            });\r\n    }\r\n\r\n    apply(evt?: Event) {\r\n        evt?.preventDefault();\r\n        let sessionId = generateUniqueId(10);\r\n        let session: MlApplicationSessionModel = {\r\n            sessionId: sessionId,\r\n            creationDate: moment().toISOString(),\r\n            application: {},\r\n        };\r\n        let m = this.m;\r\n        if (m.currentTabName === 'purchase') {\r\n            session.application.Purchase = {\r\n                ObjectPriceAmount: m.purchaseData.objectPriceAmount,\r\n                OwnSavingsAmount: m.purchaseData.ownSavingsAmount,\r\n            };\r\n        } else if (m.currentTabName === 'move') {\r\n            session.application.ChangeExistingLoan = {\r\n                ObjectValueAmount: m.moveData.objectValueAmount,\r\n                PaidToCustomerAmount: m.moveData.paidToCustomerAmount,\r\n                MortgageLoansToSettle: [\r\n                    {\r\n                        ShouldBeSettled: true,\r\n                        CurrentDebtAmount: m.moveData.currentDebtAmount,\r\n                    },\r\n                ],\r\n            };\r\n        } else if (m.currentTabName === 'additionalloan') {\r\n            session.application.ChangeExistingLoan = {\r\n                ObjectValueAmount: m.additionalLoanData.objectValueAmount,\r\n                PaidToCustomerAmount: m.additionalLoanData.paidToCustomerAmount,\r\n                MortgageLoansToSettle: [\r\n                    {\r\n                        ShouldBeSettled: false,\r\n                        CurrentDebtAmount: m.additionalLoanData.currentDebtAmount,\r\n                    },\r\n                ],\r\n            };\r\n        }\r\n        localStorage.setItem(getMlApplicationSessionModelStorageKey(sessionId), JSON.stringify(session));\r\n        let loginUrl = this.configService.getLoginUrl('ContinueMortgageLoanApplication', sessionId);\r\n\r\n        this.eventService.isLoading.next(true);\r\n        document.location.href = loginUrl;\r\n    }\r\n\r\n    private calculateSummary() {\r\n        let wishToBorrowAmount = this.calculateWishToBorrowAmount();\r\n        let loanToValue = this.calculateLtv(wishToBorrowAmount);\r\n        let amortizationRatePercent = this.calculateAmortizationRatePercent(loanToValue);\r\n\r\n        let exampleInterest = this.m.settings.ExampleInterestRatePercent; // Get from ClientConfiguration\r\n        let interestPayment = (exampleInterest * wishToBorrowAmount) / 100 / 12;\r\n        let amortizationPayment = (amortizationRatePercent * wishToBorrowAmount) / 100 / 12;\r\n        let monthlyCost = interestPayment + amortizationPayment;\r\n\r\n        this.m.summary = {\r\n            wishToBorrowAmount: wishToBorrowAmount,\r\n            amortizationRatePercent: amortizationRatePercent,\r\n            exampleInterestRate: exampleInterest,\r\n            loanToValueAmount: loanToValue,\r\n            monthlyCostAmount: monthlyCost,\r\n        };\r\n    }\r\n\r\n    private calculateAmortizationRatePercent(ltv: number) {\r\n        if (ltv > 70) return 2;\r\n        if (ltv > 50 && ltv <= 70) return 1;\r\n        else return 0;\r\n    }\r\n\r\n    private calculateWishToBorrowAmount(): number {\r\n        if (this.m?.purchaseData) {\r\n            return (this.m?.purchaseData?.objectPriceAmount || 0) - (this.m?.purchaseData?.ownSavingsAmount || 0);\r\n        } else if (this.m?.moveData) {\r\n            return (this.m?.moveData?.currentDebtAmount || 0) + (this.m?.moveData?.paidToCustomerAmount || 0);\r\n        } else {\r\n            return this.m?.additionalLoanData?.paidToCustomerAmount || 0;\r\n        }\r\n    }\r\n\r\n    private calculateLtv(wishToBorrowAmount: number): number {\r\n        let purch = this.m?.purchaseData;\r\n        let addi = this.m?.additionalLoanData;\r\n        let move = this.m?.moveData;\r\n\r\n        if (purch) {\r\n            return 100 * (wishToBorrowAmount / (purch?.objectPriceAmount || 0));\r\n        } else if (addi) {\r\n            return 100 * ((wishToBorrowAmount + (addi?.currentDebtAmount || 0)) / (addi?.objectValueAmount || 0));\r\n        } else {\r\n            return 100 * (wishToBorrowAmount / (move?.objectValueAmount || 0));\r\n        }\r\n    }\r\n\r\n    onPurchaseDataChanged(data: CalculatorPurchaseData) {\r\n        this.m.purchaseData = data;\r\n        this.m.additionalLoanData = null;\r\n        this.m.moveData = null;\r\n        this.calculateSummary();\r\n        this.changeDetector.detectChanges();\r\n    }\r\n\r\n    onCalculatorMoveDataChanged(data: CalculatorMoveData) {\r\n        this.m.moveData = data;\r\n        this.m.purchaseData = null;\r\n        this.m.additionalLoanData = null;\r\n        this.calculateSummary();\r\n        this.changeDetector.detectChanges();\r\n    }\r\n\r\n    onCalculatorAdditionalLoanDataChanged(data: CalculatorAdditionalLoanData) {\r\n        this.m.additionalLoanData = data;\r\n        this.m.purchaseData = null;\r\n        this.m.moveData = null;\r\n        this.calculateSummary();\r\n        this.changeDetector.detectChanges();\r\n    }\r\n\r\n    setActiveTab(tabName: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        this.m.currentTabName = tabName;\r\n    }\r\n}\r\n\r\nclass Model {\r\n    constructor(public currentTabName: string, public settings: MortgageLoanWebappSettings) {}\r\n\r\n    purchaseData?: CalculatorPurchaseData;\r\n    moveData?: CalculatorMoveData;\r\n    additionalLoanData?: CalculatorAdditionalLoanData;\r\n    summary?: Summary;\r\n\r\n    isValid() {\r\n        let validLtv = this.summary?.loanToValueAmount <= this.settings.MaxLoanToValuePercent;\r\n        let validTabData =\r\n            (this.currentTabName === 'purchase' && this.purchaseData?.isValid) ||\r\n            (this.currentTabName === 'move' && this.moveData?.isValid) ||\r\n            (this.currentTabName === 'additionalloan' && this.additionalLoanData?.isValid);\r\n\r\n        return {\r\n            valid: validTabData && validLtv,\r\n            loanToValueAmountIsValod: validLtv,\r\n        };\r\n    }\r\n}\r\n\r\nclass Summary {\r\n    wishToBorrowAmount: number;\r\n    monthlyCostAmount: number;\r\n    exampleInterestRate: number;\r\n    loanToValueAmount: number;\r\n    amortizationRatePercent: number;\r\n}\r\n\r\nexport class MortgageLoanWebappSettings {\r\n    constructor(settings: Dictionary<string>, validationService: CustomerPagesValidationService) {\r\n        this.ExampleInterestRatePercent = validationService.parsePositiveDecimalOrNull(\r\n            settings['exampleInterestRatePercent']\r\n        );\r\n        this.IsPurchaseTabActive = settings['isPurchaseTabActive'] == 'true';\r\n        this.IsMoveTabActive = settings['isMoveTabActive'] == 'true';\r\n        this.IsAdditionalLoanTabActive = settings['isAdditionalLoanTabActive'] == 'true';\r\n        this.MaxLoanToValuePercent = validationService.parseInteger(settings['maxLoanToValuePercent']);\r\n\r\n        this.MaxCurrentMortgageLoanAmount = validationService.parseInteger(settings['maxCurrentMortgageLoanAmount']);\r\n        this.MinCurrentMortgageLoanAmount = validationService.parseInteger(settings['minCurrentMortgageLoanAmount']);\r\n        this.MaxEstimatedValue = validationService.parseInteger(settings['maxEstimatedValue']);\r\n        this.MinEstimatedValue = validationService.parseInteger(settings['minEstimatedValue']);\r\n        this.MaxCashAmount = validationService.parseInteger(settings['maxCashAmount']);\r\n        this.MinCashAmount = validationService.parseInteger(settings['minCashAmount']);\r\n        this.MaxAdditionalLoanAmount = validationService.parseInteger(settings['maxAdditionalLoanAmount']);\r\n        this.MinAdditionalLoanAmount = validationService.parseInteger(settings['minAdditionalLoanAmount']);\r\n    }\r\n\r\n    public ExampleInterestRatePercent: number;\r\n    public IsPurchaseTabActive: boolean;\r\n    public IsMoveTabActive: boolean;\r\n    public IsAdditionalLoanTabActive: boolean;\r\n    public MaxLoanToValuePercent: number;\r\n\r\n    public MaxCurrentMortgageLoanAmount: number;\r\n    public MinCurrentMortgageLoanAmount: number;\r\n    public MaxEstimatedValue: number;\r\n    public MinEstimatedValue: number;\r\n    public MaxCashAmount: number;\r\n    public MinCashAmount: number;\r\n    public MaxAdditionalLoanAmount: number;\r\n    public MinAdditionalLoanAmount: number;\r\n}\r\n","<ml-shell>\r\n    <div shell-body>\r\n        <div class=\"row\" *ngIf=\"m?.currentTabName\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n\r\n                        <h1 class=\"header-light text-center pb-3\">Våra bolån</h1>\r\n                        <p class=\"text-center pb-2\">Vad vill du göra?</p>\r\n\r\n                        <div class=\"row pb-2\">\r\n                            <div *ngIf=\"m?.settings?.IsMoveTabActive\" class=\"col-sm-4 pb-1\">\r\n                                <a href=\"#\" class=\"big-button-tabs\" [class.active]=\"m.currentTabName === 'move'\" (click)=\"setActiveTab('move', $event)\"><span class=\"font-weight-bold\">Flytta ditt bolån</span> till oss</a>\r\n                            </div>\r\n                            <div *ngIf=\"m?.settings?.IsPurchaseTabActive\" class=\"col-sm-4 text-center pb-1\">\r\n                                <a href=\"#\" class=\"big-button-tabs\" [class.active]=\"m.currentTabName === 'purchase'\" (click)=\"setActiveTab('purchase', $event)\">Bolån för att <span class=\"font-weight-bold\">köpa bostad</span></a>\r\n                            </div>\r\n                            <div *ngIf=\"m?.settings?.IsAdditionalLoanTabActive\" class=\"col-sm-4 text-right pb-1\">\r\n                                <a href=\"#\" class=\"big-button-tabs\" [class.active]=\"m.currentTabName === 'additionalloan'\" (click)=\"setActiveTab('additionalloan', $event)\"><span class=\"font-weight-bold\">Belåna</span> din bostad</a>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ng-container [ngSwitch]=\"m.currentTabName\">\r\n                            <calculator-tab-move *ngSwitchCase=\"'move'\" (moveDataChanged)=\"onCalculatorMoveDataChanged($event)\" [settings]=\"m.settings\"></calculator-tab-move>\r\n                            <calculator-tab-purchase *ngSwitchCase=\"'purchase'\" (purchaseDataChanged)=\"onPurchaseDataChanged($event)\" [settings]=\"m.settings\"></calculator-tab-purchase>\r\n                            <calculator-tab-additionalloan *ngSwitchCase=\"'additionalloan'\" (additionalLoanDataChanged)=\"onCalculatorAdditionalLoanDataChanged($event)\" [settings]=\"m.settings\"></calculator-tab-additionalloan>\r\n                        </ng-container>\r\n\r\n                        <div class=\"pt-5\" id=\"summary\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-12 col-sm-6\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <label class=\"col-xs-12\">Du önskar låna</label>\r\n                                        <p class=\"col-xs-12\">{{m?.summary?.wishToBorrowAmount | number:'1.0-2'}} kr</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-xs-12 col-sm-3\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <label class=\"col-xs-12\">Månadskostnad</label>\r\n                                        <p class=\"col-xs-12\">{{m?.summary?.monthlyCostAmount | number:'1.0-0'}} kr</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-xs-12 col-sm-3\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <label class=\"col-xs-12\">Exempelränta</label>\r\n                                        <p class=\"col-xs-12\">{{m?.summary?.exampleInterestRate | number:'1.0-4'}}%</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-12 col-sm-6\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <label class=\"col-xs-12\">Belåningsgraden blir</label>\r\n                                        <p class=\"col-xs-12\">{{m?.summary?.loanToValueAmount | number:'1.0-0'}}%</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-xs-12 col-sm-3\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <label class=\"col-xs-12\">Amorteringstakt</label>\r\n                                        <p class=\"col-xs-12\">{{m?.summary?.amortizationRatePercent | number:'1.0-2'}}%</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"pt-3\">\r\n\r\n                        </div>\r\n                        <div class=\"text-right notice pt-1\" *ngIf=\"!m?.isValid().loanToValueAmountIsValod\">\r\n                            Maximal belåningsgrad är {{m?.settings.MaxLoanToValuePercent | number:'1.0-2'}}%.\r\n                        </div>\r\n                        <div class=\"text-right pt-2\">\r\n                            <button class=\"n-main-btn n-green-btn\" [disabled]=\"!m.isValid().valid\" (click)=\"apply($event)\">Gå vidare</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\" *ngIf=\"m && !m?.currentTabName\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n                        <h1 class=\"header-light text-center pb-3\">Våra bolån</h1>\r\n                        <p>För tillfälligt har vi inga aktiva produkter.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</ml-shell>\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CustomerPagesValidationService } from 'projects/customerpages/src/app/common-services/customer-pages-validation.service';\r\nimport { CustomerPagesEventService } from 'projects/customerpages/src/app/common-services/customerpages-event.service';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { CustomerPagesMortgageLoanApiService } from '../../../../services/customer-pages-ml-api.service';\r\nimport {\r\n    AutoFillInTestEventName,\r\n    MlApplicationSessionModel,\r\n    NextStepEventName,\r\n} from '../../start-webapplication/start-webapplication.component';\r\nimport { EmploymentFormService } from 'projects/customerpages/src/app/shared-components/services/employment-form.service';\r\n\r\n@Component({\r\n    selector: 'application-step-applicants',\r\n    templateUrl: './application-step-applicants.component.html',\r\n    styles: [],\r\n})\r\nexport class ApplicationStepApplicantsComponent {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private eventService: CustomerPagesEventService,\r\n        private validationService: CustomerPagesValidationService,\r\n        private apiService: CustomerPagesMortgageLoanApiService,\r\n        private employmentFormService: EmploymentFormService\r\n    ) {}\r\n\r\n    @Input()\r\n    public session: BehaviorSubject<MlApplicationSessionModel>;\r\n\r\n    public m: Model;\r\n    private subs: Subscription[];\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n        this.subs = [];\r\n\r\n        this.m = null;\r\n\r\n        if (!this.session) {\r\n            return;\r\n        }\r\n\r\n        this.subs.push(\r\n            this.eventService.applicationEvents.subscribe((x) => {\r\n                if (x.eventCode === AutoFillInTestEventName) {\r\n                    this.autoFillInTest();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.subs.push(\r\n            this.session.subscribe((x) => {\r\n                if (!x) {\r\n                    this.m = null;\r\n                    return;\r\n                }\r\n\r\n                let f = this.fb.group({\r\n                    mainApplicantEmail: ['', [Validators.required, this.validationService.getEmailValidator()]],\r\n                    mainApplicantPhone: ['', [Validators.required, this.validationService.getPhoneValidator()]],\r\n                    mainApplicantEmployment: ['', [Validators.required]],\r\n                    mainApplicantIncomePerMonthAmount: [\r\n                        '',\r\n                        [Validators.required, this.validationService.getPositiveIntegerValidator()],\r\n                    ],\r\n                    hasCoApplicant: ['false', [Validators.required]],\r\n                });\r\n\r\n                let h = new FormsHelper(f);\r\n                f.valueChanges.subscribe((x) => {\r\n                    //Main applicant\r\n                    h.ensureControlOnConditionOnly(\r\n                        this.employmentFormService.isEmployedSinceEmploymentCode(\r\n                            h.getValue('mainApplicantEmployment')\r\n                        ),\r\n                        'mainApplicantEmployedSince',\r\n                        () => '',\r\n                        () => [this.validationService.getDateOnlyValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        this.employmentFormService.isEmployedToEmploymentCode(h.getValue('mainApplicantEmployment')),\r\n                        'mainApplicantEmployedTo',\r\n                        () => '',\r\n                        () => [this.validationService.getDateOnlyValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        this.employmentFormService.isEmployerEmploymentCode(h.getValue('mainApplicantEmployment')),\r\n                        'mainApplicantEmployer',\r\n                        () => '',\r\n                        () => []\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        this.employmentFormService.isEmployerEmploymentCode(h.getValue('mainApplicantEmployment')),\r\n                        'mainApplicantEmployerPhone',\r\n                        () => '',\r\n                        () => [this.validationService.getPhoneValidator()]\r\n                    );\r\n\r\n                    //Co applicant\r\n                    let hasCoApplicant = h.getValue('hasCoApplicant') === 'true';\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'coApplicantCivicRegNr',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getCivicRegNrValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'coApplicantEmail',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getEmailValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'coApplicantPhone',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getPhoneValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'coApplicantEmployment',\r\n                        () => '',\r\n                        () => [Validators.required]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'coApplicantIncomePerMonthAmount',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getPositiveIntegerValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant &&\r\n                            this.employmentFormService.isEmployedSinceEmploymentCode(\r\n                                h.getValue('coApplicantEmployment')\r\n                            ),\r\n                        'coApplicantEmployedSince',\r\n                        () => '',\r\n                        () => [this.validationService.getDateOnlyValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant && this.employmentFormService.isEmployedToEmploymentCode(h.getValue('coApplicantEmployment')),\r\n                        'coApplicantEmployedTo',\r\n                        () => '',\r\n                        () => [this.validationService.getDateOnlyValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant && this.employmentFormService.isEmployerEmploymentCode(h.getValue('coApplicantEmployment')),\r\n                        'coApplicantEmployer',\r\n                        () => '',\r\n                        () => []\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant && this.employmentFormService.isEmployerEmploymentCode(h.getValue('coApplicantEmployment')),\r\n                        'coApplicantEmployerPhone',\r\n                        () => '',\r\n                        () => [this.validationService.getPhoneValidator()]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        hasCoApplicant,\r\n                        'isCoApplicantPartOfTheHousehold',\r\n                        () => 'true',\r\n                        () => [Validators.required]\r\n                    );\r\n                });\r\n\r\n                let employmentCodes = this.employmentFormService.getEmploymentStatuses();\r\n                let m = new Model(h, x, employmentCodes);\r\n                this.m = m;\r\n            })\r\n        );\r\n    }\r\n\r\n    apply(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let f = this.m.form;\r\n        let a = this.m.session.application;\r\n\r\n        a.Applicants[0].Email = f.getValue('mainApplicantEmail');\r\n        a.Applicants[0].Phone = f.getValue('mainApplicantPhone');\r\n        a.Applicants[0].IsPartOfTheHousehold = true;\r\n        a.Applicants[0].IncomePerMonthAmount = this.validationService.parseIntegerOrNull(\r\n            f.getValue('mainApplicantIncomePerMonthAmount')\r\n        );\r\n        a.Applicants[0].Employment = this.validationService.normalizeString(f.getValue('mainApplicantEmployment'));\r\n        a.Applicants[0].EmployedSince = this.validationService.parseDateOnlyOrNull(\r\n            f.getValue('mainApplicantEmployedSince')\r\n        );\r\n        a.Applicants[0].EmployedTo = this.validationService.parseDateOnlyOrNull(f.getValue('mainApplicantEmployedTo'));\r\n        a.Applicants[0].Employer = this.validationService.normalizeString(f.getValue('mainApplicantEmployer'));\r\n        a.Applicants[0].EmployerPhone = this.validationService.normalizeString(\r\n            f.getValue('mainApplicantEmployerPhone')\r\n        );\r\n\r\n        let hasCoApplicant = f.getValue('hasCoApplicant') === 'true';\r\n        if (hasCoApplicant) {\r\n            if (a.Applicants.length < 2) {\r\n                a.Applicants.push({\r\n                    CivicRegNr: null,\r\n                });\r\n                a.Applicants[1].CivicRegNr = f.getValue('coApplicantCivicRegNr');\r\n                a.Applicants[1].Email = f.getValue('coApplicantEmail');\r\n                a.Applicants[1].Phone = f.getValue('coApplicantPhone');\r\n                a.Applicants[1].IsPartOfTheHousehold = f.getValue('isCoApplicantPartOfTheHousehold') === 'true';\r\n                a.Applicants[1].IncomePerMonthAmount = this.validationService.parseIntegerOrNull(\r\n                    f.getValue('coApplicantIncomePerMonthAmount')\r\n                );\r\n                a.Applicants[1].Employment = this.validationService.normalizeString(\r\n                    f.getValue('coApplicantEmployment')\r\n                );\r\n                a.Applicants[1].EmployedSince = this.validationService.parseDateOnlyOrNull(\r\n                    f.getValue('coApplicantEmployedSince')\r\n                );\r\n                a.Applicants[1].EmployedTo = this.validationService.parseDateOnlyOrNull(\r\n                    f.getValue('coApplicantEmployedTo')\r\n                );\r\n                a.Applicants[1].Employer = this.validationService.normalizeString(f.getValue('coApplicantEmployer'));\r\n                a.Applicants[1].EmployerPhone = this.validationService.normalizeString(\r\n                    f.getValue('coApplicantEmployerPhone')\r\n                );\r\n            }\r\n        }\r\n        this.eventService.emitApplicationEvent(NextStepEventName, JSON.stringify({ session: this.m.session }));\r\n    }\r\n\r\n    private autoFillInTest() {\r\n        let f = this.m.form;\r\n\r\n        this.apiService.generateTestPersons(2, true, true).then((x) => {\r\n            let a1 = x.Persons[0].Properties;\r\n\r\n            f.setValue('mainApplicantEmail', a1.email);\r\n            f.setValue('mainApplicantPhone', a1.phone);\r\n            f.setValue('mainApplicantIncomePerMonthAmount', '37500');\r\n\r\n            f.setValue('mainApplicantEmployment', 'full_time');\r\n            f.setValue('mainApplicantEmployedSince', '2017-03-15');\r\n            f.setValue('mainApplicantEmployedTo', '2021-09-12');\r\n            f.setValue('mainApplicantEmployer', 'Employer AB');\r\n            f.setValue('mainApplicantEmployerPhone', '08 - 123 654');\r\n\r\n            let a2 = x.Persons[1].Properties;\r\n            f.setValue('hasCoApplicant', 'true');\r\n            f.setValue('coApplicantCivicRegNr', a2.civicRegNr);\r\n            f.setValue('coApplicantEmail', a2.email);\r\n            f.setValue('coApplicantPhone', a2.phone);\r\n            f.setValue('coApplicantIncomePerMonthAmount', '12000');\r\n            f.setValue('isCoApplicantPartOfTheHousehold', 'true');\r\n\r\n            f.setValue('coApplicantEmployment', 'student');\r\n            f.setValue('coApplicantEmployedSince', '2015-04-21');\r\n            f.setValue('coApplicantEmployedTo', '2021-12-19');\r\n        });\r\n    }\r\n}\r\n\r\nclass Model {\r\n    constructor(\r\n        public form: FormsHelper,\r\n        public session: MlApplicationSessionModel,\r\n        public employmentCodes: { Code: string; DisplayName: string }[]\r\n    ) {}\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n    <form [formGroup]=\"m.form.form\">\r\n        <h2>Huvudsökande</h2>\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-6 col-xs-12\">\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmail', displayText: 'Vilken epostadress når vi dig på?' }\"></ng-container>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantPhone', displayText: 'Vilket telefonnummer når vi dig enklast på?' }\"></ng-container>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantIncomePerMonthAmount', displayText: 'Vad är din månadsinkomst innan skatt?' }\"></ng-container>\r\n                                \r\n            </div>\r\n            <div class=\"col-sm-6 col-xs-12\">\r\n                <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('mainApplicantEmployment') }\">\r\n                    <label>Vad har du för sysselsättning</label>\r\n                    <select class=\"form-control\" formControlName=\"mainApplicantEmployment\">\r\n                        <option value=\"\" *ngIf=\"!m.form.getValue('mainApplicantEmployment')\"></option>\r\n                        <option [value]=\"opt.Code\" *ngFor=\"let opt of m.employmentCodes\">{{opt.DisplayName}}</option>\r\n                    </select>\r\n                </div>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployedSince', displayText: 'Från när har du haft din sysselsättning?' }\"></ng-container>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployedTo', displayText: 'Till när har du din sysselsättning?' }\"></ng-container>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployer', displayText: 'Vem är din arbetsgivare?' }\"></ng-container>\r\n                <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployerPhone', displayText: 'Vad är din arbetsgivares telefonnummer?' }\"></ng-container>\r\n            </div>\r\n        </div>\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-6 col-xs-12\">\r\n                <div class=\"form-group pb-1\">\r\n                    <p>Finns det en medsökande?</p>\r\n                    <div class=\"radio-inline\">\r\n                        <label><input type=\"radio\" formControlName=\"hasCoApplicant\" value=\"true\"> Ja</label>\r\n                    </div>\r\n                    <div class=\"radio-inline\">\r\n                        <label><input type=\"radio\" formControlName=\"hasCoApplicant\" value=\"false\"> Nej</label>\r\n                    </div>\r\n                </div>\r\n            </div>            \r\n        </div>\r\n\r\n        <ng-container *ngIf=\"m.form.hasFormControl(null, 'coApplicantEmail')\">\r\n            <h2 class=\"pt-3\">Medsökande</h2>\r\n            <div class=\"row\">\r\n                <div class=\"col-sm-6 col-xs-12\">\r\n                    <div class=\"form-group pb-1\"  [ngClass]=\"{ 'has-error': m.form.hasError('isCoApplicantPartOfTheHousehold') }\">\r\n                        <p>Ingår medsökande i hushållet?</p>\r\n                        <div class=\"radio-inline\">\r\n                            <label><input type=\"radio\" formControlName=\"isCoApplicantPartOfTheHousehold\" value=\"true\"> Ja</label>\r\n                        </div>\r\n                        <div class=\"radio-inline\">\r\n                            <label><input type=\"radio\" formControlName=\"isCoApplicantPartOfTheHousehold\" value=\"false\"> Nej</label>\r\n                        </div>\r\n                    </div>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantCivicRegNr', displayText: 'Medsökande personnummer' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantEmail', displayText: 'Medsökande epostadress' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantPhone', displayText: 'Medsökande telefonnummer' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantIncomePerMonthAmount', displayText: 'Vad är din månadsinkomst innan skatt?' }\"></ng-container> \r\n                </div>\r\n                <div class=\"col-sm-6 col-xs-12\">\r\n                    <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('coApplicantEmployment') }\">\r\n                        <label>Vad har du för sysselsättning</label>\r\n                        <select class=\"form-control\" formControlName=\"coApplicantEmployment\">\r\n                            <option value=\"\" *ngIf=\"!m.form.getValue('coApplicantEmployment')\"></option>\r\n                            <option [value]=\"opt.Code\" *ngFor=\"let opt of m.employmentCodes\">{{opt.DisplayName}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantEmployedSince', displayText: 'Från när har du haft din sysselsättning?' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantEmployedTo', displayText: 'Till när har du din sysselsättning?' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantEmployer', displayText: 'Vem är din arbetsgivare?' }\"></ng-container>\r\n                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'coApplicantEmployerPhone', displayText: 'Vad är din arbetsgivares telefonnummer?' }\"></ng-container>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <div class=\"text-right pt-5\">\r\n            <button class=\"n-main-btn n-green-btn\" [disabled]=\"m.form.invalid()\" (click)=\"apply($event)\">Gå vidare</button>\r\n        </div>\r\n    </form>\r\n</ng-container>\r\n\r\n<ng-template #textGroup let-displayText=\"displayText\" let-formControlName=\"formControlName\">\r\n    <div class=\"form-group pb-1\" *ngIf=\"m.form.hasFormControl(null, formControlName)\" [ngClass]=\"{ 'has-error': m.form.hasError(formControlName) }\" [formGroup]=\"m.form.form\">\r\n        <label>{{displayText}}</label>\r\n        <input type=\"text\" class=\"form-control\" [formControlName]=\"formControlName\">\r\n    </div>\r\n</ng-template>","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CustomerPagesEventService } from 'projects/customerpages/src/app/common-services/customerpages-event.service';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { MlApplicationModel } from '../../../../services/customer-pages-ml-api.service';\r\nimport {\r\n    AutoFillInTestEventName,\r\n    MlApplicationSessionModel,\r\n    NextStepEventName,\r\n} from '../../start-webapplication/start-webapplication.component';\r\nimport {\r\n    CustomerPagesConfigService,\r\n    NTechEnum,\r\n} from 'projects/customerpages/src/app/common-services/customer-pages-config.service';\r\n\r\n@Component({\r\n    selector: 'application-step-consent',\r\n    templateUrl: './application-step-consent.component.html',\r\n    styles: [\r\n        `\r\n            .glyphicon.glyphicon-big {\r\n                font-size: 50px;\r\n            }\r\n        `,\r\n    ],\r\n})\r\nexport class ApplicationStepConsentComponent {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private eventService: CustomerPagesEventService,\r\n        private config: CustomerPagesConfigService\r\n    ) {}\r\n\r\n    @Input()\r\n    public session: BehaviorSubject<MlApplicationSessionModel>;\r\n\r\n    public m: Model;\r\n    private subs: Subscription[];\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n        this.subs = [];\r\n\r\n        this.m = null;\r\n\r\n        if (!this.session) {\r\n            return;\r\n        }\r\n\r\n        this.subs.push(\r\n            this.eventService.applicationEvents.subscribe((x) => {\r\n                if (x.eventCode === AutoFillInTestEventName) {\r\n                    this.autoFillInTest();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.subs.push(\r\n            this.session.subscribe((session) => {\r\n                if (!session) {\r\n                    this.m = null;\r\n                    return;\r\n                }\r\n\r\n                let form = this.fb.group({\r\n                    hasGivenConsent: [false, [Validators.required, Validators.requiredTrue]],\r\n                });\r\n\r\n                let helper = new FormsHelper(form);\r\n\r\n                let enums = this.config.getEnums();\r\n                this.config\r\n                    .fetchMlWebappSettings()\r\n                    .toPromise()\r\n                    .then((res) => {\r\n                        let m = new Model(helper, session, enums.OtherLoanTypes, enums.EmploymentStatuses);\r\n                        m.personalDataPolicyUrl = res.MortgageLoanExternalApplicationSettings['personalDataPolicyUrl'];\r\n                        this.m = m;\r\n                    });\r\n            })\r\n        );\r\n    }\r\n\r\n    apply(evt?: Event) {\r\n        evt?.preventDefault();\r\n        //@ts-ignore TODO remove unused locals\r\n        let f = this.m.form;\r\n        let a = this.m.session.application;\r\n\r\n        a.Applicants.forEach((a) => (a.HasConsentedToCreditReport = true));\r\n\r\n        this.eventService.emitApplicationEvent(NextStepEventName, JSON.stringify({ session: this.m.session }));\r\n    }\r\n\r\n    private autoFillInTest() {\r\n        //@ts-ignore TODO remove unused locals\r\n        let f = this.m.form;\r\n    }\r\n}\r\n\r\nclass Model {\r\n    constructor(\r\n        public form: FormsHelper,\r\n        public session: MlApplicationSessionModel,\r\n        private loanTypes: NTechEnum[],\r\n        private employmentTypes: NTechEnum[]\r\n    ) {\r\n        this.app = session.application;\r\n    }\r\n\r\n    // Reduce characters in ui.\r\n    app: MlApplicationModel;\r\n    personalDataPolicyUrl: string;\r\n\r\n    // sum(MortgageLoansToSettle[*].CurrentDebtAmount) where ShouldBeSettled = true + ChangeExistingLoan.PaidToCustomerAmount\r\n    getWishedToLoanAmount() {\r\n        if (this.app.Purchase) {\r\n            return this.app.Purchase.ObjectPriceAmount - this.app.Purchase.OwnSavingsAmount;\r\n        } else {\r\n            let currentDebt = this.app.ChangeExistingLoan.MortgageLoansToSettle.map((loan) =>\r\n                loan.ShouldBeSettled ? loan.CurrentDebtAmount : 0\r\n            ).reduce((amount) => {\r\n                return amount;\r\n            });\r\n            return currentDebt + this.app.ChangeExistingLoan.PaidToCustomerAmount;\r\n        }\r\n    }\r\n\r\n    getEstimatedValueAmount() {\r\n        return this.app.Purchase?.ObjectPriceAmount ?? this.app.ChangeExistingLoan?.ObjectValueAmount;\r\n    }\r\n\r\n    getLoanType(typeCode: string) {\r\n        return this.loanTypes.find((type) => type.Code === typeCode).DisplayName;\r\n    }\r\n\r\n    getEmploymentType(typeCode: string) {\r\n        return this.employmentTypes.find((type) => type.Code === typeCode).DisplayName;\r\n    }\r\n\r\n    getObjectTypeText() {\r\n        return this.app.ObjectTypeCode === 'seBrf' ? 'Bostadsrättsförening' : 'Fastighet';\r\n    }\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n  <form [formGroup]=\"m.form.form\">\r\n    <div class=\"row pb-2\">\r\n      <div class=\"col-xs-2 col-sm-1\">\r\n        <span class=\"glyphicon glyphicon-home glyphicon-big\"></span>\r\n      </div>\r\n      <div class=\"col-xs-4 col-sm-5\">\r\n        <p>\r\n          {{ m.app.ObjectAddressStreet\r\n          }}<ng-container *ngIf=\"m.app.ObjectTypeCode === 'seBrf'\"\r\n            >, lgh {{ m.app.SeBrfApartmentNr }}</ng-container\r\n          >\r\n        </p>\r\n        <p>{{ m.app.ObjectAddressZipcode }}, {{ m.app.ObjectAddressCity }}</p>\r\n      </div>\r\n      <div class=\"col-xs-3\">\r\n        <p>Önskat lånebelopp</p>\r\n        <p>Uppskattat värde</p>\r\n      </div>\r\n      <div class=\"col-xs-3\">\r\n        <p>{{ m.getWishedToLoanAmount() | number: \"1.0-2\" }} kr</p>\r\n        <p>{{ m.getEstimatedValueAmount() | number: \"1.0-2\" }} kr</p>\r\n      </div>\r\n    </div>\r\n\r\n    <table class=\"table\">\r\n      <tbody>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: { title: 'Typ av bostad', value: m.getObjectTypeText() }\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: { title: 'Kommun', value: m.app.ObjectAddressMunicipality }\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: {\r\n              title: 'Månadsavgift',\r\n              value: (m.app.ObjectMonthlyFeeAmount | number: '1.0-2') + ' kr'\r\n            }\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: {\r\n              title: 'Andra fasta kostnader',\r\n              value:\r\n                (m.app.ObjectOtherMonthlyCostsAmount | number: '1.0-2') + ' kr'\r\n            }\r\n          \"\r\n        ></ng-container>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: { title: 'Boyta', value: m.app.ObjectLivingArea + ' kvm' }\r\n          \"\r\n        ></ng-container>\r\n      </tbody>\r\n    </table>\r\n\r\n    <ng-container\r\n      *ngIf=\"\r\n        m.app.ChangeExistingLoan &&\r\n        m.app.ChangeExistingLoan.MortgageLoansToSettle\r\n      \"\r\n    >\r\n      <h2>Nuvarande lån på bostaden</h2>\r\n      <table class=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <td class=\"col-xs-3\">Lånebelopp</td>\r\n            <td class=\"col-xs-3\">Bank</td>\r\n            <td class=\"col-xs-3\">Nuvarande amortering</td>\r\n            <td class=\"col-xs-3\">Nuvarande ränta</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            *ngFor=\"let loan of m.app.ChangeExistingLoan.MortgageLoansToSettle\"\r\n          >\r\n            <td>{{ loan.CurrentDebtAmount | number: \"1.0-2\" }} kr</td>\r\n            <td>{{ loan.BankName ? loan.BankName : \"-\" }}</td>\r\n            <td>\r\n              {{\r\n                loan.CurrentMonthlyAmortizationAmount\r\n                  ? (loan.CurrentMonthlyAmortizationAmount | number: \"1.0-2\") +\r\n                    \" kr\"\r\n                  : \"-\"\r\n              }}\r\n            </td>\r\n            <td>\r\n              {{\r\n                loan.InterestRatePercent ? loan.InterestRatePercent + \" %\" : \"-\"\r\n              }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n\r\n    <h2>Sökande</h2>\r\n    <ng-container\r\n      *ngTemplateOutlet=\"\r\n        applicantShared;\r\n        context: { applicant: m.app.Applicants[0], isMainApplicant: true }\r\n      \"\r\n    ></ng-container>\r\n\r\n    <ng-container *ngIf=\"m.app.Applicants.length === 2\">\r\n      <h2>Medsökande</h2>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          applicantShared;\r\n          context: { applicant: m.app.Applicants[1], isMainApplicant: false }\r\n        \"\r\n      ></ng-container>\r\n    </ng-container>\r\n\r\n    <h2>Hushållets ekonomi</h2>\r\n    <table class=\"table\">\r\n      <tbody>\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            twoColumn;\r\n            context: {\r\n              title: 'Antal barn',\r\n              value: m.app.HouseholdChildren\r\n                ? m.app.HouseholdChildren.length + ' st'\r\n                : 'Inga'\r\n            }\r\n          \"\r\n        ></ng-container>\r\n        <ng-container *ngIf=\"m.app.HouseholdChildren\">\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n              twoColumn;\r\n              context: {\r\n                title: 'Ålder på barn',\r\n                value: (m.app.HouseholdChildren | join: ', ':'AgeInYears')\r\n              }\r\n            \"\r\n          ></ng-container>\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n              twoColumn;\r\n              context: {\r\n                title: 'Får i barnbidrag/studiebidrag',\r\n                value:\r\n                  (m.app.ChildBenefitAmount | number: '1.0-2') + ' kr / mån'\r\n              }\r\n            \"\r\n          ></ng-container>\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n              twoColumn;\r\n              context: {\r\n                title: 'Får i underhåll',\r\n                value: m.app.IncomingChildSupportAmount + ' kr / mån',\r\n                hide: !m.app.IncomingChildSupportAmount\r\n              }\r\n            \"\r\n          ></ng-container>\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n              twoColumn;\r\n              context: {\r\n                title: 'Betalar i underhåll',\r\n                value: m.app.OutgoingChildSupportAmount + ' kr / mån',\r\n                hide: !m.app.OutgoingChildSupportAmount\r\n              }\r\n            \"\r\n          ></ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </table>\r\n\r\n    <ng-container>\r\n      <h2>Övriga lån</h2>\r\n      <table\r\n        class=\"table\"\r\n        *ngIf=\"m.app.LoansToSettle?.length > 0; else noLoans\"\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <td class=\"col-xs-4\">Lånetyp</td>\r\n            <td class=\"col-xs-4\">Lånebelopp</td>\r\n            <td class=\"col-xs-4\">Månadskostnad</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let loan of m.app.LoansToSettle\">\r\n            <td>{{ m.getLoanType(loan.LoanType) }}</td>\r\n            <td>{{ loan.CurrentDebtAmount | number: \"1.0-2\" }} kr</td>\r\n            <td>{{ loan.MonthlyCostAmount | number: \"1.0-2\" }} kr</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n\r\n    <hr class=\"hr-section dotted\" />\r\n\r\n    <form [formGroup]=\"m.form.form\">\r\n      <div class=\"checkbox\">\r\n        <label\r\n          ><input type=\"checkbox\" formControlName=\"hasGivenConsent\" /> Jag\r\n          intygar att uppgifterna i ansökan är korrekta och godkänner att en\r\n          kreditupplysning inhämtas för låntagarna samt att personuppgifter\r\n          behandlas i enlighet med\r\n          <a target=\"_blank\" [href]=\"m.personalDataPolicyUrl\" class=\"n-anchor\"\r\n            >personuppgiftspolicyn</a\r\n          >.</label\r\n        >\r\n      </div>\r\n      <div class=\"text-right pt-5\">\r\n        <button\r\n          class=\"n-main-btn n-green-btn\"\r\n          [disabled]=\"m.form.invalid()\"\r\n          (click)=\"apply($event)\"\r\n        >\r\n          Skicka in ansökan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </form>\r\n</ng-container>\r\n\r\n<ng-template #noLoans>\r\n  <p>Du har inte angivit några lån.</p>\r\n</ng-template>\r\n\r\n<ng-template\r\n  #applicantShared\r\n  let-applicant=\"applicant\"\r\n  let-isMainApplicant=\"isMainApplicant\"\r\n>\r\n  <table class=\"table\">\r\n    <tbody>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Ingår i hushållet?',\r\n            value: applicant.IsPartOfTheHousehold ? 'Ja' : 'Nej',\r\n            hide: isMainApplicant\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: { title: 'Personnummer', value: applicant.CivicRegNr }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: { title: 'Epost', value: applicant.Email }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: { title: 'Telefonnummer', value: applicant.Phone }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Sysselsättning',\r\n            value: m.getEmploymentType(applicant.Employment)\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Arbetsgivarens namn',\r\n            value: applicant.Employer,\r\n            hide: !applicant.Employer\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Arbetsgivarens telefon',\r\n            value: applicant.EmployerPhone,\r\n            hide: !applicant.EmployerPhone\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Sysselsättning sedan',\r\n            value: applicant.EmployedSince,\r\n            hide: !applicant.EmployedSince\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Sysselsättning till',\r\n            value: applicant.EmployedTo,\r\n            hide: !applicant.EmployedTo\r\n          }\r\n        \"\r\n      ></ng-container>\r\n      <ng-container\r\n        *ngTemplateOutlet=\"\r\n          twoColumn;\r\n          context: {\r\n            title: 'Månadsinkomst innan skatt',\r\n            value: (applicant.IncomePerMonthAmount | number: '1.0-2') + ' kr'\r\n          }\r\n        \"\r\n      ></ng-container>\r\n    </tbody>\r\n  </table>\r\n</ng-template>\r\n\r\n<ng-template #twoColumn let-title=\"title\" let-value=\"value\" let-hide=\"hide\">\r\n  <tr *ngIf=\"!hide\">\r\n    <td class=\"col-xs-4 col-sm-6\">{{ title }}</td>\r\n    <td class=\"col-xs-4 col-sm-6\">{{ value }}</td>\r\n  </tr>\r\n</ng-template>\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport {\r\n    CustomerPagesConfigService,\r\n    NTechEnum,\r\n} from 'projects/customerpages/src/app/common-services/customer-pages-config.service';\r\nimport { CustomerPagesValidationService } from 'projects/customerpages/src/app/common-services/customer-pages-validation.service';\r\nimport { CustomerPagesEventService } from 'projects/customerpages/src/app/common-services/customerpages-event.service';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { Randomizer } from 'src/app/common-services/randomizer';\r\nimport {\r\n    AutoFillInTestEventName,\r\n    MlApplicationSessionModel,\r\n    NextStepEventName,\r\n} from '../../start-webapplication/start-webapplication.component';\r\n\r\n@Component({\r\n    selector: 'application-step-economy',\r\n    templateUrl: './application-step-economy.component.html',\r\n    styles: [],\r\n})\r\nexport class ApplicationStepEconomyComponent {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private eventService: CustomerPagesEventService,\r\n        private validationService: CustomerPagesValidationService,\r\n        private config: CustomerPagesConfigService\r\n    ) {}\r\n\r\n    @Input()\r\n    public session: BehaviorSubject<MlApplicationSessionModel>;\r\n\r\n    public m: Model;\r\n    private subs: Subscription[];\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n        this.subs = [];\r\n\r\n        this.m = null;\r\n\r\n        if (!this.session) {\r\n            return;\r\n        }\r\n\r\n        this.subs.push(\r\n            this.eventService.applicationEvents.subscribe((x) => {\r\n                if (x.eventCode === AutoFillInTestEventName) {\r\n                    this.autoFillInTest();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.subs.push(\r\n            this.session.subscribe((session) => {\r\n                if (!session) {\r\n                    this.m = null;\r\n                    return;\r\n                }\r\n\r\n                // These will always exist.\r\n                let baseForm = this.fb.group({\r\n                    hasOtherMortgageLoans: [null, [Validators.required]],\r\n                    hasOtherNonMortgageLoans: [null, [Validators.required]],\r\n                    internalChildCount: [0, []],\r\n                });\r\n\r\n                let baseHelper = new FormsHelper(baseForm);\r\n                baseForm.valueChanges.subscribe((x) => {\r\n                    // Add some fields based on other values on the form.\r\n                    baseHelper.ensureControlOnConditionOnly(\r\n                        baseHelper.getValue('internalChildCount') > 0,\r\n                        'childBenefitAmount',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getPositiveIntegerValidator()]\r\n                    );\r\n                    baseHelper.ensureControlOnConditionOnly(\r\n                        baseHelper.getValue('internalChildCount') > 0,\r\n                        'sharedCustodyAndUpkeep',\r\n                        () => false,\r\n                        () => []\r\n                    );\r\n                    baseHelper.ensureControlOnConditionOnly(\r\n                        baseHelper.getValue('sharedCustodyAndUpkeep') === true,\r\n                        'outgoingChildSupportAmount',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getPositiveIntegerValidator()]\r\n                    );\r\n                    baseHelper.ensureControlOnConditionOnly(\r\n                        baseHelper.getValue('sharedCustodyAndUpkeep') === true,\r\n                        'incomingChildSupportAmount',\r\n                        () => '',\r\n                        () => [Validators.required, this.validationService.getPositiveIntegerValidator()]\r\n                    );\r\n\r\n                    let hasOtherMortgageLoans = baseHelper.getValue('hasOtherMortgageLoans');\r\n                    if (hasOtherMortgageLoans === 'true' && this.m.mortgageLoanGroupNames?.length === 0) {\r\n                        let newGroupName = this.addMortgageLoanFormGroup(this.m.form, 1);\r\n                        if (newGroupName !== null) this.m.mortgageLoanGroupNames.push(newGroupName);\r\n                        this.m.takeMortgageLoanSuffix();\r\n                    } else if (hasOtherMortgageLoans === 'false') {\r\n                        this.removeMortgageLoan(true);\r\n                    }\r\n\r\n                    let hasOtherNonMortgageLoans = baseHelper.getValue('hasOtherNonMortgageLoans');\r\n                    if (hasOtherNonMortgageLoans === 'true' && this.m.otherLoanGroupNames.length === 0) {\r\n                        let newGroupName = this.addOtherLoanFormGroup(this.m.form, 1);\r\n                        if (newGroupName !== null) this.m.otherLoanGroupNames.push(newGroupName);\r\n                        this.m.takeNonMortgageLoanSuffix();\r\n                    } else if (hasOtherNonMortgageLoans === 'false') {\r\n                        this.removeOtherLoan(true);\r\n                    }\r\n                });\r\n                let loanTypes = this.config.getEnums().OtherLoanTypes;\r\n                let m = new Model(baseHelper, session, loanTypes);\r\n                this.m = m;\r\n            })\r\n        );\r\n    }\r\n\r\n    private addMortgageLoanFormGroup(form: FormsHelper, suffix: number): string {\r\n        let formGroupName = 'mortgageLoanGroup' + suffix.toString();\r\n        let addedOrNull = form.addGroupIfNotExists(formGroupName, [\r\n            {\r\n                controlName: 'loanType',\r\n                initialValue: 'mortgage',\r\n                validators: [],\r\n            },\r\n            {\r\n                controlName: 'monthlyCostAmount',\r\n                initialValue: null,\r\n                validators: [this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n            {\r\n                controlName: 'currentDebtAmount',\r\n                initialValue: null,\r\n                validators: [Validators.required, this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n        ]);\r\n        return addedOrNull ? formGroupName : null;\r\n    }\r\n\r\n    public addMortgageLoan() {\r\n        let newGroupName = this.addMortgageLoanFormGroup(this.m.form, this.m.takeMortgageLoanSuffix());\r\n        // To protect against label/input triggering change twice from radiobuttons.\r\n        if (newGroupName !== null) this.m.mortgageLoanGroupNames.push(newGroupName);\r\n    }\r\n\r\n    public removeMortgageLoan(removeAll: boolean, groupName?: string) {\r\n        let removeSingle = (group: string) => {\r\n            this.m.mortgageLoanGroupNames.splice(this.m.mortgageLoanGroupNames.indexOf(group), 1);\r\n            this.m.form.form.removeControl(group);\r\n        };\r\n\r\n        if (removeAll) {\r\n            this.m.mortgageLoanGroupNames.every((x) => removeSingle(x));\r\n        } else if (groupName !== null) {\r\n            removeSingle(groupName);\r\n        }\r\n    }\r\n\r\n    private addOtherLoanFormGroup(form: FormsHelper, suffix: number): string {\r\n        let formGroupName = 'otherLoanGroup' + suffix.toString();\r\n        let addedOrNull = form.addGroupIfNotExists(formGroupName, [\r\n            {\r\n                controlName: 'loanType',\r\n                initialValue: null,\r\n                validators: [],\r\n            },\r\n            {\r\n                controlName: 'monthlyCostAmount',\r\n                initialValue: null,\r\n                validators: [this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n            {\r\n                controlName: 'currentDebtAmount',\r\n                initialValue: null,\r\n                validators: [Validators.required, this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n        ]);\r\n        return addedOrNull ? formGroupName : null;\r\n    }\r\n\r\n    public addOtherLoan() {\r\n        let newGroupName = this.addOtherLoanFormGroup(this.m.form, this.m.takeNonMortgageLoanSuffix());\r\n        // To protect against label/input triggering change twice from radiobuttons.\r\n        if (newGroupName !== null) this.m.otherLoanGroupNames.push(newGroupName);\r\n    }\r\n\r\n    public removeOtherLoan(removeAll: boolean, groupName?: string) {\r\n        let removeSingle = (group: string) => {\r\n            this.m.otherLoanGroupNames.splice(this.m.otherLoanGroupNames.indexOf(group), 1);\r\n            this.m.form.form.removeControl(group);\r\n        };\r\n\r\n        if (removeAll) {\r\n            this.m.otherLoanGroupNames.forEach(x => removeSingle(x));\r\n        } else if (groupName !== null) {\r\n            removeSingle(groupName);\r\n        }\r\n    }\r\n\r\n    private addChildFormGroup(form: FormsHelper, index: number): string {\r\n        let formGroupName = 'childGroup' + (index + 1).toString();\r\n        form.setValue('internalChildCount', form.getValue('internalChildCount') + 1);\r\n        form.addGroupIfNotExists(formGroupName, [\r\n            {\r\n                controlName: 'ageInYears',\r\n                initialValue: null,\r\n                validators: [this.validationService.getPositiveIntegerWithBoundsValidator(0, 200)],\r\n            },\r\n            {\r\n                controlName: 'sharedCustody',\r\n                initialValue: null,\r\n                validators: [],\r\n            },\r\n        ]);\r\n        return formGroupName;\r\n    }\r\n\r\n    apply(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let f = this.m.form;\r\n        let a = this.m.session.application;\r\n        let val = this.validationService;\r\n\r\n        a.ChildBenefitAmount = val.parseIntegerOrNull(f.getValue('childBenefitAmount'));\r\n        a.OutgoingChildSupportAmount = val.parseIntegerOrNull(f.getValue('outgoingChildSupportAmount'));\r\n        a.IncomingChildSupportAmount = val.parseIntegerOrNull(f.getValue('incomingChildSupportAmount'));\r\n\r\n        if (this.m.childrenGroupNames.length > 0) {\r\n            let children = [];\r\n            for (let group of this.m.childrenGroupNames) {\r\n                children.push({\r\n                    Exists: true,\r\n                    AgeInYears: val.parseIntegerOrNull(f.getFormGroupValue(group, 'ageInYears')),\r\n                    SharedCustody: f.getFormGroupValue(group, 'sharedCustody') === 'true',\r\n                });\r\n            }\r\n            a.HouseholdChildren = children;\r\n        }\r\n\r\n        let otherLoans = [];\r\n        if (this.m.mortgageLoanGroupNames.length > 0) {\r\n            for (let group of this.m.mortgageLoanGroupNames) {\r\n                otherLoans.push({\r\n                    LoanType: 'mortgage',\r\n                    MonthlyCostAmount: val.parseIntegerOrNull(f.getFormGroupValue(group, 'monthlyCostAmount')),\r\n                    CurrentDebtAmount: val.parseIntegerOrNull(f.getFormGroupValue(group, 'currentDebtAmount')),\r\n                });\r\n            }\r\n        }\r\n\r\n        if (this.m.otherLoanGroupNames.length > 0) {\r\n            for (let group of this.m.otherLoanGroupNames) {\r\n                otherLoans.push({\r\n                    LoanType: f.getFormGroupValue(group, 'loanType'),\r\n                    MonthlyCostAmount: val.parseIntegerOrNull(f.getFormGroupValue(group, 'monthlyCostAmount')),\r\n                    CurrentDebtAmount: val.parseIntegerOrNull(f.getFormGroupValue(group, 'currentDebtAmount')),\r\n                });\r\n            }\r\n        }\r\n\r\n        a.LoansToSettle = otherLoans;\r\n\r\n        this.eventService.emitApplicationEvent(NextStepEventName, JSON.stringify({ session: this.m.session }));\r\n    }\r\n\r\n    addChild() {\r\n        let currentCount = this.m.childrenGroupNames?.length ?? 0;\r\n        let newGroupName = this.addChildFormGroup(this.m.form, currentCount);\r\n        this.m.childrenGroupNames.push(newGroupName);\r\n    }\r\n\r\n    removeChild() {\r\n        let indexToRemove = this.m.childrenGroupNames.length - 1;\r\n        this.m.form.setValue('internalChildCount', indexToRemove.toString());\r\n        let groupNameToRemove = this.m.childrenGroupNames[indexToRemove];\r\n        this.m.childrenGroupNames.splice(indexToRemove, 1);\r\n        this.m.form.form.removeControl(groupNameToRemove);\r\n    }\r\n\r\n    private autoFillInTest() {\r\n        let f = this.m.form;\r\n\r\n        let nrOfChildren = Randomizer.anyOf([0, 0, 0, 1, 2]);\r\n        if (nrOfChildren > 0) {\r\n            [...Array(nrOfChildren)].forEach((_) => this.addChild());\r\n            let sharedCustody = Randomizer.anyOf([true, false]);\r\n            this.m.childrenGroupNames.map((groupName, _) => {\r\n                f.setValue2(groupName, 'ageInYears', Randomizer.anyOf(['1', '3', '5', '7', '9']));\r\n                f.setValue2(groupName, 'sharedCustody', Randomizer.anyOf(['true', 'false']));\r\n            });\r\n\r\n            f.setValue('childBenefitAmount', Randomizer.anyOf(['500', '1000', '1500']));\r\n\r\n            if (sharedCustody) {\r\n                f.setValue('sharedCustodyAndUpkeep', sharedCustody);\r\n                f.setValue('outgoingChildSupportAmount', Randomizer.anyOf(['500', '1000', '1500']));\r\n                f.setValue('incomingChildSupportAmount', Randomizer.anyOf(['500', '1000', '1500']));\r\n            }\r\n        }\r\n\r\n        let nrOfMortgageLoans = Randomizer.anyOf([0, 0, 0, 1, 2]);\r\n        if (nrOfMortgageLoans > 0) {\r\n            [...Array(nrOfMortgageLoans)].forEach((_) => this.addMortgageLoan());\r\n            this.m.mortgageLoanGroupNames.map((groupName, _) => {\r\n                f.setValue2(\r\n                    groupName,\r\n                    'currentDebtAmount',\r\n                    Randomizer.anyEvenNumberBetween(100000, 2500000, 10000).toString()\r\n                );\r\n                f.setValue2(\r\n                    groupName,\r\n                    'monthlyCostAmount',\r\n                    Randomizer.anyEvenNumberBetween(1500, 8000, 250).toString()\r\n                );\r\n            });\r\n        }\r\n        f.setValue('hasOtherMortgageLoans', nrOfMortgageLoans > 0 ? 'true' : 'false');\r\n\r\n        let nrNonMortgageLoans = Randomizer.anyOf([0, 1, 2]);\r\n        if (nrNonMortgageLoans > 0) {\r\n            [...Array(nrNonMortgageLoans)].forEach((_) => this.addOtherLoan());\r\n            this.m.otherLoanGroupNames.map((groupName, _) => {\r\n                f.setValue2(\r\n                    groupName,\r\n                    'currentDebtAmount',\r\n                    Randomizer.anyEvenNumberBetween(15000, 200000, 1000).toString()\r\n                );\r\n                f.setValue2(groupName, 'monthlyCostAmount', Randomizer.anyEvenNumberBetween(500, 4500, 100).toString());\r\n                f.setValue2(groupName, 'loanType', Randomizer.anyOf(this.m.otherLoanTypes().map((val, _) => val.Code)));\r\n            });\r\n        }\r\n        f.setValue('hasOtherNonMortgageLoans', nrNonMortgageLoans > 0 ? 'true' : 'false');\r\n    }\r\n}\r\n\r\nclass Model {\r\n    constructor(public form: FormsHelper, public session: MlApplicationSessionModel, private loanTypes: NTechEnum[]) {\r\n        this.childrenGroupNames = [];\r\n        this.mortgageLoanGroupNames = [];\r\n        this.otherLoanGroupNames = [];\r\n        this.nextNonMortgageLoanSuffix = 1;\r\n        this.nextMortgageLoanSuffix = 1;\r\n    }\r\n\r\n    otherLoanTypes = () => this.loanTypes.filter((type) => type.Code !== 'mortgage');\r\n\r\n    childrenGroupNames: string[];\r\n    mortgageLoanGroupNames: string[];\r\n    otherLoanGroupNames: string[];\r\n\r\n    private nextNonMortgageLoanSuffix: number;\r\n    private nextMortgageLoanSuffix: number;\r\n\r\n    takeNonMortgageLoanSuffix() {\r\n        let toReturn = this.nextNonMortgageLoanSuffix;\r\n        this.nextNonMortgageLoanSuffix += 1;\r\n        return toReturn;\r\n    }\r\n    takeMortgageLoanSuffix() {\r\n        let toReturn = this.nextMortgageLoanSuffix;\r\n        this.nextMortgageLoanSuffix += 1;\r\n        return toReturn;\r\n    }\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n    <form [formGroup]=\"m.form.form\">\r\n        <h2>Hushållets ekonomi</h2>\r\n\r\n        <div class=\"row pb-2\">\r\n\r\n            <div class=\"col-sm-6 col-xs-12\">\r\n                <div [formGroup]=\"m.form.form\">                    \r\n                    <label>Hur många barn bor i hushållet?</label>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-2 col-xs-3\">\r\n                          <button (click)=\"removeChild()\" [disabled]=\"!m.form || m.childrenGroupNames.length === 0\" title=\"Remove a child\" class=\"n-icon-btn n-blue-btn\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n                        </div>\r\n                        <div class=\"col-sm-4 col-xs-6\">\r\n                            <p class=\"form-control copyable bb-1 text-center\">{{m.childrenGroupNames.length}}</p>\r\n                        </div>\r\n                        <div class=\"col-sm-2 col-xs-3\">\r\n                            <button (click)=\"addChild()\" title=\"Add a child\" class=\"n-icon-btn n-blue-btn\"><span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span></button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <ng-container *ngFor=\"let groupName of m.childrenGroupNames\">\r\n                    <div class=\"row pb-1\" formGroupName=\"{{groupName}}\">\r\n                        <div class=\"col-sm-8 col-xs-6\" [ngClass]=\"{ 'has-error': m.form.form.hasError('ageInYears', groupName) }\">\r\n                            <label>Ålder</label>\r\n                            <input class=\"form-control\" type=\"text\" formControlName=\"ageInYears\" />\r\n                        </div>\r\n                        <div class=\"col-sm-4 col-xs-6\" *ngIf=\"m.form.getValue('sharedCustodyAndUpkeep')\">\r\n                            <label>Delad vårdnad?</label>\r\n                            <select class=\"form-control\" formControlName=\"sharedCustody\">\r\n                                <option [ngValue]=\"''\"></option>\r\n                                <option [ngValue]=\"'true'\">Ja</option>\r\n                                <option [ngValue]=\"'false'\">Nej</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <div class=\"pb-1\" *ngIf=\"m.childrenGroupNames.length > 0\">\r\n                    <div class=\"checkbox-inline\">\r\n                        <label><input type=\"checkbox\" formControlName=\"sharedCustodyAndUpkeep\" /> Hushållet har delad vårdnad och underhåll</label>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class=\"col-sm-6 col-xs-12\">\r\n              <ng-container *ngTemplateOutlet=\"textGroup; context:\r\n                  { formControlName: 'childBenefitAmount', displayText: 'Hur mycket får hushållet i barnbidrag/studiebidrag?' }\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"textGroup; context:\r\n                  { formControlName: 'outgoingChildSupportAmount', displayText: 'Hur mycket får hushållet i underhåll?' }\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"textGroup; context:\r\n                  { formControlName: 'incomingChildSupportAmount', displayText: 'Hur mycket betalar hushållet i underhåll?' }\"></ng-container>\r\n            </div>\r\n        </div>\r\n\r\n        <h2>Övriga lån</h2>\r\n        <div class=\"form-group pb-1\">\r\n            <p>Har ni andra bolån (förutom det ni vill låna till nu)?</p>\r\n            <div class=\"radio-inline\">\r\n                <label><input type=\"radio\" formControlName=\"hasOtherMortgageLoans\" value=\"true\"> Ja</label>\r\n            </div>\r\n            <div class=\"radio-inline\">\r\n                <label><input type=\"radio\" formControlName=\"hasOtherMortgageLoans\" value=\"false\"> Nej</label>\r\n            </div>\r\n        </div>\r\n\r\n        <ng-container *ngFor=\"let groupName of m.mortgageLoanGroupNames\">\r\n            <div class=\"row pb-1\">\r\n                <div class=\"col-sm-11 col-xs-9\">\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-sm-6 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                            <label>Månadskostnad</label>\r\n                            <input type=\"text\" class=\"form-control\" formControlName=\"monthlyCostAmount\">\r\n                        </div>\r\n                        <div class=\"form-group col-sm-6 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                            <label>Nuvarande skuld</label>\r\n                            <input type=\"text\" class=\"form-control\" formControlName=\"currentDebtAmount\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-sm-1 col-xs-3\" *ngIf=\"m.mortgageLoanGroupNames.length > 1\">\r\n                    <div class=\"pt-2\">\r\n                        <button class=\"n-icon-btn n-blue-btn\" (click)=\"removeMortgageLoan(false, groupName)\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <div class=\"pt-1 pb-2\" *ngIf=\"m.form.getValue('hasOtherMortgageLoans') === 'true'\">\r\n            <button class=\"n-icon-btn n-blue-btn\" (click)=\"addMortgageLoan()\">\r\n                <span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"form-group pb-1\">\r\n            <p>Har ni ytterligare lån (förutom bolån)?</p>\r\n            <div class=\"radio-inline\">\r\n                <label><input type=\"radio\" formControlName=\"hasOtherNonMortgageLoans\" value=\"true\"> Ja</label>\r\n            </div>\r\n            <div class=\"radio-inline\">\r\n                <label><input type=\"radio\" formControlName=\"hasOtherNonMortgageLoans\" value=\"false\"> Nej</label>\r\n            </div>\r\n        </div>\r\n\r\n        <ng-container *ngFor=\"let groupName of m.otherLoanGroupNames\">\r\n            <div class=\"row pb-1\">\r\n                <div class=\"col-sm-11 col-xs-9\">\r\n                    <div class=\"row\">\r\n                        <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                            <label>Typ av lån</label>\r\n                            <select class=\"form-control\" formControlName=\"loanType\">\r\n                              <option value=\"\"></option>\r\n                              <option [value]=\"opt.Code\" *ngFor=\"let opt of m.otherLoanTypes()\">{{opt.DisplayName}}</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                            <label>Månadskostnad</label>\r\n                            <input type=\"text\" class=\"form-control\" formControlName=\"monthlyCostAmount\">\r\n                        </div>\r\n                        <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                            <label>Nuvarande skuld</label>\r\n                            <input type=\"text\" class=\"form-control\" formControlName=\"currentDebtAmount\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-sm-1 col-xs-3\" *ngIf=\"m.otherLoanGroupNames.length > 1\">\r\n                    <div class=\"pt-2\">\r\n                        <button class=\"n-icon-btn n-blue-btn\" (click)=\"removeOtherLoan(false, groupName)\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <div class=\"pt-1\" *ngIf=\"m.form.getValue('hasOtherNonMortgageLoans') === 'true'\">\r\n            <button class=\"n-icon-btn n-blue-btn\" (click)=\"addOtherLoan()\">\r\n                <span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"text-right pt-5\">\r\n            <button class=\"n-main-btn n-green-btn\" [disabled]=\"m.form.invalid()\" (click)=\"apply($event)\">Gå vidare</button>\r\n        </div>\r\n    </form>\r\n</ng-container>\r\n\r\n<ng-template #textGroup let-displayText=\"displayText\" let-formControlName=\"formControlName\">\r\n  <div class=\"form-group pb-1\" *ngIf=\"m.form.hasFormControl(null, formControlName)\" [ngClass]=\"{ 'has-error': m.form.hasError(formControlName) }\" [formGroup]=\"m.form.form\">\r\n      <label>{{displayText}}</label>\r\n      <input type=\"text\" class=\"form-control\" [formControlName]=\"formControlName\">\r\n  </div>\r\n</ng-template>\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CustomerPagesValidationService } from 'projects/customerpages/src/app/common-services/customer-pages-validation.service';\r\nimport { CustomerPagesEventService } from 'projects/customerpages/src/app/common-services/customerpages-event.service';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport {\r\n    AutoFillInTestEventName,\r\n    MlApplicationSessionModel,\r\n    NextStepEventName,\r\n} from '../../start-webapplication/start-webapplication.component';\r\n\r\n@Component({\r\n    selector: 'application-step-object',\r\n    templateUrl: './application-step-object.component.html',\r\n    styles: [],\r\n})\r\nexport class ApplicationStepObjectComponent {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private eventService: CustomerPagesEventService,\r\n        private validationService: CustomerPagesValidationService\r\n    ) {}\r\n\r\n    @Input()\r\n    public session: BehaviorSubject<MlApplicationSessionModel>;\r\n\r\n    public m: Model;\r\n    private subs: Subscription[];\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n        this.subs = [];\r\n\r\n        this.m = null;\r\n\r\n        if (!this.session) {\r\n            return;\r\n        }\r\n\r\n        this.subs.push(\r\n            this.eventService.applicationEvents.subscribe((x) => {\r\n                if (x.eventCode === AutoFillInTestEventName) {\r\n                    this.autoFillInTest();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.subs.push(\r\n            this.session.subscribe((x) => {\r\n                if (!x) {\r\n                    this.m = null;\r\n                    return;\r\n                }\r\n\r\n                let f = this.fb.group({\r\n                    objectAddressStreet: ['', [Validators.required]],\r\n                    objectAddressZipcode: ['', [Validators.required]],\r\n                    objectAddressCity: ['', [Validators.required]],\r\n                    objectAddressMunicipality: ['', [Validators.required]],\r\n                    objectOtherMonthlyCostsAmount: ['', [this.validationService.getPositiveIntegerValidator()]],\r\n                    objectLivingArea: ['', [this.validationService.getPositiveIntegerValidator()]],\r\n                    isObjectApartment: ['', [Validators.required]],\r\n                });\r\n\r\n                let h = new FormsHelper(f);\r\n                f.valueChanges.subscribe((x) => {\r\n                    let isObjectApartment = h.getValue('isObjectApartment') === 'true';\r\n                    h.ensureControlOnConditionOnly(\r\n                        isObjectApartment,\r\n                        'apartmentNr',\r\n                        () => '',\r\n                        () => [Validators.required]\r\n                    );\r\n                    h.ensureControlOnConditionOnly(\r\n                        isObjectApartment,\r\n                        'objectMonthlyFeeAmount',\r\n                        () => '',\r\n                        () => [this.validationService.getPositiveIntegerValidator()]\r\n                    );\r\n                });\r\n\r\n                let isPurchase = !!x.application.Purchase;\r\n\r\n                let m = new Model(x, h, [], 1, !!x.application.Purchase, null, this.validationService);\r\n\r\n                let shouldMortgageLoansBeSettled: boolean = true;\r\n                if (!isPurchase && x.application.ChangeExistingLoan?.MortgageLoansToSettle) {\r\n                    for (let loan of x.application.ChangeExistingLoan.MortgageLoansToSettle) {\r\n                        shouldMortgageLoansBeSettled = loan.ShouldBeSettled;\r\n                        m.addLoan(\r\n                            {\r\n                                bankName: loan.BankName,\r\n                                currentDebtAmount: this.validationService.formatIntegerForEdit(loan.CurrentDebtAmount),\r\n                                interestRatePercent: this.validationService.formatPositiveDecimalForEdit(\r\n                                    loan.InterestRatePercent\r\n                                ),\r\n                                currentMonthlyAmortizationAmount: this.validationService.formatIntegerForEdit(\r\n                                    loan.CurrentMonthlyAmortizationAmount\r\n                                ),\r\n                            },\r\n                            null\r\n                        );\r\n                    }\r\n                }\r\n\r\n                m.shouldMortgageLoansBeSettled = shouldMortgageLoansBeSettled;\r\n\r\n                this.m = m;\r\n            })\r\n        );\r\n    }\r\n\r\n    apply(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let f = this.m.form;\r\n        let a = this.m.session.application;\r\n        a.ObjectAddressStreet = f.getValue('objectAddressStreet');\r\n        a.ObjectAddressZipcode = f.getValue('objectAddressZipcode');\r\n        a.ObjectAddressCity = f.getValue('objectAddressCity');\r\n        a.ObjectAddressMunicipality = f.getValue('objectAddressMunicipality');\r\n        a.ObjectOtherMonthlyCostsAmount = this.validationService.parseIntegerOrNull(\r\n            f.getValue('objectOtherMonthlyCostsAmount')\r\n        );\r\n        a.ObjectLivingArea = this.validationService.parseIntegerOrNull(f.getValue('objectLivingArea'));\r\n        let isObjectApartment = f.getValue('isObjectApartment') === 'true';\r\n        if (isObjectApartment) {\r\n            a.ObjectTypeCode = 'seBrf';\r\n            a.ObjectMonthlyFeeAmount = this.validationService.parseIntegerOrNull(f.getValue('objectMonthlyFeeAmount'));\r\n            a.SeBrfApartmentNr = f.getValue('apartmentNr');\r\n        } else {\r\n            a.ObjectTypeCode = 'seFastighet';\r\n            a.ObjectMonthlyFeeAmount = null;\r\n        }\r\n        if (!this.m.isPurchase) {\r\n            let mortgageLoansToSettle = [];\r\n            for (let suffix of this.m.loanSuffixes) {\r\n                mortgageLoansToSettle.push({\r\n                    BankName: f.getValue('bankName' + suffix),\r\n                    ShouldBeSettled: this.m.shouldMortgageLoansBeSettled,\r\n                    CurrentMonthlyAmortizationAmount: this.validationService.parseIntegerOrNull(\r\n                        f.getValue('currentMonthlyAmortizationAmount' + suffix)\r\n                    ),\r\n                    InterestRatePercent: this.validationService.parseDecimalOrNull(\r\n                        f.getValue('interestRatePercent' + suffix),\r\n                        false\r\n                    ),\r\n                    CurrentDebtAmount: this.validationService.parseIntegerOrNull(\r\n                        f.getValue('currentDebtAmount' + suffix)\r\n                    ),\r\n                });\r\n            }\r\n            a.ChangeExistingLoan.MortgageLoansToSettle = mortgageLoansToSettle;\r\n        }\r\n\r\n        this.eventService.emitApplicationEvent(NextStepEventName, JSON.stringify({ session: this.m.session }));\r\n    }\r\n\r\n    private autoFillInTest() {\r\n        let f = this.m.form;\r\n        f.setValue('objectAddressStreet', 'Gatan 1');\r\n        f.setValue('objectAddressZipcode', '111 11');\r\n        f.setValue('objectAddressCity', 'Staden');\r\n        f.setValue('objectAddressMunicipality', 'Kommunen');\r\n        f.setValue('objectOtherMonthlyCostsAmount', '500');\r\n        f.setValue('objectLivingArea', '53');\r\n        f.setValue('isObjectApartment', 'true');\r\n        f.setValue('apartmentNr', 'L1233');\r\n        f.setValue('objectMonthlyFeeAmount', '2700');\r\n\r\n        if (this.m.loanSuffixes.length === 0) {\r\n            this.m.addLoan(\r\n                {\r\n                    bankName: 'Banken',\r\n                    currentMonthlyAmortizationAmount: '750',\r\n                    interestRatePercent: '1,5',\r\n                    currentDebtAmount: '155000',\r\n                },\r\n                null\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    constructor(\r\n        public session: MlApplicationSessionModel,\r\n        public form: FormsHelper,\r\n        public loanSuffixes: string[],\r\n        public nextLoanSuffix: number,\r\n        public isPurchase: boolean,\r\n        public shouldMortgageLoansBeSettled: boolean,\r\n        private validationService: CustomerPagesValidationService\r\n    ) {}\r\n\r\n    addLoan(\r\n        initialValues: {\r\n            bankName: string;\r\n            currentMonthlyAmortizationAmount: string;\r\n            interestRatePercent: string;\r\n            currentDebtAmount: string;\r\n        },\r\n        evt: Event\r\n    ) {\r\n        evt?.preventDefault();\r\n\r\n        let suffix = this.nextLoanSuffix.toString();\r\n\r\n        this.nextLoanSuffix = this.nextLoanSuffix + 1;\r\n\r\n        let f = this.form;\r\n        f.addControlIfNotExists('bankName' + suffix, initialValues?.bankName, []);\r\n        f.addControlIfNotExists(\r\n            'currentMonthlyAmortizationAmount' + suffix,\r\n            initialValues?.currentMonthlyAmortizationAmount,\r\n            [this.validationService.getPositiveIntegerValidator()]\r\n        );\r\n        f.addControlIfNotExists('interestRatePercent' + suffix, initialValues?.interestRatePercent, [\r\n            this.validationService.getPositiveDecimalValidator(),\r\n        ]);\r\n        f.addControlIfNotExists('currentDebtAmount' + suffix, initialValues?.currentDebtAmount, [\r\n            Validators.required,\r\n            this.validationService.getPositiveIntegerValidator(),\r\n        ]);\r\n\r\n        this.loanSuffixes.push(suffix);\r\n\r\n        return suffix;\r\n    }\r\n\r\n    removeLoan(suffix: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n        this.loanSuffixes.splice(this.loanSuffixes.indexOf(suffix), 1);\r\n\r\n        let f = this.form;\r\n        f.form.removeControl('bankName' + suffix);\r\n        f.form.removeControl('currentMonthlyAmortizationAmount' + suffix);\r\n        f.form.removeControl('interestRatePercent' + suffix);\r\n        f.form.removeControl('currentDebtAmount' + suffix);\r\n    }\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n  <form [formGroup]=\"m.form.form\">\r\n    <h2>Bostaden</h2>\r\n    <label>Vilken adress har bostaden?</label>\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('objectAddressStreet') }\"\r\n        >\r\n          <label>Gata</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectAddressStreet\"\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('objectAddressZipcode') }\"\r\n        >\r\n          <label>Postnummer</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectAddressZipcode\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('objectAddressCity') }\"\r\n        >\r\n          <label>Ort</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectAddressCity\"\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{\r\n            'has-error': m.form.hasError('objectAddressMunicipality')\r\n          }\"\r\n        >\r\n          <label>Kommun</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectAddressMunicipality\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('isObjectApartment') }\"\r\n        >\r\n          <p>Är bostaden en bostadsrättsförening?</p>\r\n          <div class=\"radio-inline\">\r\n            <label\r\n              ><input\r\n                type=\"radio\"\r\n                formControlName=\"isObjectApartment\"\r\n                value=\"true\"\r\n              />\r\n              Ja</label\r\n            >\r\n          </div>\r\n          <div class=\"radio-inline\">\r\n            <label\r\n              ><input\r\n                type=\"radio\"\r\n                formControlName=\"isObjectApartment\"\r\n                value=\"false\"\r\n              />\r\n              Nej</label\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\" *ngIf=\"m.form.hasFormControl(null, 'apartmentNr')\">\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('apartmentNr') }\"\r\n        >\r\n          <label>Vilket lägenhetsnummer har bostaden?</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"apartmentNr\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('objectMonthlyFeeAmount') }\"\r\n        >\r\n          <label>Vad är månadskostnaden?</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectMonthlyFeeAmount\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{\r\n            'has-error': m.form.hasError('objectOtherMonthlyCostsAmount')\r\n          }\"\r\n        >\r\n          <label>Vad är driftskostnaden per månad för bostaden?</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectOtherMonthlyCostsAmount\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6 col-xs-12\">\r\n        <div\r\n          class=\"form-group pb-1\"\r\n          [ngClass]=\"{ 'has-error': m.form.hasError('objectLivingArea') }\"\r\n        >\r\n          <label>Hur stor är boytan?</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            formControlName=\"objectLivingArea\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"!m.isPurchase\">\r\n      <h2 class=\"pt-3\">Befintliga lån på bostaden</h2>\r\n      <div class=\"row\" *ngFor=\"let suffix of m.loanSuffixes\">\r\n        <div class=\"col-sm-11 col-xs-10\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-5 col-xs-12\">\r\n              <div\r\n                class=\"form-group pb-1\"\r\n                [ngClass]=\"{\r\n                  'has-error': m.form.hasError('bankName' + suffix)\r\n                }\"\r\n              >\r\n                <label>Bank</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  [formControlName]=\"'bankName' + suffix\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-2 col-xs-12\">\r\n              <div\r\n                class=\"form-group pb-1\"\r\n                [ngClass]=\"{\r\n                  'has-error': m.form.hasError(\r\n                    'currentMonthlyAmortizationAmount' + suffix\r\n                  )\r\n                }\"\r\n              >\r\n                <label>Amortering</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  [formControlName]=\"\r\n                    'currentMonthlyAmortizationAmount' + suffix\r\n                  \"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-2 col-xs-12\">\r\n              <div\r\n                class=\"form-group pb-1\"\r\n                [ngClass]=\"{\r\n                  'has-error': m.form.hasError('interestRatePercent' + suffix)\r\n                }\"\r\n              >\r\n                <label>Ränta</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  [formControlName]=\"'interestRatePercent' + suffix\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-3 col-xs-12\">\r\n              <div\r\n                class=\"form-group pb-1\"\r\n                [ngClass]=\"{\r\n                  'has-error': m.form.hasError('currentDebtAmount' + suffix)\r\n                }\"\r\n              >\r\n                <label>Lånebelopp</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  [formControlName]=\"'currentDebtAmount' + suffix\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-1 col-xs-2\">\r\n          <div class=\"pt-2\">\r\n            <button\r\n              class=\"n-icon-btn n-blue-btn\"\r\n              (click)=\"m.removeLoan(suffix, $event)\"\r\n            >\r\n              <span class=\"glyphicon glyphicon-minus\"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"pt-1\">\r\n        <button class=\"n-icon-btn n-blue-btn\" (click)=\"m.addLoan(null, $event)\">\r\n          <span class=\"glyphicon glyphicon-plus\"></span>\r\n        </button>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <div class=\"text-right pt-5\">\r\n      <button\r\n        class=\"n-main-btn n-green-btn\"\r\n        [disabled]=\"m.form.invalid()\"\r\n        (click)=\"apply($event)\"\r\n      >\r\n        Gå vidare\r\n      </button>\r\n    </div>\r\n  </form>\r\n</ng-container>\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { MlApplicationSessionModel } from '../../start-webapplication/start-webapplication.component';\r\n\r\n@Component({\r\n    selector: 'application-wizard-shell',\r\n    templateUrl: './application-wizard-shell.component.html',\r\n    styles: [],\r\n})\r\nexport class ApplicationWizardShellComponent {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public initialData: ApplicationWizardShellInitialData;\r\n\r\n    public m: Model;\r\n    private subs: Subscription[];\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (this.subs) {\r\n            for (let sub of this.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n\r\n        this.subs = [];\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let i = this.initialData;\r\n\r\n        this.subs.push(\r\n            i.session.subscribe((x) => {\r\n                if (x) {\r\n                    let civicRegNr = x?.application?.Applicants[0]?.CivicRegNr;\r\n                    let firstName = x?.application?.Applicants[0]?.FirstName;\r\n                    this.m = new Model(i.activeStepNr, firstName, civicRegNr, x);\r\n                } else {\r\n                    this.m = null;\r\n                }\r\n            })\r\n        );\r\n    }\r\n}\r\n\r\nexport class ApplicationWizardShellInitialData {\r\n    constructor(public activeStepNr: number, public session: Observable<MlApplicationSessionModel>) {}\r\n}\r\n\r\nclass Model {\r\n    constructor(\r\n        public stepNr: number,\r\n        public firstName: string,\r\n        public civicRegNr: string,\r\n        private session: MlApplicationSessionModel\r\n    ) {}\r\n\r\n    public isPurchase() {\r\n        let a = this.session.application;\r\n        return !!a.Purchase;\r\n    }\r\n\r\n    public isAdditionalLoan() {\r\n        let a = this.session.application;\r\n        return (\r\n            !a.Purchase &&\r\n            a.ChangeExistingLoan &&\r\n            a.ChangeExistingLoan.MortgageLoansToSettle &&\r\n            a.ChangeExistingLoan.MortgageLoansToSettle.length > 0 &&\r\n            !a.ChangeExistingLoan.MortgageLoansToSettle[0].ShouldBeSettled\r\n        );\r\n    }\r\n\r\n    public isMoveLoan() {\r\n        let a = this.session.application;\r\n        return (\r\n            !a.Purchase &&\r\n            a.ChangeExistingLoan &&\r\n            a.ChangeExistingLoan.MortgageLoansToSettle &&\r\n            a.ChangeExistingLoan.MortgageLoansToSettle.length > 0 &&\r\n            a.ChangeExistingLoan.MortgageLoansToSettle[0].ShouldBeSettled\r\n        );\r\n    }\r\n}\r\n","<ml-shell>\r\n  <div shell-body>\r\n    <div class=\"align-center frame\" *ngIf=\"m\">\r\n      <h1 class=\"header-light text-center pb-3\" *ngIf=\"m.isMoveLoan()\">\r\n        Ansökan - flytt av lån\r\n      </h1>\r\n      <h1 class=\"header-light text-center pb-3\" *ngIf=\"m.isPurchase()\">\r\n        Ansökan - lån för bostadsköp\r\n      </h1>\r\n      <h1 class=\"header-light text-center pb-3\" *ngIf=\"m.isAdditionalLoan()\">\r\n        Ansökan - tilläggslån\r\n      </h1>\r\n      <p class=\"text-center pb-2\">Du förbinder dig inte till något.</p>\r\n\r\n      <div class=\"row pb-5\">\r\n        <div class=\"col-xs-12 pt-2\">\r\n          <div class=\"progress\" style=\"height: 4px\">\r\n            <div\r\n              class=\"progress-bar\"\r\n              [style.width]=\"(33 * (m.stepNr - 1)).toString() + '%'\"\r\n            ></div>\r\n            <div class=\"row\" style=\"position: absolute; width: 100%; top: 10px\">\r\n              <div class=\"col-xs-2\">\r\n                <span\r\n                  class=\"progress-point active\"\r\n                  [class.active]=\"m.stepNr >= 1\"\r\n                  >1</span\r\n                >\r\n                <p>Bostaden</p>\r\n              </div>\r\n              <div class=\"col-xs-4 text-center\">\r\n                <span class=\"progress-point\" [class.active]=\"m.stepNr >= 2\"\r\n                  >2</span\r\n                >\r\n                <p>Låntagare</p>\r\n              </div>\r\n              <div class=\"col-xs-4 text-center\">\r\n                <span class=\"progress-point\" [class.active]=\"m.stepNr >= 3\"\r\n                  >3</span\r\n                >\r\n                <p>Ekonomi</p>\r\n              </div>\r\n              <div class=\"col-xs-2 text-right\">\r\n                <span class=\"progress-point\" [class.active]=\"m.stepNr >= 4\"\r\n                  >4</span\r\n                >\r\n                <p>Medgivande</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"pt-3\">\r\n        <ng-content select=\"[wizard-step]\"></ng-content>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ml-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesConfigService } from '../../../../common-services/customer-pages-config.service';\r\nimport { CustomerPagesEventService } from '../../../../common-services/customerpages-event.service';\r\nimport {\r\n    CustomerPagesMortgageLoanApiService,\r\n    MlApplicationModel,\r\n} from '../../../services/customer-pages-ml-api.service';\r\nimport { ApplicationWizardShellInitialData } from '../components/application-wizard-shell/application-wizard-shell.component';\r\n\r\n@Component({\r\n    selector: 'np-start-webapplication',\r\n    templateUrl: './start-webapplication.component.html',\r\n    styles: [],\r\n})\r\nexport class StartWebapplicationComponent implements OnInit {\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private apiService: CustomerPagesMortgageLoanApiService,\r\n        private configServive: CustomerPagesConfigService,\r\n        private eventService: CustomerPagesEventService,\r\n        private router: Router\r\n    ) {}\r\n\r\n    public m: Model;\r\n    public errorMessage: string;\r\n\r\n    ngOnInit(): void {\r\n        this.reload(this.route.snapshot.params['sessionId']);\r\n        this.eventService.applicationEvents.subscribe((x) => {\r\n            if (x.eventCode === NextStepEventName && this.m) {\r\n                let activeStepNr = this.m.wizardInitialData.activeStepNr;\r\n                if (activeStepNr === 4) {\r\n                    var session = this.m.session.value;\r\n                    this.apiService.createApplication(session.application).then((newApplication) => {\r\n                        let storageKey = getMlApplicationSessionModelStorageKey(session.sessionId);\r\n                        localStorage.removeItem(storageKey);\r\n                        sessionStorage.removeItem(storageKey);\r\n                        this.router.navigateByUrl(\r\n                            `/mortgage-loan-applications/open/application/${newApplication.ApplicationNr}/created`\r\n                        );\r\n                    });\r\n                } else {\r\n                    let data: { session: MlApplicationSessionModel } = JSON.parse(x.customData);\r\n                    let session = data.session;\r\n                    session.lastCompletedStep = this.m.wizardInitialData.activeStepNr;\r\n                    this.m.wizardInitialData.activeStepNr = this.m.wizardInitialData.activeStepNr + 1;\r\n                    this.storeSession(session);\r\n                    this.m.session.next(session);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private reload(sessionId: string) {\r\n        this.m = null;\r\n\r\n        this.loadSession(sessionId).then((session) => {\r\n            if (!session || session.sessionId !== sessionId) {\r\n                this.m = null;\r\n                this.errorMessage = 'No such session exists';\r\n                return;\r\n            }\r\n\r\n            let s = new BehaviorSubject<MlApplicationSessionModel>(null);\r\n\r\n            this.m = {\r\n                session: s,\r\n                wizardInitialData: {\r\n                    activeStepNr: session.lastCompletedStep ? session.lastCompletedStep + 1 : 1,\r\n                    session: s,\r\n                },\r\n                test: this.configServive.isNTechTest()\r\n                    ? {\r\n                          isPopupVisible: false,\r\n                      }\r\n                    : null,\r\n            };\r\n\r\n            s.next(session);\r\n        });\r\n    }\r\n\r\n    private loadSession(sessionId: string): Promise<MlApplicationSessionModel> {\r\n        /*\r\n        We move from localStorage which is basically permanent to session storage when starting to fill out the application.\r\n        This ensures the user can be logged out or hit F5 without losing their filled out data but also doesnt store civicnrs and similar\r\n        in local storage which might be a bit to permanent if this is IE a public computer.\r\n        */\r\n        let sessionKey = getMlApplicationSessionModelStorageKey(sessionId);\r\n        let sessionDataRaw = sessionStorage.getItem(sessionKey) ?? localStorage.getItem(sessionKey);\r\n        let session: MlApplicationSessionModel = sessionDataRaw ? JSON.parse(sessionDataRaw) : null;\r\n        if (!session.isInitialized) {\r\n            return this.apiService\r\n                .shared()\r\n                .fetchLoggedInUserDetails()\r\n                .then((x) => {\r\n                    let a = session.application;\r\n                    if (!a.Applicants) {\r\n                        a.Applicants = [\r\n                            {\r\n                                CivicRegNr: x.civicRegNr,\r\n                            },\r\n                        ];\r\n                    }\r\n                    session.isInitialized = true;\r\n                    return session;\r\n                });\r\n        } else {\r\n            let p = new Promise<MlApplicationSessionModel>((resolve) => resolve(session));\r\n            return p;\r\n        }\r\n    }\r\n\r\n    private storeSession(session: MlApplicationSessionModel) {\r\n        sessionStorage.setItem(getMlApplicationSessionModelStorageKey(session.sessionId), JSON.stringify(session));\r\n    }\r\n\r\n    public autoFillInTest(evt?: Event) {\r\n        evt?.preventDefault();\r\n        this.eventService.emitApplicationEvent(AutoFillInTestEventName, this.m.wizardInitialData.activeStepNr);\r\n    }\r\n}\r\n\r\nclass Model {\r\n    session: BehaviorSubject<MlApplicationSessionModel>;\r\n    wizardInitialData: ApplicationWizardShellInitialData;\r\n    test: {\r\n        //TODO: This should be TestFunctionsModel and we should use the component from BO. Have not been able to get it to build so far though.\r\n        isPopupVisible: boolean;\r\n    };\r\n}\r\n\r\nexport interface MlApplicationSessionModel {\r\n    sessionId: string;\r\n    creationDate: string;\r\n    isInitialized?: boolean;\r\n    lastCompletedStep?: number;\r\n    application: MlApplicationModel;\r\n}\r\n\r\nexport function getMlApplicationSessionModelStorageKey(sessionId: string) {\r\n    return `MlApplicationSessionV1_${sessionId}`;\r\n}\r\n\r\nexport const NextStepEventName = 'GotoNextApplicationStep';\r\nexport const AutoFillInTestEventName = 'AutoFillInTest';\r\n","<application-wizard-shell [initialData]=\"m?.wizardInitialData\">\r\n    <div wizard-step>\r\n        <p *ngIf=\"errorMessage\">{{errorMessage}}</p>\r\n        <div *ngIf=\"m\">\r\n            <ng-container [ngSwitch]=\"m.wizardInitialData.activeStepNr\">\r\n                <application-step-object *ngSwitchCase=\"1\" [session]=\"m.session\"></application-step-object>\r\n                <application-step-applicants *ngSwitchCase=\"2\" [session]=\"m.session\"></application-step-applicants>\r\n                <application-step-economy *ngSwitchCase=\"3\" [session]=\"m.session\"></application-step-economy>\r\n                <application-step-consent *ngSwitchCase=\"4\" [session]=\"m.session\"></application-step-consent>\r\n            </ng-container>\r\n        </div>\r\n        <div *ngIf=\"m?.test\">\r\n            <div class=\"test-popup-frame test-popup-position\" *ngIf=\"m.test.isPopupVisible\">\r\n                <div class=\"pt-1\">\r\n                    <ul class=\"list-unstyled\">\r\n                        <li class=\"pb-1\">\r\n                            <button target=\"_blank\" class=\"btn btn-primary\" (click)=\"autoFillInTest($event)\">Autofill</button>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"test-popup-button-position\">\r\n                <button class=\"btn btn-default\" [ngClass]=\"{ 'test-popup-toned-down' : !m.test.isPopupVisible }\" (click)=\"$event.preventDefault();m.test.isPopupVisible = !m.test.isPopupVisible\"><span class=\"glyphicon glyphicon-sort\"></span></button>\r\n            </div>\r\n        </div>        \r\n    </div>\r\n</application-wizard-shell>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport {\r\n    CustomerPagesKycQuestionAnswerModel,\r\n    TaskKycQuestionsComponentInitialData,\r\n} from '../../../shared-components/task-kyc-questions/task-kyc-questions.component';\r\n\r\n@Component({\r\n    selector: 'np-kyc-task-application',\r\n    templateUrl: './kyc-task-application.component.html',\r\n    styles: [],\r\n})\r\nexport class KycTaskApplicationComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute, private router: Router, private apiService: CustomerPagesApiService) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.reload(this.route.snapshot.params['applicationNr']);\r\n    }\r\n\r\n    closeTask() {\r\n        this.router.navigate(['mortgage-loan-applications/secure/application', this.m.applicationNr]);\r\n    }\r\n\r\n    private async reload(applicationNr: string) {\r\n        let result = await this.apiService.post<KeyStatusServerResponse>(\r\n            'nPreCredit',\r\n            'api/MortgageLoanStandard/CustomerPages/Fetch-Application-KycStatus',\r\n            {\r\n                applicationNr: applicationNr,\r\n            }\r\n        );\r\n\r\n        if (!result?.IsActive) {\r\n            this.m = {\r\n                applicationNr: applicationNr,\r\n            };\r\n            return;\r\n        }\r\n\r\n        let m: Model = {\r\n            applicationNr: applicationNr,\r\n            kycInitialData: {\r\n                applicationNr: applicationNr,\r\n                isPossibleToAnswer: result.IsPossibleToAnswer,\r\n                isAnswersApproved: result.IsAnswersApproved,\r\n                customers: [],\r\n                onSave: (x) => {\r\n                    let request = {\r\n                        ApplicationNr: applicationNr,\r\n                        Customers: x.customersWithAnswers.map((y) => ({\r\n                            CustomerId: y.customerId,\r\n                            Answers: y.answers,\r\n                        })),\r\n                    };\r\n                    this.apiService\r\n                        .post('nPreCredit', 'api/MortgageLoanStandard/CustomerPages/Answer-Kyc-Questions', request)\r\n                        .then((_) => {\r\n                            this.closeTask();\r\n                        });\r\n                },\r\n            },\r\n        };\r\n\r\n        for (let customer of result.Customers) {\r\n            m.kycInitialData.customers.push({\r\n                ApplicantNr: customer.ApplicantNr,\r\n                CustomerId: customer.CustomerId,\r\n                CustomerBirthDate: customer.CustomerBirthDate,\r\n                CustomerShortName: customer.CustomerShortName,\r\n                LatestKycQuestionsAnswerDate: customer.LatestKycQuestionsAnswerDate,\r\n                LatestQuestions: customer.LatestQuestions,\r\n            });\r\n        }\r\n\r\n        this.m = m;\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    applicationNr: string;\r\n    kycInitialData?: TaskKycQuestionsComponentInitialData;\r\n}\r\n\r\ninterface KeyStatusServerResponse {\r\n    ApplicationNr: string;\r\n    IsActive: boolean;\r\n    IsAccepted: boolean;\r\n    IsPossibleToAnswer: boolean;\r\n    IsAnswersApproved: boolean;\r\n    Customers: {\r\n        CustomerId: number;\r\n        ApplicantNr: number;\r\n        CustomerBirthDate: string;\r\n        CustomerShortName: string;\r\n        LatestKycQuestionsAnswerDate: string;\r\n        LatestQuestions: CustomerPagesKycQuestionAnswerModel[];\r\n    }[];\r\n}\r\n","<ml-shell>\r\n  <div shell-body>\r\n    <task-page\r\n      headerText=\"Kundkännedom\"\r\n      (onClose)=\"closeTask()\"\r\n      [isStandalonePage]=\"true\"\r\n    >\r\n      <ng-container *ngIf=\"m?.kycInitialData\">\r\n        <task-kyc-questions [initialData]=\"m.kycInitialData\">\r\n        </task-kyc-questions>\r\n      </ng-container>\r\n    </task-page>\r\n  </div>\r\n</ml-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\nimport { CustomerPagesApplicationMessagesInitialData } from '../../../shared-components/customer-pages-application-messages/customer-pages-application-messages.component';\r\nimport { CustomerPagesMortgageLoanApiService } from '../../services/customer-pages-ml-api.service';\r\n\r\n@Component({\r\n    selector: 'np-ongoing-application',\r\n    templateUrl: './ongoing-application.component.html',\r\n    styleUrls: ['./ongoing-application.component.scss'],\r\n})\r\nexport class OngoingApplicationComponent implements OnInit {\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private eventService: CustomerPagesEventService,\r\n        private titleService: Title,\r\n        private customerPagesApiService: CustomerPagesMortgageLoanApiService,\r\n        private router: Router\r\n    ) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.reload(this.route.snapshot.params['applicationNr']);\r\n    }\r\n\r\n    private async reload(applicationNr: string) {\r\n        if (this.m?.subs) {\r\n            for (let sub of this.m.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n\r\n        let application = (await this.customerPagesApiService.fetchApplication(applicationNr))?.Application;\r\n        if (!application) {\r\n            return;\r\n        }\r\n\r\n        let objectSummary: { addressText: string } = null;\r\n        if (application.ObjectSummary) {\r\n            let s = application.ObjectSummary;\r\n            let parts = [\r\n                s.AddressStreet,\r\n                s.AddressApartmentNr || s.AddressSeTaxOfficeApartmentNr,\r\n                s.AddressZipCode,\r\n                s.AddressCity,\r\n            ].filter((x) => !!x);\r\n            objectSummary = {\r\n                addressText: parts.join(', '),\r\n            };\r\n        }\r\n\r\n        let routePrefix = ['mortgage-loan-applications/secure/application', applicationNr];\r\n\r\n        let informationTasks: TaskModel[] = [];\r\n        if (application.IsKycTaskActive) {\r\n            informationTasks.push({\r\n                headerText: 'Kundkännedom',\r\n                isTaskAccepted: application.IsKycTaskApproved ? true : null,\r\n                taskRoute: [...routePrefix, 'kyc'],\r\n            });\r\n        }\r\n        let m: Model = {\r\n            applicationNr: applicationNr,\r\n            subs: [],\r\n            messagesInitialData: {\r\n                applicationNr: applicationNr,\r\n                isApplicationActive: application.IsActive,\r\n                isInitiallyExpanded: false,\r\n                isMortgagaeLoan: true,\r\n                isInactiveMessagingAllowed: application.IsInactiveMessagingAllowed,\r\n            },\r\n            isActive: application.IsActive,\r\n            objectSummary: objectSummary,\r\n            decisionSummary: application.LatestAcceptedDecision\r\n                ? {\r\n                      loanAmount: application.LatestAcceptedDecision.LoanAmount,\r\n                  }\r\n                : null,\r\n            informationTasks: informationTasks,\r\n        };\r\n\r\n        m.subs.push(\r\n            this.eventService.applicationEvents.subscribe((x) => {\r\n                if (x?.isReloadApplicationEvent() && this.m?.applicationNr === x.customData) {\r\n                    this.reload(x.customData);\r\n                }\r\n            })\r\n        );\r\n\r\n        this.m = m;\r\n        this.titleService.setTitle('Ansökan ' + applicationNr);\r\n    }\r\n\r\n    getIconClass(isAccepted: boolean, isRejected: boolean) {\r\n        let isOther = !isAccepted && !isRejected;\r\n        return {\r\n            'glyphicon-ok': isAccepted,\r\n            'glyphicon-remove': isRejected,\r\n            'glyphicon-minus': isOther,\r\n            'glyphicon': true,\r\n            'text-success': isAccepted,\r\n            'text-danger': isRejected,\r\n        };\r\n    }\r\n\r\n    onTaskClicked(task: TaskModel, evt?: Event) {\r\n        evt?.preventDefault();\r\n        this.router.navigate(task.taskRoute);\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    applicationNr: string;\r\n    subs: Subscription[];\r\n    messagesInitialData: CustomerPagesApplicationMessagesInitialData;\r\n    isActive: boolean;\r\n    objectSummary?: {\r\n        addressText: string;\r\n    };\r\n    decisionSummary?: {\r\n        loanAmount: number;\r\n    };\r\n    informationTasks: TaskModel[];\r\n}\r\n\r\nclass TaskModel {\r\n    headerText: string;\r\n    isTaskAccepted?: boolean;\r\n    taskRoute: string[];\r\n}\r\n","<ml-shell>\r\n  <div shell-body>\r\n    <div class=\"ml-app-container\" *ngIf=\"m\">\r\n      <div class=\"app-header\">\r\n        <a\r\n          class=\"n-anchor\"\r\n          href=\"#\"\r\n          [routerLink]=\"['/mortgage-loan-applications/secure/overview']\"\r\n          >Ansökningar</a\r\n        >\r\n      </div>\r\n      <div class=\"app-summary\">\r\n        <div *ngIf=\"m.objectSummary\">\r\n          <img src=\"assets/img/house.png\" />\r\n        </div>\r\n        <div *ngIf=\"m.objectSummary\" class=\"mt-1\">\r\n          {{ m.objectSummary.addressText }}\r\n        </div>\r\n        <div *ngIf=\"m.decisionSummary\" class=\"mt-2\">Godkänt belopp</div>\r\n        <div *ngIf=\"m.decisionSummary\">\r\n          <b>{{ m.decisionSummary.loanAmount | number }}</b>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"tasks-container mb-8 mt-6\"\r\n        *ngIf=\"m.informationTasks.length > 0\"\r\n      >\r\n        <h2 class=\"header-light text-center mb-2\">\r\n          Vi behöver mer information\r\n        </h2>\r\n        <div\r\n          class=\"task-toggle\"\r\n          *ngFor=\"let task of m.informationTasks; first as isFirst\"\r\n        >\r\n          <div\r\n            class=\"task-toggle-contracted\"\r\n            [class.non-first-task]=\"isFirst ? null : 'non-first-task'\"\r\n            (click)=\"onTaskClicked(task, $event)\"\r\n          >\r\n            <div class=\"col-sm-1 col-xs-2\">\r\n              <span\r\n                [ngClass]=\"\r\n                  getIconClass(\r\n                    task.isTaskAccepted === true,\r\n                    task.isTaskAccepted === false\r\n                  )\r\n                \"\r\n                class=\"custom-glyph ntech-status-icon\"\r\n              ></span>\r\n            </div>\r\n            <div class=\"col-sm-9 col-xs-8\">\r\n              <p>{{ task.headerText }}</p>\r\n            </div>\r\n            <div class=\"col-xs-2 text-right\">\r\n              <span class=\"glyphicon glyphicon-play\"></span>\r\n            </div>\r\n            <div class=\"clearfix\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"app-messages mt-1\" *ngIf=\"m\">\r\n        <customer-pages-application-messages\r\n          [initialData]=\"m.messagesInitialData\"\r\n        >\r\n        </customer-pages-application-messages>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ml-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { ApplicationsListComponentInitialData } from '../../../shared-components/applications-list/applications-list.component';\r\nimport { CustomerPagesMortgageLoanApiService } from '../../services/customer-pages-ml-api.service';\r\n\r\n@Component({\r\n    selector: 'np-overview-ml',\r\n    templateUrl: './overview.component.html',\r\n    styles: [],\r\n})\r\nexport class OverviewComponent implements OnInit {\r\n    constructor(\r\n        private titleService: Title,\r\n        private apiService: CustomerPagesMortgageLoanApiService,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.titleService.setTitle('Ansökningar');\r\n        this.reload();\r\n    }\r\n\r\n    reload() {\r\n        this.apiService.fetchApplications().then((x) => {\r\n            let m: Model = {\r\n                applicationsListData: {\r\n                    isMortgageLoan: true,\r\n                    applications: x.Applications,\r\n                    sharedApiService: this.sharedApiService,\r\n                },\r\n            };\r\n            this.m = m;\r\n        });\r\n    }\r\n}\r\n\r\nclass Model {\r\n    applicationsListData: ApplicationsListComponentInitialData;\r\n}\r\n","<ml-shell>\r\n  <div shell-body>\r\n    <ng-container *ngIf=\"m\">\r\n      <applications-list [initialData]=\"m.applicationsListData\">\r\n      </applications-list>\r\n    </ng-container>\r\n  </div>\r\n</ml-shell>\r\n","import { Injectable } from '@angular/core';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\nimport { SharedApplicationBasicInfoModel } from '../../shared-components/applications-list/applications-list.component';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesMortgageLoanApiService {\r\n    constructor(private apiService: CustomerPagesApiService) {}\r\n\r\n    public shared() {\r\n        return this.apiService;\r\n    }\r\n\r\n    public createApplication(application: MlApplicationModel): Promise<{\r\n        ApplicationNr: string;\r\n    }> {\r\n        return this.apiService.postLocal('/api/embedded-customerpages/create-mortgageloan-application', application);\r\n    }\r\n\r\n    /*\r\n    A person has properties like: civicRegNr, email, phone\r\n     */\r\n    public generateTestPersons(\r\n        nrOfApplicants: number,\r\n        isAccepted: boolean,\r\n        useCommonAddress: boolean\r\n    ): Promise<{\r\n        Persons: { Properties: any }[];\r\n    }> {\r\n        return this.apiService.post('nTest', 'Api/TestPerson/GetOrGenerate', {\r\n            persons: nrOfApplicants === 1 ? [{ isAccepted }] : [{ isAccepted }, { isAccepted }],\r\n            useCommonAddress: useCommonAddress,\r\n        });\r\n    }\r\n\r\n    public fetchApplications(): Promise<{\r\n        Applications: SharedApplicationBasicInfoModel[];\r\n    }> {\r\n        return this.apiService.post('nPreCredit', 'api/MortgageLoanStandard/CustomerPages/Fetch-Applications', {});\r\n    }\r\n\r\n    public fetchApplication(applicationNr: string): Promise<{ Application: ExtendedMlApplicationModel }> {\r\n        return this.apiService.post('nPreCredit', 'api/MortgageLoanStandard/CustomerPages/Fetch-Application', {\r\n            applicationNr,\r\n        });\r\n    }\r\n}\r\n\r\nexport interface ExtendedMlApplicationModel extends SharedApplicationBasicInfoModel {\r\n    LatestAcceptedDecision?: {\r\n        IsFinal: boolean;\r\n        LoanAmount: number;\r\n    };\r\n    ObjectSummary?: {\r\n        IsApartment: boolean;\r\n        AddressStreet: string;\r\n        AddressZipCode: string;\r\n        AddressCity: string;\r\n        AddressMunicipality: string;\r\n        AddressApartmentNr: string;\r\n        AddressSeTaxOfficeApartmentNr: string;\r\n    };\r\n    IsKycTaskActive: boolean;\r\n    IsKycTaskApproved: boolean;\r\n}\r\n\r\nexport interface MlApplicationModel {\r\n    Applicants?: {\r\n        CivicRegNr: string;\r\n        FirstName?: string;\r\n        LastName?: string;\r\n        Email?: string;\r\n        Phone?: string;\r\n        IsPartOfTheHousehold?: boolean;\r\n        IncomePerMonthAmount?: number;\r\n        Employment?: string;\r\n        EmployedSince?: string;\r\n        EmployedTo?: string;\r\n        Employer?: string;\r\n        EmployerPhone?: string;\r\n        HasConsentedToCreditReport?: boolean;\r\n    }[];\r\n    Purchase?: {\r\n        ObjectPriceAmount: number;\r\n        OwnSavingsAmount: number;\r\n    };\r\n    ChangeExistingLoan?: {\r\n        ObjectValueAmount: number;\r\n        PaidToCustomerAmount: number;\r\n        MortgageLoansToSettle: {\r\n            BankName?: string;\r\n            InterestRatePercent?: number;\r\n            CurrentDebtAmount: number;\r\n            CurrentMonthlyAmortizationAmount?: number;\r\n            ShouldBeSettled: boolean;\r\n        }[];\r\n    };\r\n    ObjectAddressStreet?: string;\r\n    ObjectAddressZipcode?: string;\r\n    ObjectAddressCity?: string;\r\n    ObjectAddressMunicipality?: string;\r\n\r\n    ObjectOtherMonthlyCostsAmount?: number;\r\n    ObjectLivingArea?: number;\r\n    ObjectTypeCode?: string;\r\n    ObjectMonthlyFeeAmount?: number;\r\n\r\n    SeBrfApartmentNr?: string;\r\n\r\n    OutgoingChildSupportAmount?: number;\r\n    IncomingChildSupportAmount?: number;\r\n    ChildBenefitAmount?: number;\r\n\r\n    HouseholdChildren?: {\r\n        Exists?: boolean;\r\n        AgeInYears?: number;\r\n        SharedCustody?: boolean;\r\n    }[];\r\n\r\n    LoansToSettle?: {\r\n        CurrentDebtAmount: number;\r\n        LoanType: string; // typeof enum CreditStandardOtherLoanType\r\n        MonthlyCostAmount?: number;\r\n    }[];\r\n}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerMessagesHelper } from '../../../shared-components/customer-messages-helper';\r\n\r\nexport enum MyPagesMenuItemCode {\r\n    Overview = 'overview',\r\n    Loans = 'loans',\r\n    UnsecuredLoanApplications = 'unsecuredLoanApplications',\r\n    MortgageLoanApplications = 'mortgageLoanApplications',\r\n    SavingsAccounts = 'savingsAccounts',\r\n    Documents = 'documents',\r\n    SecureMessage = 'secureMessages',\r\n    MyData = 'myData',\r\n}\r\n\r\n@Component({\r\n    selector: 'mypages-shell',\r\n    templateUrl: './mypages-shell.component.html',\r\n    styles: [],\r\n})\r\nexport class MypagesShellComponent implements OnInit {\r\n    constructor(\r\n        public config: CustomerPagesConfigService,\r\n        private titleService: Title,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    @Input()\r\n    public initialData: MypagesShellComponentInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.titleService.setTitle('Mina sidor');\r\n\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let m = new Model();\r\n\r\n        m.hasNoCustomerRelation = this.initialData.hasNoCustomerRelation;\r\n        m.addMenuItem(MyPagesMenuItemCode.Overview, 'Översikt', ['/my/overview']);\r\n        if (\r\n            this.config.isAnyFeatureEnabled([\r\n                'ntech.feature.unsecuredloans.standard',\r\n                'ntech.feature.mortgageloans.standard',\r\n            ])\r\n        ) {\r\n            m.addMenuItem(MyPagesMenuItemCode.Loans, 'Lån', ['/my/loans']);\r\n        }\r\n        if (this.config.isAnyFeatureEnabled(['ntech.feature.savingsstandard'])) {\r\n            m.addTestMenuItem(MyPagesMenuItemCode.SavingsAccounts, 'Sparkonton');\r\n        }\r\n        m.addMenuItem(MyPagesMenuItemCode.Documents, 'Dokument', ['/my/documents']);\r\n        m.addMenuItem(MyPagesMenuItemCode.SecureMessage, 'Meddelanden', ['/my/messages']);\r\n        m.addMenuItem(MyPagesMenuItemCode.MyData, 'Mina uppgifter', ['/my/data']);\r\n\r\n        m.setActiveMenuItem(this.initialData.activeMenuItemCode);\r\n\r\n        this.refreshUnreadMessagesCount(m).then((_) => {\r\n            this.m = m;\r\n        });\r\n    }\r\n\r\n    private refreshUnreadMessagesCount(m: Model) {\r\n        if (this.initialData.activeMenuItemCode == MyPagesMenuItemCode.SecureMessage) {\r\n            //No reason to load this for the messages page\r\n            //since we will mark everything as read as soon as the customer enters the page\r\n            return new Promise<void>((resolve) => {\r\n                m.unreadMessagesCount.next(0);\r\n                resolve();\r\n            });\r\n        } else {\r\n            let messagesHelper = new CustomerMessagesHelper(null, this.config, this.sharedApiService);\r\n            return messagesHelper.getSecureMessagesUnreadByCustomerCount().then((x) => {\r\n                m.unreadMessagesCount.next(x.UnreadCount);\r\n            });\r\n        }\r\n    }\r\n\r\n    toggleMobileMenu(evt?: Event) {\r\n        evt?.preventDefault();\r\n        this.m.isMobileMenuVisible = !this.m.isMobileMenuVisible;\r\n    }\r\n\r\n    logOut(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        document.location.href = this.config.config()?.LogoutUrl;\r\n    }\r\n}\r\n\r\nexport class MypagesShellComponentInitialData {\r\n    activeMenuItemCode: MyPagesMenuItemCode;\r\n    hasNoCustomerRelation?: boolean;\r\n}\r\n\r\nclass Model {\r\n    constructor() {\r\n        this.menuItems = [];\r\n        this.isMobileMenuVisible = false;\r\n        this.unreadMessagesCount = new BehaviorSubject<number>(0);\r\n    }\r\n\r\n    public unreadMessagesCount: BehaviorSubject<number>;\r\n\r\n    menuItems: MenuItemModel[];\r\n    isMobileMenuVisible: boolean;\r\n    hasNoCustomerRelation: boolean;\r\n\r\n    addMenuItem(code: MyPagesMenuItemCode, displayName: string, routerLink: string[]) {\r\n        let i = new MenuItemModel(code, displayName, routerLink, false);\r\n        this.menuItems.push(i);\r\n        return i;\r\n    }\r\n\r\n    addTestMenuItem(code: MyPagesMenuItemCode, displayName: string) {\r\n        let routerLink = [`/my/menu-test/${code}`];\r\n        return this.addMenuItem(code, displayName, routerLink);\r\n    }\r\n\r\n    setActiveMenuItem(code: MyPagesMenuItemCode) {\r\n        for (let m of this.menuItems) {\r\n            m.isActive = m.code === code;\r\n        }\r\n    }\r\n}\r\n\r\nclass MenuItemModel {\r\n    constructor(\r\n        public code: MyPagesMenuItemCode,\r\n        public codeDisplayName: string,\r\n        public routerLink: string[],\r\n        public isActive: boolean\r\n    ) {}\r\n\r\n    public isVisible(hideMessages: boolean, onlyMessages: boolean) {\r\n        if (hideMessages && this.code == 'secureMessages') {\r\n            return false;\r\n        }\r\n        if (onlyMessages && this.code != 'secureMessages') {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","<div *ngIf=\"m?.hasNoCustomerRelation\">\r\n  <customerpages-shell\r\n    [initialData]=\"{\r\n      logoRouterLink: ['/my/overview'],\r\n      skipBodyLayout: true,\r\n      wideNavigation: true\r\n    }\"\r\n  >\r\n    <ng-container navigation-area *ngIf=\"m\">\r\n      <ul class=\"navigation-list\">\r\n        <li>\r\n          <a\r\n            *ngIf=\"config?.isAuthenticated()\"\r\n            (click)=\"logOut($event)\"\r\n            href=\"#\"\r\n            class=\"n-direct-btn n-white-btn\"\r\n            >Logga ut</a\r\n          >\r\n        </li>\r\n      </ul>\r\n    </ng-container>\r\n  </customerpages-shell>\r\n  <div class=\"align-center\">\r\n    <p class=\"text-center\">\r\n      Du verkar inte ha någon aktiv eller avslutad kundrelation med oss.\r\n    </p>\r\n  </div>\r\n</div>\r\n\r\n<customerpages-shell\r\n  *ngIf=\"!m?.hasNoCustomerRelation\"\r\n  [initialData]=\"{\r\n    logoRouterLink: ['/my/overview'],\r\n    skipBodyLayout: true,\r\n    wideNavigation: true\r\n  }\"\r\n>\r\n  <ng-container navigation-area *ngIf=\"m\">\r\n    <ul class=\"nav navbar-nav navbar-right mobil-menu\">\r\n      <ng-container\r\n        *ngTemplateOutlet=\"menuItems; context: { onlyMessages: true }\"\r\n      ></ng-container>\r\n      <li class=\"dropdown\">\r\n        <a\r\n          href=\"#\"\r\n          class=\"dropdown-toggle n-anchor\"\r\n          (click)=\"toggleMobileMenu($event)\"\r\n          >Meny <span class=\"caret\"></span\r\n        ></a>\r\n        <ul class=\"dropdown-menu\" *ngIf=\"m.isMobileMenuVisible\">\r\n          <ng-container\r\n            *ngTemplateOutlet=\"menuItems; context: { hideMessages: true }\"\r\n          ></ng-container>\r\n          <li class=\"divider\"></li>\r\n          <li class=\"text-center pb-2 pt-1\">\r\n            <button class=\"n-direct-btn n-white-btn\">Logga ut</button>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"navigation-list hide-on-mobile\">\r\n      <li>\r\n        <a\r\n          *ngIf=\"config?.isAuthenticated()\"\r\n          (click)=\"logOut($event)\"\r\n          href=\"#\"\r\n          class=\"n-direct-btn n-white-btn\"\r\n          >Logga ut</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </ng-container>\r\n  <div class=\"flex-content-area\" shell-body *ngIf=\"m\">\r\n    <div class=\"desktop-menu\">\r\n      <div class=\"menu-list pt-3\">\r\n        <ul>\r\n          <ng-container *ngTemplateOutlet=\"menuItems\"></ng-container>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"left\"></div>\r\n    <div class=\"content-area\">\r\n      <ng-content select=\"[active-tab]\"></ng-content>\r\n    </div>\r\n    <div class=\"right\"></div>\r\n  </div>\r\n</customerpages-shell>\r\n\r\n<ng-template\r\n  #menuItems\r\n  let-hideMessages=\"hideMessages\"\r\n  let-onlyMessages=\"onlyMessages\"\r\n>\r\n  <ng-container *ngFor=\"let i of m.menuItems\">\r\n    <li *ngIf=\"i.isVisible(hideMessages, onlyMessages)\">\r\n      <a [class.active]=\"i.isActive\" [routerLink]=\"i.routerLink\">\r\n        <span>{{ i.codeDisplayName }}</span>\r\n        <span\r\n          *ngIf=\"\r\n            i.code === 'secureMessages' &&\r\n            m.unreadMessagesCount.value &&\r\n            m.unreadMessagesCount.value > 0\r\n          \"\r\n          >&nbsp;({{ m.unreadMessagesCount.value }})</span\r\n        >\r\n      </a>\r\n    </li>\r\n  </ng-container>\r\n</ng-template>\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { NTechMath } from 'src/app/common-services/ntech.math';\r\nimport { CreditModel, MyPagesApiService } from '../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'unpaid-notifications',\r\n    templateUrl: './unpaid-notifications.component.html',\r\n    styles: [],\r\n})\r\nexport class UnpaidNotificationsComponent implements OnInit {\r\n    constructor(private apiService: MyPagesApiService) {}\r\n\r\n    ngOnInit(): void {}\r\n\r\n    @Input()\r\n    public initialData: UnpaidNotificationsComponentInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let credits = this.initialData.credits;\r\n\r\n        let nextNotificationDate: string = null;\r\n        let creditsWithFutureNotifications = credits.filter((x) => !!x.NextNotificationDate);\r\n        if (creditsWithFutureNotifications.length > 0) {\r\n            nextNotificationDate = NTechMath.orderBy(\r\n                creditsWithFutureNotifications,\r\n                (x) => moment(x.NextNotificationDate).valueOf(),\r\n                true\r\n            )[0].NextNotificationDate;\r\n        }\r\n\r\n        let m: Model = {\r\n            isOverview: this.initialData.isOverview,\r\n            nextNotificationDate: nextNotificationDate,\r\n            notifications: [],\r\n        };\r\n\r\n        for (let c of credits) {\r\n            for (let n of c.Notifications.filter((y) => y.IsOpen)) {\r\n                m.notifications.push({\r\n                    notificationId: n.NotificationId,\r\n                    dueDate: n.DueDate,\r\n                    balanceAmount: n.BalanceAmount,\r\n                    isOverdue: n.IsOverdue,\r\n                    isExpanded: false,\r\n                    directDebit: c.IsDirectDebitActive,\r\n                    bankGiro: n.PaymentBankGiroNrDisplay,\r\n                    ocrPaymentReference: n.OcrPaymentReferenceDisplay,\r\n                    creditNr: c.CreditNr,\r\n                    notificationUrl: n.PdfArchiveKey\r\n                        ? this.apiService.shared().getArchiveDocumentUrl(n.PdfArchiveKey, true)\r\n                        : null,\r\n                    reminders: (n.Reminders ?? []).map((y) => {\r\n                        return {\r\n                            nr: y.ReminderNumber,\r\n                            url: y.ArchiveKey\r\n                                ? this.apiService.shared().getArchiveDocumentUrl(y.ArchiveKey, true)\r\n                                : null,\r\n                        };\r\n                    }),\r\n                });\r\n            }\r\n        }\r\n        m.notifications = NTechMath.orderBy(m.notifications, (x) => x.notificationId);\r\n\r\n        this.m = m;\r\n    }\r\n}\r\n\r\nexport class UnpaidNotificationsComponentInitialData {\r\n    isOverview: boolean;\r\n    credits: CreditModel[];\r\n}\r\n\r\nclass Model {\r\n    isOverview: boolean;\r\n    nextNotificationDate: string;\r\n    notifications: {\r\n        notificationId: number;\r\n        isExpanded: boolean;\r\n        dueDate: string;\r\n        isOverdue: boolean;\r\n        balanceAmount: number;\r\n        directDebit: boolean;\r\n        bankGiro: string;\r\n        ocrPaymentReference: string;\r\n        creditNr: string;\r\n        notificationUrl: string;\r\n        reminders: {\r\n            nr: number;\r\n            url: string;\r\n        }[];\r\n    }[];\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n    <p *ngIf=\"m.notifications.length == 0\">\r\n        <span *ngIf=\"m.nextNotificationDate\">Du har inga obetalda avier, nästa avisering sker {{m.nextNotificationDate | date:'yyyy-MM-dd'}}.</span>\r\n        <span *ngIf=\"!m.nextNotificationDate\">Du har inga obetalda avier.</span>\r\n    </p>\r\n    <div class=\"task-toggle-list\" *ngIf=\"m.notifications.length > 0\">\r\n        <div class=\"task-toggle\" *ngFor=\"let n of m.notifications\">\r\n            <div [ngClass]=\"{ 'task-toggle-expanded': n.isExpanded, 'task-toggle-contracted': !n.isExpanded }\" (click)=\"n.isExpanded = !n.isExpanded\">\r\n                <div class=\"col-xs-7 remove-bootstrap-gutter\">\r\n                    <div class=\"pull-left pr-2\">\r\n                        <p><span class=\"hide-on-mobile\">Förfallodag</span> {{n.dueDate | date:'yyyy-MM-dd'}}</p>\r\n                    </div>\r\n                    <div class=\"pull-left\">\r\n                        <div *ngIf=\"n.isOverdue\" class=\"alert-icon\">!</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-xs-5 text-right\"><span class=\"mr-1\">{{n.balanceAmount | number:'1.0-2'}} kr</span><span [ngClass]=\"{ 'glyphicon-chevron-down': n.isExpanded, 'glyphicon-plus': !n.isExpanded }\" class=\"glyphicon\"></span></div>\r\n                <div class=\"clearfix\"></div>\r\n            </div>\r\n            <div class=\"pb-3\" *ngIf=\"n.isExpanded\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-6 col-xs-12\">\r\n                        <div class=\"form-horizontal\">\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label col-xs-6\">Autogiro</label>\r\n                                <p class=\"form-control-static col-xs-6\">{{n.directDebit ? 'Ja' : 'Nej'}}</p>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label col-xs-6\">Bankgiro</label>\r\n                                <p class=\"form-control-static col-xs-6\">{{n.bankGiro}}</p>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label col-xs-6\">OCR</label>\r\n                                <p class=\"form-control-static col-xs-6\">{{n.ocrPaymentReference}}</p>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label col-xs-6\">Kvar att betala</label>\r\n                                <p class=\"form-control-static col-xs-6\">{{n.balanceAmount | number:'1.0-2'}} kr</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-sm-6 col-xs-12\">\r\n                        <div class=\"form-horizontal\">\r\n                            <div class=\"form-group\" *ngIf=\"m.isOverview\">\r\n                                <label class=\"control-label col-xs-6\">Lån</label>\r\n                                <p class=\"form-control-static col-xs-6\">{{n.creditNr}}</p>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label class=\"control-label col-xs-6\">Avi</label>\r\n                                <p class=\"form-control-static col-xs-6\"><a *ngIf=\"n.notificationUrl\" [href]=\"n.notificationUrl\" target=\"_blank\" class=\"n-direct-btn n-white-btn\">PDF</a></p>\r\n                            </div>\r\n                            <div class=\"form-group\" *ngFor=\"let r of n.reminders\">\r\n                                <label class=\"control-label col-xs-6\">Påminnelse {{r.nr}}</label>\r\n                                <p class=\"form-control-static col-xs-6\"><a *ngIf=\"r.url\" [href]=\"r.url\" target=\"_blank\" class=\"n-direct-btn n-white-btn\">PDF</a></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <p *ngIf=\"n.directDebit\" class=\"pt-3\">Vi kommer att göra tre autogiroförsök fr.o.m. förfallodatum och tre bankdagar framåt. Om samtliga dragningsförsök misslyckats vänligen gör en inbetalning till bankgirot med ovan OCR.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CustomerPagesAuthGuard } from '../common-services/customer-pages.auth.guard';\r\nimport { MyContactinfoComponent } from './pages/my-data/my-contactinfo/my-contactinfo.component';\r\nimport { MyDataComponent } from './pages/my-data/my-data.component';\r\nimport { MyDocumentsComponent } from './pages/my-documents/my-documents.component';\r\nimport { MyLoansComponent } from './pages/my-loans/my-loans.component';\r\nimport { MyMessagesComponent } from './pages/my-messages/my-messages.component';\r\nimport { MypagesOverviewComponent } from './pages/mypages-overview/mypages-overview.component';\r\nimport { MypagesTestpageComponent } from './pages/mypages-testpage/mypages-testpage.component';\r\nimport { LoanComponent } from './pages/loan/loan.component';\r\n\r\nconst alwaysActiveRoutes: Routes = [\r\n    {\r\n        path: 'my',\r\n        children: [\r\n            { path: 'overview', component: MypagesOverviewComponent },\r\n            { path: 'data', component: MyDataComponent },\r\n            { path: 'data/contactinfo', component: MyContactinfoComponent },\r\n            { path: 'loans', component: MyLoansComponent },\r\n            { path: 'documents', component: MyDocumentsComponent },\r\n            { path: 'messages', component: MyMessagesComponent },\r\n            { path: 'menu-test/:menuCode', component: MypagesTestpageComponent },\r\n        ],\r\n        resolve: {},\r\n        data: {\r\n            requireFeatures: [],\r\n            loginTargetName: 'StandardOverview',\r\n            requiredUserRole: 'EmbeddedCustomerPagesStandardCustomer',\r\n        },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n];\r\n\r\nconst loansOnlyRoutes: Routes = [\r\n    {\r\n        path: 'my/sl',\r\n        children: [{ path: 'loan/:creditNr', component: LoanComponent }],\r\n        resolve: {},\r\n        data: {\r\n            requireAnyFeature: ['ntech.feature.unsecuredloans.standard', 'ntech.feature.mortgageloans.standard'],\r\n            loginTargetName: 'StandardOverview',\r\n            requiredUserRole: 'EmbeddedCustomerPagesStandardCustomer',\r\n        },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n];\r\n\r\nlet routes = [...alwaysActiveRoutes, ...loansOnlyRoutes];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class MypagesRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MypagesRoutingModule } from './mypages-routing.module';\r\nimport { MypagesOverviewComponent } from './pages/mypages-overview/mypages-overview.component';\r\nimport { SharedComponentsModule } from '../shared-components/shared-components.module';\r\nimport { MypagesTestpageComponent } from './pages/mypages-testpage/mypages-testpage.component';\r\nimport { MypagesOverviewLoansComponent } from './pages/mypages-overview/mypages-overview-loans/mypages-overview-loans.component';\r\nimport { MyDataComponent } from './pages/my-data/my-data.component';\r\nimport { MyContactinfoComponent } from './pages/my-data/my-contactinfo/my-contactinfo.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { MyLoansComponent } from './pages/my-loans/my-loans.component';\r\nimport { LoanComponent } from './pages/loan/loan.component';\r\nimport { UnpaidNotificationsComponent } from './components/unpaid-notifications/unpaid-notifications.component';\r\nimport { UlAmortizationPlanComponent } from './pages/loan/ul-amortization-plan/ul-amortization-plan.component';\r\nimport { InterestHistoryComponent } from './pages/loan/interest-history/interest-history.component';\r\nimport { CapitalTransactionHistoryComponent } from './pages/loan/capital-transaction-history/capital-transaction-history.component';\r\nimport { MyDocumentsComponent } from './pages/my-documents/my-documents.component';\r\nimport { MyMessagesComponent } from './pages/my-messages/my-messages.component';\r\nimport { QuillModule } from 'ngx-quill';\r\nimport { MypagesShellComponent } from './components/mypages-shell/mypages-shell.component';\r\nimport { MlAmortizationPlanComponent } from './pages/loan/ml-amortization-plan/ml-amortization-plan.component';\r\nimport { NtechComponentsModule } from 'projects/ntech-components/src/public-api';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        MypagesOverviewComponent,\r\n        MypagesTestpageComponent,\r\n        MypagesOverviewLoansComponent,\r\n        MyDataComponent,\r\n        MyContactinfoComponent,\r\n        MyLoansComponent,\r\n        LoanComponent,\r\n        UnpaidNotificationsComponent,\r\n        UlAmortizationPlanComponent,\r\n        MlAmortizationPlanComponent,\r\n        InterestHistoryComponent,\r\n        CapitalTransactionHistoryComponent,\r\n        MyDocumentsComponent,\r\n        MyMessagesComponent,\r\n        MypagesShellComponent,\r\n    ],\r\n    imports: [CommonModule, SharedComponentsModule, MypagesRoutingModule, ReactiveFormsModule, QuillModule.forRoot(), NtechComponentsModule],\r\n})\r\nexport class MypagesModule {}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { CapitalTransactionHistory } from '../../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'capital-transaction-history',\r\n    templateUrl: './capital-transaction-history.component.html',\r\n    styles: ['.transaction-date { display: block; font-size: small; padding-top: 5px; }'],\r\n})\r\nexport class CapitalTransactionHistoryComponent implements OnInit {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public capitalTransactionHistory: CapitalTransactionHistory;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.capitalTransactionHistory) {\r\n            return;\r\n        }\r\n\r\n        this.m = {\r\n            items: (this.capitalTransactionHistory.Transactions ?? []).map((x) => {\r\n                return {\r\n                    date: x.TransactionDate,\r\n                    amount: x.Amount,\r\n                    description: this.getDescription(x.BusinessEventType, x.BusinessEventRoleCode, x.SubAccountCode),\r\n                };\r\n            }),\r\n        };\r\n        this.showMoreItems(null);\r\n    }\r\n\r\n    private getDescription(businessEventType: string, businessEventRoleCode: string, subAccountCode: string) {\r\n        switch (businessEventType) {\r\n            case 'NewIncomingPaymentFile':\r\n                return 'Amortering';\r\n            case 'PlacedUnplacedIncomingPayment':\r\n                return 'Amortering';\r\n            case 'NewCredit':\r\n                switch (subAccountCode) {\r\n                    case 'initialFeeWithheld':\r\n                        return 'Uppläggningsavgift';\r\n                    case 'settledLoan':\r\n                        return 'Löst lån';\r\n                    case 'paidToCustomer':\r\n                        return 'Utbetalning';\r\n                    default:\r\n                        return 'Lån';\r\n                }\r\n            case 'NewMortgageLoan':\r\n                return 'Lån';\r\n            default:\r\n                return businessEventType;\r\n        }\r\n    }\r\n\r\n    hasMoreItems() {\r\n        return this.m.items.length > 0 && this.m.items.findIndex((x) => !x.isVisible) >= 0;\r\n    }\r\n\r\n    showMoreItems(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let countShown = 0;\r\n        for (let i of this.m.items) {\r\n            if (!i.isVisible) {\r\n                i.isVisible = true;\r\n                countShown++;\r\n            }\r\n            if (countShown >= 5) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    items: {\r\n        date: string;\r\n        amount: number;\r\n        description: string;\r\n        isVisible?: boolean;\r\n    }[];\r\n}\r\n","<div *ngIf=\"m\">\r\n  <table class=\"table lined-table\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"col-xs-6\">Datum</th>\r\n        <th class=\"col-xs-6 text-right\">Transaktion</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <ng-container *ngFor=\"let r of m.items\">\r\n        <tr *ngIf=\"r.isVisible\">\r\n          <td class=\"col-xs-6\">\r\n            {{ r.description }}\r\n            <br />\r\n            <span class=\"transaction-date\">{{\r\n              r.date | date: \"yyyy-MM-dd\"\r\n            }}</span>\r\n          </td>\r\n\r\n          <td class=\"col-xs-6 text-right\">{{ r.amount | currency }}</td>\r\n        </tr>\r\n      </ng-container>\r\n    </tbody>\r\n  </table>\r\n  <div class=\"text-center pt-3\" *ngIf=\"hasMoreItems()\">\r\n    <a\r\n      *ngIf=\"hasMoreItems()\"\r\n      (click)=\"showMoreItems($event)\"\r\n      href=\"\"\r\n      class=\"n-anchor\"\r\n      >Visa fler</a\r\n    >\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { InterestHistory } from '../../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'interest-history',\r\n    templateUrl: './interest-history.component.html',\r\n    styles: [],\r\n})\r\nexport class InterestHistoryComponent implements OnInit {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public interestHistory: InterestHistory;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.interestHistory) {\r\n            return;\r\n        }\r\n\r\n        this.m = {\r\n            items: (this.interestHistory.InterestChanges ?? []).map((x) => {\r\n                return { date: x.TransactionDate, percent: x.InterestRatePercent };\r\n            }),\r\n        };\r\n        this.showMoreInterestHistoryItems(null);\r\n    }\r\n\r\n    hasMoreInterestHistoryItems() {\r\n        return this.m.items.length > 0 && this.m.items.findIndex((x) => !x.isVisible) >= 0;\r\n    }\r\n\r\n    showMoreInterestHistoryItems(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let countShown = 0;\r\n        for (let i of this.m.items) {\r\n            if (!i.isVisible) {\r\n                i.isVisible = true;\r\n                countShown++;\r\n            }\r\n            if (countShown >= 5) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    items: { date: string; percent: number; isVisible?: boolean }[];\r\n}\r\n","<div *ngIf=\"m\">\r\n  <table class=\"table lined-table\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"col-xs-6\">Datum</th>\r\n        <th class=\"col-xs-6 text-right\">Ränta</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <ng-container *ngFor=\"let r of m.items\">\r\n        <tr *ngIf=\"r.isVisible\">\r\n          <td class=\"col-xs-6\">{{ r.date | date: \"yyyy-MM-dd\" }}</td>\r\n          <td class=\"col-xs-6 text-right\">\r\n            {{ r.percent | number: \"1.0-4\" }} %\r\n          </td>\r\n        </tr>\r\n      </ng-container>\r\n    </tbody>\r\n  </table>\r\n  <div class=\"text-center pt-3\" *ngIf=\"hasMoreInterestHistoryItems()\">\r\n    <a\r\n      *ngIf=\"hasMoreInterestHistoryItems()\"\r\n      (click)=\"showMoreInterestHistoryItems($event)\"\r\n      href=\"\"\r\n      class=\"n-anchor\"\r\n      >Visa fler</a\r\n    >\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, TemplateRef } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { MlSeAmortizationBasisModel } from 'projects/ntech-components/src/public-api';\r\nimport { createMortgagePropertyIdFromCollateralItems } from 'src/app/common-services/ml-standard-functions';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\nimport { UnpaidNotificationsComponentInitialData } from '../../components/unpaid-notifications/unpaid-notifications.component';\r\n\r\nimport {\r\n    CapitalTransactionHistory,\r\n    CreditModel,\r\n    InterestHistory,\r\n    LoanAmortizationPlan,\r\n    MyPagesApiService,\r\n} from '../../services/mypages-api.service';\r\nimport { MlAmortizationPlanInitialData } from './ml-amortization-plan/ml-amortization-plan.component';\r\n\r\n@Component({\r\n    selector: 'np-loan',\r\n    templateUrl: './loan.component.html',\r\n    styleUrls: ['./loan.component.scss'],\r\n})\r\nexport class LoanComponent implements OnInit {\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private apiService: MyPagesApiService,\r\n        private modalService: BsModalService,\r\n        private config: CustomerPagesConfigService\r\n    ) {}\r\n\r\n    public m: Model;\r\n    public modalRef: BsModalRef;\r\n\r\n    ngOnInit(): void {\r\n        this.reload(this.route.snapshot.params['creditNr']);\r\n    }\r\n\r\n    private reload(creditNr: string) {\r\n        this.m = null;\r\n\r\n        this.apiService.fetchCredits(true).then((credits) => {\r\n            let credit = credits.ActiveCredits.find((y) => y.CreditNr == creditNr);\r\n            if (!credit) {\r\n                this.m = new Model(creditNr, this.config.isNTechTest());\r\n                this.m.errorMessage = 'Lånet finns inte';\r\n                return;\r\n            }\r\n            this.apiService.fetchLoanAmortizationPlan(creditNr).then((amortizationPlan) => {\r\n                let m = new Model(creditNr, this.config.isNTechTest());\r\n\r\n                m.credit = credit;\r\n                m.unpaidNotificationsInitialData = {\r\n                    isOverview: false,\r\n                    credits: [credit],\r\n                };\r\n                m.amortizationBasisSeData = amortizationPlan.AmortizationBasis;\r\n                m.paidNotifications = credit.Notifications.filter((x) => !x.IsOpen).map((x) => {\r\n                    return {\r\n                        isVisible: false,\r\n                        paidDate: x.ClosedDate,\r\n                        initialAmount: x.InitialAmount,\r\n                    };\r\n                });\r\n\r\n                m.showMorePaidNotifications();\r\n\r\n                const isMl = this.config.isMortgageLoansStandardEnabled();\r\n                m.amortizationPlan = amortizationPlan;\r\n                m.amortizationBasisPdfUrl = isMl\r\n                    ? '/mortgageloans/api/credit/fetch-amortizationbasis?creditNr=' + creditNr\r\n                    : '';\r\n\r\n                this.m = m;\r\n            });\r\n        });\r\n    }\r\n\r\n    public getMonthlyPayment() {\r\n        let p = this.m.amortizationPlan;\r\n        return p.UsesAnnuities ? p.AnnuityAmount : p.FixedMonthlyPaymentAmount;\r\n    }\r\n\r\n    public showInterestHistoryPopup(popupTemplate: TemplateRef<any>, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        this.apiService.fetchUnsecuredLoansInterestHistory(this.m.credit.CreditNr).then((x) => {\r\n            this.m.popup = {\r\n                title: 'Räntehistorik',\r\n                interestHistory: x,\r\n            };\r\n\r\n            this.showPopup(popupTemplate);\r\n        });\r\n    }\r\n\r\n    public showCapitalTransactionsPopup(popupTemplate: TemplateRef<any>, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        this.apiService.fetchCapitalTransactionHistory(this.m.credit.CreditNr).then((x) => {\r\n            this.m.popup = {\r\n                title: 'Kapitalskuld',\r\n                capitalTransactionHistory: x,\r\n            };\r\n\r\n            this.showPopup(popupTemplate);\r\n        });\r\n    }\r\n\r\n    public showAmortizationPlanPopup(popupTemplate: TemplateRef<any>, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let isMl = this.config.isMortgageLoansStandardEnabled();\r\n        this.m.popup = {\r\n            title: 'Amorteringsplan',\r\n            ulAmortizationPlan: isMl ? null : this.m.amortizationPlan,\r\n            mlAmortizationPlanData: !isMl\r\n                ? null\r\n                : {\r\n                      highlightCreditNr: this.m.credit.CreditNr,\r\n                      amortizationPlan: this.m.amortizationPlan,\r\n                      amortizationBasisSeData: this.m.amortizationBasisSeData,\r\n                  },\r\n        };\r\n\r\n        this.showPopup(popupTemplate);\r\n    }\r\n\r\n    public formatFixedInterestMonths(monthCount: number) {\r\n        return monthCount % 12 === 0 ? `${monthCount / 12} år` : `${monthCount} månader`;\r\n    }\r\n\r\n    public getMlPropertyId() {\r\n        if (!this.m?.credit?.MortgageLoan) {\r\n            return '';\r\n        }\r\n        return createMortgagePropertyIdFromCollateralItems(\r\n            (x) => this.m.credit.MortgageLoan.CollateralStringItems[x],\r\n            true\r\n        );\r\n    }\r\n\r\n    private showPopup(popupTemplate: TemplateRef<any>) {\r\n        this.modalRef = this.modalService.show(popupTemplate, { class: 'modal-xl', ignoreBackdropClick: true });\r\n    }\r\n\r\n    public getNextFutureNotificationAmount() {\r\n        let futureNotification = this.m.amortizationPlan.AmortizationPlanItems.find(x => x.IsFutureItem && x.EventTypeCode === 'NewNotification');\r\n        return futureNotification\r\n            ? futureNotification.CapitalTransaction + futureNotification.InterestTransaction + futureNotification.InitialFeeTransaction + futureNotification.NotificationFeeTransaction\r\n            : null;\r\n    }\r\n\r\n    public hasUnpaidNotifications() {\r\n        return !!this.m.credit.Notifications.find(x => x.IsOpen);\r\n    }\r\n}\r\n\r\nclass Model {\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n    constructor(public creditNr: string, public isTest: boolean) {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.Loans,\r\n        };\r\n    }\r\n\r\n    public errorMessage: string;\r\n    public credit: CreditModel;\r\n    public amortizationBasisSeData: MlSeAmortizationBasisModel;\r\n    public unpaidNotificationsInitialData: UnpaidNotificationsComponentInitialData;\r\n    public paidNotifications: {\r\n        isVisible: boolean;\r\n        paidDate: string;\r\n        initialAmount: number;\r\n    }[];\r\n\r\n    public popup: {\r\n        title: string;\r\n        interestHistory?: InterestHistory;\r\n        capitalTransactionHistory?: CapitalTransactionHistory;\r\n        ulAmortizationPlan?: LoanAmortizationPlan;\r\n        mlAmortizationPlanData?: MlAmortizationPlanInitialData;\r\n    };\r\n    public amortizationPlan: LoanAmortizationPlan;\r\n    public amortizationBasisPdfUrl?: string;\r\n\r\n    public hasMorePaidNotifications() {\r\n        return !!this.paidNotifications.find((x) => !x.isVisible);\r\n    }\r\n\r\n    public showMorePaidNotifications(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let maxCountToShow = 5;\r\n        for (let n of this.paidNotifications) {\r\n            if (!n.isVisible) {\r\n                n.isVisible = true;\r\n                maxCountToShow = maxCountToShow - 1;\r\n            }\r\n            if (maxCountToShow === 0) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n","<mypages-shell [initialData]=\"m?.shellInitialData\" *ngIf=\"m\">\r\n    <div active-tab>\r\n        <ng-container *ngIf=\"!m.errorMessage\">\r\n            <div class=\"pb-1 pt-2\">\r\n                <a [routerLink]=\"['/my/loans']\" class=\"n-anchor\">Mina lån</a>\r\n            </div>\r\n            <h1 class=\"header-light\">Lån {{ m.credit.CreditNr }}</h1>\r\n\r\n            <div class=\"row pt-3 pb-3\">\r\n                <div class=\"col-sm-4 pb-2\">\r\n                    <label>Aktuell skuld</label>\r\n                    <a href=\"#\" (click)=\"showCapitalTransactionsPopup(popup, $event)\" class=\"big-link\">\r\n                        <h1>{{ m.credit.CapitalBalance | currency }}</h1>\r\n                    </a>\r\n                </div>\r\n                <div class=\"col-sm-4 pb-2\">\r\n                    <label>Ränta</label>\r\n                    <a href=\"#\" (click)=\"showInterestHistoryPopup(popup, $event)\" class=\"big-link\">\r\n                        <h1>\r\n                            {{ m.credit.CurrentInterestRatePercent | number: \"1.0-4\" }} %\r\n                        </h1>\r\n                    </a>\r\n                </div>\r\n                <div class=\"col-sm-4 pb-2\" *ngIf=\"m.credit.UnsecuredLoan && m.credit.SinglePaymentLoanRepaymentDays && m.credit.Notifications.length === 0\">\r\n                    <label>&nbsp;</label>\r\n                    <a href=\"#\" (click)=\"showAmortizationPlanPopup(popup, $event)\" class=\"big-link\">\r\n                        <h1>Amorteringsplan</h1>\r\n                    </a>\r\n                </div>\r\n                <div class=\"col-sm-4 pb-2\" *ngIf=\"m.credit.UnsecuredLoan && !m.credit.SinglePaymentLoanRepaymentDays\">\r\n                    <label>Månadsbelopp</label>\r\n                    <a href=\"#\" (click)=\"showAmortizationPlanPopup(popup, $event)\" class=\"big-link\">\r\n                        <h1>\r\n                            {{ m.credit.UnsecuredLoan.MonthlyPaymentExcludingFee | currency }}\r\n                        </h1>\r\n                    </a>\r\n                </div>\r\n                <div class=\"col-sm-4 pb-2\" *ngIf=\"m.credit.MortgageLoan\">\r\n                    <label>Amortering</label>\r\n                    <a href=\"#\" (click)=\"showAmortizationPlanPopup(popup, $event)\" class=\"big-link\">\r\n                        <h1>{{getMonthlyPayment() | currency}}</h1>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n\r\n            <h2 class=\"header-light pt-3\">Detaljer</h2>\r\n            <table class=\"table lined-table\">\r\n                <tbody>\r\n                    <tr>\r\n                        <td class=\"col-xs-6\">\r\n                            {{ m.credit.UnsecuredLoan ? \"Utbetalningsdag\" : \"Startdatum\" }}\r\n                        </td>\r\n                        <td class=\"col-xs-6 text-right\">\r\n                            {{ m.credit.StartDate | date: \"yyyy-MM-dd\" }}\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf=\"!m.credit.SinglePaymentLoanRepaymentDays\">\r\n                        <td class=\"col-xs-6\">Kvarvarande återbetalningstid</td>\r\n                        <td class=\"col-xs-6 text-right\">\r\n                            {{ m.amortizationPlan.NrOfRemainingPayments }} månader\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf=\"m.credit.SinglePaymentLoanRepaymentDays && m.credit.Notifications.length === 0\">\r\n                        <td class=\"col-xs-6\">Återbetalningstid</td>\r\n                        <td class=\"col-xs-6 text-right\">\r\n                            {{m.credit.SinglePaymentLoanRepaymentDays}} dagar\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf=\"m.credit.MortgageLoan\">\r\n                        <td class=\"col-xs-6\">Räntebindningstid</td>\r\n                        <td class=\"col-xs-6 text-right\">\r\n                            {{\r\n                            formatFixedInterestMonths(\r\n                            m.credit.MortgageLoan.MortgageLoanInterestRebindMonthCount\r\n                            )\r\n                            }}\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf=\"m.credit.MortgageLoan\">\r\n                        <td class=\"col-xs-6\">Nästa ombindningsdatum</td>\r\n                        <td class=\"col-xs-6 text-right\">\r\n                            {{\r\n                            m.credit.MortgageLoan.MortgageLoanNextInterestRebindDate\r\n                            | date: \"yyyy-MM-dd\"\r\n                            }}\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf=\"m.credit.MortgageLoan\">\r\n                        <td class=\"col-xs-6\">Fastighet</td>\r\n                        <td class=\"col-xs-6 text-right\">{{ getMlPropertyId() }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <h2 class=\"header-light pt-3\">Låntagare</h2>\r\n            <table class=\"table lined-table\">\r\n                <tbody>\r\n                    <tr *ngFor=\"let a of m.credit.ApplicantsPersonalData\">\r\n                        <td class=\"col-xs-8\">{{ a.FirstName }} {{ a.LastName }}</td>\r\n                        <td class=\"col-xs-4\"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <h2 class=\"header-light pt-3\">Avier</h2>\r\n            <p>Obetalda</p>\r\n            <unpaid-notifications [initialData]=\"m.unpaidNotificationsInitialData\"></unpaid-notifications>\r\n            <p *ngIf=\"!hasUnpaidNotifications() && getNextFutureNotificationAmount() && m.credit.SinglePaymentLoanRepaymentDays\">\r\n                Att betala nästa avi: {{getNextFutureNotificationAmount() | currency}}\r\n            </p>\r\n            <p class=\"pt-3\">Betalda</p>\r\n            <p *ngIf=\"m.paidNotifications.length == 0\">-</p>\r\n            <div class=\"completed-task-list\" *ngIf=\"m.paidNotifications.length > 0\">\r\n                <ng-container *ngFor=\"let n of m.paidNotifications\">\r\n                    <div *ngIf=\"n.isVisible\" class=\"completed-task\">\r\n                        <div>\r\n                            <div class=\"col-xs-7 remove-bootstrap-gutter\">\r\n                                <div class=\"pull-left pr-2\">\r\n                                    <p>Betald {{ n.paidDate | date: \"yyyy-MM-dd\" }}</p>\r\n                                </div>\r\n                                <div class=\"pull-left\">\r\n                                    <span class=\"glyphicon glyphicon-ok\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-xs-4 text-right\">\r\n                                <p>{{ n.initialAmount | currency }}</p>\r\n                            </div>\r\n                            <div class=\"col-xs-1 text-right\"></div>\r\n                            <div class=\"clearfix\"></div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n            <div class=\"text-center pt-3\" *ngIf=\"m.paidNotifications.length > 0\">\r\n                <a *ngIf=\"m.hasMorePaidNotifications()\" (click)=\"m.showMorePaidNotifications($event)\" href=\"\"\r\n                    class=\"n-anchor\">Visa fler</a>\r\n            </div>\r\n            <div *ngIf=\"m.credit.MortgageLoan\">\r\n                <h2 class=\"header-light pt-3\">Om du bestämt dig för att byta bank</h2>\r\n                <p>Nedan laddar du ned den blankett som behövs när du nu byter bank.</p>\r\n                <p class=\"form-control-static\">\r\n                    <a [href]=\"m.amortizationBasisPdfUrl\" target=\"_blank\" class=\"n-direct-btn n-green-btn\">Ladda ned</a>\r\n                </p>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"m.errorMessage\">\r\n            <p>{{ m.errorMessage }}</p>\r\n        </ng-container>\r\n    </div>\r\n</mypages-shell>\r\n\r\n<ng-template #popup>\r\n    <div class=\"modal-header ntech-popup-header\">\r\n        <h2 class=\"header-light\">{{ m?.popup?.title }}</h2>\r\n        <button type=\"button\" class=\"n-icon-btn n-white-btn ntech-center-icon\" (click)=\"modalRef.hide()\">\r\n            <span class=\"glyphicon glyphicon-remove\"></span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div class=\"pt-2\">\r\n            <interest-history *ngIf=\"m.popup?.interestHistory\"\r\n                [interestHistory]=\"m.popup?.interestHistory\"></interest-history>\r\n            <capital-transaction-history *ngIf=\"m.popup?.capitalTransactionHistory\"\r\n                [capitalTransactionHistory]=\"m.popup?.capitalTransactionHistory\"></capital-transaction-history>\r\n            <ul-amortization-plan *ngIf=\"m.popup?.ulAmortizationPlan\"\r\n                [amortizationPlan]=\"m.popup?.ulAmortizationPlan\"></ul-amortization-plan>\r\n            <ml-amortization-plan *ngIf=\"m.popup?.mlAmortizationPlanData\"\r\n                [initialData]=\"m.popup?.mlAmortizationPlanData\"></ml-amortization-plan>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { MlSeAmortizationBasisComponentInitialData, MlSeAmortizationBasisModel } from 'projects/ntech-components/src/public-api';\r\nimport { DateOnly, dateOnlyToIsoDate } from 'src/app/common.types';\r\nimport { LoanAmortizationPlan, LoanAmortizationPlanItem } from '../../../services/mypages-api.service';\r\n\r\nconst PageSize = 5;\r\n\r\n@Component({\r\n    selector: 'ml-amortization-plan',\r\n    templateUrl: './ml-amortization-plan.component.html',\r\n    styleUrls: ['./ml-amortization-plan.component.scss'],\r\n})\r\nexport class MlAmortizationPlanComponent {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public initialData: MlAmortizationPlanInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let m: Model = {\r\n            futureTransactions: [],\r\n            annuityAmount: this.initialData.amortizationPlan.AnnuityAmount,\r\n            visibleCount: null,\r\n            amortizationBasisSeData:  {\r\n                highlightCreditNr: this.initialData.highlightCreditNr,\r\n                basis: this.initialData.amortizationBasisSeData\r\n            }\r\n        };\r\n        for (let t of this.initialData.amortizationPlan.AmortizationPlanItems.filter((x) => x.IsFutureItem)) {\r\n            m.futureTransactions.push({\r\n                ...t,\r\n                isExpanded: false,\r\n                capitalAndInterestTransaction: t.CapitalTransaction + t.InterestTransaction,\r\n            });\r\n        }\r\n        m.visibleCount = Math.min(m.futureTransactions.length, PageSize);\r\n        this.m = m;\r\n    }\r\n\r\n    showMoreTransactions(m: Model, evt?: Event) {\r\n        evt?.preventDefault();\r\n        m.visibleCount = Math.min(m.futureTransactions.length, m.visibleCount + PageSize);\r\n    }\r\n\r\n    getVisibleTransactions() {\r\n        return this.m.futureTransactions.filter((_, i) => i < this.m.visibleCount);\r\n    }\r\n\r\n    hasMoreTransactions() {\r\n        return this.m.visibleCount < this.m.futureTransactions.length;\r\n    }\r\n\r\n    toggleTransactionDetails(i: LocalLoanAmortizationPlanItem, evt?: Event) {\r\n        evt?.preventDefault();\r\n        i.isExpanded = !i.isExpanded;\r\n    }\r\n\r\n    public getAmortizationItemDesc(i: LoanAmortizationPlanItem) {\r\n        if (i.IsWriteOff) {\r\n            return 'Justering';\r\n        } else {\r\n            if (i.EventTypeCode == 'PlacedUnplacedIncomingPayment') {\r\n                return 'Extra amortering';\r\n            } else if (i.EventTypeCode == 'NewCredit') {\r\n                return 'Nytt lån';\r\n            } else if (i.EventTypeCode == 'CapitalizedInitialFee') {\r\n                return 'Kapitaliserad uppläggningsavgift';\r\n            } else if (i.EventTypeCode == 'NewNotification') {\r\n                return 'Avi';\r\n            } else if (i.EventTypeCode == 'NewAdditionalLoan') {\r\n                return 'Nytt tilläggslån';\r\n            } else {\r\n                return i.EventTypeCode;\r\n            }\r\n        }\r\n    }\r\n\r\n    toDate(d: DateOnly) {\r\n        return dateOnlyToIsoDate(d);\r\n    }\r\n}\r\n\r\nclass Model {\r\n    futureTransactions: LocalLoanAmortizationPlanItem[];\r\n    visibleCount: number;\r\n    annuityAmount: number;\r\n    amortizationBasisSeData: MlSeAmortizationBasisComponentInitialData;\r\n}\r\n\r\ninterface LocalLoanAmortizationPlanItem extends LoanAmortizationPlanItem {\r\n    isExpanded: boolean;\r\n    capitalAndInterestTransaction: number;\r\n}\r\n\r\nexport interface MlAmortizationPlanInitialData {\r\n    highlightCreditNr: string\r\n    amortizationPlan: LoanAmortizationPlan;\r\n    amortizationBasisSeData: MlSeAmortizationBasisModel;\r\n}\r\n","<div class=\"amort-plan\" *ngIf=\"m\">\r\n    <div class=\"amort-months\">\r\n        <div class=\"amort-months-h\">\r\n            <span>Förfallodag</span>\r\n            <span>Kapital och ränta</span>\r\n        </div>\r\n        <ng-container *ngFor=\"let t of getVisibleTransactions()\">\r\n            <div class=\"amort-months-r\" (click)=\"toggleTransactionDetails(t, $event)\"\r\n                [ngClass]=\"{ 'amort-months-r-expanded': t.isExpanded }\">\r\n                <span class=\"amort-months-r-date\">{{\r\n                    t.FutureItemDueDate | date: \"yyyy-MM-dd\"\r\n                    }}</span>\r\n                <span>{{ t.capitalAndInterestTransaction | currency }}</span>\r\n                <span class=\"amort-months-r-toggle\">\r\n                    <span class=\"glyphicon\" [ngClass]=\"{\r\n              'glyphicon-chevron-down': t.isExpanded,\r\n              'glyphicon-plus': !t.isExpanded\r\n            }\"></span>\r\n                </span>\r\n            </div>\r\n            <div class=\"amort-months-details\" *ngIf=\"t.isExpanded\">\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Ränta</span>\r\n                    <span class=\"amort-months-details-value\">{{\r\n                        t.InterestTransaction | currency\r\n                        }}</span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Kapital</span>\r\n                    <span class=\"amort-months-details-value\">{{\r\n                        t.CapitalTransaction | currency\r\n                        }}</span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Kapitalskuld</span>\r\n                    <span class=\"amort-months-details-value\">{{\r\n                        t.CapitalBefore | currency\r\n                        }}</span>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"amort-pager\">\r\n        <a *ngIf=\"hasMoreTransactions()\" href=\"\" class=\"n-anchor\" (click)=\"showMoreTransactions(m, $event)\">Visa\r\n            fler</a>\r\n    </div>\r\n</div>","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { LoanAmortizationPlan, LoanAmortizationPlanItem } from '../../../services/mypages-api.service';\r\n\r\nconst PageSize = 5;\r\n\r\n@Component({\r\n    selector: 'ul-amortization-plan',\r\n    templateUrl: './ul-amortization-plan.component.html',\r\n    styleUrls: ['./ul-amortization-plan.component.scss'],\r\n})\r\nexport class UlAmortizationPlanComponent {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public amortizationPlan: LoanAmortizationPlan;\r\n\r\n    public m: Model;\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.amortizationPlan) {\r\n            return;\r\n        }\r\n\r\n        let m: Model = {\r\n            singlePaymentLoanRepaymentDays: this.amortizationPlan.SinglePaymentLoanRepaymentDays,\r\n            futureTransactions: [],\r\n            annuityAmount: this.amortizationPlan.AnnuityAmount,\r\n            visibleCount: null,\r\n        };\r\n        for (let t of this.amortizationPlan.AmortizationPlanItems.filter((x) => x.IsFutureItem)) {\r\n            m.futureTransactions.push({\r\n                ...t,\r\n                isExpanded: false,\r\n                capitalAndInterestTransaction: t.CapitalTransaction + t.InterestTransaction,\r\n            });\r\n        }\r\n        m.visibleCount = Math.min(m.futureTransactions.length, PageSize);\r\n        this.m = m;\r\n    }\r\n\r\n    showMoreTransactions(m: Model, evt?: Event) {\r\n        evt?.preventDefault();\r\n        m.visibleCount = Math.min(m.futureTransactions.length, m.visibleCount + PageSize);\r\n    }\r\n\r\n    getVisibleTransactions() {\r\n        return this.m.futureTransactions.filter((_, i) => i < this.m.visibleCount);\r\n    }\r\n\r\n    hasMoreTransactions() {\r\n        return this.m.visibleCount < this.m.futureTransactions.length;\r\n    }\r\n\r\n    toggleTransactionDetails(i: LocalLoanAmortizationPlanItem, evt?: Event) {\r\n        evt?.preventDefault();\r\n        i.isExpanded = !i.isExpanded;\r\n    }\r\n\r\n    public getAmortizationItemDesc(i: LoanAmortizationPlanItem) {\r\n        if (i.IsWriteOff) {\r\n            return 'Justering';\r\n        } else {\r\n            if (i.EventTypeCode == 'PlacedUnplacedIncomingPayment') {\r\n                return 'Extra amortering';\r\n            } else if (i.EventTypeCode == 'NewCredit') {\r\n                return 'Nytt lån';\r\n            } else if (i.EventTypeCode == 'CapitalizedInitialFee') {\r\n                return 'Kapitaliserad uppläggningsavgift';\r\n            } else if (i.EventTypeCode == 'NewNotification') {\r\n                return 'Avi';\r\n            } else if (i.EventTypeCode == 'NewAdditionalLoan') {\r\n                return 'Nytt tilläggslån';\r\n            } else {\r\n                return i.EventTypeCode;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    singlePaymentLoanRepaymentDays: number;\r\n    futureTransactions: LocalLoanAmortizationPlanItem[];\r\n    visibleCount: number;\r\n    annuityAmount: number;\r\n}\r\n\r\ninterface LocalLoanAmortizationPlanItem extends LoanAmortizationPlanItem {\r\n    isExpanded: boolean;\r\n    capitalAndInterestTransaction: number;\r\n}\r\n","<div class=\"amort-plan\" *ngIf=\"m\">\r\n    <div class=\"amort-header\">\r\n        <div class=\"amort-header-form-item\">\r\n            <span class=\"amort-header-form-item-label\">Betalningar kvar</span>\r\n            <span class=\"amort-header-form-item-value\">{{m.futureTransactions.length}}</span>\r\n        </div>\r\n        <div class=\"amort-header-form-item\" *ngIf=\"!m.singlePaymentLoanRepaymentDays\">\r\n            <span class=\"amort-header-form-item-label\">Månadskostnad</span>\r\n            <span class=\"amort-header-form-item-value\">{{m.annuityAmount | currency}}</span>\r\n        </div>\r\n        <div class=\"amort-header-text\">\r\n            <p *ngIf=\"!m.singlePaymentLoanRepaymentDays\">Återkommande avgifter, såsom exempelvis påminnelseavgift eller aviavgift återkopplas inte i amorteringsplanen eller månadsbeloppet.</p>\r\n            <p *ngIf=\"m.singlePaymentLoanRepaymentDays\">Avgifter annat än uppläggningsavgift, såsom exempelvis påminnelseavgift och aviavgift återkopplas inte i amorteringsplanen eller månadsbeloppet.</p>\r\n            <p *ngIf=\"!m.singlePaymentLoanRepaymentDays\">En extra amortering kan komma att påverka återbetalningstiden.</p>\r\n        </div>\r\n    </div>\r\n    <div class=\"amort-months\">\r\n        <div class=\"amort-months-h\">\r\n            <span>Förfallodag</span>\r\n            <span>Månadsbelopp</span>\r\n        </div>\r\n        <ng-container *ngFor=\"let t of getVisibleTransactions()\">\r\n            <div class=\"amort-months-r\" (click)=\"toggleTransactionDetails(t, $event)\" [ngClass]=\"{ 'amort-months-r-expanded' : t.isExpanded }\">\r\n                <span class=\"amort-months-r-date\">{{t.FutureItemDueDate | date:'yyyy-MM-dd'}}</span>\r\n                <span>{{t.capitalAndInterestTransaction + t.InitialFeeTransaction | currency }}</span>\r\n                <span class=\"amort-months-r-toggle\">\r\n                    <span class=\"glyphicon\" [ngClass]=\"{ 'glyphicon-chevron-down' : t.isExpanded, 'glyphicon-plus' : !t.isExpanded }\"></span>\r\n                </span>\r\n            </div>\r\n            <div class=\"amort-months-details\" *ngIf=\"t.isExpanded\">\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Ränta</span>\r\n                    <span class=\"amort-months-details-value\">{{t.InterestTransaction | currency }}</span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Kapital</span>\r\n                    <span class=\"amort-months-details-value\">{{t.CapitalTransaction | currency }}</span>\r\n                </div>\r\n                <div *ngIf=\"t.InitialFeeTransaction\">\r\n                    <span class=\"amort-months-details-label\">Uppläggningsavgift</span>\r\n                    <span class=\"amort-months-details-value\">{{t.InitialFeeTransaction | currency }}</span>\r\n                </div>\r\n                <div>\r\n                    <span class=\"amort-months-details-label\">Kapitalskuld</span>\r\n                    <span class=\"amort-months-details-value\">{{t.CapitalBefore | currency }}</span>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"amort-pager\">\r\n        <a *ngIf=\"hasMoreTransactions()\" href=\"\" class=\"n-anchor\" (click)=\"showMoreTransactions(m, $event)\">Visa fler</a>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { CustomerPagesValidationService } from 'projects/customerpages/src/app/common-services/customer-pages-validation.service';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../../components/mypages-shell/mypages-shell.component';\r\nimport { CustomerInfo, MyPagesApiService } from '../../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'my-contactinfo',\r\n    templateUrl: './my-contactinfo.component.html',\r\n    styles: [\r\n        `\r\n            .right-5 {\r\n                margin-right: 5px;\r\n            }\r\n        `,\r\n    ],\r\n})\r\nexport class MyContactinfoComponent implements OnInit {\r\n    constructor(\r\n        private apiService: MyPagesApiService,\r\n        private fb: UntypedFormBuilder,\r\n        private validationService: CustomerPagesValidationService,\r\n        private toastr: ToastrService\r\n    ) {}\r\n\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n    public customer: CustomerInfo;\r\n    public editForm: FormsHelper;\r\n    public dummyViewForm: UntypedFormGroup; // Otherwise throws error when editForm.form does not exist (when in view mode)\r\n\r\n    ngOnInit() {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.MyData,\r\n        };\r\n\r\n        this.fetchCustomerInfo();\r\n        this.dummyViewForm = this.fb.group({});\r\n    }\r\n\r\n    private fetchCustomerInfo() {\r\n        this.apiService.fetchCustomerInfo().then((result) => {\r\n            // Force null instead of empty object.\r\n            if (!result.Address?.Street && !result.Address?.Zipcode) {\r\n                result.Address = null;\r\n            }\r\n            this.customer = result;\r\n        });\r\n    }\r\n\r\n    public onCancelEdit(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        this.editForm = null;\r\n    }\r\n\r\n    public beginEdit(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let form = new FormsHelper(this.fb.group({}));\r\n        form.addControlIfNotExists('emailAddress', this.customer.Email, [\r\n            Validators.required,\r\n            this.validationService.getEmailValidator(),\r\n        ]);\r\n        form.addControlIfNotExists('phoneNumber', this.customer.Phone, [\r\n            Validators.required,\r\n            this.validationService.getPhoneValidator(),\r\n        ]);\r\n\r\n        this.editForm = null; // Ensure empty.\r\n        this.editForm = form;\r\n    }\r\n\r\n    public onSave(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let newEmail: string = this.editForm.getValue('emailAddress');\r\n        let newPhone: string = this.editForm.getValue('phoneNumber');\r\n\r\n        let properties = [\r\n            { Name: 'email', Value: newEmail },\r\n            { Name: 'phone', Value: newPhone },\r\n        ];\r\n        this.apiService.updateCustomerValues(properties).then(\r\n            (success) => {\r\n                this.fetchCustomerInfo();\r\n                this.editForm = null;\r\n            },\r\n            (error) => this.toastr.error('Något gick fel, vänligen kontrollera uppgifterna och försök igen. ')\r\n        );\r\n    }\r\n}\r\n","<mypages-shell [initialData]=\"shellInitialData\" *ngIf=\"shellInitialData\">\r\n  <div active-tab *ngIf=\"customer\">\r\n    <a routerLink=\"..\" class=\"n-anchor pt-2\">Mina uppgifter</a>\r\n    <h1 class=\"header-light pt-2\">Kontaktuppgifter</h1>\r\n    <h2 class=\"header-light pt-2\">Adress</h2>\r\n    <ng-container *ngIf=\"customer.Address\">\r\n      <p>{{ customer.FirstName }} {{ customer.LastName }}</p>\r\n      <p>{{ customer.Address.Street }}</p>\r\n      <p>{{ customer.Address.Zipcode }} {{ customer.Address.City }}</p>\r\n      <p>{{ customer.Address.Country }}</p>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!customer.Address\">\r\n      <p>Vi saknar tyvärr adressdata om dig.</p>\r\n    </ng-container>\r\n\r\n    <div class=\"pt-2\">\r\n      <div class=\"text-right\">\r\n        <div *ngIf=\"!editForm\">\r\n          <button\r\n            class=\"n-icon-btn n-blue-btn\"\r\n            [disabled]=\"editForm\"\r\n            (click)=\"beginEdit($event)\"\r\n          >\r\n            <span class=\"glyphicon glyphicon-pencil\"></span>\r\n          </button>\r\n        </div>\r\n        <div *ngIf=\"editForm\">\r\n          <button\r\n            (click)=\"onCancelEdit($event)\"\r\n            class=\"n-icon-btn n-white-btn right-5\"\r\n          >\r\n            <span class=\"glyphicon glyphicon-remove\"></span>\r\n          </button>\r\n          <button\r\n            (click)=\"onSave($event)\"\r\n            [disabled]=\"editForm?.invalid()\"\r\n            class=\"n-icon-btn n-green-btn\"\r\n          >\r\n            <span class=\"glyphicon glyphicon-ok\"></span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <form [formGroup]=\"editForm?.form || dummyViewForm\">\r\n          <div class=\"col-sm-6 col-xs-12\">\r\n            <div class=\"form-group pb-1\">\r\n              <label>Epost</label>\r\n              <input\r\n                type=\"text\"\r\n                formControlName=\"emailAddress\"\r\n                class=\"form-control\"\r\n                placeholder=\"Email\"\r\n                *ngIf=\"editForm\"\r\n              />\r\n              <p class=\"form-control-static copyable bb-1\" *ngIf=\"!editForm\">\r\n                {{ customer.Email ? customer.Email : \"N/A\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-sm-6 col-xs-12\">\r\n            <div class=\"form-group pb-1\">\r\n              <label>Telefonnummer</label>\r\n              <input\r\n                type=\"text\"\r\n                formControlName=\"phoneNumber\"\r\n                class=\"form-control\"\r\n                placeholder=\"Telefonnummer\"\r\n                *ngIf=\"editForm\"\r\n              />\r\n              <p class=\"form-control-static copyable bb-1\" *ngIf=\"!editForm\">\r\n                {{ customer.Phone ? customer.Phone : \"N/A\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</mypages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'mp-my-data',\r\n    templateUrl: './my-data.component.html',\r\n    styles: [],\r\n})\r\nexport class MyDataComponent implements OnInit {\r\n    constructor(private router: Router) {}\r\n\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n\r\n    ngOnInit() {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.MyData,\r\n        };\r\n    }\r\n\r\n    goToKycOverview() {\r\n        this.router.navigateByUrl(`kyc/overview?fromTarget=StandardMyData&lang=sv`);\r\n    }\r\n}\r\n","<mypages-shell [initialData]=\"shellInitialData\" *ngIf=\"shellInitialData\">\r\n  <div active-tab>\r\n    <h1 class=\"header-light pt-2\">Mina uppgifter</h1>\r\n\r\n    <div class=\"pt-1\">\r\n      <table class=\"table\">\r\n        <tbody>\r\n          <tr class=\"active-task-row\" routerLink=\"contactinfo\">\r\n            <td class=\"col-xs-6\">Kontaktuppgifter</td>\r\n            <td class=\"text-right col-xs-6\">\r\n              <span class=\"glyphicon glyphicon-play\"></span>\r\n            </td>\r\n          </tr>\r\n          <tr class=\"active-task-row\" routerLink=\"\" (click)=\"goToKycOverview()\">\r\n            <td class=\"col-xs-6\">Kundkännedom</td>\r\n            <td class=\"text-right col-xs-6\">\r\n              <span class=\"glyphicon glyphicon-play\"></span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</mypages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\nimport { FetchCreditDocumentsResponseDocument, MyPagesApiService } from '../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'np-my-documents',\r\n    templateUrl: './my-documents.component.html',\r\n    styles: [],\r\n})\r\nexport class MyDocumentsComponent implements OnInit {\r\n    constructor(private apiService: MyPagesApiService, private config: CustomerPagesConfigService) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        let m = new Model(this.apiService.shared());\r\n\r\n        let products: Promise<any>[] = [];\r\n\r\n        if (this.config.isLoansStandardEnabled()) {\r\n            products.push(this.loadLoans(m));\r\n        }\r\n\r\n        Promise.all(products).then((_) => {\r\n            m.sortDocuments();\r\n            this.m = m;\r\n        });\r\n    }\r\n\r\n    loadLoans(m: Model) {\r\n        return this.apiService.fetchCreditDocuments().then((x) => {\r\n            for (let document of x.Documents ?? []) {\r\n                m.addLoanDocument(document);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nclass Model {\r\n    public documents: DocumentModel[];\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n    constructor(private customerPagesApiService: CustomerPagesApiService) {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.Documents,\r\n        };\r\n        this.documents = [];\r\n    }\r\n\r\n    public addLoanDocument(document: FetchCreditDocumentsResponseDocument) {\r\n        this.documents.push({\r\n            Product: ProductCode.Loan,\r\n            ProductId: document.CreditNr,\r\n            TypeCode: document.DocumentTypeCode,\r\n            Context: document.DocumentContext,\r\n            Url: this.customerPagesApiService.getArchiveDocumentUrl(document.DocumentArchiveKey, true),\r\n            Date: document.DocumentDate,\r\n        });\r\n    }\r\n\r\n    public sortDocuments() {\r\n        //valueOf is unix epoch\r\n        this.documents.sort((x, y) => moment(y.Date).valueOf() - moment(x.Date).valueOf());\r\n    }\r\n}\r\n\r\nenum ProductCode {\r\n    Loan = 'Loan',\r\n}\r\n\r\ninterface DocumentModel {\r\n    Product: ProductCode;\r\n    ProductId: string;\r\n    Context: string;\r\n    TypeCode: string;\r\n    Url: string;\r\n    Date: string;\r\n}\r\n","<mypages-shell [initialData]=\"m?.shellInitialData\" *ngIf=\"m\">\r\n    <div active-tab>\r\n        <h1 class=\"header-light pt-2\">Dokument</h1>\r\n        <table class=\"lined-table table\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"col-xs-4\">Utskriftsdatum</th>\r\n                    <th class=\"col-xs-4\">Produkt</th>\r\n                    <th class=\"col-xs-4\">Dokument</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor=\"let document of m.documents\">\r\n                    <td>{{ document.Date | date }}</td>\r\n                    <td>\r\n                        <ng-container *ngTemplateOutlet=\"productDisplayName;context: { product: document.Product }\"></ng-container>\r\n                        {{ document.ProductId }}\r\n                    </td>\r\n                    <td>\r\n                        <a target=\"_blank\" [href]=\"document.Url\" class=\"n-anchor\">\r\n                            <ng-container *ngTemplateOutlet=\"documentDisplayName;context: \r\n                                {product: document.Product,\r\n                                    code: document.TypeCode,\r\n                                    context: document.Context\r\n                                }\">\r\n                            </ng-container>\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</mypages-shell>\r\n\r\n<ng-template #productDisplayName let-product=\"product\">\r\n    <ng-container [ngSwitch]=\"product\">\r\n        <ng-container *ngSwitchCase=\"'Loan'\">Lån</ng-container>\r\n        <ng-container *ngSwitchDefault>{{ product }}</ng-container>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<ng-template #documentDisplayName let-product=\"product\" let-code=\"code\" let-context=\"context\">\r\n    <ng-container [ngSwitch]=\"product + '_' + code\">        \r\n        <ng-container *ngSwitchCase=\"'Loan_Other_AnnualStatement'\">Årsbesked {{ context }}</ng-container>\r\n        <ng-container *ngSwitchCase=\"'Loan_DirectDebitConsent'\">Autogiromedgivande</ng-container>\r\n        <ng-container *ngSwitchCase=\"'Loan_InitialAgreement'\">Låneavtal</ng-container>\r\n        <ng-container *ngSwitchCase=\"'Loan_MortgageLoanChangeTermsAgreement'\">Villkorsändring</ng-container>\r\n        <ng-container *ngSwitchDefault>{{ code }} {{ context }}</ng-container>\r\n    </ng-container>\r\n</ng-template>","import { Component, OnInit } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { createMortgagePropertyIdFromCollateralItems } from 'src/app/common-services/ml-standard-functions';\r\nimport { getDictionaryValues, NumberDictionary } from 'src/app/common.types';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\nimport { CreditModel, MyPagesApiService } from '../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'np-my-loans',\r\n    templateUrl: './my-loans.component.html',\r\n    styles: [],\r\n})\r\nexport class MyLoansComponent implements OnInit {\r\n    constructor(private apiService: MyPagesApiService, private config: CustomerPagesConfigService) {}\r\n\r\n    public m: Model;\r\n\r\n    async ngOnInit() {\r\n        const credits = await this.apiService.fetchCredits(null, true);\r\n\r\n        let isMl = this.config.isMortgageLoansStandardEnabled();\r\n        let title = isMl ? 'Bolån' : 'Lån';\r\n\r\n        let loanBlocks: LoansBlockModel[];\r\n        let inactiveLoanBlocks: LoansBlockModel[];\r\n        if (this.config.isMortgageLoansStandardEnabled()) {\r\n            loanBlocks = this.getMlLoanBlocks(credits.ActiveCredits);\r\n            inactiveLoanBlocks = this.getMlLoanBlocks(credits.InactiveCredits);\r\n        } else {\r\n            loanBlocks = [\r\n                {\r\n                    propertyId: '',\r\n                    loans: credits.ActiveCredits.map((x) => {\r\n                        return {\r\n                            creditNr: x.CreditNr,\r\n                            capitalBalanceAmount: x.CapitalBalance,\r\n                        };\r\n                    }),\r\n                },\r\n            ];\r\n\r\n            inactiveLoanBlocks = [\r\n                {\r\n                    propertyId: '',\r\n                    loans: credits.InactiveCredits?.map((x) => {\r\n                        return {\r\n                            creditNr: x.CreditNr,\r\n                            capitalBalanceAmount: x.CapitalBalance,\r\n                            status: x.Status,\r\n                            endDate: x.EndDate,\r\n                        };\r\n                    }),\r\n                },\r\n            ];\r\n        }\r\n\r\n        this.m = new Model(title, isMl, loanBlocks, inactiveLoanBlocks);\r\n    }\r\n\r\n    getMlLoanBlocks(credits: CreditModel[]) {\r\n        let blocks: NumberDictionary<LoansBlockModel> = {};\r\n        for (let credit of credits) {\r\n            if (!blocks[credit.MortgageLoan.CollateralId]) {\r\n                blocks[credit.MortgageLoan.CollateralId] = {\r\n                    propertyId: createMortgagePropertyIdFromCollateralItems(\r\n                        (x) => credit.MortgageLoan.CollateralStringItems[x],\r\n                        true\r\n                    ),\r\n                    loans: [],\r\n                };\r\n            }\r\n            blocks[credit.MortgageLoan.CollateralId].loans.push({\r\n                creditNr: credit.CreditNr,\r\n                capitalBalanceAmount: credit.CapitalBalance,\r\n                status: credit.Status,\r\n                endDate: credit.EndDate,\r\n            });\r\n        }\r\n        return getDictionaryValues(blocks);\r\n    }\r\n\r\n    //todo create shared enum for CreditStatus\r\n    getInactiveCreditText(credit: LoanModel): string {\r\n        const creditEndDateText = credit.endDate\r\n            ? ` ${moment(credit.endDate).format('YYYY-MM-DD')}`\r\n            : ' [datum saknas]';\r\n\r\n        switch (credit.status) {\r\n            case 'SentToDebtCollection':\r\n                return 'skickat på inkasso' + creditEndDateText;\r\n            case 'Settled':\r\n            case 'WrittenOff':\r\n                return 'avslutat sedan' + creditEndDateText;\r\n            default:\r\n                return '';\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n    constructor(\r\n        public title: string,\r\n        public isMl: boolean,\r\n        public loanBlocks: LoansBlockModel[],\r\n        public inactiveLoans: LoansBlockModel[]\r\n    ) {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.Loans,\r\n        };\r\n    }\r\n}\r\n\r\ninterface LoanModel {\r\n    creditNr: string;\r\n    capitalBalanceAmount: number;\r\n    status?: string;\r\n    endDate?: string;\r\n}\r\n\r\ninterface LoansBlockModel {\r\n    propertyId: string;\r\n    loans: LoanModel[];\r\n}\r\n","<mypages-shell [initialData]=\"m?.shellInitialData\" *ngIf=\"m\">\r\n  <div active-tab>\r\n    <h1 class=\"header-light pt-2\">{{ m.title }}</h1>\r\n\r\n    <ng-container *ngFor=\"let block of m.loanBlocks\">\r\n      <p *ngIf=\"m.isMl\">Fastighet</p>\r\n      <p *ngIf=\"m.isMl\">{{ block.propertyId }}</p>\r\n      <table class=\"lined-table table pt-1\">\r\n        <tbody>\r\n          <tr\r\n            class=\"active-task-row\"\r\n            *ngFor=\"let loan of block.loans\"\r\n            [routerLink]=\"['/my/sl/loan', loan.creditNr]\"\r\n          >\r\n            <td class=\"col-xs-6\">{{ loan.creditNr }}</td>\r\n            <td class=\"col-xs-5 text-right\">\r\n              {{ loan.capitalBalanceAmount | number: \"1.0-2\" }} kr\r\n            </td>\r\n            <td class=\"text-right col-xs-1\">\r\n              <span class=\"glyphicon glyphicon-play\"></span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n    <ng-container *ngFor=\"let block of m.inactiveLoans\">\r\n      <table class=\"lined-table table pt-1\">\r\n        <tbody>\r\n          <tr *ngFor=\"let loan of block.loans\">\r\n            <td class=\"col-xs-11\">\r\n              {{ loan.creditNr }} - {{ getInactiveCreditText(loan) }}\r\n            </td>\r\n            <td class=\"col-xs-1 text-right\"></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n    <table\r\n      class=\"lined-table table pt-1\"\r\n      *ngIf=\"m && m.loanBlocks.length === 0 && m.inactiveLoans?.length === 0\"\r\n    >\r\n      <tbody>\r\n        <tr>\r\n          <td colspan=\"3\">-</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</mypages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { Dictionary } from 'src/app/common.types';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerMessagesHelper, MessageChannelModel } from '../../../shared-components/customer-messages-helper';\r\nimport { SecureMessagesEditListComponentInitialData } from '../../../shared-components/secure-messages-edit-list/secure-messages-edit-list.component';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\n\r\n@Component({\r\n    selector: 'np-my-messages',\r\n    templateUrl: './my-messages.component.html',\r\n    styleUrls: [],\r\n})\r\nexport class MyMessagesComponent implements OnInit {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private config: CustomerPagesConfigService,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    public m: Model;\r\n    public messageListInitialData: SecureMessagesEditListComponentInitialData;\r\n\r\n    ngOnInit(): void {\r\n        //Use getSecureMessages to just load channels\r\n        //This could be optimized to split into its own method if this becomes a problem\r\n        let h = new CustomerMessagesHelper(null, this.config, this.sharedApiService);\r\n        h.getSecureMessages({ skip: 0, take: 0 }, false).then((x) => {\r\n            this.messageListInitialData = new SecureMessagesEditListComponentInitialData(false, true);\r\n            this.reset(x.CustomerChannels, null);\r\n        });\r\n    }\r\n\r\n    private reset(channels: MessageChannelModel[], channelUiId: string) {\r\n        let messageForm = new FormsHelper(\r\n            this.fb.group({\r\n                channelUiId: ['', Validators.required],\r\n            })\r\n        );\r\n        let m = new Model(messageForm);\r\n\r\n        for (let channel of channels) {\r\n            m.addChannel(channel.ChannelType, channel.ChannelId);\r\n        }\r\n\r\n        messageForm.form.valueChanges.subscribe((x) => {\r\n            let channelUiId = messageForm.getValue('channelUiId');\r\n            let channel = m.findChannel(channelUiId);\r\n            if (channel) {\r\n                this.messageListInitialData.setActiveChannel(channel.channelType, channel.channelId);\r\n            } else {\r\n                this.messageListInitialData.removeActiveChannel();\r\n            }\r\n        });\r\n\r\n        if (m.channels.length > 0) {\r\n            messageForm.setValue('channelUiId', channelUiId ?? m.channels[0].uiId);\r\n        }\r\n\r\n        this.m = m;\r\n    }\r\n}\r\n\r\nclass Model {\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n    constructor(public messageForm: FormsHelper) {\r\n        this.shellInitialData = {\r\n            activeMenuItemCode: MyPagesMenuItemCode.SecureMessage,\r\n        };\r\n        this.channels = [];\r\n    }\r\n    public channels: ChannelModel[];\r\n\r\n    public addChannel(channelType: string, channelId: string) {\r\n        this.channels.push({\r\n            channelId: channelId,\r\n            channelType: channelType,\r\n            uiText: `${seChannelNames[channelType] || channelType} ${\r\n                channelId === generalName ? '' : channelId\r\n            }`.trimEnd(),\r\n            uiId: `${channelType}#${channelId}`,\r\n        });\r\n    }\r\n\r\n    public findChannel(uiId: string): ChannelModel {\r\n        return this.channels.find((x) => x.uiId === uiId);\r\n    }\r\n}\r\n\r\ninterface ChannelModel {\r\n    channelId: string;\r\n    channelType: string;\r\n    uiId: string;\r\n    uiText: string;\r\n}\r\n\r\nconst generalName = 'General';\r\n\r\nconst seChannelNames: Dictionary<string> = {\r\n    Credit_UnsecuredLoan: 'Lån',\r\n    Credit_MortgageLoan: 'Lån',\r\n    SavingsAccount_StandardAccount: 'Sparkonto',\r\n    Application_UnsecuredLoan: 'Ansökan',\r\n    [generalName]: 'Övrigt',\r\n};\r\n//@ts-ignore TODO remove unused locals\r\nconst pageSize = 15;\r\n","<mypages-shell [initialData]=\"m?.shellInitialData\" *ngIf=\"m\">\r\n  <div active-tab>\r\n    <h1 class=\"header-light pt-2\">Meddelanden</h1>\r\n    <div class=\"task-toggle\">\r\n      <div>\r\n        <div class=\"col-xs4\">\r\n          <form [formGroup]=\"m.messageForm.form\">\r\n            <select class=\"form-control\" formControlName=\"channelUiId\">\r\n              <option\r\n                *ngIf=\"!m.messageForm.getValue('channelUiId')\"\r\n                [ngValue]=\"''\"\r\n              ></option>\r\n              <option\r\n                *ngFor=\"let channel of m.channels\"\r\n                [ngValue]=\"channel.uiId\"\r\n              >\r\n                {{ channel.uiText }}\r\n              </option>\r\n            </select>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div class=\"mt-1 pb-2\">\r\n        <secure-messages-edit-list [initialData]=\"messageListInitialData\">\r\n        </secure-messages-edit-list>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</mypages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NTechMath } from 'src/app/common-services/ntech.math';\r\nimport { UnpaidNotificationsComponentInitialData } from '../../../components/unpaid-notifications/unpaid-notifications.component';\r\nimport { CreditModel, MyPagesApiService } from '../../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'mypages-overview-loans',\r\n    templateUrl: './mypages-overview-loans.component.html',\r\n    styles: [],\r\n})\r\nexport class MypagesOverviewLoansComponent implements OnInit {\r\n    constructor(private apiService: MyPagesApiService) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.apiService.fetchCredits().then((x) => {\r\n            let m: Model = {\r\n                totalBalanceAmount: NTechMath.sum(x.ActiveCredits, (x) => x.CapitalBalance),\r\n                unpaidNotificationsInitialData: {\r\n                    isOverview: true,\r\n                    credits: x.ActiveCredits,\r\n                },\r\n                activeCredits: x.ActiveCredits,\r\n            };\r\n\r\n            this.m = m;\r\n        });\r\n    }\r\n\r\n    getLoanLink(): string {\r\n        if (this.m.activeCredits.length === 1) {\r\n            const creditNr = this.m.activeCredits.find((credit) => credit.CreditNr !== undefined).CreditNr;\r\n\r\n            return '/my/sl/loan/' + creditNr;\r\n        }\r\n\r\n        return '/my/loans';\r\n    }\r\n}\r\n\r\nexport class Model {\r\n    totalBalanceAmount: number;\r\n    unpaidNotificationsInitialData: UnpaidNotificationsComponentInitialData;\r\n    activeCredits: CreditModel[];\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n  <div class=\"row pt-3 pb-3\">\r\n    <div class=\"col-sm-12\">\r\n      <label>Lån</label>\r\n      <a [routerLink]=\"[getLoanLink()]\" class=\"big-link\"\r\n        ><h1>{{ m.totalBalanceAmount | number: \"1.0-2\" }} kr</h1></a\r\n      >\r\n    </div>\r\n  </div>\r\n  <h2 class=\"header-light pt-3\">Att betala</h2>\r\n  <unpaid-notifications\r\n    [initialData]=\"m.unpaidNotificationsInitialData\"\r\n  ></unpaid-notifications>\r\n</ng-container>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport {\r\n    MyPagesMenuItemCode,\r\n    MypagesShellComponentInitialData,\r\n} from '../../components/mypages-shell/mypages-shell.component';\r\nimport { MyPagesApiService } from '../../services/mypages-api.service';\r\n\r\n@Component({\r\n    selector: 'np-mypages-overview',\r\n    templateUrl: './mypages-overview.component.html',\r\n    styles: [],\r\n})\r\nexport class MypagesOverviewComponent implements OnInit {\r\n    constructor(private config: CustomerPagesConfigService, private apiService: MyPagesApiService) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.apiService.fetchCredits(null, true).then((x) => {\r\n            this.m = {\r\n                isStandardLoansActive: this.config.isLoansStandardEnabled(),\r\n                shellInitialData: {\r\n                    activeMenuItemCode: MyPagesMenuItemCode.Overview,\r\n                    hasNoCustomerRelation: x.ActiveCredits.length === 0 && x.InactiveCredits.length === 0,\r\n                },\r\n            };\r\n        });\r\n    }\r\n}\r\n\r\nexport class Model {\r\n    shellInitialData: MypagesShellComponentInitialData;\r\n    isStandardLoansActive: boolean;\r\n}\r\n","<mypages-shell [initialData]=\"m?.shellInitialData\" *ngIf=\"m\">\r\n  <div active-tab>\r\n    <div class=\"\">\r\n      <h1 class=\"header-light pt-3\">Översikt</h1>\r\n      <mypages-overview-loans\r\n        *ngIf=\"m.isStandardLoansActive\"\r\n      ></mypages-overview-loans>\r\n    </div>\r\n  </div>\r\n</mypages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MypagesShellComponentInitialData } from '../../components/mypages-shell/mypages-shell.component';\r\n\r\n@Component({\r\n    selector: 'np-mypages-testpage',\r\n    templateUrl: './mypages-testpage.component.html',\r\n    styles: [],\r\n})\r\nexport class MypagesTestpageComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute) {}\r\n\r\n    public shellInitialData: MypagesShellComponentInitialData;\r\n\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe((x) => {\r\n            this.shellInitialData = {\r\n                activeMenuItemCode: x['menuCode'],\r\n            };\r\n        });\r\n    }\r\n}\r\n","<mypages-shell [initialData]=\"shellInitialData\" *ngIf=\"shellInitialData\">\r\n  <div active-tab>\r\n    <h1>{{ shellInitialData.activeMenuItemCode }}</h1>\r\n    <p>TODO: Bygg den här sidan</p>\r\n  </div>\r\n</mypages-shell>\r\n","import { Injectable } from '@angular/core';\r\nimport { MlSeAmortizationBasisModel } from 'projects/ntech-components/src/public-api';\r\nimport { Dictionary, toCamelCase } from 'src/app/common.types';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class MyPagesApiService {\r\n    constructor(public apiService: CustomerPagesApiService) {}\r\n\r\n    public shared(): CustomerPagesApiService {\r\n        return this.apiService;\r\n    }\r\n\r\n    public fetchCustomerInfo(): Promise<CustomerInfo> {\r\n        return this.apiService.postLocal<CustomerInfo>('Api/FetchCustomerInfo', {});\r\n    }\r\n\r\n    public updateCustomerValues(properties: { Name: string; Value: string }[]): Promise<any> {\r\n        return this.apiService.post('nCustomer', 'Api/ContactInfo/UpdateMultiple', { Properties: properties });\r\n    }\r\n\r\n    public fetchCredits(includeCustomerPersonalData?: boolean, includeInactiveLoans?: boolean) {\r\n        return this.apiService.post<CreditsModel>('nCredit', 'api/LoanStandard/CustomerPages/Fetch-Loans', {\r\n            includeCustomerPersonalData,\r\n            includeInactiveLoans,\r\n        });\r\n    }\r\n\r\n    public async fetchLoanAmortizationPlan(creditNr: string) {\r\n        let result = await this.apiService.post<any>(\r\n            'nCredit',\r\n            'api/LoanStandard/CustomerPages/Fetch-Loan-AmortizationPlan',\r\n            { creditNr }\r\n        );\r\n        result.AmortizationBasis = toCamelCase(result.AmortizationBasis);\r\n        return result as LoanAmortizationPlan;\r\n    }\r\n\r\n    public fetchUnsecuredLoansInterestHistory(creditNr: string) {\r\n        return this.apiService.post<InterestHistory>(\r\n            'nCredit',\r\n            'api/LoanStandard/CustomerPages/Fetch-Interest-History',\r\n            { creditNr }\r\n        );\r\n    }\r\n\r\n    public fetchCapitalTransactionHistory(creditNr: string) {\r\n        return this.apiService.post<CapitalTransactionHistory>(\r\n            'nCredit',\r\n            'api/LoanStandard/CustomerPages/Fetch-Capital-Transactions',\r\n            { creditNr }\r\n        );\r\n    }\r\n\r\n    public fetchCreditDocuments() {\r\n        return this.apiService.post<{ Documents: FetchCreditDocumentsResponseDocument[] }>(\r\n            'nCredit',\r\n            'api/LoanStandard/CustomerPages/Fetch-Documents',\r\n            {}\r\n        );\r\n    }\r\n}\r\n\r\nexport class Address {\r\n    Street?: string;\r\n    Zipcode?: string;\r\n    City?: string;\r\n    Country?: any;\r\n}\r\n\r\n// Any data that does not exist in the database will be returned, but as null, even the Address.\r\nexport class CustomerInfo {\r\n    Address?: Address;\r\n    Email?: string;\r\n    Phone?: string;\r\n    FirstName?: string;\r\n    LastName?: string;\r\n}\r\n\r\nexport interface CreditsModel {\r\n    ActiveCredits: CreditModel[];\r\n    InactiveCredits: CreditModel[];\r\n}\r\n\r\nexport interface CreditModel {\r\n    CreditNr: string;\r\n    StartDate: string;\r\n    Status?: string;\r\n    EndDate?: string;\r\n    CapitalBalance: number;\r\n    CurrentInterestRatePercent: number;\r\n    IsDirectDebitActive: boolean;\r\n    Notifications: NotificationModel[];\r\n    NextNotificationDate: string;\r\n    SinglePaymentLoanRepaymentDays ?: number;\r\n    ApplicantsPersonalData?: {\r\n        ApplicantNr: number;\r\n        CivicRegNr: string;\r\n        FirstName: string;\r\n        LastName: string;\r\n    }[];\r\n    MortgageLoan?: {\r\n        MortgageLoanInterestRebindMonthCount: number;\r\n        MortgageLoanNextInterestRebindDate: string;\r\n        CollateralId: number;\r\n        CollateralStringItems: Dictionary<string>;\r\n    };\r\n    UnsecuredLoan?: {\r\n        MonthlyPaymentExcludingFee: number;\r\n        MonthlyPaymentIncludingFee: number;\r\n    };\r\n}\r\n\r\nexport interface ReminderModel {\r\n    ReminderNumber: number;\r\n    ReminderDate: string;\r\n    ArchiveKey: string;\r\n}\r\n\r\nexport interface NotificationModel {\r\n    NotificationId: number;\r\n    NotificationDate: string;\r\n    IsOpen: boolean;\r\n    ClosedDate?: string;\r\n    DueDate: string;\r\n    IsOverdue: boolean;\r\n    InitialAmount: number;\r\n    BalanceAmount: number;\r\n    PaymentBankGiroNr: string;\r\n    PaymentBankGiroNrDisplay: string;\r\n    OcrPaymentReference: string;\r\n    OcrPaymentReferenceDisplay: string;\r\n    PdfArchiveKey: string;\r\n    Reminders: ReminderModel[];\r\n}\r\n\r\nexport interface LoanAmortizationPlan {\r\n    NrOfRemainingPayments: number;\r\n    AmortizationPlanItems: LoanAmortizationPlanItem[];\r\n    TotalInterestAmount: number;\r\n    UsesAnnuities: boolean;\r\n    AnnuityAmount: number;\r\n    FixedMonthlyPaymentAmount: number;\r\n    AmortizationBasis: MlSeAmortizationBasisModel;\r\n    SinglePaymentLoanRepaymentDays ?: number;\r\n}\r\n\r\nexport interface LoanAmortizationPlanItem {\r\n    EventTransactionDate: string;\r\n    CapitalBefore: number;\r\n    EventTypeCode: string;\r\n    CapitalTransaction: number;\r\n    NotificationFeeTransaction: number;\r\n    InitialFeeTransaction: number;\r\n    InterestTransaction: number;\r\n    TotalTransaction: number;\r\n    IsWriteOff: boolean;\r\n    IsFutureItem: boolean;\r\n    BusinessEventRoleCode: string;\r\n    FutureItemDueDate: string;\r\n}\r\n\r\nexport interface InterestHistory {\r\n    InterestChanges: { TransactionDate: string; InterestRatePercent: number }[];\r\n}\r\n\r\nexport interface CapitalTransactionHistory {\r\n    Transactions: {\r\n        TransactionDate: string;\r\n        Amount: number;\r\n        BusinessEventType: string;\r\n        BusinessEventRoleCode: string;\r\n        SubAccountCode: string;\r\n        TotalAmountAfter: number;\r\n    }[];\r\n}\r\n\r\nexport interface FetchCreditDocumentsResponseDocument {\r\n    DocumentDate: string;\r\n    CreditNr: string;\r\n    DocumentTypeCode: string;\r\n    DocumentContext: string;\r\n    DocumentArchiveKey: string;\r\n}\r\n","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport * as moment from 'moment';\r\nimport { Dictionary } from 'src/app/common.types';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../common-services/customer-pages-config.service';\r\nimport { CustomerMessagesHelper } from '../customer-messages-helper';\r\n\r\n@Component({\r\n    selector: 'applications-list',\r\n    templateUrl: './applications-list.component.html',\r\n    styleUrls: ['./applications-list.component.scss'],\r\n})\r\nexport class ApplicationsListComponent {\r\n    constructor(private router: Router, private config: CustomerPagesConfigService) {}\r\n\r\n    @Input()\r\n    public initialData: ApplicationsListComponentInitialData;\r\n\r\n    public m: Model;\r\n\r\n    async ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let applications = this.initialData.applications;\r\n\r\n        let unreadCounts = await this.getUnreadCounts(this.initialData.applications);\r\n\r\n        let m: Model = {\r\n            activeApplications: applications\r\n                .filter((x) => x.IsActive)\r\n                .map((x) => {\r\n                    return {\r\n                        applicationNr: x.ApplicationNr,\r\n                        applicationDate: moment(x.ApplicationDate).toDate(),\r\n                        unreadCount: unreadCounts[x.ApplicationNr],\r\n                    };\r\n                }),\r\n            rejectedOrCancelledApplications: applications\r\n                .filter((x) => x.IsRejected || x.IsCancelled)\r\n                .map((x) => {\r\n                    return {\r\n                        applicationNr: x.ApplicationNr,\r\n                        applicationDate: moment(x.ApplicationDate).toDate(),\r\n                        isRejected: x.IsRejected,\r\n                        unreadCount: unreadCounts[x.ApplicationNr],\r\n                    };\r\n                }),\r\n            loanCreatedApplications: applications\r\n                .filter((x) => x.IsFinalDecisionMade)\r\n                .map((x) => {\r\n                    return {\r\n                        applicationNr: x.ApplicationNr,\r\n                        applicationDate: moment(x.ApplicationDate).toDate(),\r\n                        creditNr: x.CreditNr,\r\n                        unreadCount: unreadCounts[x.ApplicationNr],\r\n                    };\r\n                }),\r\n        };\r\n\r\n        this.m = m;\r\n    }\r\n\r\n    navigateToApplication(applicationNr: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let routePath = this.initialData.isMortgageLoan\r\n            ? 'mortgage-loan-applications/secure/application'\r\n            : '/unsecured-loan-applications/application';\r\n\r\n        this.router.navigate([routePath, applicationNr]);\r\n    }\r\n\r\n    private getUnreadCounts(applications: SharedApplicationBasicInfoModel[]): Promise<Dictionary<number>> {\r\n        if (this.config.isFeatureEnabled('ntech.feature.securemessages')) {\r\n            let result: Dictionary<number> = {};\r\n            let lookups = [];\r\n            for (let application of applications) {\r\n                let helper = new CustomerMessagesHelper(\r\n                    application.ApplicationNr,\r\n                    this.config,\r\n                    this.initialData.sharedApiService\r\n                );\r\n                lookups.push(\r\n                    helper.getSecureMessagesUnreadByCustomerCount().then((x) => {\r\n                        result[application.ApplicationNr] = x.UnreadCount;\r\n                    })\r\n                );\r\n            }\r\n            return Promise.all(lookups).then((_) => {\r\n                return result;\r\n            });\r\n        } else {\r\n            let result: Dictionary<number> = {};\r\n            for (let a of applications) {\r\n                result[a.ApplicationNr] = 0;\r\n            }\r\n            return new Promise<Dictionary<number>>((resolve) => resolve(result));\r\n        }\r\n    }\r\n\r\n    hasCustomerRelation(): boolean {\r\n        return (\r\n            this.m.activeApplications.length > 0 ||\r\n            this.m.loanCreatedApplications.length > 0 ||\r\n            this.m.rejectedOrCancelledApplications.length > 0\r\n        );\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    activeApplications: {\r\n        applicationNr: string;\r\n        applicationDate: Date;\r\n        unreadCount?: number;\r\n    }[];\r\n    rejectedOrCancelledApplications: {\r\n        applicationNr: string;\r\n        applicationDate: Date;\r\n        isRejected: boolean;\r\n        unreadCount?: number;\r\n    }[];\r\n    loanCreatedApplications: {\r\n        applicationNr: string;\r\n        applicationDate: Date;\r\n        creditNr: string;\r\n        unreadCount?: number;\r\n    }[];\r\n}\r\n\r\nexport interface ApplicationsListComponentInitialData {\r\n    isMortgageLoan: boolean;\r\n    applications: SharedApplicationBasicInfoModel[];\r\n    sharedApiService: CustomerPagesApiService;\r\n}\r\n\r\nexport interface SharedApplicationBasicInfoModel {\r\n    ApplicationNr: string;\r\n    IsActive: boolean;\r\n    ApplicationDate: string;\r\n    IsCancelled: boolean;\r\n    IsRejected: boolean;\r\n    IsFinalDecisionMade: boolean;\r\n    CreditNr: string;\r\n    IsInactiveMessagingAllowed: boolean;\r\n}\r\n","<div class=\"flex-container\" *ngIf=\"m && !hasCustomerRelation()\">\r\n  <div class=\"align-center\">\r\n    <p class=\"text-center\">\r\n      Du verkar inte ha någon aktiv eller avslutad kundrelation med oss.\r\n    </p>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"flex-container\" *ngIf=\"m && hasCustomerRelation()\">\r\n  <div class=\"align-center\">\r\n    <h1 class=\"text-center\">Ansökningar</h1>\r\n    <ng-container\r\n      *ngTemplateOutlet=\"\r\n        applicationsTable;\r\n        context: {\r\n          applications: m.activeApplications,\r\n          isActive: true,\r\n          title: 'Aktiva ansökningar',\r\n          paddingClass: 'pt-8'\r\n        }\r\n      \"\r\n    ></ng-container>\r\n    <ng-container\r\n      *ngTemplateOutlet=\"\r\n        applicationsTable;\r\n        context: {\r\n          applications: m.rejectedOrCancelledApplications,\r\n          isActive: false,\r\n          title: 'Inaktiva ansökningar',\r\n          paddingClass: 'pt-8'\r\n        }\r\n      \"\r\n    ></ng-container>\r\n    <ng-container\r\n      *ngTemplateOutlet=\"\r\n        applicationsTable;\r\n        context: {\r\n          applications: m.loanCreatedApplications,\r\n          isActive: false,\r\n          title: 'Godkända ansökningar',\r\n          paddingClass: 'pt-8'\r\n        }\r\n      \"\r\n    ></ng-container>\r\n  </div>\r\n</div>\r\n\r\n<ng-template\r\n  #applicationsTable\r\n  let-applications=\"applications\"\r\n  let-isActive=\"isActive\"\r\n  let-title=\"title\"\r\n  let-paddingClass=\"paddingClass\"\r\n>\r\n  <div\r\n    *ngIf=\"applications && applications.length > 0\"\r\n    class=\"{{ paddingClass }}\"\r\n  >\r\n    <table class=\"table application-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>{{ title }}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          (click)=\"navigateToApplication(a.applicationNr, $event)\"\r\n          class=\"application-row\"\r\n          *ngFor=\"let a of applications\"\r\n        >\r\n          <td class=\"clear-children\">\r\n            <div class=\"col-xs-10\">\r\n              <p class=\"font-weight-bold no-margin\">\r\n                Ansökan om lån<span\r\n                  *ngIf=\"a.unreadCount > 0\"\r\n                  class=\"envelope-icon envelope-icon-margin\"\r\n                  ><span class=\"glyphicon glyphicon-envelope\"></span\r\n                  ><span class=\"unread-message\">{{ a.unreadCount }}</span></span\r\n                >\r\n              </p>\r\n              <br />\r\n              <p class=\"no-margin\">{{ a.applicationDate | date: \"short\" }}</p>\r\n            </div>\r\n            <div class=\"col-xs-2 icon-container\">\r\n              <span class=\"glyphicon-play glyphicon\"></span>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</ng-template>\r\n","import { LabelType, Options } from 'ngx-slider-v2';\r\nimport { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\n\r\n@Component({\r\n    selector: 'calculator-slider',\r\n    templateUrl: './calculator-slider.component.html',\r\n})\r\nexport class CalculatorSliderComponent implements OnInit {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public initialData: CalculatorSliderInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let i = this.initialData;\r\n        this.m = {\r\n            sliderOptions: {\r\n                floor: i.minValue,\r\n                ceil: i.maxValue,\r\n                step: i.stepSize,\r\n                showSelectionBar: true,\r\n                translate: (value: number, label: LabelType): string => {\r\n                    return ''; //Hide the label above the pointer\r\n                },\r\n            },\r\n            formControlName: i.formControlName,\r\n            form: i.form,\r\n        };\r\n    }\r\n\r\n    tickSlider(isUp: boolean) {\r\n        let v = parseInt(this.m.form.getValue(this.m.formControlName));\r\n        v = v + (isUp ? 1 : -1) * (this.initialData.tickButtonStepSize ?? this.initialData.stepSize);\r\n        this.m.form.setValue(this.m.formControlName, v.toString());\r\n    }\r\n}\r\n\r\nexport class CalculatorSliderInitialData {\r\n    minValue: number;\r\n    maxValue: number;\r\n    stepSize: number;\r\n    //Causes the button to tick up more than just whatever the step is\r\n    tickButtonStepSize ?: number;\r\n    formControlName: string;\r\n    form: FormsHelper;\r\n}\r\n\r\nclass Model {\r\n    formControlName: string;\r\n    sliderOptions: Options;\r\n    form: FormsHelper;\r\n}\r\n","<div class=\"row\" [formGroup]=\"m?.form?.form\">\r\n    <div class=\"col-xs-2 col-sm-1\">\r\n        <button class=\"n-icon-btn n-blue-btn\" (click)=\"tickSlider(false)\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n    </div>\r\n    <div class=\"col-xs-8 col-sm-10 pt-2\">\r\n        <div class=\"calculator-slider\">\r\n            <ngx-slider class=\"calculator-slider\" [formControlName]=\"m.formControlName\" [options]=\"m.sliderOptions\"></ngx-slider>\r\n        </div>\r\n    </div>\r\n    <div class=\"col-xs-2 col-sm-1 text-right\">\r\n        <button class=\"n-icon-btn n-blue-btn\" (click)=\"tickSlider(true)\"><span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span></button>\r\n    </div>\r\n</div>","import { CustomerPagesApiService } from '../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../common-services/customer-pages-config.service';\r\n\r\n/*\r\nThis class exists to isolate the tracking of unread count for customers\r\nacross the different contexts.\r\nThe issue is that a customer context has two different types:\r\n- For applications it's just a single channel type + id\r\n- For mypages though it's all loans, savings accounts and the general channel so more of a family of channel types\r\n*/\r\nexport class CustomerMessagesHelper {\r\n    constructor(\r\n        private singleApplicationNr: string, //If this is missing it's interpreted as the my pages context\r\n        private config: CustomerPagesConfigService,\r\n        private apiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    public getSecureMessages(paging: { skip: number; take: number }, markAsRead: boolean) {\r\n        let filter = this.getFilter();\r\n\r\n        return this.apiService.postLocal<GetMessagesResponse>('api/embedded-customerpages/messages', {\r\n            skipCount: paging?.skip,\r\n            takeCount: paging?.take,\r\n            onlyTheseChannelTypes: filter.onlyTheseChannelTypes,\r\n            channelType: filter.onlyThisChannel?.channelType,\r\n            channelId: filter.onlyThisChannel?.channelId,\r\n            markAsReadByCustomerContext: markAsRead ? filter.markAsReadContextName : null,\r\n        });\r\n    }\r\n\r\n    public getSecureMessagesUnreadByCustomerCount() {\r\n        let filter = this.getFilter();\r\n\r\n        return this.apiService.postLocal<{ UnreadCount: number }>('api/embedded-customerpages/messages-unread-count', {\r\n            markAsReadByCustomerContext: filter.markAsReadContextName,\r\n            onlyTheseChannelTypes: filter.onlyTheseChannelTypes,\r\n            channelType: filter.onlyThisChannel?.channelType,\r\n            channelId: filter.onlyThisChannel?.channelId,\r\n        });\r\n    }\r\n\r\n    public sendSecureMessage(\r\n        channelType: string,\r\n        channelId: string,\r\n        text: string,\r\n        textFormat: string,\r\n        attachedFile?: {\r\n            dataUrl: string;\r\n            name: string;\r\n        }\r\n    ) {\r\n        return this.apiService.postLocal<CreateMessageResponse>('api/embedded-customerpages/send-secure-message', {\r\n            channelType,\r\n            channelId,\r\n            text,\r\n            textFormat,\r\n            attachedFileAsDataUrl: attachedFile?.dataUrl,\r\n            attachedFileName: attachedFile?.name,\r\n        });\r\n    }\r\n\r\n    private getFilter() {\r\n        return {\r\n            markAsReadContextName: this.getMarkAsReadContextName(),\r\n            onlyTheseChannelTypes: this.singleApplicationNr ? null : this.getMyPagesChannelTypes(),\r\n            onlyThisChannel: this.singleApplicationNr\r\n                ? { channelType: this.getApplicationChannelType(), channelId: this.singleApplicationNr }\r\n                : null,\r\n        };\r\n    }\r\n\r\n    private getApplicationChannelType() {\r\n        if (this.config.isFeatureEnabled('ntech.feature.unsecuredloans.standard')) {\r\n            return 'Application_UnsecuredLoan';\r\n        } else if (this.config.isFeatureEnabled('ntech.feature.mortgageloans.standard')) {\r\n            return 'Application_MortgageLoan';\r\n        } else {\r\n            throw new Error('Not implemented');\r\n        }\r\n    }\r\n\r\n    private getMyPagesChannelTypes() {\r\n        let h: string[] = [];\r\n\r\n        if (this.config.isFeatureEnabled('ntech.feature.unsecuredloans.standard')) h.push('Credit_UnsecuredLoan');\r\n\r\n        if (this.config.isFeatureEnabled('ntech.feature.mortgageloans.standard')) h.push('Credit_MortgageLoan');\r\n\r\n        if (this.config.isFeatureEnabled('ntech.feature.savingsstandard')) h.push('SavingsAccount_StandardAccount');\r\n\r\n        h.push('General');\r\n\r\n        return h;\r\n    }\r\n\r\n    private getMarkAsReadContextName() {\r\n        return this.singleApplicationNr ? `Application_${this.singleApplicationNr}` : 'MyPages';\r\n    }\r\n}\r\n\r\nexport interface GetMessagesResponse {\r\n    TotalMessageCount: number;\r\n    AareMessageTextsIncluded: boolean;\r\n    Messages: MessageServerModel[];\r\n    CustomerChannels: MessageChannelModel[];\r\n}\r\n\r\nexport interface CustomerMessageAttachedDocumentModel {\r\n    Id: number;\r\n    FileName: string;\r\n    ArchiveKey: string;\r\n    ContentTypeMimetype: string;\r\n}\r\n\r\nexport interface MessageServerModel {\r\n    Id: number;\r\n    Text: string;\r\n    TextFormat: string;\r\n    CustomerId: number;\r\n    IsFromCustomer: boolean;\r\n    CreationDate: string;\r\n    CreatedByUserId: number;\r\n    HandledDate: string;\r\n    HandledByUserId: number;\r\n    ChannelType: string;\r\n    ChannelId: string;\r\n    CustomerMessageAttachedDocuments: CustomerMessageAttachedDocumentModel[];\r\n}\r\n\r\nexport interface MessageChannelModel {\r\n    CustomerId: number;\r\n    ChannelType: string;\r\n    ChannelId: string;\r\n    IsRelation: boolean;\r\n    RelationStartDate: string;\r\n    RelationEndDate: string;\r\n}\r\n\r\nexport interface CreateMessageResponse {\r\n    WasNotificationEmailSent: boolean;\r\n    CreatedMessage: SecureMessage;\r\n}\r\n\r\nexport interface SecureMessage {\r\n    Id: number;\r\n    Text: string;\r\n    TextFormat: string;\r\n    CustomerId: number;\r\n    IsFromCustomer: boolean;\r\n    ChannelType: string;\r\n    ChannelId: string;\r\n}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../common-services/customer-pages-config.service';\r\nimport { CustomerMessagesHelper, GetMessagesResponse } from '../customer-messages-helper';\r\nimport { SecureMessagesEditListComponentInitialData } from '../secure-messages-edit-list/secure-messages-edit-list.component';\r\n\r\n@Component({\r\n    selector: 'customer-pages-application-messages',\r\n    templateUrl: './customer-pages-application-messages.component.html',\r\n    styleUrls: [],\r\n})\r\nexport class CustomerPagesApplicationMessagesComponent implements OnInit {\r\n    constructor(private config: CustomerPagesConfigService, private apiService: CustomerPagesApiService) {}\r\n\r\n    @Input()\r\n    public initialData: CustomerPagesApplicationMessagesInitialData;\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let messageListInitialData = new SecureMessagesEditListComponentInitialData(\r\n            true,\r\n            this.initialData.isApplicationActive || this.initialData.isInactiveMessagingAllowed\r\n        );\r\n        let channelType = this.initialData.isMortgagaeLoan ? 'Application_MortgageLoan' : 'Application_UnsecuredLoan';\r\n        messageListInitialData.setActiveChannel(channelType, this.initialData.applicationNr);\r\n        let h = new CustomerMessagesHelper(this.initialData.applicationNr, this.config, this.apiService);\r\n        h.getSecureMessagesUnreadByCustomerCount().then((x) => {\r\n            this.m = {\r\n                isExpanded: this.initialData.isInitiallyExpanded,\r\n                nrOfUnreadMessages: x.UnreadCount,\r\n                messageListInitialData: messageListInitialData,\r\n            };\r\n        });\r\n    }\r\n\r\n    toggleExpanded(evt: Event) {\r\n        if (evt) {\r\n            evt.preventDefault();\r\n        }\r\n        this.m.isExpanded = !this.m.isExpanded;\r\n    }\r\n\r\n    onMessagesLoaded(_: GetMessagesResponse) {\r\n        this.m.nrOfUnreadMessages = 0;\r\n    }\r\n}\r\n\r\nclass Model {\r\n    isExpanded: boolean;\r\n    nrOfUnreadMessages: number;\r\n    messageListInitialData: SecureMessagesEditListComponentInitialData;\r\n}\r\n\r\nexport class CustomerPagesApplicationMessagesInitialData {\r\n    applicationNr: string;\r\n    isApplicationActive: boolean;\r\n    isInitiallyExpanded?: boolean;\r\n    isMortgagaeLoan: boolean;\r\n    isInactiveMessagingAllowed: boolean;\r\n}\r\n","<div class=\"task-toggle\" *ngIf=\"m\">\r\n  <div\r\n    class=\"task-toggle-header-row\"\r\n    [ngClass]=\"{\r\n      'task-toggle-expanded': m.isExpanded,\r\n      'task-toggle-contracted': !m.isExpanded\r\n    }\"\r\n    (click)=\"toggleExpanded($event)\"\r\n  >\r\n    <div class=\"task-toggle-icon\">\r\n      <!--brev + notisen-->\r\n      <div class=\"envelope-icon\">\r\n        <span class=\"glyphicon glyphicon-envelope\"></span\r\n        ><span *ngIf=\"m.nrOfUnreadMessages > 0\" class=\"unread-message\">{{\r\n          m.nrOfUnreadMessages\r\n        }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"task-toggle-header-text\">\r\n      <p>Meddelande</p>\r\n    </div>\r\n    <div class=\"text-right task-toggle-openclose\">\r\n      <span\r\n        class=\"glyphicon\"\r\n        [ngClass]=\"{\r\n          'glyphicon-triangle-bottom': m.isExpanded,\r\n          'glyphicon-plus': !m.isExpanded\r\n        }\"\r\n      ></span>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"m.isExpanded\" class=\"task-toggle-content\">\r\n    <secure-messages-edit-list\r\n      [initialData]=\"m.messageListInitialData\"\r\n      (messagesLoaded)=\"onMessagesLoaded($event)\"\r\n    >\r\n    </secure-messages-edit-list>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesConfigService } from '../../common-services/customer-pages-config.service';\r\nimport { CustomerPagesEventService } from '../../common-services/customerpages-event.service';\r\n\r\n@Component({\r\n    selector: 'customerpages-shell',\r\n    templateUrl: './customerpages-shell.component.html',\r\n    styles: [],\r\n})\r\nexport class CustomerpagesShellComponent implements OnInit {\r\n    constructor(public config: CustomerPagesConfigService, private eventService: CustomerPagesEventService) {}\r\n\r\n    isLoading: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n\r\n    @Input()\r\n    public initialData: CustomerpagesShellInitialData;\r\n    public isTestPopupVisible: boolean = false;\r\n\r\n    ngOnInit(): void {\r\n        this.eventService.isLoading.subscribe((x) => {\r\n            //Good old ExpressionChangedAfterItHasBeenCheckedError: https://stackoverflow.com/questions/49914840/expressionchangedafterithasbeencheckederror-on-loadingindicator\r\n            Promise.resolve(null).then(() => this.isLoading.next(x));\r\n        });\r\n    }\r\n\r\n    logOut(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        document.location.href = this.config.config()?.LogoutUrl;\r\n    }\r\n\r\n    async executeTestFunction(f: TestFunction, evt ?: Event) {\r\n        evt?.preventDefault();\r\n        if(!this.config.isNTechTest()) {\r\n            return;\r\n        }\r\n        await f.execute();\r\n        this.isTestPopupVisible = false;\r\n    }\r\n}\r\n\r\nexport class CustomerpagesShellInitialData {\r\n    logoRouterLink: string[];\r\n    skipBodyLayout?: boolean;\r\n    wideNavigation?: boolean;\r\n    test ?: {\r\n        functionCalls: TestFunction[]\r\n    }\r\n}\r\n\r\ninterface TestFunction {\r\n    displayText: string,\r\n    execute: () => Promise<void>\r\n}\r\n\r\n","<div class=\"wrapper\" [class.wide-navigation]=\"initialData.wideNavigation\">\r\n    <div class=\"navigation\">\r\n        <div class=\"content-position\">\r\n            <div class=\"branding\">\r\n                <a class=\"navbar-brand\" [routerLink]=\"initialData.logoRouterLink\">\r\n                    <img *ngIf=\"!config.config()?.Skinning\" src=\"assets/img/menu-header-logo.png\"/>\r\n                    <img *ngIf=\"!!config.config()?.Skinning\" [src]=\"config.config()?.Skinning?.LogoUrl\"/>\r\n                </a>\r\n            </div>\r\n            <div class=\"navigation-right\">\r\n                <ng-content select=\"[navigation-area]\"></ng-content>\r\n            </div>\r\n            <div class=\"clearfix\"></div>\r\n        </div>\r\n    </div>\r\n    <div [ngClass]=\"{ 'container-fluid': !initialData?.skipBodyLayout, 'body-content': !initialData?.skipBodyLayout }\">\r\n        <ng-content select=\"[shell-body]\"></ng-content>\r\n        <div class=\"loading\" *ngIf=\"isLoading.value\">Loading&#8230;</div>\r\n        <div *ngIf=\"config.isNTechTest() && initialData?.test\">\r\n            <div class=\"test-popup-frame test-popup-position\" *ngIf=\"isTestPopupVisible\">\r\n                <div class=\"pt-1\">\r\n                    <ul class=\"list-unstyled\">\r\n                        <li class=\"pb-1\">\r\n                            <button *ngFor=\"let f of initialData?.test.functionCalls\" target=\"_blank\" class=\"btn btn-primary\" (click)=\"executeTestFunction(f, $event)\">{{f.displayText}}</button>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"test-popup-button-position\">\r\n                <button class=\"btn btn-default\" [ngClass]=\"{ 'test-popup-toned-down' : !isTestPopupVisible }\" (click)=\"$event.preventDefault();isTestPopupVisible = !isTestPopupVisible\"><span class=\"glyphicon glyphicon-sort\"></span></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { FileInputEventTarget } from 'src/app/common.types';\r\nimport { sharedQuillSettings } from 'src/app/secure-messages/shared.quill.settings';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../common-services/customer-pages-config.service';\r\nimport {\r\n    CustomerMessageAttachedDocumentModel,\r\n    CustomerMessagesHelper,\r\n    GetMessagesResponse,\r\n    MessageServerModel,\r\n} from '../customer-messages-helper';\r\n\r\n@Component({\r\n    selector: 'secure-messages-edit-list',\r\n    templateUrl: './secure-messages-edit-list.component.html',\r\n    styleUrls: ['./secure-messages-edit-list.component.scss'],\r\n})\r\nexport class SecureMessagesEditListComponent implements OnInit {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private sanitizer: DomSanitizer,\r\n        private toastr: ToastrService,\r\n        private config: CustomerPagesConfigService,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    @Input()\r\n    public initialData: SecureMessagesEditListComponentInitialData;\r\n\r\n    @Output()\r\n    public messagesLoaded: EventEmitter<GetMessagesResponse> = new EventEmitter();\r\n\r\n    public m: Model;\r\n\r\n    @ViewChild('fileInput')\r\n    fileInput: ElementRef<HTMLInputElement>;\r\n\r\n    @ViewChild('fileInputForm')\r\n    fileInputForm: ElementRef<HTMLFormElement>;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        this.loadMessages(0).then((x) => {\r\n            this.reset(x);\r\n        });\r\n    }\r\n\r\n    private createMessageHelper() {\r\n        return new CustomerMessagesHelper(\r\n            this.initialData.getSingleApplicationNr(),\r\n            this.config,\r\n            this.sharedApiService\r\n        );\r\n    }\r\n\r\n    private reset(messagesResponse: GetMessagesResponse) {\r\n        let messageForm = new FormsHelper(\r\n            this.fb.group({\r\n                message: ['', [Validators.required]],\r\n            })\r\n        );\r\n        let m = new Model(messageForm);\r\n\r\n        m.addMessages(messagesResponse.Messages, messagesResponse.TotalMessageCount);\r\n\r\n        this.m = m;\r\n    }\r\n\r\n    private loadMessages(skipCount: number) {\r\n        return this.createMessageHelper()\r\n            .getSecureMessages({ skip: skipCount, take: pageSize }, true)\r\n            .then((x) => {\r\n                this.messagesLoaded.emit(x);\r\n                return x;\r\n            });\r\n    }\r\n\r\n    public sendMessage(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let m = this.m;\r\n        let channel = this.initialData.sendChannel.value;\r\n        let messagesHelper = this.createMessageHelper();\r\n\r\n        messagesHelper\r\n            .sendSecureMessage(\r\n                channel.channelType,\r\n                channel.channelId,\r\n                m.messageForm.getValue('message'),\r\n                'html',\r\n                m.attachedFile\r\n            )\r\n            .then((x) => {\r\n                this.loadMessages(0).then((x) => {\r\n                    this.reset(x);\r\n                });\r\n            });\r\n    }\r\n\r\n    public invalid() {\r\n        return this.m.messageForm.invalid() || !this.initialData.sendChannel.value;\r\n    }\r\n\r\n    public sanitizeHtml(text: string) {\r\n        return this.sanitizer.bypassSecurityTrustHtml(text);\r\n    }\r\n\r\n    public isHtml(message: MessageServerModel) {\r\n        return message.TextFormat == 'html';\r\n    }\r\n\r\n    public getAttachmentUrl(a: CustomerMessageAttachedDocumentModel) {\r\n        return this.sharedApiService.getArchiveDocumentUrl(a.ArchiveKey, true);\r\n    }\r\n\r\n    public selectFileToAttach(evt: Event) {\r\n        evt?.preventDefault();\r\n        this.fileInput.nativeElement.click();\r\n    }\r\n\r\n    public removeDocument(evt: Event) {\r\n        evt?.preventDefault();\r\n        this.m.attachedFile = null;\r\n    }\r\n\r\n    public getMessageClass(isFromCustomer: boolean, includeDirection?: boolean) {\r\n        if (includeDirection)\r\n            return isFromCustomer ? 'pull-right direction-recieved-msg' : 'pull-left direction-sent-msg';\r\n\r\n        return isFromCustomer ? 'pull-right' : 'pull-left';\r\n    }\r\n\r\n    public showSendMessageForm(): boolean {\r\n        return this.initialData.showSendMessage;\r\n    }\r\n\r\n    public onFileAttached(evt: Event) {\r\n        let target: FileInputEventTarget = (evt as any).target;\r\n        FormsHelper.loadSingleAttachedFileAsDataUrl(target.files).then(\r\n            (x) => {\r\n                this.m.attachedFile = {\r\n                    name: x.filename,\r\n                    dataUrl: x.dataUrl,\r\n                };\r\n                this.fileInputForm.nativeElement.reset();\r\n            },\r\n            (x) => {\r\n                this.toastr.error(x);\r\n                this.fileInputForm.nativeElement.reset();\r\n            }\r\n        );\r\n    }\r\n\r\n    public loadMoreMessages(evt?: Event) {\r\n        evt.preventDefault();\r\n\r\n        this.loadMessages(this.m.messages.length).then((x) => {\r\n            this.m.addMessages(x.Messages, x.TotalMessageCount);\r\n        });\r\n    }\r\n\r\n    public quillEditorOptions = sharedQuillSettings.editorOptions;\r\n    public quillEditorFormats = sharedQuillSettings.editorFormats;\r\n}\r\n\r\nclass Model {\r\n    constructor(public messageForm: FormsHelper) {\r\n        this.messages = [];\r\n    }\r\n\r\n    public addMessages(messages: MessageServerModel[], totalCount: number) {\r\n        for (let m of messages) {\r\n            this.messages.push(m);\r\n        }\r\n        this.hasMoreMessages = totalCount > this.messages.length;\r\n    }\r\n\r\n    public messages: MessageServerModel[];\r\n    public hasMoreMessages: boolean;\r\n\r\n    public attachedFile?: {\r\n        name: string;\r\n        dataUrl: string;\r\n    };\r\n}\r\n\r\nconst pageSize = 15;\r\n\r\nexport class SecureMessagesEditListComponentInitialData {\r\n    constructor(public isSingleApplication: boolean, public showSendMessage: boolean) {\r\n        this.sendChannel = new BehaviorSubject<{ channelType: string; channelId: string }>(null);\r\n        this.showSendMessageForm = showSendMessage;\r\n    }\r\n    public sendChannel: BehaviorSubject<{ channelType: string; channelId: string }>;\r\n\r\n    public showSendMessageForm: boolean;\r\n\r\n    public setActiveChannel(channelType: string, channelId: string) {\r\n        this.sendChannel.next({ channelType, channelId });\r\n    }\r\n\r\n    public removeActiveChannel() {\r\n        this.sendChannel.next(null);\r\n    }\r\n\r\n    public getSingleApplicationNr() {\r\n        if (this.isSingleApplication) {\r\n            let channelId = this.sendChannel.value?.channelId;\r\n            if (!channelId) {\r\n                throw new Error('In this context the caller is expected to have set this always');\r\n            }\r\n            return channelId;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n","<ng-container *ngIf=\"m\">\r\n  <div class=\"row pt-3 pb-3\" *ngIf=\"showSendMessageForm()\">\r\n    <div class=\"col-sm-9 col-xs-12 pb-3\">\r\n      <form [formGroup]=\"m.messageForm.form\">\r\n        <div class=\"fix-quill-width\">\r\n            <quill-editor\r\n            formControlName=\"message\"\r\n            [modules]=\"quillEditorOptions\"\r\n            [formats]=\"quillEditorFormats\"\r\n            [styles]=\"{ height: '200px' }\"\r\n          ></quill-editor>\r\n        </div>\r\n      </form>\r\n      <form\r\n        #fileInputForm\r\n        novalidate\r\n        class=\"form-inline\"\r\n        name=\"attachFileForm\"\r\n        id=\"attachFileForm\"\r\n      >\r\n        <div class=\"pt-1 pull-right\">\r\n          <button\r\n            [disabled]=\"invalid()\"\r\n            (click)=\"selectFileToAttach($event)\"\r\n            class=\"n-direct-btn n-white-btn\"\r\n          >\r\n            Bifoga <span class=\"glyphicon glyphicon-paperclip\"></span>\r\n          </button>\r\n        </div>\r\n        <div class=\"pt-1 pull-right\" *ngIf=\"m.attachedFile\">\r\n          <span class=\"mypages-fileupload-preview\">\r\n            {{ m.attachedFile.name }}\r\n            <span\r\n              (click)=\"removeDocument($event)\"\r\n              class=\"glyphicon glyphicon-remove remove-document-icon\"\r\n            ></span>\r\n          </span>\r\n        </div>\r\n        <input\r\n          #fileInput\r\n          type=\"file\"\r\n          id=\"file\"\r\n          name=\"file\"\r\n          style=\"display: none\"\r\n          (change)=\"onFileAttached($event)\"\r\n        />\r\n\r\n        <div class=\"clearfix\"></div>\r\n      </form>\r\n    </div>\r\n    <div class=\"col-sm-3 col-xs-12\">\r\n      <button\r\n        [disabled]=\"invalid()\"\r\n        (click)=\"sendMessage($event)\"\r\n        class=\"n-main-btn n-white-btn\"\r\n      >\r\n        Skicka\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"message-list pt-3\">\r\n    <div class=\"message-item\" *ngFor=\"let message of m.messages\">\r\n      <div class=\"row\">\r\n        <p class=\"date-time text-center col-xs-12\">\r\n          <span>{{ message.CreationDate | date: \"yyyy-MM-dd HH:mm\" }}</span>\r\n          <small\r\n            class=\"channel-id-label\"\r\n            *ngIf=\"message.ChannelId != 'General'\"\r\n            >{{ message.ChannelId }}</small\r\n          >\r\n        </p>\r\n        <div\r\n          class=\"col-sm-8 col-xs-10\"\r\n          [ngClass]=\"getMessageClass(message.IsFromCustomer)\"\r\n        >\r\n          <div [ngClass]=\"getMessageClass(message.IsFromCustomer, true)\">\r\n            <p *ngIf=\"!isHtml(message)\">{{ message.Text }}</p>\r\n            <div class=\"iframe-container\" *ngIf=\"isHtml(message)\">\r\n              <div [innerHTML]=\"sanitizeHtml(message.Text)\"></div>\r\n            </div>\r\n            <ng-container\r\n              *ngFor=\"let a of message.CustomerMessageAttachedDocuments\"\r\n            >\r\n              <a\r\n                class=\"n-direct-btn n-white-btn\"\r\n                [href]=\"getAttachmentUrl(a)\"\r\n                target=\"_blank\"\r\n                >Dokument <span class=\"glyphicon glyphicon-save\"></span\r\n              ></a>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"text-center pt-3\" *ngIf=\"m.hasMoreMessages\">\r\n    <a (click)=\"loadMoreMessages($event)\" href=\"\" class=\"n-anchor\">Visa fler</a>\r\n  </div>\r\n</ng-container>\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CustomerPagesConfigService } from \"../../common-services/customer-pages-config.service\";\r\nimport { CustomerPagesValidationService } from \"../../common-services/customer-pages-validation.service\";\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class EmploymentFormService {\r\n    constructor(private config: CustomerPagesConfigService, private validationService: CustomerPagesValidationService) {\r\n        \r\n    }\r\n\r\n    public getEmploymentStatuses() {\r\n        return this.config.getEnums().EmploymentStatuses;\r\n    }\r\n    \r\n    public isEmployerEmploymentCode(code: string) {\r\n        let codes = [\r\n            'full_time',\r\n            'project_employee',\r\n            'hourly_employment',\r\n            'part_time',\r\n            'probationary',\r\n            'self_employed',\r\n            'substitute',\r\n        ];\r\n        return codes.indexOf(code) >= 0;\r\n    }\r\n\r\n    public isEmployedSinceEmploymentCode(code: string) {\r\n        return !(['unemployed'].indexOf(code) >= 0 || this.validationService.isNullOrWhitespace(code));\r\n    }\r\n\r\n    public isEmployedToEmploymentCode(code: string) {\r\n        return ['project_employee', 'probationary'].indexOf(code) >= 0;\r\n    }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CustomerpagesShellComponent } from './customerpages-shell/customerpages-shell.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SecureMessagesEditListComponent } from './secure-messages-edit-list/secure-messages-edit-list.component';\r\nimport { QuillModule } from 'ngx-quill';\r\nimport { ApplicationsListComponent } from './applications-list/applications-list.component';\r\nimport { CustomerPagesApplicationMessagesComponent } from './customer-pages-application-messages/customer-pages-application-messages.component';\r\nimport { TaskPageComponent } from './task-page/task-page.component';\r\nimport { TaskKycQuestionsComponent } from './task-kyc-questions/task-kyc-questions.component';\r\nimport { CalculatorSliderComponent } from './calculator-slider/calculator-slider.component';\r\nimport { NgxSliderModule } from 'ngx-slider-v2';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        CustomerpagesShellComponent,\r\n        SecureMessagesEditListComponent,\r\n        ApplicationsListComponent,\r\n        CustomerPagesApplicationMessagesComponent,\r\n        TaskPageComponent,\r\n        TaskKycQuestionsComponent,\r\n        CalculatorSliderComponent\r\n    ],\r\n    imports: [CommonModule, FormsModule, ReactiveFormsModule, NgxSliderModule, RouterModule, QuillModule.forRoot()],\r\n    exports: [\r\n        CustomerpagesShellComponent,\r\n        SecureMessagesEditListComponent,\r\n        ApplicationsListComponent,\r\n        CustomerPagesApplicationMessagesComponent,\r\n        TaskPageComponent,\r\n        TaskKycQuestionsComponent,\r\n        CalculatorSliderComponent\r\n    ],\r\n})\r\nexport class SharedComponentsModule {}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { parseTriStateBoolean, stringJoin } from 'src/app/common.types';\r\nimport * as i18nIsoCountries from 'i18n-iso-countries';\r\nimport { CustomerPagesConfigService } from '../../common-services/customer-pages-config.service';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'task-kyc-questions',\r\n    templateUrl: './task-kyc-questions.component.html',\r\n    styles: [],\r\n})\r\nexport class TaskKycQuestionsComponent implements OnInit {\r\n    constructor(private config: CustomerPagesConfigService, private fb: UntypedFormBuilder) {}\r\n\r\n    public m: Model;\r\n\r\n    @Input()\r\n    public initialData: TaskKycQuestionsComponentInitialData;\r\n\r\n    ngOnInit(): void {\r\n        i18nIsoCountries.registerLocale(require('i18n-iso-countries/langs/sv.json'));\r\n    }\r\n\r\n    public getCountryDisplayName(twoLetterIsoCode: string) {\r\n        let lang: string;\r\n        if (this.config.baseCountry() === 'SE') {\r\n            lang = 'sv';\r\n        } else {\r\n            return twoLetterIsoCode;\r\n        }\r\n        let name = i18nIsoCountries.getName(twoLetterIsoCode, lang, { select: 'official' });\r\n        return name || twoLetterIsoCode;\r\n    }\r\n\r\n    public getCountryDropdownOptions(): { Code: string; DisplayName: string }[] {\r\n        let twoLetterIsoCodes = Object.keys(i18nIsoCountries.getAlpha2Codes());\r\n        //Reorder to have the base country first in the list so most customers wont have to scroll\r\n        twoLetterIsoCodes = [\r\n            this.config.baseCountry(),\r\n            ...twoLetterIsoCodes.filter((x) => x !== this.config.baseCountry()),\r\n        ];\r\n        return twoLetterIsoCodes.map((x) => {\r\n            return {\r\n                Code: x,\r\n                DisplayName: this.getCountryDisplayName(x),\r\n            };\r\n        });\r\n    }\r\n\r\n    public getQuestionText(code: string) {\r\n        switch (code) {\r\n            case 'citizenCountries':\r\n                return 'Vilka medborgarskap har du?';\r\n            case 'taxCountries':\r\n                return 'Vilka är dina skatterättsliga hemvister?';\r\n            case 'isPep':\r\n                return 'Är du en person i politisk utsatt ställning, nära familje-medlem eller medarbetare till en sådan person?';\r\n            default:\r\n                return code;\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let t = this.initialData;\r\n\r\n        let m: Model = {};\r\n\r\n        let isEditPossible = t.isPossibleToAnswer && !t.isAnswersApproved;\r\n        if (isEditPossible) {\r\n            m.edit = {\r\n                form: new FormsHelper(this.fb.group({})),\r\n                customers: [],\r\n            };\r\n\r\n            for (let customer of t.customers) {\r\n                let codes = ['citizenCountries', 'isPep', 'taxCountries'];\r\n                let answers = [];\r\n                for (let code of codes) {\r\n                    answers.push({\r\n                        code: code,\r\n                        answerText: customer.LatestQuestions?.find((x) => x.QuestionCode === code)?.AnswerText,\r\n                    });\r\n                }\r\n                let applicantDisplayName =\r\n                    customer.CustomerShortName + (customer.CustomerBirthDate ? `, ${customer.CustomerBirthDate}` : '');\r\n                let applicant = new CustomerEditModel(\r\n                    customer.CustomerId,\r\n                    customer.ApplicantNr,\r\n                    applicantDisplayName,\r\n                    `citizenCountries${customer.CustomerId}`,\r\n                    [this.config.baseCountry()],\r\n                    `isPep${customer.CustomerId}`,\r\n                    `taxCountries${customer.CustomerId}`,\r\n                    [this.config.baseCountry()]\r\n                );\r\n\r\n                if (customer.LatestQuestions) {\r\n                    applicant.citizenCountries = this.parseCommaSeparatedList(\r\n                        customer.LatestQuestions.find((x) => x.QuestionCode === 'citizenCountries')?.AnswerCode\r\n                    );\r\n                    applicant.taxCountries = this.parseCommaSeparatedList(\r\n                        customer.LatestQuestions.find((x) => x.QuestionCode === 'taxCountries')?.AnswerCode\r\n                    );\r\n                }\r\n\r\n                m.edit.form.addControlIfNotExists(applicant.citizenCountriesFormControlName, '', []);\r\n                m.edit.form.addControlIfNotExists(applicant.taxCountriesFormControlName, '', []);\r\n                m.edit.form.addControlIfNotExists(\r\n                    applicant.isPepFormControlName,\r\n                    customer.LatestQuestions?.find((x) => x.QuestionCode === 'isPep')?.AnswerCode,\r\n                    [Validators.required]\r\n                );\r\n\r\n                m.edit.form.form.valueChanges.subscribe((_) => {\r\n                    let addCitizenCountryValue = m.edit.form.getValue(applicant.citizenCountriesFormControlName);\r\n                    if (addCitizenCountryValue) {\r\n                        if (applicant.citizenCountries.indexOf(addCitizenCountryValue) < 0) {\r\n                            applicant.citizenCountries.push(addCitizenCountryValue);\r\n                        }\r\n                        m.edit.form.setValue(applicant.citizenCountriesFormControlName, '');\r\n                    }\r\n                    let addTaxCountryValue = m.edit.form.getValue(applicant.taxCountriesFormControlName);\r\n                    if (addTaxCountryValue) {\r\n                        if (applicant.taxCountries.indexOf(addTaxCountryValue) < 0) {\r\n                            applicant.taxCountries.push(addTaxCountryValue);\r\n                        }\r\n                        m.edit.form.setValue(applicant.taxCountriesFormControlName, '');\r\n                    }\r\n                });\r\n                m.edit.customers.push(applicant);\r\n            }\r\n        } else {\r\n            m.view = {\r\n                customers: [],\r\n                isEditAllowed: t.isPossibleToAnswer && !t.isAnswersApproved,\r\n                isConfirmAllowed: t.isPossibleToAnswer && !t.isAnswersApproved,\r\n            };\r\n            for (let customer of t.customers) {\r\n                let answers = customer.LatestQuestions\r\n                    ? customer.LatestQuestions.map((x) => {\r\n                          return { questionText: x.QuestionText, answerText: x.AnswerText };\r\n                      })\r\n                    : [\r\n                          { questionText: this.getQuestionText('isPep'), answerText: '' },\r\n                          { questionText: this.getQuestionText('citizenCountries'), answerText: '' },\r\n                          { questionText: this.getQuestionText('taxCountries'), answerText: '' },\r\n                      ];\r\n                m.view.customers.push({\r\n                    displayName:\r\n                        customer.CustomerShortName +\r\n                        (customer.CustomerBirthDate ? `, ${customer.CustomerBirthDate}` : ''),\r\n                    answers: answers,\r\n                });\r\n\r\n                if (!customer.LatestQuestions) m.view.isConfirmAllowed = false;\r\n            }\r\n        }\r\n\r\n        this.m = m;\r\n    }\r\n\r\n    onSave(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let customersWithAnswers: {\r\n            customerId: number;\r\n            applicantNr: number;\r\n            answers: CustomerPagesKycQuestionAnswerModel[];\r\n        }[] = [];\r\n\r\n        this.m.edit.customers.forEach((customer) => {\r\n            let answers = [];\r\n            let isPep = parseTriStateBoolean(this.m.edit.form.getValue(customer.isPepFormControlName));\r\n            answers.push({\r\n                QuestionCode: 'isPep',\r\n                AnswerCode: isPep === true ? 'true' : isPep === false ? 'false' : '',\r\n                QuestionText: this.getQuestionText('isPep'),\r\n                AnswerText: isPep === true ? 'Ja' : isPep === false ? 'Nej' : '',\r\n            });\r\n            answers.push({\r\n                QuestionCode: 'citizenCountries',\r\n                AnswerCode: stringJoin(',', customer.citizenCountries),\r\n                QuestionText: this.getQuestionText('citizenCountries'),\r\n                AnswerText: stringJoin(\r\n                    ', ',\r\n                    customer.citizenCountries.map((x) => this.getCountryDisplayName(x))\r\n                ),\r\n            });\r\n            answers.push({\r\n                QuestionCode: 'taxCountries',\r\n                AnswerCode: stringJoin(',', customer.taxCountries),\r\n                QuestionText: this.getQuestionText('taxCountries'),\r\n                AnswerText: stringJoin(\r\n                    ', ',\r\n                    customer.taxCountries.map((x) => this.getCountryDisplayName(x))\r\n                ),\r\n            });\r\n            customersWithAnswers.push({\r\n                customerId: customer.customerId,\r\n                applicantNr: customer.applicantNr,\r\n                answers: answers,\r\n            });\r\n        });\r\n\r\n        this.m.edit = null;\r\n\r\n        this.initialData.onSave({ customersWithAnswers });\r\n    }\r\n\r\n    invalid() {\r\n        return this.m.edit?.form.invalid() || this.m.edit?.customers.find((x) => x.invalid());\r\n    }\r\n\r\n    private parseCommaSeparatedList(value: string): string[] {\r\n        if (!value) {\r\n            return [];\r\n        } else {\r\n            return value.split(',').map((x) => x.trim());\r\n        }\r\n    }\r\n}\r\n\r\nclass CustomerEditModel {\r\n    constructor(\r\n        public customerId: number,\r\n        public applicantNr: number,\r\n        public displayName: string,\r\n        public citizenCountriesFormControlName: string,\r\n        public citizenCountries: string[],\r\n        public isPepFormControlName: string,\r\n        public taxCountriesFormControlName: string,\r\n        public taxCountries: string[]\r\n    ) {}\r\n\r\n    public isCitizenCountrySelected(isoCode: string) {\r\n        return this.citizenCountries.indexOf(isoCode) >= 0;\r\n    }\r\n\r\n    public removeCitizenCountry(isoCode: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let i = this.citizenCountries.indexOf(isoCode);\r\n        if (i >= 0) {\r\n            this.citizenCountries.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    public isTaxCountrySelected(isoCode: string) {\r\n        return this.taxCountries.indexOf(isoCode) >= 0;\r\n    }\r\n\r\n    public removeTaxCountry(isoCode: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let i = this.taxCountries.indexOf(isoCode);\r\n        if (i >= 0) {\r\n            this.taxCountries.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    invalid() {\r\n        return this.citizenCountries.length === 0 || this.taxCountries.length === 0;\r\n    }\r\n}\r\n\r\nclass Model {\r\n    view?: {\r\n        isEditAllowed: boolean;\r\n        isConfirmAllowed: boolean;\r\n        customers: {\r\n            displayName: string;\r\n            answers: {\r\n                questionText: string;\r\n                answerText: string;\r\n            }[];\r\n        }[];\r\n    };\r\n    edit?: {\r\n        form: FormsHelper;\r\n        customers: CustomerEditModel[];\r\n    };\r\n}\r\n\r\nexport class TaskKycQuestionsComponentInitialData {\r\n    applicationNr: string;\r\n    isPossibleToAnswer: boolean;\r\n    isAnswersApproved: boolean;\r\n    customers: TaskKycQuestionsComponentCustomer[];\r\n    onSave: (result: TaskKycQuestionsComponentSaveEventData) => void;\r\n}\r\n\r\nexport interface TaskKycQuestionsComponentCustomer {\r\n    CustomerId: number;\r\n    ApplicantNr?: number;\r\n    CustomerBirthDate: string;\r\n    CustomerShortName: string;\r\n    LatestKycQuestionsAnswerDate: string;\r\n    LatestQuestions: CustomerPagesKycQuestionAnswerModel[];\r\n}\r\n\r\nexport interface CustomerPagesKycQuestionAnswerModel {\r\n    QuestionCode: string;\r\n    AnswerCode: string;\r\n    QuestionText: string;\r\n    AnswerText: string;\r\n}\r\n\r\nexport interface TaskKycQuestionsComponentSaveEventData {\r\n    customersWithAnswers: { customerId: number; applicantNr: number; answers: CustomerPagesKycQuestionAnswerModel[] }[];\r\n}\r\n","<div *ngIf=\"m\">\r\n  <p class=\"pb-2\">\r\n    För att få dig som kund måste vi som långivare ha uppdaterad information om\r\n    dig och ditt engagemang. Därför är det viktigt att du besvarar och\r\n    uppdaterar alla frågor.\r\n  </p>\r\n\r\n  <h2 class=\"pb-1 text-center\">God kunskap om dig</h2>\r\n  <hr class=\"hr-section\" />\r\n\r\n  <div *ngIf=\"m.view\">\r\n    <div class=\"row\">\r\n      <div *ngFor=\"let customer of m.view.customers\" class=\"col-xs-12\">\r\n        <h3 class=\"pb-3\">\r\n          <ins\r\n            ><b>{{ customer.displayName }}</b></ins\r\n          >\r\n        </h3>\r\n        <div *ngFor=\"let answer of customer.answers\" class=\"pb-3\">\r\n          <div class=\"pb-2\">{{ answer.questionText }}</div>\r\n          <div class=\"bb-1\">\r\n            <b>{{ answer.answerText || \"-\" }}</b>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"m.edit\">\r\n    <form [formGroup]=\"m.edit.form.form\">\r\n      <div *ngFor=\"let customer of m.edit.customers\">\r\n        <h3 class=\"pb-3 text-center\">\r\n          <ins\r\n            ><b>{{ customer.displayName }}</b></ins\r\n          >\r\n        </h3>\r\n        <div class=\"row\">\r\n          <div class=\"col-xs-12\">\r\n            <div class=\"pb-3\">\r\n              <div\r\n                class=\"form-group\"\r\n                [ngClass]=\"{\r\n                  'has-error': m.edit.form.hasError(\r\n                    customer.isPepFormControlName\r\n                  )\r\n                }\"\r\n              >\r\n                <label\r\n                  [ngClass]=\"{\r\n                    'bg-warning': m.edit.form.hasErrorStrict(\r\n                      customer.isPepFormControlName\r\n                    )\r\n                  }\"\r\n                  >{{ getQuestionText(\"isPep\") }}</label\r\n                >\r\n                <select\r\n                  class=\"form-control\"\r\n                  formControlName=\"{{ customer.isPepFormControlName }}\"\r\n                >\r\n                  <option value=\"\"></option>\r\n                  <option [ngValue]=\"'true'\">Ja</option>\r\n                  <option [ngValue]=\"'false'\">Nej</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"pb-3\">\r\n              <div class=\"form-group\">\r\n                <label>{{ getQuestionText(\"citizenCountries\") }}</label>\r\n                <div\r\n                  class=\"pb-1\"\r\n                  *ngFor=\"let citizenCountry of customer.citizenCountries\"\r\n                >\r\n                  <p\r\n                    class=\"form-control-static bb-1\"\r\n                    style=\"padding-right: 1px\"\r\n                  >\r\n                    <b>{{ getCountryDisplayName(citizenCountry) }}</b>\r\n                    <button\r\n                      class=\"n-white-btn n-direct-btn\"\r\n                      (click)=\"\r\n                        customer.removeCitizenCountry(citizenCountry, $event)\r\n                      \"\r\n                      style=\"float: right\"\r\n                    >\r\n                      Ta bort\r\n                    </button>\r\n                  </p>\r\n                </div>\r\n                <select\r\n                  class=\"form-control\"\r\n                  formControlName=\"{{\r\n                    customer.citizenCountriesFormControlName\r\n                  }}\"\r\n                >\r\n                  <option value=\"\">Välj land</option>\r\n                  <ng-container *ngFor=\"let opt of getCountryDropdownOptions()\">\r\n                    <option\r\n                      *ngIf=\"!customer.isCitizenCountrySelected(opt.Code)\"\r\n                      [ngValue]=\"opt.Code\"\r\n                    >\r\n                      {{ opt.DisplayName }}\r\n                    </option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div class=\"pb-3\">\r\n              <div class=\"form-group\">\r\n                <label>{{ getQuestionText(\"taxCountries\") }}</label>\r\n                <div\r\n                  class=\"pb-1\"\r\n                  *ngFor=\"let taxCountry of customer.taxCountries\"\r\n                >\r\n                  <p\r\n                    class=\"form-control-static bb-1\"\r\n                    style=\"padding-right: 1px\"\r\n                  >\r\n                    {{ getCountryDisplayName(taxCountry) }}\r\n                    <button\r\n                      class=\"n-white-btn n-direct-btn\"\r\n                      (click)=\"customer.removeTaxCountry(taxCountry, $event)\"\r\n                      style=\"float: right\"\r\n                    >\r\n                      Ta bort\r\n                    </button>\r\n                  </p>\r\n                </div>\r\n                <select\r\n                  class=\"form-control\"\r\n                  formControlName=\"{{ customer.taxCountriesFormControlName }}\"\r\n                >\r\n                  <option value=\"\">Välj land</option>\r\n                  <ng-container *ngFor=\"let opt of getCountryDropdownOptions()\">\r\n                    <option\r\n                      *ngIf=\"!customer.isTaxCountrySelected(opt.Code)\"\r\n                      [ngValue]=\"opt.Code\"\r\n                    >\r\n                      {{ opt.DisplayName }}\r\n                    </option>\r\n                  </ng-container>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"text-center pt-3\">\r\n      <button\r\n        [disabled]=\"invalid()\"\r\n        (click)=\"onSave($event)\"\r\n        class=\"n-main-btn n-green-btn\"\r\n      >\r\n        Skicka in\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'task-page',\r\n    templateUrl: './task-page.component.html',\r\n    styleUrls: ['./task-page.component.scss'],\r\n})\r\nexport class TaskPageComponent {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public headerText: string;\r\n\r\n    @Output()\r\n    public onClose: EventEmitter<void> = new EventEmitter();\r\n\r\n    @Input()\r\n    public isStandalonePage: boolean;\r\n\r\n    public close(evt: Event) {\r\n        evt.preventDefault();\r\n        this.onClose.emit();\r\n    }\r\n}\r\n","<div class=\"flex-container\" [class.standalone]=\"isStandalonePage\">\r\n  <div class=\"align-center\">\r\n    <div class=\"pb-2\">\r\n      <div class=\"pull-right\">\r\n        <button\r\n          (click)=\"close($event)\"\r\n          class=\"n-icon-btn n-neutral-btn pull-right\"\r\n        >\r\n          <span class=\"glyphicon-remove glyphicon close-task-icon\"></span>\r\n        </button>\r\n      </div>\r\n      <div class=\"clearfix\"></div>\r\n      <div class=\"text-center\">\r\n        <h1>{{ headerText }}</h1>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport {\r\n    AgreementTaskModel,\r\n    CustomerPagesApplicationsApiService,\r\n} from '../../services/customer-pages-applications-api.service';\r\n\r\n@Component({\r\n    selector: 'customer-pages-agreement',\r\n    templateUrl: './customer-pages-agreement.component.html',\r\n    styles: [],\r\n})\r\nexport class CustomerPagesAgreementComponent implements OnInit {\r\n    constructor(private apiService: CustomerPagesApplicationsApiService) {}\r\n\r\n    @Input()\r\n    public initialData: CustomerPagesAgreementInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let t = this.initialData.task;\r\n\r\n        let m: Model = {\r\n            signedAgreementPdfArchiveKey: t.SignedAgreementArchiveKey,\r\n            unsignedAgreementPdfArchiveKey: t.UnsignedAgreementArchiveKey,\r\n            applicants: [],\r\n        };\r\n\r\n        let nrOfApplicants = Object.keys(t.ApplicantStatusByApplicantNr).length;\r\n        for (var applicantNr = 1; applicantNr <= nrOfApplicants; applicantNr++) {\r\n            let applicantStatus = t.ApplicantStatusByApplicantNr[applicantNr];\r\n            let applicantDisplayName =\r\n                (applicantStatus.CustomerShortName || `Sökande ${applicantNr}`) +\r\n                (applicantStatus.CustomerBirthDate ? `, ${applicantStatus.CustomerBirthDate}` : '');\r\n            m.applicants.push({\r\n                applicantDisplayName: applicantDisplayName,\r\n                applicantNr: applicantNr,\r\n                hasSigned: applicantStatus.HasSigned,\r\n                signatureUrl: applicantStatus.IsPossibleToSign ? applicantStatus.SignatureUrl : null,\r\n            });\r\n        }\r\n        this.m = m;\r\n    }\r\n\r\n    getIconClass(isAccepted: boolean, isRejected: boolean) {\r\n        let isOther = !isAccepted && !isRejected;\r\n        return {\r\n            'glyphicon-ok': isAccepted,\r\n            'glyphicon-remove': isRejected,\r\n            'glyphicon-minus': isOther,\r\n            'glyphicon': true,\r\n            'text-success': isAccepted,\r\n            'text-danger': isRejected,\r\n        };\r\n    }\r\n\r\n    getDocumentUrl(archiveKey: string) {\r\n        return this.apiService.getArchiveDocumentUrl(archiveKey, true);\r\n    }\r\n}\r\n\r\nclass Model {\r\n    unsignedAgreementPdfArchiveKey: string;\r\n    signedAgreementPdfArchiveKey: string;\r\n    applicants: { applicantNr: number; applicantDisplayName: string; hasSigned: boolean; signatureUrl: string }[];\r\n}\r\n\r\nexport class CustomerPagesAgreementInitialData {\r\n    applicationNr: string;\r\n    task: AgreementTaskModel;\r\n}\r\n","<div *ngIf=\"m\">\r\n  <div class=\"pb-2\">\r\n    <div class=\"col-xs-6\">\r\n      <div\r\n        class=\"form-horizontal\"\r\n        *ngIf=\"\r\n          m.unsignedAgreementPdfArchiveKey && !m.signedAgreementPdfArchiveKey\r\n        \"\r\n      >\r\n        <div class=\"form-group\">\r\n          <label class=\"col-xs-12 control-label text-left\"\r\n            >Förhandsgranska</label\r\n          >\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"col-xs-12 form-control-static\">\r\n            <a\r\n              [href]=\"getDocumentUrl(m.unsignedAgreementPdfArchiveKey)\"\r\n              target=\"_blank\"\r\n              class=\"n-direct-btn n-purple-btn\"\r\n              >Ladda ned <span class=\"glyphicon glyphicon-save\"></span\r\n            ></a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-horizontal\" *ngIf=\"m.signedAgreementPdfArchiveKey\">\r\n        <div class=\"form-group\">\r\n          <label class=\"col-xs-12 control-label text-left\"\r\n            >Signerat avtal</label\r\n          >\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"col-xs-12 form-control-static\">\r\n            <a\r\n              [href]=\"getDocumentUrl(m.signedAgreementPdfArchiveKey)\"\r\n              target=\"_blank\"\r\n              class=\"n-direct-btn n-purple-btn\"\r\n              >Ladda ned <span class=\"glyphicon glyphicon-save\"></span\r\n            ></a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-xs-6\">&nbsp;</div>\r\n    <div class=\"clearfix\"></div>\r\n  </div>\r\n  <table class=\"table table-separate pt-2\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"col-xs-4\">Sökande</th>\r\n        <th class=\"col-xs-6\"></th>\r\n        <th class=\"col-xs-2 text-right\">Status</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let applicant of m.applicants\">\r\n        <td>{{ applicant.applicantDisplayName }}</td>\r\n        <td>\r\n          <a\r\n            *ngIf=\"applicant.signatureUrl\"\r\n            [href]=\"applicant.signatureUrl\"\r\n            class=\"n-direct-btn n-white-btn\"\r\n            >Signera</a\r\n          >\r\n        </td>\r\n        <td class=\"text-right\">\r\n          <span\r\n            [ngClass]=\"getIconClass(applicant.hasSigned, false)\"\r\n            class=\"ntech-status-icon\"\r\n          ></span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { ComplexApplicationListRow } from 'src/app/common-services/complex-application-list';\r\nimport { StringDictionary } from 'src/app/common.types';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\nimport { CustomerPagesApplicationsApiService } from '../../services/customer-pages-applications-api.service';\r\nimport { TaskToggleBlockInitialData } from '../task-toggle-block/task-toggle-block.component';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\n\r\n@Component({\r\n    selector: 'customer-pages-application-offer',\r\n    templateUrl: './customer-pages-application-offer.component.html',\r\n    styles: [],\r\n})\r\nexport class CustomerPagesApplicationOfferComponent implements OnInit {\r\n    constructor(\r\n        private apiService: CustomerPagesApplicationsApiService,\r\n        private eventService: CustomerPagesEventService,\r\n        private generalApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    @Input()\r\n    public initialData: CustomerPagesApplicationOfferInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    async ngOnChanges(_: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let customCosts = (await this.generalApiService.postLocal<{ code: string, text: string}[]>('api/embedded-customerpages/custom-costs', {})).map(x => ({\r\n            code: x.code,\r\n            firstNotificationCode: `firstNotificationCost_${x.code}_Amount`,\r\n            text: x.text\r\n        }));\r\n\r\n        let offerItems = ComplexApplicationListRow.fromDictionary('temp', 1, this.initialData.offerItems);\r\n        this.m = {\r\n            applicationNr: this.initialData.applicationNr,\r\n            offerItems: offerItems,\r\n            firstNotificationCosts: offerItems.getUniqueItemNames().filter(x => x.startsWith('firstNotificationCost_') && x.endsWith('_Amount')).map(x => ({\r\n                displayName: customCosts.find(y => y.firstNotificationCode ===  x)?.text ?? x,\r\n                amount: offerItems.getUniqueItemInteger(x)\r\n            })),\r\n            isPossibleToDecide: this.initialData.isPossibleToDecide,\r\n            toggleInitialData: {\r\n                headerText: 'Lånedetaljer',\r\n                isInitiallyExpanded: this.initialData.isPossibleToDecide,\r\n                onExpandedToggled: null,\r\n                toggleBlockId: null,\r\n                isAccepted: offerItems.getUniqueItem('customerDecisionCode') == 'accepted',\r\n                isRejected: offerItems.getUniqueItem('customerDecisionCode') == 'rejected',\r\n            },\r\n            hasRejectedOffer: offerItems.getUniqueItem('customerDecisionCode') == 'rejected',\r\n        };\r\n    }\r\n\r\n    currencySymbol() {\r\n        return 'kr';\r\n    }\r\n\r\n    acceptOffer(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let applicationNr = this.initialData.applicationNr;\r\n        this.apiService.setCustomerCreditDecisionCode(applicationNr, 'accepted').then((_) => {\r\n            this.eventService.signalReloadApplication(applicationNr);\r\n        });\r\n    }\r\n\r\n    rejectOffer(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let applicationNr = this.initialData.applicationNr;\r\n        this.apiService.setCustomerCreditDecisionCode(applicationNr, 'rejected').then((_) => {\r\n            this.eventService.signalReloadApplication(applicationNr);\r\n        });\r\n    }\r\n}\r\n\r\nclass Model {\r\n    applicationNr: string;\r\n    offerItems: ComplexApplicationListRow;\r\n    firstNotificationCosts: { displayName: string, amount: number } []\r\n    isPossibleToDecide: boolean;\r\n    hasRejectedOffer: boolean;\r\n    toggleInitialData: TaskToggleBlockInitialData;\r\n}\r\n\r\nexport class CustomerPagesApplicationOfferInitialData {\r\n    applicationNr: string;\r\n    offerItems: StringDictionary;\r\n    isPossibleToDecide: boolean;\r\n}\r\n","<div *ngIf=\"m\">\r\n    <h1 *ngIf=\"m.hasRejectedOffer\" class=\"text-center pb-3\">Ansökan {{m.applicationNr}}</h1>\r\n    <h1 *ngIf=\"!m.hasRejectedOffer\" class=\"text-center pb-3\">Vårt erbjudande</h1>\r\n\r\n\r\n    <p *ngIf=\"!m.hasRejectedOffer\" class=\"text-center\">Totalt lånebelopp</p>\r\n    <h1 *ngIf=\"!m.hasRejectedOffer\" class=\"header-light text-center pb-2\">{{m.offerItems.getUniqueItemInteger('loanAmount') | number:'1.0-2' }} {{currencySymbol()}}</h1>\r\n\r\n    <p class=\"align-center text-center pb-2\" *ngIf=\"m.hasRejectedOffer\"><b>Ärendet är avslutat, du har tackat nej till erbjudandet.</b></p>\r\n\r\n    <ng-content select=\"[focus-block]\"></ng-content>\r\n\r\n    <task-toggle-block [initialData]=\"m.toggleInitialData\">\r\n        <table class=\"table table-separate\">\r\n            <thead>\r\n                <tr>\r\n                    <th></th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>Lånebelopp</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('loanAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('loansToSettleAmount') > 0\">\r\n                    <td>&nbsp;&nbsp;&nbsp;Varav lösenbelopp</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('loansToSettleAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('paidToCustomerAmount') > 0\">\r\n                    <td>&nbsp;&nbsp;&nbsp;Varav nytt lån</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('paidToCustomerAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('initialFeeWithheldAmount') > 0\">\r\n                    <td>Uppläggningsavgift som dras från lånebeloppet</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('initialFeeWithheldAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('initialFeeCapitalizedAmount') > 0\">\r\n                    <td>Kapitaliserad uppläggningsavgift</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('initialFeeCapitalizedAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('repaymentTimeInMonths') > 0\">\r\n                    <td>Återbetalningstid</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('repaymentTimeInMonths') | number:'1.0-0' }} månader</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('singlePaymentLoanRepaymentTimeInDays') > 0\">\r\n                    <td>Återbetalningstid</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('singlePaymentLoanRepaymentTimeInDays') | number:'1.0-0' }} dagar</td>\r\n                </tr>\r\n                <tr *ngFor=\"let cost of m.firstNotificationCosts\">\r\n                    <td>På första avin - {{cost.displayName}}</td>\r\n                    <td class=\"text-right\">{{cost.amount | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('notificationFeeAmount') > 0\">\r\n                    <td>Aviavgift</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('notificationFeeAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('totalInterestRatePercent') > 0\">\r\n                    <td>Ränta</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemDecimal('totalInterestRatePercent') | number:'1.2-4' }} %</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('annuityAmount') > 0\">\r\n                    <td>Månadsbetalning</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemInteger('annuityAmount') | number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemInteger('effectiveInterestRatePercent') > 0\">\r\n                    <td>Effektivränta</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemDecimal('effectiveInterestRatePercent') | number:'1.2-2' }} %</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItemDecimal('totalPaidAmount') > 0\">\r\n                    <td>Totalt att betala</td>\r\n                    <td class=\"text-right\">{{m.offerItems.getUniqueItemDecimal('totalPaidAmount') |  number:'1.0-2' }} {{currencySymbol()}}</td>\r\n                </tr>\r\n                <tr *ngIf=\"m.offerItems.getUniqueItem('customerDecisionCode') !== 'initial'\">\r\n                    <td>Beslut</td>\r\n                    <td class=\"text-right\">\r\n                        <ng-container [ngSwitch]=\"m.offerItems.getUniqueItem('customerDecisionCode')\" >\r\n                            <span *ngSwitchCase=\"'accepted'\">Tackat ja</span>\r\n                            <span *ngSwitchCase=\"'rejected'\">Tackat nej</span>\r\n                            <span *ngSwitchDefault>{{m.offerItems.getUniqueItem('customerDecisionCode')}} </span>\r\n                        </ng-container>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </task-toggle-block>\r\n\r\n    <div *ngIf=\"m.isPossibleToDecide\" class=\"pt-1\">\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-5 col-xs-6 pt-1\">\r\n                <button type=\"button\" class=\"n-direct-btn n-white-btn\" (click)=\"rejectOffer($event)\">Tacka nej</button>\r\n            </div>\r\n            <div class=\"col-sm-7 col-xs-6\">\r\n                <button type=\"button\" class=\"n-main-btn n-green-btn\" (click)=\"acceptOffer($event)\">Tacka ja</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { from, of } from 'rxjs';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { Dictionary, getBankAccountTypeDropdownOptions } from 'src/app/common.types';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\nimport {\r\n    BankAccountNrValidationRequest,\r\n    BankAccountNrValidationResult,\r\n    BankAccountsTaskModel,\r\n    CustomerPagesApplicationsApiService,\r\n} from '../../services/customer-pages-applications-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { createCountrySpecificValidatorUsingCountryIsoCode } from 'src/app/country-specific/country-specific-validator';\r\n\r\nconst RefTypeReference = 'ref';\r\nconst RefTypeMessage = 'msg';\r\n\r\n@Component({\r\n    selector: 'customer-pages-bankaccounts',\r\n    templateUrl: './customer-pages-bankaccounts.component.html',\r\n    styles: [],\r\n})\r\nexport class CustomerPagesBankaccountsComponent implements OnInit {\r\n    constructor(\r\n        private apiService: CustomerPagesApplicationsApiService,\r\n        private fb: UntypedFormBuilder,\r\n        private eventService: CustomerPagesEventService,\r\n        private config: CustomerPagesConfigService\r\n    ) {}\r\n\r\n    @Input()\r\n    public initialData: CustomerPagesBankAccountsInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let i = this.initialData;\r\n\r\n        let bankAccountRequest: Dictionary<BankAccountNrValidationRequest> = {};\r\n        if (i.task?.PaidToCustomer?.BankAccountNr) {\r\n            bankAccountRequest['p'] = {\r\n                bankAccountNr: i.task.PaidToCustomer.BankAccountNr,\r\n                bankAccountNrType: i.task.PaidToCustomer.BankAccountNrType,\r\n            };\r\n        }\r\n        if (i.task?.LoansToSettle) {\r\n            for (let s of i.task.LoansToSettle.filter((x) => x.BankAccountNr)) {\r\n                bankAccountRequest['L' + s.Nr] = {\r\n                    bankAccountNr: s.BankAccountNr,\r\n                    bankAccountNrType: s.BankAccountNrType,\r\n                };\r\n            }\r\n        }\r\n\r\n        this.apiService.validateBankAccountNrsBatch(bankAccountRequest, false).then((x) => {\r\n            let m: Model = {\r\n                view: {\r\n                    paidToCustomer: null,\r\n                    loansToSettle: null,\r\n                },\r\n                dummyViewForm: this.fb.group({}),\r\n                isPossibleToEditPaidToCustomerBankAccount:\r\n                    this.initialData.task.IsPossibleToEditPaidToCustomerBankAccount,\r\n                isPossibleToEditLoansToSettleBankAccounts:\r\n                    this.initialData.task.IsPossibleToEditLoansToSettleBankAccounts,\r\n                isPossibleToConfirm: false,\r\n                isBankAccountsConfirmed: this.initialData.task.IsAccepted,\r\n            };\r\n\r\n            let p = i.task.PaidToCustomer;\r\n            m.view.paidToCustomer = {\r\n                amount: p.Amount,\r\n                account: new ViewAccount(p.BankAccountNr, p.BankAccountNrType, x.ValidatedAccountsByKey['p']),\r\n            };\r\n\r\n            let paidToCustomerAccountValid = x.ValidatedAccountsByKey['p']?.IsValid ?? false;\r\n\r\n            m.view.loansToSettle = [];\r\n            let settleAccountsValid = false;\r\n\r\n            if (i.task?.LoansToSettle?.length > 0) {\r\n                for (let s of i.task.LoansToSettle) {\r\n                    let account = x.ValidatedAccountsByKey['L' + s.Nr];\r\n                    m.view.loansToSettle.push({\r\n                        nr: s.Nr,\r\n                        loanType: s.LoanType,\r\n                        currentDebtAmount: s.CurrentDebtAmount,\r\n                        monthlyCostAmount: s.MonthlyCostAmount,\r\n                        settlementPaymentReference: s.SettlementPaymentReference,\r\n                        settlementPaymentMessage: s.SettlementPaymentMessage,\r\n                        account: new ViewAccount(s.BankAccountNr, s.BankAccountNrType, account),\r\n                    });\r\n                    if (account?.IsValid) settleAccountsValid = true;\r\n                }\r\n            } else settleAccountsValid = true; // when no loans to settle\r\n\r\n            m.isPossibleToConfirm =\r\n                !this.initialData.task.IsAccepted && paidToCustomerAccountValid && settleAccountsValid;\r\n\r\n            this.m = m;\r\n        });\r\n    }\r\n\r\n    getOtherLoanTypeDisplayName(loanType: string) {\r\n        if (!loanType) {\r\n            return '';\r\n        }\r\n        let t = this.initialData.otherLoanTypes.find((x) => x.Code == loanType);\r\n        if (t) {\r\n            return t.DisplayName;\r\n        } else {\r\n            return loanType;\r\n        }\r\n    }\r\n\r\n    beginEditNewLoan(evt?: Event) {\r\n        let form = new FormsHelper(this.fb.group({}));\r\n\r\n        let bankAccountValidator = FormsHelper.createValidatorAsync('bankAccountNr', (x) => {\r\n            if (!x) {\r\n                return of(true); //Handled by required\r\n            }\r\n            return from(\r\n                this.apiService\r\n                    .validateBankAccountNrsBatch({ b: { bankAccountNr: x, bankAccountNrType: '' } }, true)\r\n                    .then((y) => {\r\n                        let result = y.ValidatedAccountsByKey['b'];\r\n                        return result?.IsValid === true;\r\n                    })\r\n            );\r\n        });\r\n        form.addControlIfNotExists(\r\n            'bankAccountNr',\r\n            this.m.view.paidToCustomer.account.bankAccountNr,\r\n            [Validators.required],\r\n            [bankAccountValidator]\r\n        );\r\n        this.m.edit = {\r\n            paidToCustomerForm: form,\r\n            loansToSettleForm: null,\r\n        };\r\n    }\r\n\r\n    onCancelNewLoan(evt?: Event) {\r\n        this.m.edit = null;\r\n    }\r\n\r\n    onSaveNewLoan(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let applicationNr = this.initialData.applicationNr;\r\n        this.apiService\r\n            .editBankAccounts({\r\n                applicationNr: applicationNr,\r\n                paidToCustomer: {\r\n                    bankAccountNr: this.m.edit.paidToCustomerForm.getValue('bankAccountNr'),\r\n                    bankAccountNrType: null,\r\n                },\r\n            })\r\n            .then((_) => {\r\n                this.eventService.signalReloadApplication(this.initialData.applicationNr);\r\n            });\r\n    }\r\n\r\n    beginEditLoansToSettle(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let form = new FormsHelper(this.fb.group({}));\r\n\r\n        for (let account of this.m.view.loansToSettle) {\r\n            let refType = this.currentSettlementPaymentReferenceType(account);\r\n            form.addControlIfNotExists('bankAccountNr' + account.nr, account.account.bankAccountNr, [\r\n                Validators.required,\r\n            ]);\r\n            form.addControlIfNotExists('bankAccountNrType' + account.nr, account.account.bankAccountNrType, [\r\n                Validators.required,\r\n            ]);\r\n            form.addControlIfNotExists(\r\n                'settlementPaymentReference' + account.nr,\r\n                refType == RefTypeReference ? account.settlementPaymentReference : account.settlementPaymentMessage,\r\n                [Validators.minLength(2)]\r\n            );\r\n            form.addControlIfNotExists('settlementPaymentReferenceType' + account.nr, refType, [Validators.required]);\r\n        }\r\n\r\n        let countryValidator = createCountrySpecificValidatorUsingCountryIsoCode(this.config.baseCountry());\r\n        form.form.setAsyncValidators([\r\n            (x) => {\r\n                let request: Dictionary<BankAccountNrValidationRequest> = {};\r\n                for (let loan of this.m.view.loansToSettle) {\r\n                    let bankAccountNr = form.getValue('bankAccountNr' + loan.nr);\r\n                    let bankAccountNrType = form.getValue('bankAccountNrType' + loan.nr);\r\n                    if (bankAccountNr) {\r\n                        request['bankAccountInvalid' + loan.nr] = {\r\n                            bankAccountNr: bankAccountNr,\r\n                            bankAccountNrType: bankAccountNrType,\r\n                        };\r\n                    }\r\n                }\r\n                let result = this.apiService.validateBankAccountNrsBatch(request, true).then((x) => {\r\n                    let errors: Dictionary<boolean> = {};\r\n                    for (let errorName of Object.keys(x.ValidatedAccountsByKey)) {\r\n                        if (!x.ValidatedAccountsByKey[errorName].IsValid) {\r\n                            errors[errorName] = true;\r\n                        }\r\n                    }\r\n                    return errors;\r\n                });\r\n                return from(result);\r\n            },\r\n            (x) => {\r\n                let errors: Dictionary<boolean> = {};\r\n                for (let loan of this.m.view.loansToSettle) {\r\n                    let bankAccountNrType = form.getValue('bankAccountNrType' + loan.nr);\r\n                    let settlementPaymentReferenceType = this.currentSettlementPaymentReferenceType(loan.nr);\r\n                    let settlementPaymentReference = form.getValue('settlementPaymentReference' + loan.nr);\r\n                    if (\r\n                        settlementPaymentReferenceType === RefTypeReference &&\r\n                        !countryValidator.isValidPaymentFileReferenceNr(bankAccountNrType, settlementPaymentReference)\r\n                    ) {\r\n                        errors['settlementPaymentReferenceInvalid' + loan.nr] = true;\r\n                    }\r\n                }\r\n                return of(errors);\r\n            },\r\n        ]);\r\n\r\n        this.m.edit = {\r\n            paidToCustomerForm: null,\r\n            loansToSettleForm: form,\r\n        };\r\n    }\r\n\r\n    currentSettlementPaymentReferenceType(loanViewOrEditNr: LoanToSettleView | number): string {\r\n        if (typeof loanViewOrEditNr === 'number') {\r\n            return this.m.edit.loansToSettleForm.getValue('settlementPaymentReferenceType' + loanViewOrEditNr);\r\n        } else {\r\n            let hasRef = !!loanViewOrEditNr.settlementPaymentReference;\r\n            let hasMsg = !!loanViewOrEditNr.settlementPaymentMessage;\r\n            return hasRef || (!hasRef && !hasMsg) ? RefTypeReference : RefTypeMessage;\r\n        }\r\n    }\r\n\r\n    onCancelLoansToSettle(evt?: Event) {\r\n        this.m.edit = null;\r\n    }\r\n\r\n    onSaveLoansToSettle(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let applicationNr = this.initialData.applicationNr;\r\n        this.apiService\r\n            .editBankAccounts({\r\n                applicationNr: applicationNr,\r\n                loansToSettle: {\r\n                    Accounts: this.m.view.loansToSettle.map((x) => {\r\n                        let refType = this.currentSettlementPaymentReferenceType(x.nr);\r\n                        let f = this.m.edit.loansToSettleForm;\r\n                        return {\r\n                            nr: x.nr,\r\n                            bankAccountNr: f.getValue('bankAccountNr' + x.nr),\r\n                            bankAccountNrType: f.getValue('bankAccountNrType' + x.nr),\r\n                            settlementPaymentReference:\r\n                                refType === RefTypeReference ? f.getValue('settlementPaymentReference' + x.nr) : null,\r\n                            settlementPaymentMessage:\r\n                                refType === RefTypeMessage ? f.getValue('settlementPaymentReference' + x.nr) : null,\r\n                        };\r\n                    }),\r\n                },\r\n            })\r\n            .then((_) => {\r\n                this.eventService.signalReloadApplication(this.initialData.applicationNr);\r\n            });\r\n    }\r\n\r\n    approveBankAccounts() {\r\n        this.apiService.confirmBankAccounts(this.initialData.applicationNr).then((_) => {\r\n            this.eventService.signalReloadApplicationAndClosePopup(this.initialData.applicationNr);\r\n        });\r\n    }\r\n\r\n    getPossibleBankAccountNrTypes() {\r\n        return getBankAccountTypeDropdownOptions(\r\n            this.config.getClient().BaseCountry,\r\n            true,\r\n            this.config.uiLanguage(),\r\n            true\r\n        );\r\n    }\r\n}\r\n\r\nclass Model {\r\n    view: {\r\n        paidToCustomer: {\r\n            amount: number;\r\n            account: ViewAccount;\r\n        };\r\n        loansToSettle: LoanToSettleView[];\r\n    };\r\n    dummyViewForm: UntypedFormGroup; //Just so we can have the viewmode inside the form tag and not get yelled at for having a null form\r\n    edit?: {\r\n        paidToCustomerForm: FormsHelper;\r\n        loansToSettleForm: FormsHelper;\r\n    };\r\n    isPossibleToEditPaidToCustomerBankAccount: boolean;\r\n    isPossibleToEditLoansToSettleBankAccounts: boolean;\r\n    isPossibleToConfirm: boolean;\r\n    isBankAccountsConfirmed: boolean;\r\n}\r\n\r\ninterface LoanToSettleView {\r\n    nr: number;\r\n    account: ViewAccount;\r\n    loanType: string;\r\n    currentDebtAmount: number;\r\n    monthlyCostAmount: number;\r\n    settlementPaymentReference: string;\r\n    settlementPaymentMessage: string;\r\n}\r\n\r\nclass ViewAccount {\r\n    constructor(\r\n        public bankAccountNr: string,\r\n        public bankAccountNrType: string,\r\n        private parsedAccount: BankAccountNrValidationResult\r\n    ) {}\r\n\r\n    public getAccountNrDisplay() {\r\n        let v = this.parsedAccount?.ValidAccount;\r\n        let result = v?.DisplayNr || this.bankAccountNr;\r\n        if (v?.BankName) {\r\n            result += ` (${v.BankName})`;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getAccountTypeDisplay() {\r\n        let v = this.parsedAccount?.ValidAccount;\r\n        //@ts-ignore TODO remove unused locals\r\n        let result = v?.DisplayNr || this.bankAccountNr;\r\n        if (v?.BankName) {\r\n            result += ` (${v.BankName})`;\r\n        }\r\n        let accountNrType = v?.BankAccountNrType || this.bankAccountNrType;\r\n        if (accountNrType == 'BankGiroSe') {\r\n            return 'Bankgiro';\r\n        } else if (accountNrType == 'PlusGiroSe') {\r\n            return 'Plusgiro';\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n\r\nexport class CustomerPagesBankAccountsInitialData {\r\n    applicationNr: string;\r\n    task: BankAccountsTaskModel;\r\n    otherLoanTypes: { Code: string; DisplayName: string }[];\r\n}\r\n","<div *ngIf=\"m\" class=\"pt-2\">\r\n    <div class=\"pb-1\">\r\n        <h2>Ditt mottagarkonto</h2>\r\n        <hr class=\"hr-section\" />\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-10 col-xs-12\">\r\n                <p>Mottagarkontot är det bankkonto som det nya lånet kommer betalas ut till.</p>\r\n            </div>\r\n            <div class=\"col-sm-2 col-xs-12\">\r\n                <div class=\"text-right\">\r\n                    <div *ngIf=\"m.isPossibleToEditPaidToCustomerBankAccount && !m.edit?.paidToCustomerForm\">\r\n                        <button class=\"n-icon-btn n-blue-btn\" [disabled]=\"m.edit\" (click)=\"beginEditNewLoan($event)\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\r\n                    </div>\r\n                    <div *ngIf=\"m.edit && m.edit?.paidToCustomerForm\">\r\n                        <button (click)=\"onCancelNewLoan($event)\" class=\"n-icon-btn n-white-btn\" style=\"margin-right:5px;\"><span class=\"glyphicon glyphicon-remove\"></span></button>\r\n                        <button (click)=\"onSaveNewLoan($event)\" [disabled]=\"m.edit?.paidToCustomerForm?.invalid()\" class=\"n-icon-btn n-green-btn\"><span class=\"glyphicon glyphicon-ok\"></span></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"pb-3\">\r\n        <div>\r\n            <div class=\"row pb-2\">\r\n                <form [formGroup]=\"m.edit?.paidToCustomerForm?.form || m.dummyViewForm\">\r\n                    <div class=\"col-sm-8 col-xs-12\">\r\n                        <div class=\"form-group\">\r\n                            <label class=\"control-label\">Bankkontonummer</label>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"!m.edit?.paidToCustomerForm\">\r\n                            <p class=\"form-control-static copyable bb-1\">{{m.view.paidToCustomer.account?.getAccountNrDisplay()}}</p>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"m.edit?.paidToCustomerForm\" [ngClass]=\"{ 'has-error': m.edit?.paidToCustomerForm?.hasError('bankAccountNr') }\">\r\n                            <input formControlName=\"bankAccountNr\" type=\"text\" class=\"form-control\"  />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"pb-1\" *ngIf=\"m?.view?.loansToSettle?.length > 0\">\r\n        <h2>Lösen av lån</h2>\r\n        <hr class=\"hr-section\"/>\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-10 col-xs-12\">\r\n                <p>Ange betalinformation för lånen som ska lösas.</p>\r\n            </div>\r\n            <div class=\"col-sm-2 col-xs-12\">\r\n                <div class=\"text-right\">\r\n                    <div *ngIf=\"m.isPossibleToEditLoansToSettleBankAccounts && !m.edit?.loansToSettleForm\">\r\n                        <button class=\"n-icon-btn n-blue-btn\" [disabled]=\"m.edit\" (click)=\"beginEditLoansToSettle($event)\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\r\n                    </div>\r\n                    <div *ngIf=\"m.edit && m.edit?.loansToSettleForm\">\r\n                        <button (click)=\"onCancelLoansToSettle($event)\" class=\"n-icon-btn n-white-btn\" style=\"margin-right:5px;\"><span class=\"glyphicon glyphicon-remove\"></span></button>\r\n                        <button (click)=\"onSaveLoansToSettle($event)\" [disabled]=\"m.edit?.loansToSettleForm?.invalid()\" class=\"n-icon-btn n-green-btn\"><span class=\"glyphicon glyphicon-ok\"></span></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"m?.view?.loansToSettle?.length > 0\">\r\n        <form [formGroup]=\"m.edit?.loansToSettleForm?.form || m.dummyViewForm\">\r\n            <div *ngIf=\"m.view.loansToSettle.length === 0\">Inga</div>\r\n            <div *ngFor=\"let loan of m.view.loansToSettle\">\r\n                <h3>{{getOtherLoanTypeDisplayName(loan.loanType)}}, {{loan.currentDebtAmount | number}} kr</h3>\r\n                <div class=\"row pb-2\">\r\n                    <div class=\"col-xs-12 col-sm-4 pt-1\">\r\n                      <div class=\"form-group\">\r\n                        <label class=\"control-label\">Kontotyp</label>\r\n                      </div>\r\n                      <div class=\"form-group\" *ngIf=\"!m.edit?.loansToSettleForm\">\r\n                          <p class=\"form-control-static copyable bb-1\">{{loan.account.getAccountTypeDisplay()}}</p>\r\n                      </div>\r\n                      <div class=\"form-group\" *ngIf=\"m.edit?.loansToSettleForm\">\r\n                        <select [formControlName]=\"'bankAccountNrType'+loan.nr\" class=\"form-control\">\r\n                            <option *ngFor=\"let t of getPossibleBankAccountNrTypes()\" [ngValue]=\"t.Code\">{{t.DisplayName}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-xs-12 col-sm-4 pt-1\">\r\n                        <div class=\"form-group\">\r\n                            <label class=\"control-label\">BG / PG-nummer</label>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"!m.edit?.loansToSettleForm\">\r\n                            <p class=\"form-control-static copyable bb-1\">{{loan.account.getAccountNrDisplay()}}</p>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"m.edit?.loansToSettleForm\" [ngClass]=\"{ 'has-error': m.edit?.loansToSettleForm?.hasNamedValidationError('bankAccountInvalid' + loan.nr) || m.edit?.loansToSettleForm.hasError('bankAccountNr' + loan.nr) }\">\r\n                            <input [formControlName]=\"'bankAccountNr'+loan.nr\" type=\"text\" class=\"form-control\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-xs-12 col-sm-4 pt-1\">\r\n                        <div class=\"form-group\" *ngIf=\"!m.edit?.loansToSettleForm\">\r\n                            <label class=\"control-label\">{{currentSettlementPaymentReferenceType(loan) == 'ref' ? 'OCR' : 'Meddelande'}}</label>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"m.edit?.loansToSettleForm\">\r\n                            <label class=\"control-label\">OCR</label>&nbsp;&nbsp;<input [formControlName]=\"'settlementPaymentReferenceType'+loan.nr\" type=\"radio\" value=\"ref\" />\r\n                            <span class=\"pull-right\"><label class=\"control-label\">Meddelande</label>&nbsp;&nbsp;<input [formControlName]=\"'settlementPaymentReferenceType'+loan.nr\" type=\"radio\" value=\"msg\" /></span>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"!m.edit?.loansToSettleForm\">\r\n                            <p class=\"form-control-static copyable bb-1\">{{currentSettlementPaymentReferenceType(loan) == 'ref' ? loan.settlementPaymentReference: loan.settlementPaymentMessage}}</p>\r\n                        </div>\r\n                        <div class=\"form-group\" *ngIf=\"m.edit?.loansToSettleForm\" [ngClass]=\"{ 'has-error': m.edit?.loansToSettleForm?.hasNamedValidationError('settlementPaymentReferenceInvalid' + loan.nr) || m.edit?.loansToSettleForm.hasError('settlementPaymentReference' + loan.nr) }\">\r\n                            <input [formControlName]=\"'settlementPaymentReference'+loan.nr\" type=\"text\" class=\"form-control\"  />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class=\"text-center pt-3\" *ngIf=\"!m.isBankAccountsConfirmed\">\r\n      <button type=\"button\" class=\"n-main-btn n-green-btn\" [disabled]=\"m.edit || !m.isPossibleToConfirm\" (click)=\"approveBankAccounts()\">\r\n          Godkänn\r\n      </button>\r\n    </div>\r\n</div>","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport {\r\n    CustomerPagesApplicationsApiService,\r\n    DirectDebitTaskModel,\r\n} from '../../services/customer-pages-applications-api.service';\r\nimport { from, of } from 'rxjs';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\n\r\n@Component({\r\n    selector: 'customer-pages-direct-debit',\r\n    templateUrl: './customer-pages-direct-debit.component.html',\r\n})\r\nexport class CustomerPagesDirectDebitComponent implements OnInit {\r\n    constructor(\r\n        private fb: UntypedFormBuilder,\r\n        private apiService: CustomerPagesApplicationsApiService,\r\n        private eventService: CustomerPagesEventService\r\n    ) {}\r\n\r\n    public model: Model;\r\n\r\n    @Input()\r\n    public initialData: DirectDebitInitialData;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (!this.initialData || !this.initialData.task) return;\r\n\r\n        this.model = null;\r\n        let task = this.initialData.task;\r\n\r\n        let applicants: { Code: string; DisplayName: string }[] = [];\r\n        for (var applicantNr = 1; applicantNr <= Object.keys(task.CustomerInfoByApplicantNr).length; applicantNr++) {\r\n            let app = task.CustomerInfoByApplicantNr[applicantNr];\r\n            applicants.push({ Code: applicantNr.toString(), DisplayName: `${app.FirstName}, ${app.BirthDate}` });\r\n        }\r\n        let initialAccount = this.getInitialDirectDebitBankAccountNr(task, applicants);\r\n\r\n        let selectedAccountOwnerName = initialAccount.AccountOwnerApplicantNr\r\n            ? applicants.find((a) => a.Code === initialAccount.AccountOwnerApplicantNr.toString())?.DisplayName ?? ''\r\n            : '';\r\n\r\n        let model: Model = {\r\n            view: {\r\n                selectedAccountNrDisplay: initialAccount.DirectDebitBankAccountNr,\r\n                selectedAccountOwnerDisplayName: selectedAccountOwnerName,\r\n                preSelected:\r\n                    initialAccount.AccountOwnerApplicantNr && initialAccount.DirectDebitBankAccountNr\r\n                        ? {\r\n                              bankAccountNr: initialAccount.DirectDebitBankAccountNr,\r\n                              accountOwnerNr: initialAccount.AccountOwnerApplicantNr,\r\n                          }\r\n                        : null,\r\n            },\r\n            isPossibleToConfirmAccount:\r\n                !!initialAccount.DirectDebitBankAccountNr && !!initialAccount.AccountOwnerApplicantNr,\r\n            isDirectDebitAccountConfirmed: task.HasConfirmedAccountInfo,\r\n            unsignedDirectDebitConsentFileArchiveKey: task.UnsignedDirectDebitConsentFileArchiveKey,\r\n            signedDirectDebitConsentFileArchiveKey: task.SignedDirectDebitConsentFileArchiveKey,\r\n            applicants: applicants,\r\n            accountOwner: selectedAccountOwnerName,\r\n            signatureSessionUrl: task.SignatureSessionUrl,\r\n        };\r\n\r\n        this.model = model;\r\n    }\r\n\r\n    private getInitialDirectDebitBankAccountNr(\r\n        task: DirectDebitTaskModel,\r\n        applicants: { Code: string; DisplayName: string }[]\r\n    ): {\r\n        AccountOwnerApplicantNr: number;\r\n        DirectDebitBankAccountNr: string;\r\n    } {\r\n        if (task.DirectDebitBankAccountNr) {\r\n            return {\r\n                AccountOwnerApplicantNr: task.AccountOwnerApplicantNr,\r\n                DirectDebitBankAccountNr: task.DirectDebitBankAccountNr,\r\n            };\r\n        } else if (task.PaidToCustomerBankAccountNr) {\r\n            return {\r\n                AccountOwnerApplicantNr: applicants.length === 1 ? 1 : null, //Dont default an owner when two and prefilled since it could be actively wrong\r\n                DirectDebitBankAccountNr: task.PaidToCustomerBankAccountNr,\r\n            };\r\n        } else {\r\n            return {\r\n                AccountOwnerApplicantNr: 1,\r\n                DirectDebitBankAccountNr: null,\r\n            };\r\n        }\r\n    }\r\n\r\n    private setupAccountForm(): FormsHelper {\r\n        let initialAccount = this.getInitialDirectDebitBankAccountNr(this.initialData.task, this.model.applicants);\r\n        let selectedBankAccount = initialAccount.DirectDebitBankAccountNr;\r\n        let selectedAccountOwner = initialAccount.AccountOwnerApplicantNr;\r\n\r\n        let form = new FormsHelper(this.fb.group({}));\r\n        let bankAccountValidator = FormsHelper.createValidatorAsync('bankAccountNr', (res) => {\r\n            if (!res) {\r\n                return of(true); //Handled by required\r\n            }\r\n            return from(\r\n                this.apiService\r\n                    .validateBankAccountNrsBatch({ b: { bankAccountNr: res, bankAccountNrType: '' } }, true)\r\n                    .then((y) => {\r\n                        let result = y.ValidatedAccountsByKey['b'];\r\n                        return result?.IsValid === true;\r\n                    })\r\n            );\r\n        });\r\n        form.addControlIfNotExists('bankAccountNr', selectedBankAccount, [Validators.required], [bankAccountValidator]);\r\n        form.addControlIfNotExists('accountOwner', selectedAccountOwner?.toString(), [Validators.required]);\r\n        return form;\r\n    }\r\n\r\n    beginEditAccount(evt?: Event) {\r\n        this.model.editForm = this.setupAccountForm();\r\n    }\r\n\r\n    onCancelAccount(evt?: Event) {\r\n        this.resetEditForm();\r\n    }\r\n\r\n    private resetEditForm() {\r\n        this.model.editForm = null;\r\n    }\r\n\r\n    onSaveAccount(evt?: Event) {\r\n        let selectedAccountNr = this.model.editForm.getValue('bankAccountNr');\r\n        let selectedAccountOwner = this.model.editForm.getValue('accountOwner');\r\n\r\n        this.apiService\r\n            .saveDirectDebitAccountInfo(this.initialData.applicationNr, selectedAccountNr, selectedAccountOwner)\r\n            .then((onSuccess) => {\r\n                this.eventService.signalReloadApplication(this.initialData.applicationNr);\r\n                this.resetEditForm();\r\n            });\r\n    }\r\n\r\n    async confirmDirectDebitAccountAndOwner() {\r\n        let task = this.initialData.task;\r\n        if (!task.DirectDebitBankAccountNr && this.model.view.preSelected) {\r\n            //Meaning there is an autofilled suggestion but the user did not edit or save it so we simulate that.\r\n            let p = this.model.view.preSelected;\r\n            await this.apiService.saveDirectDebitAccountInfo(\r\n                this.initialData.applicationNr,\r\n                p.bankAccountNr,\r\n                p.accountOwnerNr\r\n            );\r\n        }\r\n\r\n        this.apiService.confirmDirectDebitAccountInfo(this.initialData.applicationNr).then((onSuccess) => {\r\n            this.model.isDirectDebitAccountConfirmed = true;\r\n            this.eventService.signalReloadApplication(this.initialData.applicationNr);\r\n        });\r\n    }\r\n\r\n    getDocumentUrl(archiveKey: string) {\r\n        return this.apiService.getArchiveDocumentUrl(archiveKey, true);\r\n    }\r\n\r\n    getIconClass(isAccepted: boolean, isRejected: boolean) {\r\n        let isOther = !isAccepted && !isRejected;\r\n        return {\r\n            'glyphicon-ok': isAccepted,\r\n            'glyphicon-remove': isRejected,\r\n            'glyphicon-minus': isOther,\r\n            'glyphicon': true,\r\n            'text-success': isAccepted,\r\n            'text-danger': isRejected,\r\n        };\r\n    }\r\n}\r\n\r\nexport class Model {\r\n    view: {\r\n        selectedAccountOwnerDisplayName: string;\r\n        selectedAccountNrDisplay: string;\r\n        preSelected: {\r\n            bankAccountNr: string;\r\n            accountOwnerNr: number;\r\n        };\r\n    };\r\n    isPossibleToConfirmAccount: boolean;\r\n    isDirectDebitAccountConfirmed: boolean;\r\n    unsignedDirectDebitConsentFileArchiveKey: string;\r\n    signedDirectDebitConsentFileArchiveKey: string;\r\n    applicants: { Code: string; DisplayName: string }[];\r\n    editForm?: FormsHelper;\r\n    accountOwner: string;\r\n    signatureSessionUrl: string;\r\n}\r\n\r\nexport class DirectDebitInitialData {\r\n    applicationNr: string;\r\n    task: DirectDebitTaskModel;\r\n}\r\n","<div *ngIf=\"model && !model.isDirectDebitAccountConfirmed\" class=\"pt-2\">\r\n  <div class=\"pb-1\">\r\n    <h2>Ange konto för autogirodragning</h2>\r\n    <hr class=\"hr-section\" />\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-10 col-xs-12\">\r\n        <p>\r\n          Ange kontonummer för autogirodragning för betalning av lånet.\r\n          Låntagaren måste vara ägare av kontot.\r\n        </p>\r\n      </div>\r\n      <div class=\"col-sm-2 col-xs-12\">\r\n        <div class=\"text-right\">\r\n          <div *ngIf=\"!model.editForm\">\r\n            <button\r\n              class=\"n-icon-btn n-blue-btn\"\r\n              (click)=\"beginEditAccount($event)\"\r\n            >\r\n              <span class=\"glyphicon glyphicon-pencil\"></span>\r\n            </button>\r\n          </div>\r\n          <div *ngIf=\"model.editForm\">\r\n            <button\r\n              (click)=\"onCancelAccount($event)\"\r\n              class=\"n-icon-btn n-white-btn\"\r\n              style=\"margin-right: 5px\"\r\n            >\r\n              <span class=\"glyphicon glyphicon-remove\"></span>\r\n            </button>\r\n            <button\r\n              (click)=\"onSaveAccount($event)\"\r\n              [disabled]=\"model.editForm?.invalid()\"\r\n              class=\"n-icon-btn n-green-btn\"\r\n            >\r\n              <span class=\"glyphicon glyphicon-ok\"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"pb-3\" *ngIf=\"!model.editForm\">\r\n    <div class=\"row pb-2\">\r\n      <div class=\"col-sm-8 col-xs-12\">\r\n        <div class=\"form-group\">\r\n          <label class=\"control-label\"\r\n            >Kontonummer inklusive clearingnummer</label\r\n          >\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"form-control-static copyable bb-1\">\r\n            {{ model.view.selectedAccountNrDisplay }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row pb-2\">\r\n      <div class=\"col-sm-8 col-xs-12\">\r\n        <div class=\"form-group\">\r\n          <label class=\"control-label\">Kontoägare</label>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"form-control-static copyable bb-1\">\r\n            {{ model.view.selectedAccountOwnerDisplayName }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"pb-3\" *ngIf=\"model.editForm\">\r\n    <form [formGroup]=\"model.editForm.form\">\r\n      <div class=\"row pb-2\">\r\n        <div class=\"col-sm-8 col-xs-12\">\r\n          <div class=\"form-group\">\r\n            <label class=\"control-label\"\r\n              >Kontonummer inklusive clearingnummer</label\r\n            >\r\n          </div>\r\n          <div\r\n            class=\"form-group\"\r\n            *ngIf=\"model.editForm\"\r\n            [ngClass]=\"{\r\n              'has-error': model.editForm.hasError('bankAccountNr')\r\n            }\"\r\n          >\r\n            <input\r\n              formControlName=\"bankAccountNr\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row pb-2\">\r\n        <div class=\"col-sm-8 col-xs-12\">\r\n          <div class=\"form-group\">\r\n            <label class=\"control-label\">Kontoägare</label>\r\n          </div>\r\n          <div\r\n            class=\"form-group\"\r\n            *ngIf=\"model.editForm\"\r\n            [ngClass]=\"{ 'has-error': model.editForm.hasError('accountOwner') }\"\r\n          >\r\n            <select formControlName=\"accountOwner\" class=\"form-control\">\r\n              <option *ngFor=\"let a of model.applicants\" [ngValue]=\"a.Code\">\r\n                {{ a.DisplayName }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n  <div\r\n    class=\"text-center pt-3\"\r\n    *ngIf=\"!model.isDirectDebitAccountConfirmed && !model.editForm\"\r\n  >\r\n    <button\r\n      type=\"button\"\r\n      class=\"n-main-btn n-green-btn\"\r\n      [disabled]=\"!model.isPossibleToConfirmAccount\"\r\n      (click)=\"confirmDirectDebitAccountAndOwner()\"\r\n    >\r\n      Godkänn\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"model && model.isDirectDebitAccountConfirmed\" class=\"pt-2\">\r\n  <div class=\"pb-1\">\r\n    <h2>Medgivande av autogiro</h2>\r\n    <hr class=\"hr-section\" />\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-10 col-xs-12\">\r\n        <p>Läs igenom medgivande av autogiro och signera dokumentet.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"pb-2\">\r\n    <div class=\"col-xs-6\">\r\n      <div\r\n        class=\"form-horizontal\"\r\n        *ngIf=\"\r\n          model.unsignedDirectDebitConsentFileArchiveKey &&\r\n          !model.signedDirectDebitConsentFileArchiveKey\r\n        \"\r\n      >\r\n        <div class=\"form-group\">\r\n          <label class=\"col-xs-12 control-label text-left\"\r\n            >Förhandsgranska autogiro-medgivande</label\r\n          >\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"col-xs-12 form-control-static\">\r\n            <a\r\n              [href]=\"\r\n                getDocumentUrl(model.unsignedDirectDebitConsentFileArchiveKey)\r\n              \"\r\n              target=\"_blank\"\r\n              class=\"n-direct-btn n-purple-btn\"\r\n              >Ladda ned <span class=\"glyphicon glyphicon-save\"></span\r\n            ></a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"form-horizontal\"\r\n        *ngIf=\"model.signedDirectDebitConsentFileArchiveKey\"\r\n      >\r\n        <div class=\"form-group\">\r\n          <label class=\"col-xs-12 control-label text-left\"\r\n            >Signerat medgivande</label\r\n          >\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <p class=\"col-xs-12 form-control-static\">\r\n            <a\r\n              [href]=\"\r\n                getDocumentUrl(model.signedDirectDebitConsentFileArchiveKey)\r\n              \"\r\n              target=\"_blank\"\r\n              class=\"n-direct-btn n-purple-btn\"\r\n              >Ladda ned <span class=\"glyphicon glyphicon-save\"></span\r\n            ></a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-xs-6\">&nbsp;</div>\r\n    <div class=\"clearfix\"></div>\r\n  </div>\r\n  <table class=\"table table-separate pt-2\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"col-xs-4\">Sökande</th>\r\n        <th class=\"col-xs-6\"></th>\r\n        <th class=\"col-xs-2\">Status</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>{{ model.accountOwner }}</td>\r\n        <td>\r\n          <a\r\n            *ngIf=\"!model.signedDirectDebitConsentFileArchiveKey\"\r\n            [href]=\"model.signatureSessionUrl\"\r\n            class=\"n-direct-btn n-white-btn\"\r\n            >Signera</a\r\n          >\r\n        </td>\r\n        <td>\r\n          <span\r\n            [ngClass]=\"\r\n              getIconClass(\r\n                model.signedDirectDebitConsentFileArchiveKey !== undefined,\r\n                false\r\n              )\r\n            \"\r\n            class=\"form-control-static-icon custom-glyph ntech-status-icon\"\r\n          ></span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\n\r\n@Component({\r\n    selector: 'np-shell',\r\n    templateUrl: './shell.component.html',\r\n    styles: [],\r\n})\r\nexport class ShellComponent implements OnInit {\r\n    constructor(public config: CustomerPagesConfigService, private eventService: CustomerPagesEventService) {}\r\n\r\n    isLoading: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n\r\n    ngOnInit(): void {\r\n        this.eventService.isLoading.subscribe((x) => {\r\n            //Good old ExpressionChangedAfterItHasBeenCheckedError: https://stackoverflow.com/questions/49914840/expressionchangedafterithasbeencheckederror-on-loadingindicator\r\n            Promise.resolve(null).then(() => this.isLoading.next(x));\r\n        });\r\n    }\r\n\r\n    logOut(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        document.location.href = this.config.config()?.LogoutUrl;\r\n    }\r\n}\r\n","<div class=\"wrapper\">\r\n  <div class=\"navigation\">\r\n    <div class=\"content-position\">\r\n      <div class=\"branding\">\r\n        <a\r\n          class=\"navbar-brand\"\r\n          [routerLink]=\"['/unsecured-loan-applications/overview']\"\r\n        >\r\n          <img\r\n            *ngIf=\"!config.config()?.Skinning\"\r\n            src=\"assets/img/menu-header-logo.png\"\r\n          />\r\n          <img\r\n            *ngIf=\"!!config.config()?.Skinning\"\r\n            [src]=\"config.config()?.Skinning?.LogoUrl\"\r\n          />\r\n        </a>\r\n      </div>\r\n      <div class=\"navigation-right\">\r\n        <ul class=\"navigation-list\">\r\n          <li>\r\n            <a\r\n              (click)=\"logOut($event)\"\r\n              href=\"#\"\r\n              class=\"n-direct-btn n-white-btn\"\r\n              >Logga ut</a\r\n            >\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"clearfix\"></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"container-fluid body-content\">\r\n    <ng-content select=\"[shell-body]\"></ng-content>\r\n    <div class=\"loading\" *ngIf=\"isLoading.value\">Loading&#8230;</div>\r\n  </div>\r\n  <footer>\r\n    <p><img src=\"assets/img/menu-header-logo.png\" alt=\"Näktergal AB\" /></p>\r\n  </footer>\r\n</div>\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { NtechEventService, UpdateToggleBlock } from 'src/app/common-services/ntech-event.service';\r\n\r\n@Component({\r\n    selector: 'task-toggle-block',\r\n    templateUrl: './task-toggle-block.component.html',\r\n    styleUrls: ['./task-toggle-block.scss'],\r\n})\r\nexport class TaskToggleBlockComponent implements OnInit {\r\n    constructor(eventService: NtechEventService) {\r\n        eventService.applicationEvents.subscribe((x) => {\r\n            if (x.eventCode === UpdateToggleBlock && this.initialData?.toggleBlockId) {\r\n                let eventData = x.customData as { toggleBlockId: string; newTitle: string };\r\n                if (eventData?.toggleBlockId === this.initialData.toggleBlockId) {\r\n                    this.m.headerText = eventData.newTitle;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Input() public initialData: TaskToggleBlockInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        this.m = {\r\n            isExpanded: this.initialData.isInitiallyExpanded,\r\n            headerText: this.initialData.headerText,\r\n            status:\r\n                this.initialData.isAccepted === true\r\n                    ? 'accepted'\r\n                    : this.initialData.isRejected === true\r\n                    ? 'rejected'\r\n                    : 'initial',\r\n        };\r\n    }\r\n\r\n    toggleExpanded(evt: Event) {\r\n        if (evt) {\r\n            evt.preventDefault();\r\n        }\r\n        this.m.isExpanded = !this.m.isExpanded;\r\n        if (this.initialData && this.initialData.onExpandedToggled) {\r\n            this.initialData.onExpandedToggled(this.m.isExpanded);\r\n        }\r\n    }\r\n}\r\n\r\nclass Model {\r\n    headerText: string;\r\n    isExpanded: boolean;\r\n    status: string;\r\n}\r\n\r\nexport class TaskToggleBlockInitialData {\r\n    headerText: string;\r\n    isInitiallyExpanded?: boolean;\r\n    onExpandedToggled?: (isExpanded: boolean) => void;\r\n    toggleBlockId?: string;\r\n    isRejected?: boolean;\r\n    isAccepted?: boolean;\r\n}\r\n","<div class=\"task-toggle\" *ngIf=\"m\">\r\n  <div\r\n    class=\"task-toggle-header-row\"\r\n    [ngClass]=\"{\r\n      'task-toggle-expanded': m.isExpanded,\r\n      'task-toggle-contracted': !m.isExpanded\r\n    }\"\r\n    (click)=\"toggleExpanded($event)\"\r\n  >\r\n    <div class=\"task-toggle-icon\">\r\n      <span\r\n        class=\"glyphicon\"\r\n        [ngClass]=\"{\r\n          'glyphicon-minus': m.status === 'initial',\r\n          'glyphicon-remove': m.status === 'rejected',\r\n          'glyphicon-ok': m.status === 'accepted'\r\n        }\"\r\n      ></span>\r\n    </div>\r\n    <div class=\"task-toggle-header-text\">\r\n      <p>{{ m.headerText }}</p>\r\n    </div>\r\n    <div class=\"text-right task-toggle-openclose\">\r\n      <span\r\n        class=\"glyphicon\"\r\n        [ngClass]=\"{\r\n          'glyphicon-triangle-bottom': m.isExpanded,\r\n          'glyphicon-plus': !m.isExpanded\r\n        }\"\r\n      ></span>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"m.isExpanded\" style=\"padding-bottom: 20px; margin-top: 1px\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { TaskModel } from './customer-pages-application.component';\r\n\r\nexport type TaskDisplayState = 'normal' | 'focused' | 'hidden';\r\n\r\n@Component({\r\n    selector: 'customer-pages-application-tasks',\r\n    template: `<div [class.frame]=\"displayState === 'focused'\" *ngIf=\"support && displayState !== 'hidden'\">\r\n        <div class=\"task\">\r\n            <div class=\"pt-2\">\r\n                <h2 class=\"header-light\" [ngClass]=\"{ 'text-center': displayState === 'focused' }\">{{ title }}</h2>\r\n                <ng-content select=\"[task-explanation]\"></ng-content>\r\n\r\n                <table *ngIf=\"tasks && tasks.length > 0\" class=\"table table-separate\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"col-xs-1\"></th>\r\n                            <th class=\"col-xs-10\"></th>\r\n                            <th class=\"col-xs-1\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr\r\n                            [ngClass]=\"getTaskRowClass(task)\"\r\n                            *ngFor=\"let task of tasks\"\r\n                            (click)=\"support.openTask(task, $event)\"\r\n                        >\r\n                            <td>\r\n                                <span\r\n                                    [ngClass]=\"\r\n                                        getIconClass(task.status.IsAccepted === true, task.status.IsAccepted === false)\r\n                                    \"\r\n                                    class=\"custom-glyph ntech-status-icon\"\r\n                                ></span>\r\n                            </td>\r\n                            <td>{{ task.headerText }}</td>\r\n                            <td class=\"text-right\">\r\n                                <span class=\"glyphicon-play glyphicon custom-glyph\"></span>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>`,\r\n    styleUrls: ['./customer-pages-application-tasks.scss'],\r\n})\r\nexport class CustomerPagesApplicationTasksComponent implements OnInit {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public displayState: TaskDisplayState;\r\n\r\n    @Input()\r\n    public tasks: TaskModel[];\r\n\r\n    @Input()\r\n    support: IApplicationTasksSupportFunctions;\r\n\r\n    @Input()\r\n    title: string;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    getIconClass(isAccepted: boolean, isRejected: boolean) {\r\n        let isOther = !isAccepted && !isRejected;\r\n        return {\r\n            'glyphicon-ok': isAccepted,\r\n            'glyphicon-remove': isRejected,\r\n            'glyphicon-minus': isOther,\r\n            'glyphicon': true,\r\n            'text-success': isAccepted,\r\n            'text-danger': isRejected,\r\n        };\r\n    }\r\n\r\n    getTaskRowClass(task: TaskModel) {\r\n        return this.isTaskInactive(task) ? 'inactive-task-row' : 'active-task-row';\r\n    }\r\n\r\n    isTaskInactive(task: TaskModel) {        \r\n        let status = task.status;\r\n        if(task.isKycTask) {\r\n            return !status.IsActive;\r\n        } else {            \r\n            return !status.IsActive && !(status.IsAccepted === true || status.IsAccepted === false);\r\n        }        \r\n    }\r\n}\r\n\r\nexport interface IApplicationTasksSupportFunctions {\r\n    openTask(task: TaskModel, evt?: Event): void;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { ComplexApplicationListRow } from 'src/app/common-services/complex-application-list';\r\nimport { CustomerPagesEventService } from '../../../common-services/customerpages-event.service';\r\nimport { CustomerPagesAgreementInitialData } from '../../components/customer-pages-agreement/customer-pages-agreement.component';\r\nimport { CustomerPagesApplicationMessagesInitialData } from '../../../shared-components/customer-pages-application-messages/customer-pages-application-messages.component';\r\nimport { CustomerPagesApplicationOfferInitialData } from '../../components/customer-pages-application-offer/customer-pages-application-offer.component';\r\nimport { CustomerPagesBankAccountsInitialData } from '../../components/customer-pages-bankaccounts/customer-pages-bankaccounts.component';\r\nimport { DirectDebitInitialData } from '../../components/customer-pages-direct-debit/customer-pages-direct-debit.component';\r\n\r\nimport {\r\n    ApplicationExtendedModel,\r\n    ApplicationTask,\r\n    CustomerPagesApplicationsApiService,\r\n    DirectDebitTaskModel,\r\n} from '../../services/customer-pages-applications-api.service';\r\nimport { IApplicationTasksSupportFunctions, TaskDisplayState } from './customer-pages-application-tasks.component';\r\n\r\n@Component({\r\n    selector: 'np-customer-pages-application',\r\n    templateUrl: './customer-pages-application.component.html',\r\n    styleUrls: ['./customer-pages-application-tasks.scss'],\r\n})\r\nexport class CustomerPagesApplicationComponent implements OnInit, IApplicationTasksSupportFunctions {\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private apiService: CustomerPagesApplicationsApiService,\r\n        private eventService: CustomerPagesEventService,\r\n        private titleService: Title,\r\n        private router: Router\r\n    ) {}\r\n\r\n    public m: Model;\r\n\r\n    public focusedState: TaskDisplayState = 'focused';\r\n    public normalState: TaskDisplayState = 'normal';\r\n\r\n    ngOnInit(): void {\r\n        this.reload(this.route.snapshot.params['applicationNr'], null);\r\n    }\r\n\r\n    private reload(applicationNr: string, currentlyOpenTask?: TaskModel) {\r\n        if (this.m?.subs) {\r\n            for (let sub of this.m.subs) {\r\n                sub.unsubscribe();\r\n            }\r\n        }\r\n        this.apiService.fetchApplication(applicationNr).then((x) => {\r\n            let hasRejectedOffer = false;\r\n            let hasAcceptedOffer = false;\r\n            if (x.Application?.CurrentOffer?.OfferItems) {\r\n                let offerItems = ComplexApplicationListRow.fromDictionary(\r\n                    'temp',\r\n                    1,\r\n                    x.Application?.CurrentOffer?.OfferItems\r\n                );\r\n                hasRejectedOffer = offerItems.getUniqueItem('customerDecisionCode') == 'rejected';\r\n                hasAcceptedOffer = offerItems.getUniqueItem('customerDecisionCode') == 'accepted';\r\n            }\r\n\r\n            let isWaitingForOffer = !x.Application?.CurrentOffer && x.Application?.IsFutureOfferPossible;\r\n            let isPossibleToDecideOffer = x.Application?.CurrentOffer?.IsPossibleToDecide;\r\n\r\n            //Put new tasks above this line\r\n            let betweenOfferAndSignatureTaskGroup = new TaskGroup('Villkoren för erbjudandet');\r\n            let signatureTaskGroup = new TaskGroup('Signering av avtal');\r\n            let paymentTaskGroup = new TaskGroup('Väntar på utbetalning');\r\n\r\n            let m: Model = {\r\n                applicationNr: applicationNr,\r\n                offerInitialData: x.Application.CurrentOffer\r\n                    ? {\r\n                          applicationNr: applicationNr,\r\n                          offerItems: x.Application.CurrentOffer.OfferItems,\r\n                          isPossibleToDecide: isPossibleToDecideOffer,\r\n                      }\r\n                    : null,\r\n                hasRejectedOffer: hasRejectedOffer,\r\n                isWaitingForOffer: isWaitingForOffer,\r\n                isActive: x.Application.IsActive,\r\n                subs: [],\r\n                tasks: [],\r\n                taskGroups: [betweenOfferAndSignatureTaskGroup, signatureTaskGroup, paymentTaskGroup],\r\n                messagesInitialData: {\r\n                    isInitiallyExpanded: false,\r\n                    applicationNr: applicationNr,\r\n                    isApplicationActive: x.Application.IsActive,\r\n                    isMortgagaeLoan: false,\r\n                    isInactiveMessagingAllowed: x.Application.IsInactiveMessagingAllowed,\r\n                },\r\n            };\r\n\r\n            let addTask = (task: TaskModel) => {\r\n                m.tasks.push(task);\r\n                //headertext used as a poor mans taskId here. if headers become dynamic in the future, change this for some sort of task code\r\n                if (\r\n                    currentlyOpenTask &&\r\n                    task.headerText === currentlyOpenTask.headerText &&\r\n                    this.isTaskOpenable(task)\r\n                ) {\r\n                    m.openTask = { model: task.createOpenTask(), parentTask: task };\r\n                }\r\n                return task;\r\n            };\r\n\r\n            if (x.Application.KycTask) {\r\n                let task = addTask({\r\n                    headerText: 'Kundkännedom',\r\n                    status: x.Application.KycTask,\r\n                    isKycTask: true,\r\n                    createOpenTask: () => {\r\n                        throw 'Not openable'\r\n                    },\r\n                });\r\n                betweenOfferAndSignatureTaskGroup.tasks.push(task);\r\n            }\r\n\r\n            if (x.Application.BankAccountsTask) {\r\n                if(x.Application.KycTask?.IsActive === true) {\r\n                    //We ensure kyc questions are answered before account. This is safe to remove if needed. It just helps a bit with the automation step order.\r\n                    x.Application.BankAccountsTask.IsActive = false;\r\n                }\r\n                let task = addTask({\r\n                    headerText: 'Mottagarkonton för utbetalning',\r\n                    status: x.Application.BankAccountsTask,\r\n                    createOpenTask: () => {\r\n                        return {\r\n                            headerText: 'Utbetalningar',\r\n                            bankAccountsInitialData: {\r\n                                applicationNr: applicationNr,\r\n                                task: x.Application.BankAccountsTask,\r\n                                otherLoanTypes: x.Application.Enums.OtherLoanTypes,\r\n                            },\r\n                        };\r\n                    },\r\n                });\r\n                betweenOfferAndSignatureTaskGroup.tasks.push(task);\r\n            }\r\n\r\n            if (x.Application.AgreementTask) {\r\n                let task = addTask({\r\n                    headerText: 'Signering av avtal',\r\n                    status: x.Application.AgreementTask,\r\n                    createOpenTask: () => {\r\n                        return {\r\n                            headerText: 'Signering av avtal',\r\n                            agreementInitialData: {\r\n                                applicationNr: applicationNr,\r\n                                task: x.Application.AgreementTask,\r\n                            },\r\n                        };\r\n                    },\r\n                });\r\n                signatureTaskGroup.tasks.push(task);\r\n            }\r\n\r\n            if (x.Application.DirectDebitTask) {\r\n                if(x.Application.KycTask?.IsActive === true) {\r\n                    //We ensure kyc questions are answered before account. This is safe to remove if needed. It just helps a bit with the automation step order.\r\n                    x.Application.DirectDebitTask.IsActive = false;\r\n                }\r\n                let task = addTask(this.getDirectDebitTask(applicationNr, x.Application.DirectDebitTask));\r\n                betweenOfferAndSignatureTaskGroup.tasks.push(task);\r\n            }\r\n\r\n            if (x.Application.IsActive) {\r\n                let betweenOfferAndSignatureDisplayState: TaskDisplayState = 'hidden';\r\n\r\n                let hasBetweenOfferAndSignatureReachedVisible = hasAcceptedOffer;\r\n                let hasBetweenOfferAndSignatureReachedActive = hasAcceptedOffer;\r\n                let hasBetweenOfferAndSignatureBeenCompleted = betweenOfferAndSignatureTaskGroup.areAllTasksAccepted();\r\n\r\n                betweenOfferAndSignatureDisplayState = !hasBetweenOfferAndSignatureReachedVisible\r\n                    ? 'hidden'\r\n                    : !hasBetweenOfferAndSignatureBeenCompleted\r\n                    ? 'focused'\r\n                    : 'normal';\r\n\r\n                if (betweenOfferAndSignatureDisplayState === 'focused') {\r\n                    betweenOfferAndSignatureTaskGroup.displayState = 'focused';\r\n                    if (hasBetweenOfferAndSignatureReachedActive) {\r\n                        betweenOfferAndSignatureTaskGroup.texts = [\r\n                            'För att kunna gå vidare med din ansökan behöver du gå igenom nedanstående uppgifter.',\r\n                        ];\r\n                    }\r\n                } else if (betweenOfferAndSignatureDisplayState === 'normal') {\r\n                    betweenOfferAndSignatureTaskGroup.displayState = 'normal';\r\n                }\r\n\r\n                TaskGroup.setupBetweenOfferAndSignatureGroup(hasAcceptedOffer, betweenOfferAndSignatureTaskGroup);\r\n                TaskGroup.setupSignatureGroup(\r\n                    hasBetweenOfferAndSignatureBeenCompleted,\r\n                    x.Application,\r\n                    signatureTaskGroup\r\n                );\r\n\r\n                if (\r\n                    betweenOfferAndSignatureTaskGroup.isDisplayNormalAndHasAllTasksAccepted() &&\r\n                    signatureTaskGroup.isDisplayNormalAndHasAllTasksAccepted()\r\n                ) {\r\n                    paymentTaskGroup.displayState = 'focused';\r\n                    paymentTaskGroup.texts = [\r\n                        'Din ansökan behandlas där de sista kontrollerna genomförs.',\r\n                        'Utbetalning sker normalt inom ett par arbetsdagar.',\r\n                    ];\r\n                }\r\n            }\r\n\r\n            m.subs.push(\r\n                this.eventService.applicationEvents.subscribe((x) => {\r\n                    if (x?.isReloadApplicationEvent() && this.m?.applicationNr === x.customData) {\r\n                        //note: if we ever want to preseve popups sometimes but not always, replace reload application event with a custom event that has a preservePopup boolean\r\n                        this.reload(x.customData, this.m?.openTask?.parentTask);\r\n                    } else if (x?.isReloadApplicationAndClosePopupEvent() && this.m?.applicationNr === x.customData) {\r\n                        this.reload(x.customData);\r\n                    }\r\n                })\r\n            );\r\n\r\n            this.m = m;\r\n            this.titleService.setTitle('Ansökan ' + applicationNr);\r\n        });\r\n    }\r\n\r\n    private getDirectDebitTask(applicationNr: string, task: DirectDebitTaskModel) {\r\n        return {\r\n            headerText: 'Autogiro',\r\n            status: task,\r\n            createOpenTask: () => {\r\n                return {\r\n                    headerText: 'Autogiro',\r\n                    directDebitInitialData: {\r\n                        applicationNr: applicationNr,\r\n                        task: task,\r\n                    },\r\n                };\r\n            },\r\n        };\r\n    }\r\n\r\n    getFilteredTaskGroups(displayState: TaskDisplayState) {\r\n        if (!this.m.taskGroups) {\r\n            return [];\r\n        }\r\n        return this.m.taskGroups.filter((x) => x.displayState === displayState);\r\n    }\r\n\r\n    async openTask(task: TaskModel, evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        if (!this.isTaskOpenable(task)) {\r\n            return;\r\n        }\r\n\r\n        if(task.isKycTask) {\r\n            let {sessionId} = await this.apiService.createKycQuestionSession(this.m.applicationNr);\r\n            this.eventService.isLoading.next(true);\r\n            this.router.navigate(['public-kyc/questions-session/' + sessionId])\r\n        } else {\r\n            this.m.openTask = { parentTask: task, model: task.createOpenTask() };\r\n        }\r\n    }\r\n\r\n    closeTask(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        this.m.openTask = null;\r\n    }\r\n\r\n    private isTaskOpenable(task: TaskModel) {\r\n        return task.status.IsActive || (task.status.IsAccepted && !task.isKycTask);\r\n    }\r\n}\r\n\r\nexport class CustomerPagesApplicationReloadEvent {\r\n    public static EventName: string = 'CustomerPagesApplicationReloadEvent';\r\n\r\n    constructor(public applicationNr: string, public initiallyOpenTaskCode: string) {}\r\n}\r\n\r\nclass Model {\r\n    applicationNr: string;\r\n    offerInitialData: CustomerPagesApplicationOfferInitialData;\r\n    isWaitingForOffer: boolean;\r\n    hasRejectedOffer: boolean;\r\n    isActive: boolean;\r\n    subs: Subscription[];\r\n    tasks: TaskModel[];\r\n    openTask?: {\r\n        parentTask: TaskModel;\r\n        model: OpenTaskModel;\r\n    };\r\n    taskGroups: TaskGroup[];\r\n    messagesInitialData: CustomerPagesApplicationMessagesInitialData;\r\n}\r\n\r\nclass TaskGroup {\r\n    constructor(public title: string) {}\r\n\r\n    texts: string[] = [];\r\n    displayState: TaskDisplayState = 'hidden';\r\n    tasks: TaskModel[] = [];\r\n\r\n    areAllTasksAccepted() {\r\n        return this.tasks.findIndex((x) => x?.status?.IsAccepted !== true) < 0;\r\n    }\r\n\r\n    isDisplayNormalAndHasAllTasksAccepted() {\r\n        return this.displayState === 'normal' && this.areAllTasksAccepted();\r\n    }\r\n\r\n    static setupBetweenOfferAndSignatureGroup(hasAcceptedOffer: boolean, betweenOfferAndSignatureTaskGroup: TaskGroup) {\r\n        let betweenOfferAndSignatureDisplayState: TaskDisplayState = 'hidden';\r\n\r\n        let hasBetweenOfferAndSignatureReachedVisible = hasAcceptedOffer;\r\n        let hasBetweenOfferAndSignatureReachedActive = hasAcceptedOffer;\r\n        let hasBetweenOfferAndSignatureBeenCompleted = betweenOfferAndSignatureTaskGroup.areAllTasksAccepted();\r\n\r\n        betweenOfferAndSignatureDisplayState = !hasBetweenOfferAndSignatureReachedVisible\r\n            ? 'hidden'\r\n            : !hasBetweenOfferAndSignatureBeenCompleted\r\n            ? 'focused'\r\n            : 'normal';\r\n\r\n        if (betweenOfferAndSignatureDisplayState === 'focused') {\r\n            betweenOfferAndSignatureTaskGroup.displayState = 'focused';\r\n            if (!hasBetweenOfferAndSignatureReachedActive) {\r\n                betweenOfferAndSignatureTaskGroup.texts = [\r\n                    'För att kunna gå vidare med ansökan behöver du gå igenom nedanstående uppgifter.',\r\n                ];\r\n            }\r\n        } else if (betweenOfferAndSignatureDisplayState === 'normal') {\r\n            betweenOfferAndSignatureTaskGroup.displayState = 'normal';\r\n        }\r\n    }\r\n\r\n    static setupSignatureGroup(\r\n        hasBetweenOfferAndSignatureBeenCompleted: boolean,\r\n        application: ApplicationExtendedModel,\r\n        signatureTaskGroup: TaskGroup\r\n    ) {\r\n        let signatureDisplayState: TaskDisplayState = 'hidden';\r\n\r\n        let hasSignatureReachedVisible = hasBetweenOfferAndSignatureBeenCompleted;\r\n        let hasSignatureReachedActive = application?.AgreementTask?.IsActive || application?.AgreementTask?.IsAccepted;\r\n        let hasSignatureBeenCompleted = signatureTaskGroup.areAllTasksAccepted();\r\n\r\n        signatureDisplayState = !hasSignatureReachedVisible\r\n            ? 'hidden'\r\n            : !hasSignatureBeenCompleted\r\n            ? 'focused'\r\n            : 'normal';\r\n\r\n        if (signatureDisplayState === 'focused') {\r\n            if (!hasSignatureReachedActive) {\r\n                signatureTaskGroup.texts = [\r\n                    'Din ansökan är under behandling, vi återkopplar till dig när någonting förändras i ditt ärende.',\r\n                ];\r\n            }\r\n            signatureTaskGroup.displayState = 'focused';\r\n        } else if (signatureDisplayState === 'normal') {\r\n            signatureTaskGroup.displayState = 'normal';\r\n        }\r\n    }\r\n}\r\n\r\nexport class TaskModel {\r\n    headerText: string;\r\n    status: ApplicationTask;\r\n    createOpenTask: () => OpenTaskModel;\r\n     /*\r\n     NOTE: This is probably not the best long term solution. The whole task abstraction in use here is more of a problem than helpful. If you find this thinking about adding more\r\n           similiar booleans, consider just rewriting this whole page and api without this whole task abstraction and task group thing. It will likely make for way simpler code going forward.\r\n     */\r\n    isKycTask?: boolean\r\n}\r\n\r\nexport interface ISharedWithTasksFunctions {}\r\n\r\nclass OpenTaskModel {\r\n    headerText: string;\r\n    agreementInitialData?: CustomerPagesAgreementInitialData;\r\n    bankAccountsInitialData?: CustomerPagesBankAccountsInitialData;\r\n    directDebitInitialData?: DirectDebitInitialData;\r\n}\r\n","<np-shell>\r\n  <div shell-body>\r\n    <div *ngIf=\"m && !m.openTask\">\r\n      <div class=\"flex-container\" [ngClass]=\"{ small: !m.isActive }\">\r\n        <div class=\"align-center\">\r\n          <div *ngIf=\"m.isActive\">\r\n            <customer-pages-application-offer *ngIf=\"m.offerInitialData\" [initialData]=\"m.offerInitialData\">\r\n              <ng-container focus-block>\r\n                <div class=\"pb-5\">\r\n                  <div *ngFor=\"let taskGroup of getFilteredTaskGroups(focusedState)\" style=\"margin-top: 30px\">\r\n                    <customer-pages-application-tasks [displayState]=\"taskGroup.displayState\" [title]=\"taskGroup.title\"\r\n                      [tasks]=\"taskGroup.tasks\" [support]=\"this\">\r\n                      <p *ngFor=\"let text of taskGroup.texts\" [ngClass]=\"{ 'text-center': taskGroup.displayState === 'focused' }\" task-explanation>\r\n                        {{ text }}\r\n                      </p>\r\n                    </customer-pages-application-tasks>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n            </customer-pages-application-offer>\r\n            <p *ngIf=\"m.isWaitingForOffer\">\r\n              <b>Din ansökan behandlas, vi återkopplar till dig när något\r\n                förändras i ditt ärende.</b>\r\n            </p>\r\n            <div class=\"clearfix\"></div>\r\n          </div>\r\n\r\n          <div *ngFor=\"let taskGroup of getFilteredTaskGroups(normalState)\" style=\"margin-top: 30px\">\r\n            <customer-pages-application-tasks [displayState]=\"taskGroup.displayState\" [title]=\"taskGroup.title\"\r\n              [tasks]=\"taskGroup.tasks\" [support]=\"this\">\r\n              <p *ngFor=\"let text of taskGroup.texts\" [ngClass]=\"{ 'text-center': taskGroup.displayState === 'focused' }\" task-explanation>\r\n                {{ text }}\r\n              </p>\r\n            </customer-pages-application-tasks>\r\n          </div>\r\n\r\n          <div *ngIf=\"!m.isActive\">\r\n            <p>Ärendet är avslutat.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"m && m.openTask\">\r\n      <task-page [headerText]=\"m.openTask.model.headerText\" (onClose)=\"closeTask()\">\r\n        <customer-pages-agreement *ngIf=\"m.openTask.model.agreementInitialData\"\r\n          [initialData]=\"m.openTask.model.agreementInitialData\"></customer-pages-agreement>\r\n        <customer-pages-bankaccounts *ngIf=\"m.openTask.model.bankAccountsInitialData\"\r\n          [initialData]=\"m.openTask.model.bankAccountsInitialData\"></customer-pages-bankaccounts>\r\n        <customer-pages-direct-debit *ngIf=\"m.openTask.model.directDebitInitialData\"\r\n          [initialData]=\"m.openTask.model.directDebitInitialData\"></customer-pages-direct-debit>\r\n      </task-page>\r\n    </div>\r\n    <div [ngClass]=\"{ 'mt-8': m.isActive, 'mt-2': m.isActive }\" *ngIf=\"m\">\r\n      <customer-pages-application-messages [initialData]=\"m.messagesInitialData\">\r\n      </customer-pages-application-messages>\r\n    </div>\r\n  </div>\r\n</np-shell>","import { Component, OnInit } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport * as moment from 'moment';\r\nimport { CustomerPagesApiService } from '../../../common-services/customer-pages-api.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { ApplicationsListComponentInitialData } from '../../../shared-components/applications-list/applications-list.component';\r\nimport { CustomerPagesApplicationsApiService } from '../../services/customer-pages-applications-api.service';\r\n\r\n@Component({\r\n    selector: 'np-overview',\r\n    templateUrl: './overview.component.html',\r\n    styleUrls: [],\r\n})\r\nexport class OverviewComponent implements OnInit {\r\n    constructor(\r\n        private titleService: Title,\r\n        private apiService: CustomerPagesApplicationsApiService,\r\n        private config: CustomerPagesConfigService,\r\n        private sharedApiService: CustomerPagesApiService\r\n    ) {}\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        this.titleService.setTitle('Ansökningar');\r\n        this.reload();\r\n    }\r\n\r\n    reload() {\r\n        this.apiService.fetchApplications().then((x) => {\r\n            let m: Model = {\r\n                applicationsListData: {\r\n                    isMortgageLoan: false,\r\n                    applications: x.Applications,\r\n                    sharedApiService: this.sharedApiService,\r\n                },\r\n                userDisplayName: this.config.userDisplayName(),\r\n                currentDateAndTime: this.config.getCurrentDateAndTime(),\r\n            };\r\n            this.m = m;\r\n        });\r\n    }\r\n}\r\n\r\nclass Model {\r\n    userDisplayName: string;\r\n    currentDateAndTime: moment.Moment;\r\n    applicationsListData: ApplicationsListComponentInitialData;\r\n}\r\n","<np-shell>\r\n  <div shell-body>\r\n    <ng-container *ngIf=\"m\">\r\n      <applications-list [initialData]=\"m.applicationsListData\">\r\n      </applications-list>\r\n    </ng-container>\r\n  </div>\r\n</np-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { PreApplicationStoredDataModel, UlStandardPreApplicationService } from '../../services/pre-application.service';\r\nimport { CustomerPagesConfigService, NTechEnum } from '../../../common-services/customer-pages-config.service';\r\nimport { CustomerpagesShellInitialData } from '../../../shared-components/customerpages-shell/customerpages-shell.component';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CustomerPagesValidationService } from '../../../common-services/customer-pages-validation.service';\r\nimport { Dictionary } from 'src/app/common.types';\r\nimport { EmploymentFormService } from '../../../shared-components/services/employment-form.service';\r\n\r\n@Component({\r\n    selector: 'np-pre-application-applicants',\r\n    templateUrl: './pre-application-applicants.component.html',\r\n    styles: [\r\n    ]\r\n})\r\nexport class PreApplicationApplicantsComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute, private storageService: UlStandardPreApplicationService,\r\n        private config: CustomerPagesConfigService, private router: Router, private formBuilder: UntypedFormBuilder,\r\n        private validationService: CustomerPagesValidationService, private employmentFormService: EmploymentFormService) { }\r\n\r\n    public shellData: CustomerpagesShellInitialData = {\r\n        logoRouterLink: null,\r\n        skipBodyLayout: false,\r\n        wideNavigation: false\r\n    };\r\n    public m: Model\r\n    public errorMessage: string\r\n\r\n    async ngOnInit() {\r\n        this.setupTestFunctions();\r\n        await this.reload(this.route.snapshot.params['preApplicationId']);\r\n    }\r\n\r\n    private async reload(preApplicationId: string) {\r\n        this.errorMessage = null;\r\n        this.m = null;\r\n\r\n        let {isEnabled, settings} = await this.storageService.getUlStandardWebApplicationSettings();\r\n        if(!isEnabled) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan inaktiv' : 'Application not active'\r\n            return;\r\n        }\r\n\r\n\r\n        let loanObjectives = settings?.loanObjectives ?? [];\r\n\r\n        let application = this.storageService.load(preApplicationId);\r\n        if(!application) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan finns inte' : 'No such application exists'\r\n        }\r\n\r\n        let formFields: Dictionary<any> = {\r\n            'mainApplicantCivicRegNr': ['', [this.validationService.getCivicRegNrValidator({ require12DigitCivicRegNrSe: true }), Validators.required]],\r\n            'mainApplicantEmail': ['', [this.validationService.getEmailValidator(), Validators.required]],\r\n            'mainApplicantPhone': ['', [this.validationService.getPhoneValidator(), Validators.required]],\r\n            'mainApplicantIncomePerMonthAmount': ['', [this.validationService.getPositiveIntegerValidator(), Validators.required]],\r\n            'mainApplicantEmployment': ['', [Validators.required]],\r\n            'mainApplicantHasLegalOrFinancialGuardian': ['', [Validators.required]],\r\n            'mainApplicantClaimsToBeGuarantor': ['', [Validators.required]],\r\n        }\r\n\r\n        if(loanObjectives?.length > 0) {\r\n            formFields['loanObjective'] = ['', [Validators.required]]\r\n        }\r\n        let form = new FormsHelper(this.formBuilder.group(formFields));\r\n        form.form.valueChanges.subscribe((x) => {\r\n            form.ensureControlOnConditionOnly(\r\n                this.employmentFormService.isEmployedSinceEmploymentCode(\r\n                    form.getValue('mainApplicantEmployment')\r\n                ),\r\n                'mainApplicantEmployedSince',\r\n                () => '',\r\n                () => [this.validationService.getDateOnlyValidator(), Validators.required]\r\n            );\r\n            form.ensureControlOnConditionOnly(\r\n                this.employmentFormService.isEmployedToEmploymentCode(form.getValue('mainApplicantEmployment')),\r\n                'mainApplicantEmployedTo',\r\n                () => '',\r\n                () => [this.validationService.getDateOnlyValidator(), Validators.required]\r\n            );\r\n            form.ensureControlOnConditionOnly(\r\n                this.employmentFormService.isEmployerEmploymentCode(form.getValue('mainApplicantEmployment')),\r\n                'mainApplicantEmployer',\r\n                () => '',\r\n                () => [Validators.required]\r\n            );\r\n            form.ensureControlOnConditionOnly(\r\n                this.employmentFormService.isEmployerEmploymentCode(form.getValue('mainApplicantEmployment')),\r\n                'mainApplicantEmployerPhone',\r\n                () => '',\r\n                () => [this.validationService.getPhoneValidator(), Validators.required]\r\n            );\r\n        });\r\n\r\n        this.m = {\r\n            form: form,\r\n            preApplicationId: preApplicationId,\r\n            application: application,\r\n            loanObjectives: loanObjectives,\r\n            employmentCodes: this.employmentFormService.getEmploymentStatuses()\r\n        }\r\n    }\r\n\r\n    public async apply(evt ?: Event) {\r\n        evt?.preventDefault();\r\n        let application = this.m.application;\r\n        let vs = this.validationService;\r\n        let f = this.m.form;\r\n        application.loanObjective = f.getValue('loanObjective');\r\n        application.applicants = [{\r\n            civicRegNr: f.getValue('mainApplicantCivicRegNr'),\r\n            phone:  f.getValue('mainApplicantPhone'),\r\n            email: f.getValue('mainApplicantEmail'),\r\n            incomePerMonthAmount: vs.parseIntegerOrNull(f.getValue('mainApplicantIncomePerMonthAmount')),\r\n            employment: vs.normalizeString(f.getValue('mainApplicantEmployment')),\r\n            employer: vs.normalizeString(f.getValue('mainApplicantEmployer')),\r\n            employerPhone: vs.normalizeString(f.getValue('mainApplicantEmployerPhone')),\r\n            employedSince: vs.parseDateOnlyOrNull(f.getValue('mainApplicantEmployedSince')),\r\n            employedTo: vs.parseDateOnlyOrNull(f.getValue('mainApplicantEmployedTo')),\r\n            hasLegalOrFinancialGuardian: f.getValue('mainApplicantHasLegalOrFinancialGuardian') === 'yes',\r\n            claimsToBeGuarantor: f.getValue('mainApplicantClaimsToBeGuarantor') === 'yes'\r\n        }];\r\n        await this.storageService.save(this.m.preApplicationId, application);\r\n        this.router.navigate(['ul-webapplications/application-economy/' + this.m.preApplicationId]);\r\n    }\r\n\r\n    private setupTestFunctions() {\r\n        this.shellData.test = {\r\n            functionCalls: [{\r\n                displayText: 'Autofill',\r\n                execute: async () => {\r\n                    let testPersons = await this.storageService.generateTestPersons(1, true, true);\r\n                    let a1 = testPersons.Persons[0].Properties;\r\n                    let f = this.m.form;\r\n                    f.setValue('mainApplicantCivicRegNr', a1.civicRegNr);\r\n                    f.setValue('mainApplicantEmail', a1.email);\r\n                    f.setValue('mainApplicantPhone', a1.phone);\r\n                    f.setValue('mainApplicantIncomePerMonthAmount', '37500');\r\n                    if(this.m.loanObjectives.length > 0) {\r\n                        f.setValue('loanObjective', this.m.loanObjectives[0]);\r\n                    }\r\n                    f.setValue('mainApplicantEmployment', 'full_time');\r\n                    f.setValue('mainApplicantEmployedSince', '2017-03-15');\r\n                    f.setValue('mainApplicantEmployedTo', '2021-09-12');\r\n                    f.setValue('mainApplicantEmployer', 'Employer AB');\r\n                    f.setValue('mainApplicantEmployerPhone', '08 - 123 654');\r\n                    f.setValue('mainApplicantHasLegalOrFinancialGuardian', 'no');\r\n                    f.setValue('mainApplicantClaimsToBeGuarantor', 'no');\r\n                }\r\n            }]\r\n        }\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    preApplicationId: string\r\n    application: PreApplicationStoredDataModel\r\n    form: FormsHelper\r\n    loanObjectives: string[]\r\n    employmentCodes: NTechEnum[]\r\n}","<customerpages-shell [initialData]=\"shellData\">\r\n    <div shell-body>\r\n        <div class=\"row\" *ngIf=\"m\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n                        <h1 class=\"header-light text-center pb-3\">Privatlån - ansökan</h1>\r\n                        <form [formGroup]=\"m.form.form\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-12\">\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantCivicRegNr', displayText: 'Vad är ditt personnummer?', $implicit: { placeholder: 'ÅÅÅÅMMDDXXXX' } }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmail', displayText: 'Vilken epostadress når vi dig på?' }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantPhone', displayText: 'Vilket telefonnummer når vi dig enklast på?' }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantIncomePerMonthAmount', displayText: 'Vad är din månadsinkomst innan skatt?' }\"></ng-container>\r\n                                    <div class=\"form-group pb-1\" *ngIf=\"m.form.hasFormControl(null, 'loanObjective')\" [ngClass]=\"{ 'has-error': m.form.hasError('loanObjective') }\">\r\n                                        <label>Vad är syftet med lånet?</label>\r\n                                        <select  class=\"form-control\" formControlName=\"loanObjective\">\r\n                                            <option value=\"\"></option>\r\n                                            <option *ngFor=\"let objective of m.loanObjectives\" [value]=\"objective\" >{{objective}}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('mainApplicantEmployment') }\">\r\n                                        <label>Vad har du för sysselsättning</label>\r\n                                        <select class=\"form-control\" formControlName=\"mainApplicantEmployment\">\r\n                                            <option value=\"\" *ngIf=\"!m.form.getValue('mainApplicantEmployment')\"></option>\r\n                                            <option [value]=\"opt.Code\" *ngFor=\"let opt of m.employmentCodes\">{{opt.DisplayName}}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployedSince', displayText: 'Från när har du haft din sysselsättning?', $implicit: { placeholder: 'ÅÅÅÅ-MM' } }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployedTo', displayText: 'Till när har du din sysselsättning?', $implicit: { placeholder: 'ÅÅÅÅ-MM' } }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployer', displayText: 'Vem är din arbetsgivare?' }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'mainApplicantEmployerPhone', displayText: 'Vad är din arbetsgivares telefonnummer?' }\"></ng-container>\r\n                                    <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('mainApplicantEmployment') }\">\r\n                                        <label>Har du god man, förvaltare eller verklig huvudman?</label>\r\n                                        <select class=\"form-control\" formControlName=\"mainApplicantHasLegalOrFinancialGuardian\">\r\n                                            <option value=\"\" *ngIf=\"!m.form.getValue('mainApplicantHasLegalOrFinancialGuardian')\"></option>\r\n                                            <option value=\"yes\">Ja</option>\r\n                                            <option value=\"no\">Nej</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('mainApplicantClaimsToBeGuarantor') }\">\r\n                                        <label>Har du några borgensåtaganden?</label>\r\n                                        <select class=\"form-control\" formControlName=\"mainApplicantClaimsToBeGuarantor\">\r\n                                            <option value=\"\" *ngIf=\"!m.form.getValue('mainApplicantClaimsToBeGuarantor')\"></option>\r\n                                            <option value=\"yes\">Ja</option>\r\n                                            <option value=\"no\">Nej</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"text-right pt-2\">\r\n                                <button class=\"n-main-btn n-green-btn\" [disabled]=\"m.form.invalid()\" (click)=\"apply($event)\">Gå vidare</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</customerpages-shell>\r\n<ng-template #textGroup let-options let-displayText=\"displayText\" let-formControlName=\"formControlName\" >\r\n    <div class=\"form-group pb-1\" *ngIf=\"m.form.hasFormControl(null, formControlName)\" [ngClass]=\"{ 'has-error': m.form.hasError(formControlName) }\" [formGroup]=\"m.form.form\">\r\n        <label>{{displayText}}</label>\r\n        <input type=\"text\" class=\"form-control\" [formControlName]=\"formControlName\" placeholder=\"{{options?.placeholder}}\">\r\n    </div>\r\n</ng-template>","import { Component, OnInit } from '@angular/core';\r\nimport { UlStandardPreApplicationService, UlStandardWebApplicationEnabledSettings } from '../../services/pre-application.service';\r\nimport { Router } from '@angular/router';\r\nimport { CalculatorSliderInitialData } from '../../../shared-components/calculator-slider/calculator-slider.component';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { UntypedFormBuilder } from '@angular/forms';\r\nimport { CustomerpagesShellInitialData } from '../../../shared-components/customerpages-shell/customerpages-shell.component';\r\nimport { CustomerPagesValidationService } from '../../../common-services/customer-pages-validation.service';\r\nimport { BasicRepaymentTimePaymentPlanRequest, NTechPaymentPlanService, PaymentPlan } from 'src/app/common-services/ntech-paymentplan.service';\r\nimport { RepaymentTimeWithPeriodMarker } from 'src/app/common-services/ntech-validation-shared-base.service';\r\n\r\n@Component({\r\n    selector: 'np-pre-application-calculator',\r\n    templateUrl: './pre-application-calculator.component.html',\r\n    styleUrls: ['./pre-application-calculator.component.scss']\r\n})\r\nexport class PreApplicationCalculatorComponent implements OnInit {\r\n    constructor(private storageService: UlStandardPreApplicationService, private router: Router,\r\n        private formBuilder: UntypedFormBuilder, private validationService: CustomerPagesValidationService, private paymentPlanService: NTechPaymentPlanService) { }\r\n\r\n    public shellData: CustomerpagesShellInitialData = {\r\n        logoRouterLink: null,\r\n        skipBodyLayout: false,\r\n        wideNavigation: false\r\n    };\r\n\r\n    public hasNoActiveProducts: boolean;\r\n    public m: Model;\r\n\r\n    async ngOnInit() {\r\n        this.m = null;\r\n\r\n        let {isEnabled, settings} = await this.storageService.getUlStandardWebApplicationSettings();\r\n        if(!isEnabled) {\r\n            this.hasNoActiveProducts = true;\r\n            return;\r\n        }\r\n\r\n\r\n        if((settings.loanAmounts ?? []).length === 0 || (settings.repaymentTimes ?? []).length === 0) {\r\n            this.hasNoActiveProducts = true;\r\n            return;\r\n        } else {\r\n            this.hasNoActiveProducts = false;\r\n        }\r\n\r\n        let form: FormsHelper = new FormsHelper(this.formBuilder.group({\r\n            'loanAmountIndex': [0, []],\r\n            'repaymentTimeIndex': [0, []]\r\n        }));\r\n\r\n        let m: Model = {\r\n            settings: settings,\r\n            loanAmountSliderData: {\r\n                minValue: 0,\r\n                maxValue: settings.loanAmounts.length - 1,\r\n                stepSize: 1,\r\n                tickButtonStepSize: null,\r\n                formControlName: 'loanAmountIndex',\r\n                form: form\r\n            },\r\n            repaymentTimeSliderData: {\r\n                minValue: 0,\r\n                maxValue: settings.repaymentTimes.length - 1,\r\n                stepSize: 1,\r\n                tickButtonStepSize: null,\r\n                formControlName: 'repaymentTimeIndex',\r\n                form: form\r\n            },\r\n            form: form\r\n        }\r\n\r\n        this.recalculatePaymentPlan(m);\r\n\r\n        m.form.form.valueChanges.subscribe(_ => {\r\n            this.recalculatePaymentPlan(m);\r\n        });\r\n\r\n        this.m = m;\r\n    }\r\n\r\n    private recalculatePaymentPlan(m: Model) {\r\n        let repaymentTime = this.getRepaymentTime(m);\r\n        let loanAmount = this.getLoanAmount(m);\r\n        let basicRequest : BasicRepaymentTimePaymentPlanRequest = {\r\n            loansToSettleAmount: 0,\r\n            paidToCustomerAmount: loanAmount,\r\n            marginInterestRatePercent: m.settings.exampleMarginInterestRatePercent,\r\n            referenceInterestRatePercent: 0,\r\n            initialFeeWithheldAmount: m.settings.exampleInitialFeeWithheldAmount,\r\n            initialFeeCapitalizedAmount: m.settings.exampleInitialFeeCapitalizedAmount,\r\n            initialFeeOnFirstNotificationAmount: m.settings.exampleInitialFeeOnFirstNotificationAmount,\r\n            notificationFee: m.settings.exampleNotificationFee\r\n        }\r\n\r\n        if(repaymentTime.isDays) {\r\n            m.calculatedPaymentPlan = this.paymentPlanService.caclculatePlanWithSinglePaymentWithRepaymentTimeInDays(basicRequest, repaymentTime.repaymentTime);\r\n        } else {\r\n            m.calculatedPaymentPlan = this.paymentPlanService.calculatePlanWithAnnuitiesFromRepaymentTime({\r\n                ...basicRequest,\r\n                repaymentTimeInMonths: repaymentTime.repaymentTime\r\n            })\r\n        }\r\n    }\r\n\r\n    private getItemByIndex<T>(items: T[], index: number) {\r\n        if(index < 0) {\r\n            return items[0];\r\n        } else if(index >= items.length) {\r\n            return items[items.length - 1];\r\n        } else {\r\n            return items[index];\r\n        }\r\n    }\r\n\r\n    formatRepaymentTimeForDisplay(value: RepaymentTimeWithPeriodMarker) {\r\n        return `${value.repaymentTime} ${value.isDays ? ' dagar' : ' månader'}`;\r\n    }\r\n\r\n    getRepaymentTime(m: Model) {\r\n        let index: number = m.form.getValue('repaymentTimeIndex');\r\n        let rawValue = this.getItemByIndex(m.settings.repaymentTimes, index);\r\n        return this.validationService.parseRepaymentTimeWithPeriodMarker(rawValue, false);\r\n    }\r\n\r\n    getLoanAmount(m: Model) {\r\n        let index: number = m.form.getValue('loanAmountIndex');\r\n        return this.getItemByIndex(m.settings.loanAmounts, index);\r\n    }\r\n\r\n    getTermsBoxPaymentPlanInitialFee() {\r\n        let p = this.m.calculatedPaymentPlan;\r\n        if(!p) {\r\n            return 0;\r\n        }\r\n        let amount = p.InitialFeeCapitalizedAmount ?? 0 + p.InitialFeeWithheldAmount ?? 0;\r\n        if(p.Payments.length > 0) {\r\n            amount +=  + p.Payments[0].initialFee ?? 0;\r\n        }\r\n        return amount;\r\n    }\r\n\r\n    getTermsBoxNotificationFee() {\r\n        let p = this.m.calculatedPaymentPlan;\r\n        if(!p) {\r\n            return 0;\r\n        }\r\n        if(p.Payments.length > 0) {\r\n            return p.Payments[0].monthlyFee;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    public async apply(evt ?: Event) {\r\n        evt?.preventDefault();\r\n        let repaymentTime = this.getRepaymentTime(this.m);\r\n        let preApplicationId = await this.storageService.beginPreApplication({\r\n            requestedLoanAmount: this.getLoanAmount(this.m),\r\n            requestedRepaymentTime: this.validationService.formatRepaymentTimeWithPeriodMarkerForStorage(repaymentTime.repaymentTime, repaymentTime.isDays)\r\n        });\r\n        this.router.navigate(['ul-webapplications/application-applicants/' + preApplicationId]);\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    settings: UlStandardWebApplicationEnabledSettings\r\n    form: FormsHelper\r\n    loanAmountSliderData: CalculatorSliderInitialData\r\n    repaymentTimeSliderData: CalculatorSliderInitialData\r\n    calculatedPaymentPlan ?: PaymentPlan\r\n}\r\n","<customerpages-shell [initialData]=\"shellData\">\r\n    <div shell-body>\r\n        <div class=\"row\" *ngIf=\"m\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n                        <h1 class=\"header-light text-center pb-3\">Privatlån</h1>\r\n                        <form [formGroup]=\"m.form.form\">\r\n                            <div class=\"row text-center pt-3\">\r\n                                <div class=\"col-sm-12\">\r\n                                    <p>Hur mycket kan du låna?</p>\r\n                                    <h2>{{getLoanAmount(m) | number:'1.0-2'}} kr</h2>\r\n                                </div>\r\n                            </div>\r\n                            <calculator-slider [initialData]=\"m.loanAmountSliderData\"></calculator-slider>\r\n                            <div class=\"row text-center pt-3\">\r\n                                <div class=\"col-sm-12\">\r\n                                    <p>Hur lång återbetalningstid vill du ha?</p>\r\n                                    <h2>{{formatRepaymentTimeForDisplay(getRepaymentTime(m))}}</h2>\r\n                                </div>\r\n                            </div>\r\n                            <calculator-slider [initialData]=\"m.repaymentTimeSliderData\"></calculator-slider>\r\n                            <div class=\"row text-center pt-3\">\r\n                                <div class=\"col-sm-12\">\r\n                                    <h2>Total att återbetala:</h2>\r\n                                </div>\r\n                                <div class=\"col-sm-12\">\r\n                                    <h2>{{m.calculatedPaymentPlan.TotalPaidAmount  | number:'1.0-0'}} kr</h2>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                        <div class=\"pt-5 terms-box\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-12\">\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <p class=\"col-xs-12\">Räkneexemplet baseras på beviljat belopp {{m.calculatedPaymentPlan.LoanAmount | number:'1.0-0'}} kr, återbetalningstid {{formatRepaymentTimeForDisplay(getRepaymentTime(m))}}, ränta {{m.calculatedPaymentPlan.MarginInterestRatePercent | number:'1.0-2'}}%, uppläggningsavgift {{getTermsBoxPaymentPlanInitialFee() | number:'1.0-0'}} kr, aviavgift {{getTermsBoxNotificationFee() | number:'1.0-0'}} kr, effektiv ränta {{m.calculatedPaymentPlan.EffectiveInterstRatePercent?.value | number:'1.0-4'}}%, månadskostnad {{m.calculatedPaymentPlan.MonthlyCostIncludingFeesAmount | number:'1.0-0'}} kr, totalt att återbetala inklusive alla avgifter: {{m.calculatedPaymentPlan.TotalPaidAmount | number:'1.0-0'}} kr.</p>\r\n                                    </div>\r\n                                </div>\r\n                                <p></p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"pt-5\" *ngIf=\"m.calculatedPaymentPlan.EffectiveInterstRatePercent?.value > 30\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-2\">\r\n                                    <div class=\"highcost-image-container\">\r\n                                        <img src=\"data:image/png;base64,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\" alt=\"\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-xs-9\">\r\n                                    <h2>Det här är en högkostnadskredit</h2>\r\n                                    <p>Om du inte kan betala tillbaka hela skulden riskerar du en betalningsanmärkning. För stöd, vänd dig till budget- och skuldrådgivning i din kommun. Kontaktuppgifter finns på <a href=\"https://www.hallakonsument.se/\" target=\"_blank\" rel=\"nofollow\">hallå konsument</a></p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"text-right pt-2\">\r\n                            <button class=\"n-main-btn n-green-btn\" (click)=\"apply($event)\">Ansök</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row\" *ngIf=\"hasNoActiveProducts\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n                        <h1 class=\"header-light text-center pb-3\">Privatlån</h1>\r\n                        <p class=\"text-center\">För tillfälligt har vi inga aktiva produkter.</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</customerpages-shell>\r\n\r\n","import { Component } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CustomerpagesShellInitialData } from '../../../shared-components/customerpages-shell/customerpages-shell.component';\r\nimport { UlStandardPreApplicationService } from '../../services/pre-application.service';\r\nimport { CustomerPagesConfigService } from '../../../common-services/customer-pages-config.service';\r\nimport { generateUniqueId } from 'src/app/common.types';\r\nimport { BankSharingMessageCode, KreditzDatashareIframeComponentInitialData } from 'projects/ntech-components/src/lib/kreditz-datashare-iframe/kreditz-datashare-iframe.component';\r\n\r\n@Component({\r\n    selector: 'np-pre-application-datashare',\r\n    templateUrl: './pre-application-datashare.component.html',\r\n    styleUrls: ['./pre-application-datashare.component.scss']\r\n})\r\nexport class PreApplicationDatashareComponent {\r\n    constructor(private route: ActivatedRoute, private storageService: UlStandardPreApplicationService, private config: CustomerPagesConfigService,\r\n        private router: Router) {\r\n\r\n    }\r\n\r\n    public shellData: CustomerpagesShellInitialData = {\r\n        logoRouterLink: null,\r\n        skipBodyLayout: false,\r\n        wideNavigation: false\r\n    };\r\n\r\n    public errorMessage: string;\r\n    public m: Model;\r\n\r\n    async ngOnInit() {\r\n        await this.reload(this.route.snapshot.params['preApplicationId']);\r\n    }\r\n\r\n    private async reload(preApplicationId: string) {\r\n        this.m = null;\r\n        this.errorMessage = null;\r\n\r\n        let {isEnabled, settings} = await this.storageService.getUlStandardWebApplicationSettings();\r\n        if(!isEnabled) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan inaktiv' : 'Application not active'\r\n            return;\r\n        }\r\n\r\n        let application = this.storageService.load(preApplicationId);\r\n        if(!application) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan finns inte' : 'No such application exists'\r\n            return;\r\n        }\r\n\r\n        let dataSharingSettings = settings?.dataSharing;\r\n        if(dataSharingSettings?.providerName !== 'kreditz') {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Delning ej aktivt' : 'Sharing disabled';\r\n            return;\r\n        }\r\n        let applicant1 = application?.applicants?.length > 0 ? application.applicants[0] : null;\r\n        if(!applicant1 || !applicant1.civicRegNr) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Delning ej möjligt' : 'Sharing not possible';\r\n            return;\r\n        }\r\n\r\n        let useMock = settings.dataSharing.useMock;\r\n        if(!this.config.isNTechTest() && useMock) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Delning ej möjligt' : 'Sharing not possible';\r\n            return;\r\n        }\r\n\r\n        let caseId = (useMock ? 'kzm_' : 'kzp_') + generateUniqueId(25);\r\n        applicant1.kreditzCaseId = caseId;\r\n        this.storageService.save(preApplicationId, application);\r\n        this.m = {\r\n            preApplicationId: preApplicationId,\r\n            kzData: useMock ? null : {\r\n                baseCountry: this.config.baseCountry(),\r\n                isNTechTest: this.config.isNTechTest(),\r\n                clientId: settings.dataSharing.iFrameClientId,\r\n                civicRegNr: this.config.isNTechTest() && dataSharingSettings.testCivicRegNr\r\n                    ? dataSharingSettings.testCivicRegNr\r\n                    : applicant1.civicRegNr,\r\n                caseId: caseId,\r\n                fetchDataForMonths: settings.dataSharing.fetchMonthCount,\r\n                onMessage: (code, hideUi) => {\r\n                    if(code === BankSharingMessageCode.authenticationCancelled) {\r\n                        hideUi();\r\n                        this.m = null;\r\n                        this.errorMessage = this.config.baseCountry() === 'SE' ? 'Delning avbruten' : 'Sharing cancelled';\r\n                    } else if(code === BankSharingMessageCode.userFlowCompleted) {\r\n                        hideUi();\r\n                        this.m.kzData = null;\r\n                        let now = Date.now();\r\n                        this.m.waiting = {\r\n                            startTime: now,\r\n                            lastPollTime: now,\r\n                            waitSeconds: 0,\r\n                        };\r\n                        this.reScheduleWait(caseId);\r\n                    }\r\n                }\r\n            },\r\n            kzMockData: !useMock ? null : {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    private onShareFailed() {\r\n        this.m = null;\r\n        this.errorMessage = this.errorMessage = this.config.baseCountry() === 'SE'\r\n            ? 'Din bank har inte delat något efter fem minuter. Något har gått fel.'\r\n            : 'Your bank did not share any data within five minutes. Something went wrong.';\r\n        return;\r\n    }\r\n\r\n    private onBankDataShared() {\r\n        let preApplicationId = this.m.preApplicationId;\r\n        this.m = {\r\n            preApplicationId: this.m.preApplicationId,\r\n            hasAccountData: true\r\n        };\r\n\r\n        let application = this.storageService.load(preApplicationId);\r\n        setTimeout(() => {\r\n            if(!this.storageService.exists(preApplicationId)) {\r\n                return; //Guard against backclicks, double clicks or other unforseen interactions\r\n            }\r\n            this.storageService.createApplication(application).then(x => {\r\n                this.storageService.delete(preApplicationId);\r\n                this.router.navigate(['ul-webapplications/application-received/' + x.ApplicationNr]);\r\n            });\r\n        }, 0);\r\n    }\r\n\r\n    reScheduleWait(caseId: string) {\r\n        if(this.m.waiting.waitSeconds > 5*60) {\r\n            this.onShareFailed();\r\n        }\r\n        setTimeout(() => {\r\n            let now = Date.now();\r\n            this.m.waiting.waitSeconds = Math.ceil((now - this.m.waiting.startTime) / 1000);\r\n            if(now - this.m.waiting.lastPollTime >= 5000) {\r\n                this.m.waiting.lastPollTime = now;\r\n                this.storageService.hasAccountSharingDataArrived(caseId, true).then(x => {\r\n                    if(x.hasAccountData) {\r\n                        this.onBankDataShared();\r\n                    } else {\r\n                        this.reScheduleWait(caseId);\r\n                    }\r\n                })\r\n            } else {\r\n                this.reScheduleWait(caseId);\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    public simulateShareSucess(evt ? : Event) {\r\n        evt?.preventDefault();\r\n        this.onBankDataShared();\r\n    }\r\n\r\n    public simulateShareFailed(evt ? : Event) {\r\n        evt?.preventDefault();\r\n        this.onShareFailed();\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    preApplicationId: string\r\n    kzData ?: KreditzDatashareIframeComponentInitialData\r\n    waiting ?: {\r\n        startTime: number\r\n        lastPollTime: number\r\n        waitSeconds: number\r\n    }\r\n    kzMockData ?: {\r\n\r\n    }\r\n    hasAccountData?: boolean\r\n}\r\n","<customerpages-shell [initialData]=\"shellData\">\r\n    <div shell-body>\r\n        <p *ngIf=\"errorMessage\">{{errorMessage}}</p>\r\n        <div *ngIf=\"m?.kzData\">\r\n            <kreditz-datashare-iframe [initialData]=\"m.kzData\"></kreditz-datashare-iframe>\r\n        </div>\r\n        <div *ngIf=\"m?.waiting\" class=\"center-waiting-message\">\r\n            <p>Väntar på information från din bank: {{m.waiting.waitSeconds}} s</p>\r\n            <p>Det brukar kunna ta upp till en minut.</p>\r\n        </div>\r\n        <div *ngIf=\"m?.hasAccountData\"  class=\"center-data-message\">\r\n            <p>Vi har nu fått data från din bank...</p>\r\n        </div>\r\n        <div *ngIf=\"m?.kzMockData\">\r\n            <div class=\"frame\">\r\n                <h2>Datadelningssimulator</h2>\r\n                <button class=\"n-main-btn n-green-btn\" (click)=\"simulateShareSucess($event)\">Simulera lyckad datadelning</button>\r\n                <button class=\"n-main-btn n-green-btn pull-right\" (click)=\"simulateShareFailed($event)\">Simulera misslyckad datadelning</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</customerpages-shell>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CustomerPagesConfigService, NTechEnum } from '../../../common-services/customer-pages-config.service';\r\nimport { PreApplicationStoredDataModel, UlStandardPreApplicationService } from '../../services/pre-application.service';\r\nimport { Dictionary } from 'src/app/common.types';\r\nimport { FormsHelper } from 'src/app/common-services/ntech-forms-helper';\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms';\r\nimport { CustomerpagesShellInitialData } from '../../../shared-components/customerpages-shell/customerpages-shell.component';\r\nimport { CustomerPagesValidationService } from '../../../common-services/customer-pages-validation.service';\r\nimport { Randomizer } from 'src/app/common-services/randomizer';\r\n\r\n@Component({\r\n    selector: 'np-pre-application-economy',\r\n    templateUrl: './pre-application-economy.component.html',\r\n    styles: [\r\n    ]\r\n})\r\nexport class PreApplicationEconomyComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute,\r\n        private storageService: UlStandardPreApplicationService, private config: CustomerPagesConfigService,\r\n        private router: Router, private formBuilder: UntypedFormBuilder, private validationService: CustomerPagesValidationService) { }\r\n\r\n    public shellData: CustomerpagesShellInitialData = {\r\n        logoRouterLink: null,\r\n        skipBodyLayout: false,\r\n        wideNavigation: false\r\n    };\r\n    public m: Model\r\n    public errorMessage: string\r\n\r\n    async ngOnInit() {\r\n        this.setupTestFunctions();\r\n        await this.reload(this.route.snapshot.params['preApplicationId']);\r\n    }\r\n\r\n    private async reload(preApplicationId: string) {\r\n        this.m = null;\r\n        this.errorMessage = null;\r\n\r\n        let {isEnabled, settings} = await this.storageService.getUlStandardWebApplicationSettings();\r\n        if(!isEnabled) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan inaktiv' : 'Application not active'\r\n            return;\r\n        }\r\n\r\n        let initialApplication = this.storageService.load(preApplicationId);\r\n        if(!initialApplication) {\r\n            this.errorMessage = this.config.baseCountry() === 'SE' ? 'Ansökan finns inte' : 'No such application exists'\r\n        }\r\n\r\n        let formFields : Dictionary<any> = {\r\n            'housing': ['', [Validators.required]],\r\n            'housingCostPerMonthAmount': ['', [Validators.required, this.validationService.getPositiveIntegerValidator()]],\r\n            'otherHouseholdFixedCostsAmount': ['', [Validators.required, this.validationService.getPositiveIntegerValidator()]],\r\n            'internalChildCount': [0, []],\r\n            'hasConsented': [false, []]\r\n        };\r\n\r\n        let f = new FormsHelper(this.formBuilder.group(formFields));\r\n\r\n        let enums = this.config.getEnums();\r\n        this.m = {\r\n            form: f,\r\n            childrenGroupNames: [],\r\n            nextOtherLoanSuffix: 1,\r\n            otherLoanGroupNames: [],\r\n            isOtherLoansTouched: false,\r\n            housingTypes: enums.HousingTypes,\r\n            otherLoanTypes: enums.OtherLoanTypes,\r\n            initialApplication: initialApplication,\r\n            preApplicationId: preApplicationId,\r\n            personalDataPolicyUrl: settings.personalDataPolicyUrl,\r\n            isDataSharingEnabled: !!settings.dataSharing\r\n        }\r\n\r\n        f.form.valueChanges.subscribe(_ => {\r\n            f.ensureControlOnConditionOnly(\r\n                f.getValue('internalChildCount') > 0,\r\n                'childBenefitAmount',\r\n                () => '',\r\n                () => [Validators.required, this.validationService.getPositiveIntegerValidator()]\r\n            );\r\n        });\r\n    }\r\n\r\n    public getHasOtherLoans() {\r\n        if(this.m.otherLoanGroupNames.length === 0 && !this.m.isOtherLoansTouched) {\r\n            return null;\r\n        }\r\n        return this.m.otherLoanGroupNames.length > 0;\r\n    }\r\n\r\n    private addChildFormGroup(form: FormsHelper, index: number): string {\r\n        let formGroupName = 'childGroup' + (index + 1).toString();\r\n        form.setValue('internalChildCount', form.getValue('internalChildCount') + 1);\r\n        form.addGroupIfNotExists(formGroupName, [\r\n            {\r\n                controlName: 'ageInYears',\r\n                initialValue: null,\r\n                validators: [this.validationService.getPositiveIntegerWithBoundsValidator(0, 200)],\r\n            },\r\n            {\r\n                controlName: 'sharedCustody',\r\n                initialValue: null,\r\n                validators: [],\r\n            },\r\n        ]);\r\n        return formGroupName;\r\n    }\r\n\r\n    addChild() {\r\n        let currentCount = this.m.childrenGroupNames?.length ?? 0;\r\n        let newGroupName = this.addChildFormGroup(this.m.form, currentCount);\r\n        this.m.childrenGroupNames.push(newGroupName);\r\n    }\r\n\r\n    removeChild() {\r\n        let indexToRemove = this.m.childrenGroupNames.length - 1;\r\n        this.m.form.setValue('internalChildCount', indexToRemove.toString());\r\n        let groupNameToRemove = this.m.childrenGroupNames[indexToRemove];\r\n        this.m.childrenGroupNames.splice(indexToRemove, 1);\r\n        this.m.form.form.removeControl(groupNameToRemove);\r\n    }\r\n\r\n    public async apply(evt ?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let f = this.m.form;\r\n        let vs = this.validationService;\r\n\r\n        let finalApplication : PreApplicationStoredDataModel = JSON.parse(JSON.stringify(this.m.initialApplication));\r\n        finalApplication.childBenefitAmount = vs.parseIntegerOrNull(f.getValue('childBenefitAmount'));\r\n        finalApplication.housingCostPerMonthAmount = vs.parseIntegerOrNull(f.getValue('housingCostPerMonthAmount'));\r\n        finalApplication.otherHouseholdFixedCostsAmount = vs.parseIntegerOrNull(f.getValue('otherHouseholdFixedCostsAmount'));\r\n        finalApplication.housing = f.getValue('housing');\r\n        finalApplication.householdChildren = this.m.childrenGroupNames.map(groupName => ({\r\n            ageInYears: vs.parseIntegerOrNull(f.getFormGroupValue(groupName, 'ageInYears')),\r\n            sharedCustody: f.getFormGroupValue(groupName, 'sharedCustody') === 'true'\r\n        }));\r\n        finalApplication.loansToSettle = this.m.otherLoanGroupNames.map(groupName => ({\r\n            loanType: f.getFormGroupValue(groupName, 'loanType'),\r\n            monthlyCostAmount: vs.parseIntegerOrNull(f.getFormGroupValue(groupName, 'monthlyCostAmount')),\r\n            currentDebtAmount: vs.parseIntegerOrNull(f.getFormGroupValue(groupName, 'currentDebtAmount'))\r\n        }));\r\n        for(let a of (finalApplication.applicants ?? [])) {\r\n            a.hasConsentedToCreditReport = true;\r\n        }\r\n\r\n        this.storageService.save(this.m.preApplicationId, finalApplication);\r\n\r\n        let shouldSendToDataShare = false;\r\n        if(this.m.isDataSharingEnabled) {\r\n            let scoringResult = await this.storageService.preScoreApplication(finalApplication);\r\n            if(scoringResult.preScoreResultId) {\r\n                finalApplication.preScoreResultId = scoringResult.preScoreResultId;\r\n                this.storageService.save(this.m.preApplicationId, finalApplication)\r\n            }\r\n            shouldSendToDataShare = scoringResult.isAcceptRecommended;\r\n        }\r\n\r\n        if(shouldSendToDataShare) {\r\n            this.router.navigate(['ul-webapplications/application-datashare/' + this.m.preApplicationId]);\r\n        } else {\r\n            let preApplicationId = this.m.preApplicationId;\r\n            this.m = null;\r\n            setTimeout(async () => {\r\n                if(!this.storageService.exists(preApplicationId)) {\r\n                    return; //Guard against backclicks, double clicks or other unforseen interactions\r\n                }\r\n                let createResult = await this.storageService.createApplication(finalApplication);\r\n                this.storageService.delete(preApplicationId);\r\n                this.router.navigate(['ul-webapplications/application-received/' + createResult.ApplicationNr]);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    private addOtherLoanFormGroup(form: FormsHelper, suffix: number): string {\r\n        let formGroupName = 'otherLoanGroup' + suffix.toString();\r\n        let addedOrNull = form.addGroupIfNotExists(formGroupName, [\r\n            {\r\n                controlName: 'loanType',\r\n                initialValue: null,\r\n                validators: [],\r\n            },\r\n            {\r\n                controlName: 'monthlyCostAmount',\r\n                initialValue: null,\r\n                validators: [this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n            {\r\n                controlName: 'currentDebtAmount',\r\n                initialValue: null,\r\n                validators: [Validators.required, this.validationService.getPositiveIntegerValidator()],\r\n            },\r\n        ]);\r\n        return addedOrNull ? formGroupName : null;\r\n    }\r\n\r\n    private takeOtherLoanSuffix() {\r\n        let toReturn = this.m.nextOtherLoanSuffix;\r\n        this.m.nextOtherLoanSuffix += 1;\r\n        return toReturn;\r\n    }\r\n\r\n    public addOtherLoan() {\r\n        this.m.isOtherLoansTouched = true;\r\n        let newGroupName = this.addOtherLoanFormGroup(this.m.form, this.takeOtherLoanSuffix());\r\n        // To protect against label/input triggering change twice from radiobuttons.\r\n        if (newGroupName !== null) this.m.otherLoanGroupNames.push(newGroupName);\r\n    }\r\n\r\n    public removeOtherLoan(removeAll: boolean, groupName?: string) {\r\n        this.m.isOtherLoansTouched = true;\r\n        if (removeAll) {\r\n            for(let groupName of this.m.otherLoanGroupNames) {\r\n                this.m.form.form.removeControl(groupName);\r\n                this.m.otherLoanGroupNames = [];\r\n            }\r\n        } else if (groupName !== null) {\r\n            this.m.otherLoanGroupNames.splice(this.m.otherLoanGroupNames.indexOf(groupName), 1);\r\n            this.m.form.form.removeControl(groupName);\r\n        }\r\n    }\r\n\r\n    public setHasOtherLoans(hasOtherLoans: boolean, evt ?: Event) {\r\n        evt.preventDefault();\r\n        this.m.isOtherLoansTouched = true;\r\n        if(hasOtherLoans && this.m.otherLoanGroupNames.length === 0) {\r\n            this.addOtherLoan();\r\n        } else if(!hasOtherLoans && this.m.otherLoanGroupNames.length > 0) {\r\n            this.removeOtherLoan(true, null);\r\n        }\r\n    }\r\n\r\n    private setupTestFunctions() {\r\n        this.shellData.test = {\r\n            functionCalls: [{\r\n                displayText: 'Autofill',\r\n                execute: async () => {\r\n                    let f = this.m.form;\r\n                    f.setValue('housing', this.m.housingTypes[0].Code);\r\n                    f.setValue('housingCostPerMonthAmount', '5000');\r\n                    f.setValue('otherHouseholdFixedCostsAmount', '700');\r\n\r\n                    if(this.m.childrenGroupNames.length > 0) {\r\n                        while(this.m.childrenGroupNames.length > 0) {\r\n                            this.removeChild();\r\n                        }\r\n                    }\r\n                    let nrOfChildren = Randomizer.anyOf([0, 0, 0, 1, 2]);\r\n                    [...Array(nrOfChildren)].forEach((_) => this.addChild());\r\n                    this.m.childrenGroupNames.forEach(groupName => {\r\n                        f.setValue2(groupName, 'ageInYears', Randomizer.anyOf(['1', '3', '5', '7', '9']));\r\n                        f.setValue2(groupName, 'sharedCustody', Randomizer.anyOf(['true', 'false']));\r\n                    });\r\n                    f.setValue('childBenefitAmount', (this.m.childrenGroupNames.length * 100).toString());\r\n\r\n                    if(this.m.otherLoanGroupNames.length > 0) {\r\n                        this.removeOtherLoan(true, null);\r\n                    }\r\n                    let nrOfOtherLoans = Randomizer.anyOf([0, 1, 2]);\r\n                    [...Array(nrOfOtherLoans)].forEach((_) => this.addOtherLoan());\r\n                    this.m.otherLoanGroupNames.map((groupName, _) => {\r\n                        f.setValue2(\r\n                            groupName,\r\n                            'currentDebtAmount',\r\n                            Randomizer.anyEvenNumberBetween(15000, 200000, 1000).toString()\r\n                        );\r\n                        f.setValue2(groupName, 'monthlyCostAmount', Randomizer.anyEvenNumberBetween(500, 4500, 100).toString());\r\n                        f.setValue2(groupName, 'loanType', Randomizer.anyOf(this.m.otherLoanTypes.map(x => x.Code)));\r\n                    });\r\n\r\n                    f.setValue('hasConsented', true);\r\n                }\r\n            }]\r\n        }\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    preApplicationId: string\r\n    initialApplication: PreApplicationStoredDataModel\r\n    form: FormsHelper\r\n    personalDataPolicyUrl: string\r\n    isOtherLoansTouched: boolean\r\n    housingTypes: NTechEnum[]\r\n    otherLoanTypes: NTechEnum[]\r\n    childrenGroupNames: string[]\r\n    otherLoanGroupNames: string[]\r\n    nextOtherLoanSuffix: number\r\n    isDataSharingEnabled: boolean\r\n}","<customerpages-shell [initialData]=\"shellData\">\r\n    <div shell-body>\r\n        <div class=\"row\" *ngIf=\"errorMessage\"><p>{{errorMessage}}</p></div>\r\n        <div class=\"row\" *ngIf=\"m\">\r\n            <div class=\"col-xs-12\">\r\n                <div class=\"flex-container\">\r\n                    <div class=\"align-center frame\">\r\n                        <h1 class=\"header-light text-center pb-3\">Privatlån - ansökan</h1>\r\n                        <form [formGroup]=\"m.form.form\">\r\n                            <div class=\"row pb-2\">\r\n                                <div class=\"col-xs-12\">\r\n                                    <div class=\"form-group pb-1\" [ngClass]=\"{ 'has-error': m.form.hasError('housing') }\">\r\n                                        <label>Hur bor du idag?</label>\r\n                                        <select class=\"form-control\" formControlName=\"housing\">\r\n                                            <option value=\"\" *ngIf=\"!m.form.getValue('housing')\"></option>\r\n                                            <option [value]=\"opt.Code\" *ngFor=\"let opt of m.housingTypes\">{{opt.DisplayName}}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'housingCostPerMonthAmount', displayText: 'Hur mycket betalar du i hyra och eventuellt ränta och amortering för ditt boende?' }\"></ng-container>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'otherHouseholdFixedCostsAmount', displayText: 'Vad har du för andra fasta månadskostnader för ditt boende, ex. el eller sophämtning?' }\"></ng-container>\r\n                                    <div>\r\n                                        <div class=\"pb-1\">\r\n                                            <label>Hur många barn bor i hushållet?</label>\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-sm-1 col-xs-3\">\r\n                                                  <button (click)=\"removeChild()\" [disabled]=\"!m.form || m.childrenGroupNames.length === 0\" title=\"Remove a child\" class=\"n-icon-btn n-blue-btn\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n                                                </div>\r\n                                                <div class=\"col-sm-2 col-xs-6\">\r\n                                                    <p class=\"form-control copyable bb-1 text-center\">{{m.childrenGroupNames.length}}</p>\r\n                                                </div>\r\n                                                <div class=\"col-sm-1 col-xs-3 text-right\">\r\n                                                    <button (click)=\"addChild()\" title=\"Add a child\" class=\"n-icon-btn n-blue-btn\"><span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span></button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ng-container *ngFor=\"let groupName of m.childrenGroupNames\">\r\n                                            <div class=\"row pb-1\" formGroupName=\"{{groupName}}\">\r\n                                                <div class=\"col-sm-8 col-xs-6\" [ngClass]=\"{ 'has-error': m.form.form.hasError('ageInYears', groupName) }\">\r\n                                                    <label>Ålder</label>\r\n                                                    <input class=\"form-control\" type=\"text\" formControlName=\"ageInYears\" />\r\n                                                </div>\r\n                                                <div class=\"col-sm-4 col-xs-6\">\r\n                                                    <label>Delad vårdnad?</label>\r\n                                                    <select class=\"form-control\" formControlName=\"sharedCustody\">\r\n                                                        <option [ngValue]=\"''\"></option>\r\n                                                        <option [ngValue]=\"'true'\">Ja</option>\r\n                                                        <option [ngValue]=\"'false'\">Nej</option>\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </div>\r\n                                    <ng-container *ngTemplateOutlet=\"textGroup; context: { formControlName: 'childBenefitAmount', displayText: 'Hur mycket får du i barnbidrag?' }\"></ng-container>\r\n                                    <div class=\"form-group pb-1\">\r\n                                        <p>Har du andra lån?</p>\r\n                                        <div class=\"radio-inline\">\r\n                                            <label *ngIf=\"getHasOtherLoans() === true\"><input type=\"radio\" (click)=\"setHasOtherLoans(true, $event)\" checked> Ja</label>\r\n                                            <label *ngIf=\"getHasOtherLoans() === null || getHasOtherLoans() === false\"><input type=\"radio\" (click)=\"setHasOtherLoans(true, $event)\"> Ja</label>\r\n                                        </div>\r\n                                        <div class=\"radio-inline\">\r\n                                            <label *ngIf=\"getHasOtherLoans() === false\"><input type=\"radio\" (click)=\"setHasOtherLoans(false, $event)\" checked> Nej</label>\r\n                                            <label *ngIf=\"getHasOtherLoans() === null || getHasOtherLoans() === true\"><input type=\"radio\" (click)=\"setHasOtherLoans(false, $event)\"> Nej</label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <ng-container *ngFor=\"let groupName of m.otherLoanGroupNames\">\r\n                                        <div class=\"row pb-1\">\r\n                                            <div class=\"col-sm-11 col-xs-9\">\r\n                                                <div class=\"row\">\r\n                                                    <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\">\r\n                                                        <label>Typ av lån</label>\r\n                                                        <select class=\"form-control\" formControlName=\"loanType\">\r\n                                                          <option value=\"\"></option>\r\n                                                          <option [value]=\"opt.Code\" *ngFor=\"let opt of m.otherLoanTypes\">{{opt.DisplayName}}</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                    <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\" [ngClass]=\"{ 'has-error': m.form.hasError('monthlyCostAmount', groupName) }\">\r\n                                                        <label>Månadskostnad</label>\r\n                                                        <input type=\"text\" class=\"form-control\" formControlName=\"monthlyCostAmount\">\r\n                                                    </div>\r\n                                                    <div class=\"form-group col-sm-4 col-xs-12 pb-1\" formGroupName=\"{{groupName}}\" [ngClass]=\"{ 'has-error': m.form.hasError('currentDebtAmount', groupName) }\">\r\n                                                        <label>Nuvarande skuld</label>\r\n                                                        <input type=\"text\" class=\"form-control\" formControlName=\"currentDebtAmount\">\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-sm-1 col-xs-3\" *ngIf=\"m.otherLoanGroupNames.length > 1\">\r\n                                                <div class=\"pt-3\">\r\n                                                    <button class=\"n-icon-btn n-blue-btn\" (click)=\"removeOtherLoan(false, groupName)\"><span class=\"glyphicon glyphicon-minus glyphicon-centered\"></span></button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <div class=\"pb-2\" *ngIf=\"getHasOtherLoans() === true\">\r\n                                        <button class=\"n-icon-btn n-blue-btn\" (click)=\"addOtherLoan()\">\r\n                                            <span class=\"glyphicon glyphicon-plus glyphicon-centered\"></span>\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class=\"checkbox\">\r\n                                        <label><input type=\"checkbox\" formControlName=\"hasConsented\" /> Jag intygar att uppgifterna i ansökan är korrekta och godkänner att en kreditupplysning inhämtas samt att personuppgifter behandlas i enlighet med <a target=\"_blank\" [href]=\"m.personalDataPolicyUrl\" class=\"n-anchor\">personuppgiftspolicyn</a>.</label>\r\n                                      </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"text-right pt-2\">\r\n                                <button class=\"n-main-btn n-green-btn\" [disabled]=\"m.form.invalid() || m.form.getValue('hasConsented') !== true\" (click)=\"apply($event)\">Gå vidare</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</customerpages-shell>\r\n<ng-template #textGroup let-displayText=\"displayText\" let-formControlName=\"formControlName\">\r\n    <div class=\"form-group pb-1\" *ngIf=\"m.form.hasFormControl(null, formControlName)\" [ngClass]=\"{ 'has-error': m.form.hasError(formControlName) }\" [formGroup]=\"m.form.form\">\r\n        <label>{{displayText}}</label>\r\n        <input type=\"text\" class=\"form-control\" [formControlName]=\"formControlName\">\r\n    </div>\r\n</ng-template>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { CustomerpagesShellInitialData } from '../../../shared-components/customerpages-shell/customerpages-shell.component';\r\n\r\n@Component({\r\n    selector: 'np-pre-application-received',\r\n    templateUrl: './pre-application-received.component.html',\r\n    styleUrls: ['./pre-application-received.component.scss']\r\n})\r\nexport class PreApplicationReceivedComponent implements OnInit {\r\n    constructor(private route: ActivatedRoute) { }\r\n\r\n    public shellData: CustomerpagesShellInitialData = {\r\n        logoRouterLink: null,\r\n        skipBodyLayout: false,\r\n        wideNavigation: false\r\n    };\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {\r\n        let applicationNr = this.route.snapshot.params['applicationNr'];\r\n        if(applicationNr) {\r\n            this.m = {\r\n                applicationNr: applicationNr\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    applicationNr: string\r\n}\r\n","<customerpages-shell [initialData]=\"shellData\">\r\n    <div shell-body>\r\n        <div *ngIf=\"m\" class=\"center-message\">\r\n            <p>Vi har mottagit din ansökan {{m.applicationNr}} och återkommer med besked.</p>\r\n        </div>\r\n    </div>\r\n</customerpages-shell>\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { of } from 'rxjs';\r\nimport { SizeAndTimeLimitedCache } from 'src/app/common-services/size-and-time-limited-cache';\r\nimport { Dictionary, NumberDictionary, StringDictionary } from 'src/app/common.types';\r\nimport { CustomerPagesApiService } from '../../common-services/customer-pages-api.service';\r\nimport { SharedApplicationBasicInfoModel } from '../../shared-components/applications-list/applications-list.component';\r\nimport { CustomerPagesKycQuestionAnswerModel } from '../../shared-components/task-kyc-questions/task-kyc-questions.component';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CustomerPagesApplicationsApiService {\r\n    constructor(private apiService: CustomerPagesApiService) {}\r\n\r\n    private nPreCredit: string = 'nPreCredit';\r\n\r\n    public fetchApplications(): Promise<{\r\n        Applications: ApplicationBasicInfoModel[];\r\n    }> {\r\n        return this.apiService.post(this.nPreCredit, 'api/UnsecuredLoanStandard/CustomerPages/Fetch-Applications', {});\r\n    }\r\n\r\n    public fetchApplication(applicationNr: string): Promise<{ Application: ApplicationExtendedModel }> {\r\n        return this.apiService.post(this.nPreCredit, 'api/UnsecuredLoanStandard/CustomerPages/Fetch-Application', {\r\n            applicationNr,\r\n        });\r\n    }\r\n\r\n    public createKycQuestionSession(applicationNr: string): Promise<{ sessionId: string }> {\r\n        return this.apiService.post('NTechHost', 'Api/PreCredit/UnsecuredLoanStandard/Create-Application-KycQuestionSession', {\r\n            applicationNr\r\n        });        \r\n    }\r\n\r\n    setCustomerCreditDecisionCode(applicationNr: string, customerDecisionCode: string) {\r\n        return this.apiService.post(this.nPreCredit, 'api/UnsecuredLoanStandard/Set-Customer-CreditDecisionCode', {\r\n            applicationNr,\r\n            customerDecisionCode,\r\n        });\r\n    }\r\n\r\n    answerKycQuestions(\r\n        applicationNr: string,\r\n        answersByApplicantNr: NumberDictionary<CustomerPagesKycQuestionAnswerModel[]>,\r\n        isConfirmedKycQuestionAnswers: boolean\r\n    ) {\r\n        return this.apiService.post(this.nPreCredit, 'api/UnsecuredLoanStandard/CustomerPages/Answer-Kyc-Questions', {\r\n            applicationNr,\r\n            answersByApplicantNr,\r\n            isConfirmedKycQuestionAnswers,\r\n        });\r\n    }\r\n\r\n    confirmBankAccounts(applicationNr: string) {\r\n        return this.apiService.post(this.nPreCredit, 'api/UnsecuredLoanStandard/CustomerPages/Confirm-Bank-Accounts', {\r\n            applicationNr,\r\n        });\r\n    }\r\n\r\n    getArchiveDocumentUrl(archiveKey: string, skipFilename?: boolean) {\r\n        return this.apiService.getArchiveDocumentUrl(archiveKey, skipFilename);\r\n    }\r\n\r\n    saveDirectDebitAccountInfo(applicationNr: string, bankAccountNr: string, applicantNr: number): Promise<void> {\r\n        return this.apiService.post(\r\n            this.nPreCredit,\r\n            'api/UnsecuredLoanStandard/CustomerPages/Save-DirectDebit-Account',\r\n            {\r\n                ApplicationNr: applicationNr,\r\n                DirectDebitBankAccountNr: bankAccountNr,\r\n                DirectDebitAccountOwnerApplicantNr: applicantNr,\r\n            }\r\n        );\r\n    }\r\n\r\n    confirmDirectDebitAccountInfo(applicationNr: string): Promise<void> {\r\n        return this.apiService.post(\r\n            this.nPreCredit,\r\n            'api/UnsecuredLoanStandard/CustomerPages/Confirm-DirectDebit-Account',\r\n            { applicationNr }\r\n        );\r\n    }\r\n\r\n    private getValidateBankAccountNrCacheKey(request: BankAccountNrValidationRequest): string {\r\n        return `${request.bankAccountNr}#${request.bankAccountNrType}`;\r\n    }\r\n    private validateBankAccountNrsCache: SizeAndTimeLimitedCache = new SizeAndTimeLimitedCache(200, 30);\r\n    private validateBankAccountNrsBatchRaw(\r\n        request: Dictionary<BankAccountNrValidationRequest>,\r\n        skipLoadingIndicator: boolean\r\n    ): Promise<{\r\n        ValidatedAccountsByKey: Dictionary<BankAccountNrValidationResult>;\r\n    }> {\r\n        let accounts = Object.keys(request).map((x) => {\r\n            return {\r\n                requestKey: x,\r\n                bankAccountNr: request[x].bankAccountNr,\r\n                bankAccountNrType: request[x].bankAccountNrType,\r\n            };\r\n        });\r\n        return this.apiService.post(\r\n            this.nPreCredit,\r\n            'api/bankaccount/validate-nr-batch',\r\n            { accounts },\r\n            { skipLoadingIndicator: skipLoadingIndicator }\r\n        );\r\n    }\r\n    validateBankAccountNrsBatch(\r\n        request: Dictionary<BankAccountNrValidationRequest>,\r\n        skipLoadingIndicator: boolean\r\n    ): Promise<{\r\n        ValidatedAccountsByKey: Dictionary<BankAccountNrValidationResult>;\r\n    }> {\r\n        let fromCacheResult: {\r\n            ValidatedAccountsByKey: Dictionary<BankAccountNrValidationResult>;\r\n        } = { ValidatedAccountsByKey: {} };\r\n\r\n        if (!request || Object.keys(request).length === 0) {\r\n            return of({ ValidatedAccountsByKey: {} }).toPromise();\r\n        }\r\n\r\n        let anyNotInCache = false;\r\n\r\n        for (let key of Object.keys(request)) {\r\n            let account = request[key];\r\n            let cacheHit = this.validateBankAccountNrsCache.get<BankAccountNrValidationResult>(\r\n                this.getValidateBankAccountNrCacheKey(account)\r\n            );\r\n            if (!cacheHit) {\r\n                anyNotInCache = true;\r\n                break;\r\n            }\r\n            fromCacheResult.ValidatedAccountsByKey[key] = cacheHit;\r\n        }\r\n\r\n        if (anyNotInCache) {\r\n            return this.validateBankAccountNrsBatchRaw(request, skipLoadingIndicator).then((x) => {\r\n                for (let key of Object.keys(x.ValidatedAccountsByKey)) {\r\n                    this.validateBankAccountNrsCache.set(\r\n                        this.getValidateBankAccountNrCacheKey(request[key]),\r\n                        x.ValidatedAccountsByKey[key]\r\n                    );\r\n                }\r\n                return x;\r\n            });\r\n        } else {\r\n            return of(fromCacheResult).toPromise();\r\n        }\r\n    }\r\n\r\n    editBankAccounts(request: EditBankAccountsRequest) {\r\n        return this.apiService.post(\r\n            this.nPreCredit,\r\n            'api/UnsecuredLoanStandard/CustomerPages/Edit-BankAccounts',\r\n            request\r\n        );\r\n    }\r\n}\r\n\r\nexport interface ApplicationBasicInfoModel extends SharedApplicationBasicInfoModel {\r\n    Enums: {\r\n        CivilStatuses: { Code: string; DisplayName: string }[];\r\n        EmploymentStatuses: { Code: string; DisplayName: string }[];\r\n        HousingTypes: { Code: string; DisplayName: string }[];\r\n        OtherLoanTypes: { Code: string; DisplayName: string }[];\r\n    };\r\n}\r\n\r\nexport interface ApplicationExtendedModel extends ApplicationBasicInfoModel {\r\n    IsFutureOfferPossible?: boolean;\r\n    CurrentOffer?: {\r\n        OfferItems: StringDictionary;\r\n        IsPossibleToDecide: boolean;\r\n    };\r\n    KycTask: KycTaskModel;\r\n    AgreementTask: AgreementTaskModel;\r\n    BankAccountsTask: BankAccountsTaskModel;\r\n    DirectDebitTask: DirectDebitTaskModel;\r\n}\r\n\r\nexport interface ApplicationTask {\r\n    IsActive: boolean;\r\n    IsAccepted?: boolean;\r\n}\r\n\r\nexport interface KycTaskModel extends ApplicationTask {\r\n    IsPossibleToAnswer: boolean;\r\n    IsAnswersApproved: boolean;\r\n}\r\n\r\nexport interface AgreementTaskModel extends ApplicationTask {\r\n    UnsignedAgreementArchiveKey: string;\r\n    SignedAgreementArchiveKey: string;\r\n    ApplicantStatusByApplicantNr: NumberDictionary<{\r\n        CustomerBirthDate: string;\r\n        CustomerShortName: string;\r\n        HasSigned: boolean;\r\n        SignatureUrl: string;\r\n        IsPossibleToSign: boolean;\r\n    }>;\r\n}\r\n\r\nexport interface DirectDebitTaskModel extends ApplicationTask {\r\n    CustomerInfoByApplicantNr: NumberDictionary<{\r\n        CustomerId: number;\r\n        BirthDate: string;\r\n        FirstName: string;\r\n    }>;\r\n    HasConfirmedAccountInfo: boolean;\r\n    AccountOwnerApplicantNr?: number;\r\n    DirectDebitBankAccountNr?: string;\r\n    UnsignedDirectDebitConsentFileArchiveKey?: string;\r\n    SignedDirectDebitConsentFileArchiveKey?: string;\r\n    SignatureSessionUrl?: string;\r\n    PaidToCustomerBankAccountNr?: string;\r\n}\r\n\r\nexport interface BankAccountsTaskModel extends ApplicationTask {\r\n    IsPossibleToEditPaidToCustomerBankAccount: boolean;\r\n    IsPossibleToEditLoansToSettleBankAccounts: boolean;\r\n    PaidToCustomer: {\r\n        Amount: number;\r\n        BankAccountNrType: string;\r\n        BankAccountNr: string;\r\n    };\r\n    LoansToSettle: {\r\n        Nr: number;\r\n        CurrentDebtAmount: number;\r\n        MonthlyCostAmount: number;\r\n        LoanType: string;\r\n        BankAccountNrType: string;\r\n        BankAccountNr: string;\r\n        SettlementPaymentReference: string;\r\n        SettlementPaymentMessage: string;\r\n    }[];\r\n}\r\n\r\nexport interface BankAccountNrValidationRequest {\r\n    bankAccountNr: string;\r\n    bankAccountNrType: string;\r\n}\r\n\r\nexport interface BankAccountNrValidationResult {\r\n    RawNr: string;\r\n    IsValid: boolean;\r\n    ValidAccount?: {\r\n        BankName: string;\r\n        ClearingNr: string;\r\n        AccountNr: string;\r\n        NormalizedNr: string;\r\n        Bic: string;\r\n        DisplayNr: string;\r\n        BankAccountNrType: string;\r\n    };\r\n}\r\n\r\nexport interface EditBankAccountsRequest {\r\n    applicationNr: string;\r\n    paidToCustomer?: {\r\n        bankAccountNr: string;\r\n        bankAccountNrType?: string;\r\n    };\r\n    loansToSettle?: {\r\n        Accounts: {\r\n            nr: number;\r\n            bankAccountNr: string;\r\n            bankAccountNrType?: string;\r\n            settlementPaymentReference?: string;\r\n        }[];\r\n    };\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { generateUniqueId } from \"src/app/common.types\";\r\nimport { CustomerPagesApiService } from \"../../common-services/customer-pages-api.service\";\r\n\r\nfunction storageKey(preApplicationId: string) {\r\n    return `UlStandardPreApplicationV1_${preApplicationId}`\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class UlStandardPreApplicationService {\r\n    constructor(private apiService: CustomerPagesApiService) {\r\n\r\n    }\r\n\r\n    public async beginPreApplication(initialModel: PreApplicationStoredDataModel) {\r\n        let preApplicationId: string = `p${generateUniqueId(25)}`;\r\n        this.save(preApplicationId, initialModel);\r\n        return preApplicationId;\r\n    }\r\n\r\n    public save(preApplicationId: string, model: PreApplicationStoredDataModel) {\r\n        localStorage.setItem(storageKey(preApplicationId), JSON.stringify(model));\r\n    }\r\n\r\n    public load(preApplicationId: string) : PreApplicationStoredDataModel | null {\r\n        let value = localStorage.getItem(storageKey(preApplicationId));\r\n        if(!value){\r\n            return null;\r\n        }\r\n        return JSON.parse(value);\r\n    }\r\n\r\n    public exists(preApplicationId: string) {\r\n        return !!localStorage.getItem(storageKey(preApplicationId));\r\n    }\r\n\r\n    public delete(preApplicationId: string) {\r\n        localStorage.removeItem(storageKey(preApplicationId))\r\n    }\r\n\r\n    public createApplication(model: PreApplicationStoredDataModel)  {\r\n        //BEWARE: Do not add bank account sharing here. Instead pass a onetime use id to an already stored result and exapnd it serverside so the user cant manipulate the data.\r\n        let applicationRequest: UlStandardApplicationRequest = {\r\n            requestedAmount: model.requestedLoanAmount,\r\n            loanObjective: model.loanObjective,\r\n            housingType: model.housing,\r\n            housingCostPerMonthAmount: model.housingCostPerMonthAmount,\r\n            otherHouseholdFixedCostsAmount: model.otherHouseholdFixedCostsAmount,\r\n            childBenefitAmount: model.childBenefitAmount,\r\n            preScoreResultId: model.preScoreResultId\r\n        };\r\n        if(model.requestedRepaymentTime.endsWith('d')) {\r\n            applicationRequest.requestedRepaymentTimeInDays = parseInt(model.requestedRepaymentTime.replace('d', ''))\r\n        } else if(model.requestedRepaymentTime.endsWith('m')) {\r\n            applicationRequest.requestedRepaymentTimeInMonths = parseInt(model.requestedRepaymentTime.replace('m', ''))\r\n        }\r\n\r\n        applicationRequest.applicants = [];\r\n        for(let applicant of (model.applicants ?? [])) {\r\n            applicationRequest.applicants.push({\r\n                civicRegNr: applicant.civicRegNr,\r\n                email: applicant.email,\r\n                phone: applicant.phone,\r\n                monthlyIncomeAmount: applicant.incomePerMonthAmount,\r\n                employmentStatus: applicant.employment,\r\n                employerName: applicant.employer,\r\n                employerPhone: applicant.employerPhone,\r\n                employedSince: applicant.employedSince,\r\n                employedTo: applicant.employedTo,\r\n                hasConsentedToShareBankAccountData: applicant.hasConsentedToCreditReport,\r\n                hasConsentedToCreditReport: applicant.hasConsentedToCreditReport,\r\n                hasLegalOrFinancialGuardian: applicant.hasLegalOrFinancialGuardian,\r\n                claimsToBeGuarantor: applicant.claimsToBeGuarantor,\r\n                dataShareProviderName: applicant.kreditzCaseId ? 'kreditz' : undefined,\r\n                dataShareSessionId: applicant.kreditzCaseId ??  undefined\r\n            });\r\n        }\r\n\r\n        applicationRequest.householdOtherLoans = [];\r\n        for(let otherLoan of (model.loansToSettle ?? [])) {\r\n            applicationRequest.householdOtherLoans.push({\r\n                loanType: otherLoan.loanType,\r\n                currentDebtAmount: otherLoan.currentDebtAmount,\r\n                monthlyCostAmount: otherLoan.monthlyCostAmount,\r\n                shouldBeSettled: false\r\n            });\r\n        }\r\n\r\n        applicationRequest.householdChildren = [];\r\n        for(let child of (model.householdChildren)) {\r\n            applicationRequest.householdChildren.push({\r\n                exists: true,\r\n                ageInYears: child.ageInYears,\r\n                sharedCustody: child.sharedCustody\r\n            });\r\n        }\r\n\r\n        return this.apiService.postLocal<{ ApplicationNr: string }> ('api/embedded-customerpages/create-ul-standard-application', applicationRequest);\r\n    }\r\n\r\n    public getUlStandardWebApplicationSettings() {\r\n        return this.apiService.postLocal<UlStandardWebApplicationSettings>('api/embedded-customerpages/ul-web-application-settings', {});\r\n    }\r\n\r\n    public hasAccountSharingDataArrived(caseId: string, skipLoadingIndicator: boolean) {\r\n        return this.apiService.postLocal<{ hasAccountData: boolean }>('api/kz/poll', { caseId }, {skipLoadingIndicator: skipLoadingIndicator });\r\n    }\r\n\r\n    /*\r\n    A person has properties like: civicRegNr, email, phone\r\n     */\r\n    public generateTestPersons(\r\n        nrOfApplicants: number,\r\n        isAccepted: boolean,\r\n        useCommonAddress: boolean\r\n    ): Promise<{\r\n        Persons: { Properties: any }[];\r\n    }> {\r\n        return this.apiService.post('nTest', 'Api/TestPerson/GetOrGenerate', {\r\n            persons: nrOfApplicants === 1 ? [{ isAccepted }] : [{ isAccepted }, { isAccepted }],\r\n            useCommonAddress: useCommonAddress,\r\n        }, { isAnonymous: true });\r\n    }\r\n\r\n    public async preScoreApplication(application: PreApplicationStoredDataModel) {\r\n        let request :WebPreScorePolicyFilterRequest = {\r\n            scoringVariables: [],\r\n            nrOfApplicants:  1,\r\n            persistResult: true\r\n        };\r\n        if(application?.applicants) {\r\n            request.nrOfApplicants = application.applicants.length;\r\n            let applicantNr = 1;\r\n            for(let applicant of application.applicants) {\r\n                if(applicant.civicRegNr) {\r\n                    let civicRegNrResult = await this.apiService.parseCivicRegNr(applicant.civicRegNr);\r\n                    if(civicRegNrResult.isValid && civicRegNrResult.ageInYears) {\r\n                        request.scoringVariables.push({ name: 'applicantAgeInYears', value: civicRegNrResult.ageInYears.toFixed(0), applicantNr: applicantNr })\r\n                    }\r\n                }\r\n                request.scoringVariables.push({ name: 'applicantIncomePerMonth', value: Math.ceil(applicant.incomePerMonthAmount ?? 0).toFixed(0) , applicantNr: applicantNr });\r\n                if(applicant.employment) {\r\n                    request.scoringVariables.push({ name: 'applicantEmploymentFormCode', value:  applicant.employment, applicantNr: applicantNr })\r\n                }\r\n                request.scoringVariables.push({ name: 'applicantClaimsLegalOrFinancialGuardian', value: applicant.hasLegalOrFinancialGuardian ? 'true' : 'false', applicantNr: applicantNr });\r\n                applicantNr++;\r\n            }\r\n        }\r\n        if(application.loanObjective) {\r\n            request.scoringVariables.push({ name: 'loanObjective', value: application.loanObjective, applicantNr: null })\r\n        }\r\n        return this.apiService.post<WebPreScorePolicyFilterResponse>('NTechHost', 'Api/PreCredit/PolicyFilters/PreScore-WebApplication', request, { isAnonymous: true });\r\n    }\r\n}\r\n\r\nexport interface UlStandardWebApplicationEnabledSettings {\r\n    loanObjectives: string[],\r\n    repaymentTimes: string[],\r\n    loanAmounts: number[],\r\n    exampleMarginInterestRatePercent: number\r\n    exampleInitialFeeWithheldAmount: number,\r\n    exampleInitialFeeCapitalizedAmount: number,\r\n    exampleInitialFeeOnFirstNotificationAmount: number,\r\n    exampleNotificationFee: number,\r\n    personalDataPolicyUrl: string,\r\n    dataSharing ?: {\r\n        providerName: string,\r\n        useMock: boolean,\r\n        testCivicRegNr ?: string\r\n        iFrameClientId ?: string\r\n        fetchMonthCount: number\r\n    }\r\n}\r\nexport interface UlStandardWebApplicationSettings {\r\n    isEnabled: boolean\r\n    settings: UlStandardWebApplicationEnabledSettings\r\n}\r\n\r\nexport interface BeginPreApplicationRequest {\r\n    requestedLoanAmount: number\r\n    requestedRepaymentTime: string\r\n}\r\n\r\nexport interface PreApplicationStoredDataModel {\r\n    requestedLoanAmount ?: number\r\n    requestedRepaymentTime ?: string //Like 10d or 3m for 10 days or 3 months\r\n    loanObjective ?: string\r\n    housing ?: string\r\n    housingCostPerMonthAmount ?: number\r\n    otherHouseholdFixedCostsAmount ?: number\r\n    childBenefitAmount ?: number\r\n    preScoreResultId ?: string\r\n    applicants ?: {\r\n        civicRegNr: string\r\n        hasConsentedToCreditReport ?: boolean\r\n        phone: string\r\n        email: string\r\n        incomePerMonthAmount: number\r\n        employment: string\r\n        employer: string\r\n        employerPhone: string\r\n        employedSince: string //yyyy-mm\r\n        employedTo: string //yyyy-mm\r\n        hasLegalOrFinancialGuardian: boolean,\r\n        claimsToBeGuarantor: boolean,\r\n        kreditzCaseId ?: string,\r\n    }[]\r\n    householdChildren ?: {\r\n        ageInYears: number\r\n        sharedCustody: boolean\r\n    }[]\r\n    loansToSettle ?: {\r\n        loanType: string\r\n        monthlyCostAmount: number\r\n        currentDebtAmount: number\r\n    }[]\r\n}\r\n\r\ninterface UlStandardApplicationRequest {\r\n    requestedAmount?: number;\r\n    requestedRepaymentTimeInMonths?: number | null;\r\n    requestedRepaymentTimeInDays?: number | null;\r\n    loanObjective ?: string;\r\n    housingType?: string;\r\n    housingCostPerMonthAmount?: number | null;\r\n    otherHouseholdFixedCostsAmount?: number | null;\r\n    childBenefitAmount ?: number;\r\n    preScoreResultId ?: string\r\n    applicants ?: UlStandardApplicationRequestApplicantModel[];\r\n    householdOtherLoans?: UlStandardApplicationRequestOtherLoanModel[];\r\n    householdChildren?: {\r\n        exists: boolean\r\n        ageInYears: number\r\n        sharedCustody: boolean\r\n    }[]\r\n}\r\n\r\ninterface UlStandardApplicationRequestApplicantModel {\r\n    civicRegNr: string;\r\n    firstName?: string;\r\n    lastName?: string;\r\n    email?: string;\r\n    phone?: string;\r\n    birthDate?: Date | null;\r\n    isOnPepList?: boolean | null;\r\n    claimsToBePep?: boolean | null;\r\n    claimsToHaveKfmDebt?: boolean | null;\r\n    civilStatus?: string;\r\n    monthlyIncomeAmount?: number | null;\r\n    employmentStatus?: string;\r\n    employerName?: string;\r\n    employerPhone?: string;\r\n    employedSince?: string | null;\r\n    employedTo?: string | null;\r\n    addressStreet?: string;\r\n    addressZipcode?: string;\r\n    addressCity?: string;\r\n    hasConsentedToCreditReport?: boolean | null;\r\n    hasConsentedToShareBankAccountData?: boolean | null;\r\n    hasLegalOrFinancialGuardian: boolean | null;\r\n    claimsToBeGuarantor: boolean | null;\r\n    dataShareProviderName : string\r\n    dataShareSessionId : string\r\n}\r\n\r\ninterface UlStandardApplicationRequestOtherLoanModel {\r\n    loanType?: string;\r\n    currentDebtAmount?: number | null;\r\n    monthlyCostAmount?: number | null;\r\n    shouldBeSettled?: boolean | null;\r\n}\r\n\r\nexport interface WebPreScorePolicyFilterRequest {\r\n    scoringVariables: {\r\n        name: string\r\n        value: string\r\n        applicantNr: number | null\r\n    }[],\r\n    nrOfApplicants: number\r\n    persistResult: boolean\r\n}\r\n\r\nexport interface WebPreScorePolicyFilterResponse {\r\n    isAcceptRecommended: boolean\r\n    preScoreResultId: string\r\n}","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CustomerPagesAuthGuard } from '../common-services/customer-pages.auth.guard';\r\nimport { CustomerPagesApplicationComponent } from './pages/customer-pages-application/customer-pages-application.component';\r\nimport { OverviewComponent } from './pages/overview/overview.component';\r\nimport { PreApplicationEconomyComponent } from './pages/pre-application-economy/pre-application-economy.component';\r\nimport { PreApplicationCalculatorComponent } from './pages/pre-application-calculator/pre-application-calculator.component';\r\nimport { PreApplicationApplicantsComponent } from './pages/pre-application-applicants/pre-application-applicants.component';\r\nimport { PreApplicationReceivedComponent } from './pages/pre-application-received/pre-application-received.component';\r\nimport { PreApplicationDatashareComponent } from './pages/pre-application-datashare/pre-application-datashare.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'unsecured-loan-applications',\r\n        children: [\r\n            { path: 'overview', component: OverviewComponent },\r\n            { path: 'application/:applicationNr', component: CustomerPagesApplicationComponent },\r\n        ],\r\n        resolve: {},\r\n        data: {\r\n            requireFeatures: ['ntech.feature.unsecuredloans', 'ntech.feature.unsecuredloans.standard'],\r\n            loginTargetName: 'ApplicationsOverview',\r\n            requiredUserRole: 'EmbeddedCustomerPagesStandardCustomer',\r\n        },\r\n        canActivate: [CustomerPagesAuthGuard],\r\n    },\r\n    {\r\n        path: 'ul-webapplications',\r\n        children: [\r\n            { path: 'application-calculator', component: PreApplicationCalculatorComponent },\r\n            { path: 'application-applicants/:preApplicationId', component: PreApplicationApplicantsComponent },\r\n            { path: 'application-economy/:preApplicationId', component: PreApplicationEconomyComponent },\r\n            { path: 'application-datashare/:preApplicationId', component: PreApplicationDatashareComponent },\r\n            { path: 'application-received/:applicationNr', component: PreApplicationReceivedComponent }\r\n        ],\r\n        resolve: {},\r\n        data: {\r\n            requireFeatures: ['ntech.feature.unsecuredloans', 'ntech.feature.unsecuredloans.standard', 'ntech.feature.unsecuredloans.webapplication'],\r\n        },\r\n        canActivate: [],\r\n    }\r\n];\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class UnsecuredLoanApplicationsRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OverviewComponent } from './pages/overview/overview.component';\r\nimport { UnsecuredLoanApplicationsRoutingModule } from './unsecured-loan-applications-routing.module';\r\nimport { ShellComponent } from './components/shell/shell.component';\r\nimport { CustomerPagesApplicationComponent } from './pages/customer-pages-application/customer-pages-application.component';\r\nimport { CustomerPagesApplicationOfferComponent } from './components/customer-pages-application-offer/customer-pages-application-offer.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CustomerPagesAgreementComponent } from './components/customer-pages-agreement/customer-pages-agreement.component';\r\nimport { CustomerPagesBankaccountsComponent } from './components/customer-pages-bankaccounts/customer-pages-bankaccounts.component';\r\nimport { CustomerPagesDirectDebitComponent } from './components/customer-pages-direct-debit/customer-pages-direct-debit.component';\r\nimport { TaskToggleBlockComponent } from './components/task-toggle-block/task-toggle-block.component';\r\nimport { CustomerPagesApplicationTasksComponent } from './pages/customer-pages-application/customer-pages-application-tasks.component';\r\nimport { SharedComponentsModule } from '../shared-components/shared-components.module';\r\nimport { PreApplicationEconomyComponent } from './pages/pre-application-economy/pre-application-economy.component';\r\nimport { PreApplicationCalculatorComponent } from './pages/pre-application-calculator/pre-application-calculator.component';\r\nimport { PreApplicationApplicantsComponent } from './pages/pre-application-applicants/pre-application-applicants.component';\r\nimport { PreApplicationReceivedComponent } from './pages/pre-application-received/pre-application-received.component';\r\nimport { PreApplicationDatashareComponent } from './pages/pre-application-datashare/pre-application-datashare.component';\r\nimport { NtechComponentsModule } from 'projects/ntech-components/src/public-api';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        OverviewComponent,\r\n        ShellComponent,\r\n        TaskToggleBlockComponent,\r\n        CustomerPagesApplicationTasksComponent,\r\n        CustomerPagesApplicationComponent,\r\n        CustomerPagesApplicationOfferComponent,\r\n        CustomerPagesAgreementComponent,\r\n        CustomerPagesBankaccountsComponent,\r\n        CustomerPagesDirectDebitComponent,\r\n        PreApplicationEconomyComponent,\r\n        PreApplicationCalculatorComponent,\r\n        PreApplicationApplicantsComponent,\r\n        PreApplicationReceivedComponent,\r\n        PreApplicationDatashareComponent,\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        SharedComponentsModule,\r\n        NtechComponentsModule,\r\n        UnsecuredLoanApplicationsRoutingModule,\r\n    ],\r\n})\r\nexport class UnsecuredLoanApplicationsModule {} //angular-in-memory-web-api for testing\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n    production: false,\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n    enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n    .bootstrapModule(AppModule)\r\n    .catch((err) => console.error(err));\r\n","import { Component, HostListener, Input, SimpleChanges } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Component({\r\n    selector: 'kreditz-datashare-iframe',\r\n    templateUrl: './kreditz-datashare-iframe.component.html',\r\n    styleUrls: ['./kreditz-datashare-iframe.component.scss']\r\n})\r\nexport class KreditzDatashareIframeComponent {\r\n    constructor(private sanitizer: DomSanitizer) { }\r\n\r\n    @Input()\r\n    public initialData: KreditzDatashareIframeComponentInitialData;\r\n    public m: Model;\r\n\r\n    @HostListener('window:message', ['$event'])\r\n    public onIFrameMessageEvent(event: any): void {\r\n        if(!(event?.origin ?? '').toLowerCase().includes('vista.kreditz.com')) {\r\n            return;\r\n        }\r\n        let data : string = event?.data;\r\n        if(!data) {\r\n            return;\r\n        }\r\n        let parsedData = JSON.parse(data);\r\n        let i = this.initialData;\r\n        if(parsedData?.case_id !== i.caseId) {\r\n            return;\r\n        }\r\n        let message: string = parsedData?.message;\r\n        let emitMessage = (code: BankSharingMessageCode) => {\r\n            i.onMessage(code, () => {\r\n                this.m.isHidden = true;\r\n            })\r\n        };\r\n        if(message === 'bank(s) selected') {\r\n            emitMessage(BankSharingMessageCode.bankSelected);\r\n        } else if(message === 'banking authentication started') {\r\n            emitMessage(BankSharingMessageCode.authenticationStarted);\r\n        } else if(message === 'user cancelled bank authentication' ) {\r\n            emitMessage(BankSharingMessageCode.authenticationCancelled);\r\n        } else if(message === 'banking authentication finished') {\r\n            emitMessage(BankSharingMessageCode.authenticationFinished);\r\n        } else if(message === 'User flow completed') {\r\n            emitMessage(BankSharingMessageCode.userFlowCompleted);\r\n        }\r\n    }\r\n\r\n    ngOnChanges(_: SimpleChanges) {\r\n        this.m = null;\r\n        let url = 'https://vista.kreditz.com/connect_bank';\r\n        let separator = '?'\r\n        let addQueryParameter = (name: string, value: string) => {\r\n            url += `${separator}${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\r\n            separator = '&';\r\n        }\r\n        let i = this.initialData;\r\n        addQueryParameter('client_id', i.clientId);\r\n        if(i.baseCountry === 'SE') {\r\n            addQueryParameter('market', 'SE');\r\n            addQueryParameter('locale', 'sw');\r\n        } else if(i.baseCountry === 'FI') {\r\n            addQueryParameter('market', 'FI');\r\n            addQueryParameter('locale', 'fi');\r\n        } else {\r\n            throw new Error('Not implemented for this country');\r\n        }\r\n\r\n        if(i.isNTechTest) {\r\n            addQueryParameter('env', 'sandbox'); //This is absent in their prod example. Possibly live is prod. Find out.\r\n        }\r\n        addQueryParameter('ssn_number', i.civicRegNr);\r\n        addQueryParameter('case_id', i.caseId);\r\n        addQueryParameter('type', 'Private');\r\n        addQueryParameter('iframe', 'true');\r\n        addQueryParameter('fetch_data_for_months', i.fetchDataForMonths.toFixed(0)); //1 -> 12\r\n\r\n        this.m = {\r\n            iframeUrl: this.sanitizer.bypassSecurityTrustResourceUrl(url),\r\n            isHidden: false\r\n        }\r\n\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    iframeUrl: SafeResourceUrl\r\n    isHidden: boolean\r\n}\r\n\r\nexport enum BankSharingMessageCode {\r\n    bankSelected,\r\n    authenticationStarted,\r\n    authenticationCancelled,\r\n    authenticationFinished,\r\n    userFlowCompleted\r\n}\r\n\r\nexport interface KreditzDatashareIframeComponentInitialData {\r\n    clientId: string\r\n    civicRegNr: string\r\n    caseId: string\r\n    fetchDataForMonths : number\r\n    onMessage : (messageCode: BankSharingMessageCode, hideUi: () => void) => void\r\n    baseCountry: string\r\n    isNTechTest: boolean\r\n}","<ng-container *ngIf=\"m\">\r\n    <div class=\"iframe-container\">\r\n        <iframe class=\"responsive-iframe iframe-placeholder\" [src]=\"m.iframeUrl\"></iframe>\r\n    </div>\r\n</ng-container>","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormGroup, ValidationErrors, Validators } from '@angular/forms';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Dictionary } from 'src/app/common.types';\r\n\r\n@Component({\r\n    selector: 'kyc-answers-editor',\r\n    templateUrl: './kyc-answers-editor.component.html',\r\n    styleUrls: ['./kyc-answers-editor.component.css'],\r\n})\r\nexport class KycAnswersEditorComponent implements OnInit {\r\n    constructor(private formBuilder: UntypedFormBuilder) {}\r\n\r\n    ngOnInit(): void {}\r\n\r\n    @Input()\r\n    public initialData: KycAnswersEditorComponentInitialDataModel;\r\n\r\n    public m: Model;\r\n\r\n    async ngOnChanges(_: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        let i = this.initialData;\r\n\r\n        if (!i) {\r\n            return;\r\n        }\r\n\r\n        await this.reset(i?.currentQuestionsTemplate);\r\n    }\r\n\r\n    private async reset(currentQuestionsTemplate: KycQuestionsSet) {\r\n        if (!currentQuestionsTemplate) {\r\n            return;\r\n        }\r\n\r\n        let m: Model = {\r\n            relation: null,\r\n            isCancelEnabled: !!this.initialData.onCancel,\r\n            isSubmitEnabled: !!this.initialData.onAnswersSubmitted,\r\n            staticTranslations: {\r\n                saveAnswers: {\r\n                    sv: 'Skicka in svar',\r\n                    fi: 'Lähetä vastaukset',\r\n                },\r\n                yes: {\r\n                    sv: 'Ja',\r\n                    fi: 'Kyllä',\r\n                },\r\n                no: {\r\n                    sv: 'Nej',\r\n                    fi: 'Ei',\r\n                },\r\n                unsecuredLoan: {\r\n                    sv: 'Lån utan säkerhet',\r\n                    fi: 'Vakuudeton luotto',\r\n                },\r\n                savingsAccount: {\r\n                    sv: 'Sparkonto',\r\n                    fi: 'Säästötili',\r\n                },\r\n                selectCountry: {\r\n                    sv: 'Välj land',\r\n                    fi: 'Valitse maa',\r\n                },\r\n            },\r\n            countryOptions: null,\r\n        };\r\n\r\n        if (currentQuestionsTemplate.questions.findIndex((x) => x.type == 'yesNoWithCountryOptions')) {\r\n            m.countryOptions = await this.loadAndReorderCountries();\r\n        }\r\n\r\n        let f: { [index: string]: any } = {};\r\n        let formValidators: ((x: UntypedFormGroup) => string)[] = [];\r\n        for (let question of currentQuestionsTemplate.questions) {\r\n            if (question.type === 'dropdown') {\r\n                f[question.key] = ['', [Validators.required]];\r\n            } else if (this.isYesNoQuestion(question)) {\r\n                f[question.key] = ['', [Validators.required]];\r\n                if (question.type === 'yesNoWithOptions') {\r\n                    for (let option of question.options) {\r\n                        f[this.getQuestionOptionFormKey(question, option)] = [false, []];\r\n                    }\r\n                    formValidators.push((x) => {\r\n                        let isYes = x.value[question.key] === 'yes';\r\n                        if (!isYes) {\r\n                            return null;\r\n                        }\r\n                        for (let option of question.options) {\r\n                            if (x.value[this.getQuestionOptionFormKey(question, option)] === true) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                        return question.key;\r\n                    });\r\n                } else if (question.type === 'yesNoWithCountryOptions') {\r\n                    f[question.optionsKey] = [[], []];\r\n                    f['__country_select__' + question.optionsKey] = ['', []];\r\n                    formValidators.push((x) => {\r\n                        let isYes = x.value[question.key] === 'yes';\r\n                        if (!isYes) {\r\n                            return null;\r\n                        }\r\n                        let selectedCountries: string[] = x.value[question.optionsKey];\r\n                        return selectedCountries.length > 0 ? null : question.key;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        let form = this.formBuilder.group(f);\r\n        form.setValidators((x) => {\r\n            let errors = formValidators.map((validate) => validate(form)).filter((x) => !!x);\r\n            if (errors.length > 0) {\r\n                let result: ValidationErrors = {};\r\n                for (let error of errors) {\r\n                    result[error] = true;\r\n                }\r\n                return result;\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n\r\n        m.relation = {\r\n            questionsVersion: currentQuestionsTemplate.version,\r\n            questions: currentQuestionsTemplate.questions,\r\n            form: form,\r\n        };\r\n\r\n        m.titleText = this.initialData.titleText ? this.initialData.titleText : null;\r\n\r\n        this.m = m;\r\n\r\n        //NOTE: Keep this after assingment to this.m or refactor parseAnswers to not use this.m\r\n        if (this.initialData.editState) {\r\n            this.m.relation.form.valueChanges.subscribe((_: any) => {\r\n                this.initialData.editState.next(this.parseAnswers());\r\n            });\r\n        }\r\n    }\r\n\r\n    public isYesNoQuestion(question: KycQuestion) {\r\n        return (\r\n            question.type === 'yesNoWithOptions' ||\r\n            question.type === 'yesNo' ||\r\n            question.type === 'yesNoWithCountryOptions'\r\n        );\r\n    }\r\n\r\n    private parseAnswers(): { isSavePossible: boolean; answers: KycQuestionAnswerModel[] } {\r\n        let answers: KycQuestionAnswerModel[] = [];\r\n\r\n        if (this.m.relation.form.invalid) {\r\n            return { isSavePossible: false, answers: null };\r\n        }\r\n\r\n        for (let question of this.m.relation.questions) {\r\n            let v = (x: string) => this.m.relation.form.value[x];\r\n            if (question.type === 'dropdown') {\r\n                let value = v(question.key);\r\n                let selectedOption = question.options.find((x) => x.value === value);\r\n                answers.push({\r\n                    questionCode: question.key,\r\n                    answerCode: value,\r\n                    answerText: this.getTranslation(selectedOption.translations),\r\n                    questionText: this.getTranslation(question.headerTranslations),\r\n                });\r\n            } else if (\r\n                question.type === 'yesNoWithOptions' ||\r\n                question.type === 'yesNo' ||\r\n                question.type === 'yesNoWithCountryOptions'\r\n            ) {\r\n                let isYes = v(question.key) == 'yes';\r\n                if (isYes) {\r\n                    answers.push({\r\n                        questionCode: question.key,\r\n                        answerCode: 'true',\r\n                        answerText: this.getStaticTranslation('yes'),\r\n                        questionText: this.getTranslation(question.headerTranslations),\r\n                    });\r\n                    if (question.type === 'yesNoWithOptions') {\r\n                        let optionCodes: string[] = [];\r\n                        let optionTexts: string[] = [];\r\n                        for (let option of question.options) {\r\n                            if (v(this.getQuestionOptionFormKey(question, option)) === true) {\r\n                                optionCodes.push(option.value);\r\n                                optionTexts.push(this.getTranslation(option.translations));\r\n                            }\r\n                        }\r\n                        answers.push({\r\n                            questionCode: question.optionsKey,\r\n                            answerCode: optionCodes.join(', '),\r\n                            answerText: optionTexts.join(', '),\r\n                            questionText:\r\n                                this.getTranslation(question.headerTranslations) +\r\n                                ' - ' +\r\n                                this.getTranslation(question.optionsHeaderTranslations),\r\n                        });\r\n                    } else if (question.type === 'yesNoWithCountryOptions') {\r\n                        let optionCodes: string[] = [];\r\n                        let optionTexts: string[] = [];\r\n                        for (let countryCode of v(question.optionsKey)) {\r\n                            optionCodes.push(countryCode);\r\n                            optionTexts.push(this.getCountryDisplayName(countryCode));\r\n                        }\r\n                        answers.push({\r\n                            questionCode: question.optionsKey,\r\n                            answerCode: optionCodes.join(', '),\r\n                            answerText: optionTexts.join(', '),\r\n                            questionText:\r\n                                this.getTranslation(question.headerTranslations) +\r\n                                ' - ' +\r\n                                this.getTranslation(question.optionsHeaderTranslations),\r\n                        });\r\n                    }\r\n                } else {\r\n                    answers.push({\r\n                        questionCode: question.key,\r\n                        answerCode: 'false',\r\n                        answerText: this.getStaticTranslation('no'),\r\n                        questionText: this.getTranslation(question.headerTranslations),\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            isSavePossible: true,\r\n            answers: answers,\r\n        };\r\n    }\r\n\r\n    onCountryOptionChanged(question: KycQuestion, countryCode: string) {\r\n        let currentValue: string[] = this.m.relation.form.value[question.optionsKey];\r\n        let patch: Dictionary<any> = {};\r\n        if (currentValue.indexOf(countryCode) < 0) {\r\n            currentValue.push(countryCode);\r\n            patch[question.optionsKey] = currentValue;\r\n        }\r\n\r\n        patch['__country_select__' + question.optionsKey] = '';\r\n        this.m.relation.form.patchValue(patch);\r\n    }\r\n\r\n    getCountryDisplayName(code: string) {\r\n        return this.m.countryOptions.find((x) => x.code == code).displayName;\r\n    }\r\n\r\n    removeCountryOption(question: KycQuestion, countryCode: string, evt?: Event) {\r\n        evt?.preventDefault();\r\n        let currentValue: string[] = this.m.relation.form.value[question.optionsKey];\r\n        let index = currentValue.indexOf(countryCode);\r\n        if (index >= 0) {\r\n            currentValue.splice(index, 1);\r\n            this.m.relation.form.patchValue({\r\n                [question.optionsKey]: currentValue,\r\n            });\r\n        }\r\n    }\r\n\r\n    countriesExceptChosen(question: KycQuestion, countryOptions: { code: string; displayName: string }[]) {\r\n        let chosenCountries: string[] = this.m.relation.form.value[question.optionsKey];\r\n        return countryOptions.filter((x) => chosenCountries.indexOf(x.code) < 0);\r\n    }\r\n\r\n    async submitAnswers(evt?: Event) {\r\n        evt?.preventDefault();\r\n\r\n        let { answers } = this.parseAnswers();\r\n\r\n        await this.initialData.onAnswersSubmitted(answers);\r\n    }\r\n\r\n    async cancel(evt?: Event) {\r\n        evt?.preventDefault();\r\n        await this.initialData.onCancel();\r\n    }\r\n\r\n    getQuestionOptionFormKey(\r\n        question: KycQuestion,\r\n        option: { value: string; translations: { [index: string]: string } }\r\n    ) {\r\n        return `${question.key}_${option.value}`;\r\n    }\r\n\r\n    getStaticTranslation(key: string) {\r\n        return this.getTranslation(this.m.staticTranslations[key]) || key;\r\n    }\r\n\r\n    getTranslation(translations: { [index: string]: string }) {\r\n        if (!translations) {\r\n            return '';\r\n        }\r\n        let preferredTranslation = translations[this.initialData.language.value];\r\n        if (preferredTranslation) {\r\n            return preferredTranslation;\r\n        } else {\r\n            let availableTranslations = Object.keys(translations);\r\n            if (availableTranslations.length > 0) {\r\n                return translations[availableTranslations[0]];\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n    }\r\n\r\n    private async loadAndReorderCountries() {\r\n        let countries = await this.initialData.getCountries();\r\n        return getOrderedCountryDropdownOptionsFromIsoCountries(\r\n            countries,\r\n            this.initialData.clientTwoLetterCountryIsoCode,\r\n            this.initialData.language.value\r\n        );\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    titleText?: string;\r\n    staticTranslations: { [index: string]: { [index: string]: string } };\r\n    relation: RelationModel;\r\n    isSubmitEnabled: boolean;\r\n    isCancelEnabled: boolean;\r\n    countryOptions: { code: string; displayName: string }[];\r\n}\r\n\r\ninterface RelationModel {\r\n    questionsVersion: string;\r\n    questions: KycQuestion[];\r\n    form: UntypedFormGroup;\r\n}\r\n\r\nexport interface KycAnswersEditorComponentInitialDataModel {\r\n    language: BehaviorSubject<string>;\r\n    currentQuestionsTemplate: KycQuestionsSet;\r\n    getCountries: () => Promise<IsoCountry[]>;\r\n    clientTwoLetterCountryIsoCode: string;\r\n    onCancel?: () => Promise<void>;\r\n    onAnswersSubmitted?: (answers: KycQuestionAnswerModel[]) => Promise<void>;\r\n    titleText?: string;\r\n    editState?: BehaviorSubject<{ isSavePossible: boolean; answers: KycQuestionAnswerModel[] }>;\r\n}\r\n\r\nexport interface KycQuestion {\r\n    type: string;\r\n    key: string;\r\n    headerTranslations?: { [index: string]: string };\r\n    options?: {\r\n        value: string;\r\n        translations: { [index: string]: string };\r\n    }[];\r\n    optionsKey?: string;\r\n    optionsHeaderTranslations?: { [index: string]: string };\r\n}\r\n\r\nexport interface KycQuestionAnswerModel {\r\n    questionCode: string;\r\n    answerCode: string;\r\n    questionText: string;\r\n    answerText: string;\r\n}\r\n\r\nexport interface KycAnswersModel {\r\n    relationType: string;\r\n    relationId: string;\r\n    answerDate: string;\r\n    answers: KycQuestionAnswerModel[];\r\n}\r\n\r\nexport interface KycCustomerStatus {\r\n    activeRelations: {\r\n        relationType: string;\r\n        relationId: string;\r\n        isUpdateRequired: boolean;\r\n        nrOfDaysSinceAnswer: number;\r\n    }[];\r\n    questionTemplates: {\r\n        activeProducts: {\r\n            relationType: string;\r\n            currentQuestionsTemplate: KycQuestionsSet;\r\n            historicalModels: {\r\n                id: number;\r\n                date: string;\r\n            }[];\r\n        }[];\r\n    };\r\n    latestAnswers: KycAnswersModel[];\r\n    historicalAnswers: KycAnswersModel[];\r\n}\r\n\r\nexport interface KycQuestionsSet {\r\n    version: string;\r\n    questions: KycQuestion[];\r\n}\r\n\r\nexport interface KycQuestion {\r\n    type: string;\r\n    key: string;\r\n    headerTranslations?: { [index: string]: string };\r\n    options?: {\r\n        value: string;\r\n        translations: { [index: string]: string };\r\n    }[];\r\n    optionsKey?: string;\r\n    optionsHeaderTranslations?: { [index: string]: string };\r\n}\r\n\r\n/*\r\nOrder countries by display name but move the client's country to the top of the list.\r\n*/\r\nexport function getOrderedCountryDropdownOptions<T>(\r\n    countries: T[],\r\n    clientTwoLetterCountryIsoCode: string,\r\n    getDisplayName: (value: T) => string,\r\n    getCountryIsoCode: (value: T) => string\r\n): DropdownOption[] {\r\n    let defaultChoiceCountryCodes = [clientTwoLetterCountryIsoCode];\r\n    if (clientTwoLetterCountryIsoCode == 'FI') {\r\n        defaultChoiceCountryCodes.push('SE');\r\n    }\r\n    let orderedCountries = orderByStr(\r\n        countries.map((x) => ({\r\n            code: getCountryIsoCode(x),\r\n            displayName: getDisplayName(x),\r\n        })),\r\n        (x) => x.displayName\r\n    );\r\n\r\n    return [\r\n        ...orderedCountries.filter((x) => defaultChoiceCountryCodes.includes(x.code)),\r\n        ...orderedCountries.filter((x) => !defaultChoiceCountryCodes.includes(x.code)),\r\n    ];\r\n}\r\n\r\nexport function getOrderedCountryDropdownOptionsFromIsoCountries(\r\n    countries: IsoCountry[],\r\n    clientTwoLetterCountryIsoCode: string,\r\n    userLanguage: string\r\n): DropdownOption[] {\r\n    return getOrderedCountryDropdownOptions(\r\n        countries,\r\n        clientTwoLetterCountryIsoCode,\r\n        (x) => x.translatedNameByLang2[userLanguage] ?? x.commonName,\r\n        (x) => x.iso2Name\r\n    );\r\n}\r\n\r\nfunction orderByStr<T>(source: T[], getSortKey: (value: T) => string): T[] {\r\n    return [...source].sort((x, y) => getSortKey(x).localeCompare(getSortKey(y)));\r\n}\r\n\r\nexport interface DropdownOption {\r\n    code: string;\r\n    displayName: string;\r\n}\r\n\r\nexport interface IsoCountry {\r\n    commonName: string;\r\n    nativeName: string;\r\n    iso2Name: string;\r\n    iso3Name: string;\r\n    translatedNameByLang2: { [index: string]: string };\r\n}\r\n","<div *ngIf=\"m\" class=\"edit-container\"> \r\n    <div *ngIf=\"m.titleText\" class=\"relation-header\">\r\n        <h3>{{m.titleText}}</h3>\r\n    </div>\r\n    <div class=\"editblock\">\r\n        <ng-content select=\"[kyc-answers-header-content]\"></ng-content>\r\n        <form [formGroup]=\"m.relation.form\">\r\n            <div class=\"row\">\r\n                <div class=\"col-xs-12\">\r\n                    <div class=\"pb-3\">\r\n                        <div class=\"text-right\">                    \r\n                            <button *ngIf=\"m.isSubmitEnabled\" class=\"n-icon-btn n-green-btn commit-btn\" [disabled]=\"m.relation.form.invalid\" \r\n                                (click)=\"submitAnswers($event)\"><span class=\"glyphicon glyphicon-ok\"></span></button>\r\n                            <button *ngIf=\"m.isCancelEnabled\" class=\"n-icon-btn n-white-btn cancel-btn\"\r\n                                (click)=\"cancel($event)\"><span class=\"glyphicon glyphicon-remove\"></span></button>\r\n                            <div class=\"clearfix\"></div>\r\n                        </div>                    \r\n                        <ng-container *ngFor=\"let question of m.relation.questions\">\r\n                            <div class=\"form-group pb-1\" *ngIf=\"question.type === 'dropdown'\">\r\n                                <label>{{getTranslation(question.headerTranslations)}}</label>\r\n                                <select class=\"form-control\" [formControlName]=\"question.key\">\r\n                                    <option value=\"\"></option>\r\n                                    <option *ngFor=\"let option of question.options\" [ngValue]=\"option.value\">\r\n                                        {{getTranslation(option.translations)}}</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"form-group pb-1\" *ngIf=\"isYesNoQuestion(question)\">\r\n                                <label>{{getTranslation(question.headerTranslations)}}</label>\r\n                                <select class=\"form-control\" [formControlName]=\"question.key\">\r\n                                    <option value=\"\"></option>\r\n                                    <option value=\"yes\">{{getStaticTranslation('yes')}}</option>\r\n                                    <option value=\"no\">{{getStaticTranslation('no')}}</option>\r\n                                </select>\r\n                            </div>\r\n                            <ng-container *ngIf=\"m.relation.form.value[question.key] === 'yes' && question.type === 'yesNoWithCountryOptions'\">                                \r\n                                <p>{{getTranslation(question.optionsHeaderTranslations)}}</p>\r\n                                <div class=\"pb-2\">\r\n                                    <div class=\"pb-1\">\r\n                                        <p class=\"form-control-static copyable bb-1\" *ngFor=\"let countryCode of m.relation.form.value[question.optionsKey]\">\r\n                                            {{getCountryDisplayName(countryCode)}}\r\n                                            <button (click)=\"removeCountryOption(question, countryCode, $event)\" class=\"n-icon-btn n-red-btn table-button\">\r\n                                                <span class=\"glyphicon glyphicon-remove\"></span>\r\n                                            </button>\r\n                                        </p>\r\n                                    </div>\r\n                                    <select class=\"form-control\" #country (change)=\"onCountryOptionChanged(question, country.value)\" [formControlName]=\"'__country_select__'+ question.optionsKey\">\r\n                                        <option value=\"\">{{getStaticTranslation('selectCountry')}}</option>\r\n                                        <ng-container *ngFor=\"let opt of countriesExceptChosen(question, m.countryOptions)\">\r\n                                            <option [value]=\"opt.code\">{{opt.displayName}}</option>\r\n                                        </ng-container>\r\n                                    </select>\r\n                                </div>                                                                \r\n                            </ng-container>                            \r\n                            <ng-container *ngIf=\"m.relation.form.value[question.key] === 'yes' && question.type === 'yesNoWithOptions'\">\r\n                                <div class=\"pb-2\">\r\n                                    <p>{{getTranslation(question.optionsHeaderTranslations)}}</p>\r\n                                    <div class=\"checkbox\" *ngFor=\"let option of question.options\">\r\n                                        <label>\r\n                                            <input type=\"checkbox\" [formControlName]=\"getQuestionOptionFormKey(question, option)\"> {{getTranslation(option.translations)}}\r\n                                        </label>\r\n                                    </div>\r\n                                </div>                                \r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <ng-content select=\"[kyc-answers-footer-content]\"></ng-content>\r\n    </div>\r\n</div>","import { Component, Input, SimpleChanges } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { KycQuestionAnswerModel } from '../kyc-answers-editor/kyc-answers-editor.component';\r\n\r\n@Component({\r\n    selector: 'kyc-answers-view',\r\n    templateUrl: './kyc-answers-view.component.html',\r\n    styleUrls: ['./kyc-answers-view.component.css'],\r\n})\r\nexport class KycAnswersViewComponent {\r\n    constructor() {}\r\n\r\n    public m: Model;\r\n\r\n    @Input()\r\n    public initialData: KycAnswersViewInitialDataModel;\r\n\r\n    public async onEdit(evt?: Event) {\r\n        evt?.preventDefault();\r\n        await this.initialData?.onEdit?.();\r\n    }\r\n\r\n    async ngOnChanges(_: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let i = this.initialData;\r\n\r\n        this.m = {\r\n            titleText: i.titleText ? i.titleText : null,\r\n            isUpdateRequired: i.isUpdateRequired,\r\n            nrOfDaysSinceAnswer: i.nrOfDaysSinceAnswer,\r\n            answers: i.answers,\r\n            hasAnswers: i.answers != null && i.answers.length > 0,\r\n            showEditButton: !!i.onEdit,\r\n        };\r\n    }\r\n\r\n    isEditDisabled() {\r\n        return this.initialData?.isEditDisabled?.getValue() ?? false;\r\n    }\r\n}\r\n\r\ninterface Model {\r\n    titleText: string;\r\n    isUpdateRequired: boolean;\r\n    nrOfDaysSinceAnswer: number;\r\n    hasAnswers: boolean;\r\n    answers: KycQuestionAnswerModel[];\r\n    showEditButton: boolean;\r\n}\r\n\r\nexport interface KycAnswersViewInitialDataModel {\r\n    titleText: string;\r\n    isUpdateRequired: boolean;\r\n    nrOfDaysSinceAnswer: number;\r\n    answers: KycQuestionAnswerModel[];\r\n    onEdit?: () => Promise<void>;\r\n    isEditDisabled?: BehaviorSubject<boolean>;\r\n}\r\n","<div *ngIf=\"m\" class=\"view-container\">\r\n    <div *ngIf=\"m.titleText\" class=\"relation-header\">\r\n        <h3>{{m.titleText}}</h3>\r\n    </div>\r\n    <div class=\"editblock\">\r\n        <div class=\"row\">\r\n            <div class=\"col-sm-6\">\r\n                <span class=\"glyphicon\" [ngClass]=\"{ 'glyphicon-exclamation-sign': m.isUpdateRequired, 'glyphicon-ok': m.nrOfDaysSinceAnswer <= 1 }\"></span>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <div class=\"text-right\" *ngIf=\"m.showEditButton\">\r\n                    <button class=\"n-icon-btn n-blue-btn\" (click)=\"onEdit($event)\" [disabled]=\"isEditDisabled()\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\r\n                </div>\r\n            </div>\r\n        </div>       \r\n        <ng-container *ngIf=\"m.hasAnswers\">\r\n            <div class=\"answers-container\">\r\n                <div *ngFor=\"let answer of m.answers\">\r\n                    <div class=\"question-text\">{{answer.questionText}}</div>\r\n                    <div class=\"answer-text\">{{answer.answerText}}</div>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!m.hasAnswers\">\r\n            <div class=\"form-horizontal\">\r\n                <div>-</div>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n</div>   \r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { KycQuestion } from '../public-api';\r\n\r\ntype Translations = { [index: string]: { [index: string]: string } };\r\nexport abstract class KycQuestionsOverviewBase {\r\n    constructor() {\r\n        this.language = new BehaviorSubject<string>('sv');\r\n    }\r\n\r\n    public language: BehaviorSubject<string>;\r\n\r\n    public languages = [\r\n        {\r\n            code: 'sv',\r\n            name: 'Svenska',\r\n        },\r\n        {\r\n            code: 'fi',\r\n            name: 'Suomi',\r\n        },\r\n    ];\r\n\r\n    protected setup(clientCountry: string, language?: string) {\r\n        if (clientCountry === 'FI') {\r\n            this.languages = [\r\n                {\r\n                    code: 'fi',\r\n                    name: 'Suomi',\r\n                },\r\n                {\r\n                    code: 'sv',\r\n                    name: 'Svenska',\r\n                },\r\n            ];\r\n        } else {\r\n            this.languages = [\r\n                {\r\n                    code: 'sv',\r\n                    name: 'Svenska',\r\n                },\r\n            ];\r\n        }\r\n        if (language && this.languages.find((x) => x.code === language)) {\r\n            this.language.next(language);\r\n        } else {\r\n            this.language.next(this.languages[0].code);\r\n        }\r\n    }\r\n\r\n    public staticTranslations: Translations = {\r\n        explanationText: {\r\n            sv: 'För att få behålla dig som kund måste vi ha uppdaterad information om dig och ditt engagemang. Därför är det viktigt att du besvarar och uppdaterar alla frågor med aktuell information.',\r\n            fi: 'Jotta voimme säilyttää sinut asiakkaanamme, meidän täytyy olla päivitettyä tietoa sinusta ja sitoutumisestasi. Siksi on tärkeää, että vastaat ja päivität kaikki kysymykset ajantasaisilla tiedoilla.',\r\n        },\r\n        explanationTextUpdate: {\r\n            sv: 'Du behöver uppdatera din KYC-information (Know your customer). Det är viktigt för oss att ha aktuell information om dig och hur du använder våra tjänster, så att vi kan ge dig bästa möjliga kundupplevelse och uppfylla våra lagstadgade skyldigheter.',\r\n            fi: 'Asiakkaan tuntemisen tietosi (KYC - Know your customer) tulisi päivittää. Meille on tärkeää tuntea sinut ja kuinka käytät palveluitamme, jotta voimme palvella sinua parhaalla mahdollisella tavalla ja voidaksemme täyttää lain meille asettamat velvollisuudet.',\r\n        },\r\n        language: {\r\n            sv: 'Språk',\r\n            fi: 'Kieli',\r\n        },\r\n        back: {\r\n            sv: 'Tillbaka',\r\n            fi: 'Takaisin',\r\n        },\r\n        loanTitle: {\r\n            sv: 'Lån',\r\n            fi: 'Luotto',\r\n        },\r\n        savingsTitle: {\r\n            sv: 'Sparkonton',\r\n            fi: 'Säästötili',\r\n        },\r\n        kyc: {\r\n            sv: 'Kundkännedom',\r\n            fi: 'Asiakkaan tuntemus',\r\n        },\r\n    };\r\n\r\n    public getRelationTypeTranslationKey(relationType: string) {\r\n        if (relationType === 'Credit_UnsecuredLoan') {\r\n            return 'unsecuredLoan';\r\n        } else if (relationType === 'SavingsAccount_StandardAccount') {\r\n            return 'savingsAccount';\r\n        } else {\r\n            return relationType;\r\n        }\r\n    }\r\n\r\n    public getQuestionOptionFormKey(\r\n        question: KycQuestion,\r\n        option: { value: string; translations: { [index: string]: string } }\r\n    ) {\r\n        return `${question.key}_${option.value}`;\r\n    }\r\n\r\n    public getTranslation(translations: { [index: string]: string }) {\r\n        if (!translations) {\r\n            return '';\r\n        }\r\n        let preferredTranslation = translations[this.language.value];\r\n        if (preferredTranslation) {\r\n            return preferredTranslation;\r\n        } else {\r\n            let availableTranslations = Object.keys(translations);\r\n            if (availableTranslations.length > 0) {\r\n                return translations[availableTranslations[0]];\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n    }\r\n\r\n    getStaticTranslation(key: string) {\r\n        return this.getTranslation(this.staticTranslations[key]) || key;\r\n    }\r\n\r\n    onLanguageChanged(evt: Event) {\r\n        this.language.next((evt as any).target.value);\r\n    }\r\n}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'ml-se-amortization-basis',\r\n    templateUrl: './ml-se-amortization-basis.component.html',\r\n    styles: [],\r\n})\r\nexport class MlSeAmortizationBasisComponent implements OnInit {\r\n    constructor() {}\r\n\r\n    @Input()\r\n    public initialData: MlSeAmortizationBasisComponentInitialData;\r\n\r\n    public m: Model;\r\n\r\n    ngOnInit(): void {}\r\n\r\n    async ngOnChanges(changes: SimpleChanges) {\r\n        this.m = null;\r\n\r\n        if (!this.initialData) {\r\n            return;\r\n        }\r\n\r\n        let basis = this.initialData.basis;\r\n\r\n        this.m = {\r\n            highlightCreditNr: this.initialData.highlightCreditNr,\r\n            balanceDate: basis.balanceDate,\r\n            propertyIdWithLabel: basis.propertyIdWithLabel,\r\n            basis: basis.amortizationBasis,\r\n            underlag: basis.amorteringsunderlag,\r\n        };\r\n    }\r\n\r\n    public getRuleDescription(loan: MortgageLoanSeAmortizationBasisLoan) {\r\n        let d = '';\r\n        d += (() => {\r\n            switch (loan.ruleCode) {\r\n                case 'r201616':\r\n                    return 'Amorteringskrav';\r\n                case 'r201723':\r\n                    return 'Skärpt amorteringskrav';\r\n                case 'none':\r\n                    return 'Inget amorteringskrav';\r\n                default:\r\n                    return loan.ruleCode;\r\n            }\r\n        })();\r\n\r\n        if (loan.isUsingAlternateRule) {\r\n            d += ' + Alternativregeln';\r\n        }\r\n\r\n        return d;\r\n    }\r\n\r\n    public isSecondLoanRowNeeded(loan: MortgageLoanSeAmortizationBasisLoan) {\r\n        return loan.currentCapitalBalanceAmount !== loan.maxCapitalBalanceAmount;\r\n    }\r\n}\r\n\r\nexport interface MlSeAmortizationBasisModel {\r\n    propertyId: string;\r\n    propertyIdWithLabel: string;\r\n    amortizationBasis: MortgageLoanSeAmortizationBasisModel;\r\n    amorteringsunderlag: SwedishAmorteringsunderlag;\r\n    balanceDate: string;\r\n}\r\n\r\nexport interface MlSeAmortizationBasisComponentInitialData {\r\n    highlightCreditNr?: string;\r\n    basis: MlSeAmortizationBasisModel;\r\n}\r\n\r\ninterface Model {\r\n    highlightCreditNr?: string;\r\n    balanceDate: string;\r\n    propertyIdWithLabel: string;\r\n    basis: MortgageLoanSeAmortizationBasisModel;\r\n    underlag: SwedishAmorteringsunderlag;\r\n}\r\n\r\nexport interface MortgageLoanSeAmortizationBasisModel {\r\n    objectValueDate: string;\r\n    objectValue: number;\r\n    ltiFraction: number;\r\n    ltvFraction: number;\r\n    currentCombinedYearlyIncomeAmount: number;\r\n    otherMortageLoansAmount: number;\r\n    loans: MortgageLoanSeAmortizationBasisLoan[];\r\n}\r\n\r\ninterface MortgageLoanSeAmortizationBasisLoan {\r\n    creditNr: string;\r\n    currentCapitalBalanceAmount: number;\r\n    maxCapitalBalanceAmount: number;\r\n    ruleCode: string;\r\n    isUsingAlternateRule: boolean;\r\n    monthlyAmortizationAmount: number;\r\n    interestBindMonthCount: number;\r\n}\r\n\r\nexport interface SwedishAmorteringsunderlag {\r\n    amorteringsgrundandeVarde: number;\r\n    datumAmorteringsgrundandeVarde: string;\r\n    amorteringsgrundandeSkuld: number;\r\n    skuldEjOmfattasAmorteringskrav: number;\r\n    skuldOmfattasAmorteringskrav: number;\r\n    skuldOmfattasSkarptAmorteringskrav: number;\r\n    varavOvanAlternativRegeln: number;\r\n    totalAmorteringObjektet: number;\r\n    totalAmorteringKravObjektetBankenHuvud: number;\r\n    totalAmorteringKravObjektetBankenAlternativ: number;\r\n}\r\n","<div *ngIf=\"m\">\r\n    <h2>Amorteringsgrund per {{m.balanceDate | date:'shortDate'}}</h2>\r\n    <h3>Objektet: {{m.propertyIdWithLabel}}</h3>\r\n\r\n    <div class=\"pt-3\">\r\n        <table class=\"table\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"col-xs-1\">Lån</th>\r\n                    <th class=\"col-xs-3 text-right\">Aktuell skuld / max</th>\r\n                    <th class=\"col-xs-5\">Regel</th>\r\n                    <th class=\"col-xs-2 text-right\">Amortering</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <ng-container *ngFor=\"let loan of m.basis.loans\">\r\n                    <tr >\r\n                        <td>{{loan.creditNr}} <span *ngIf=\"m.highlightCreditNr === loan.creditNr\">(*)</span></td>\r\n                        <td class=\"text-right\">{{loan.currentCapitalBalanceAmount | currency}}</td>\r\n                        <td>{{getRuleDescription(loan)}}</td>\r\n                        <td class=\"text-right\">{{loan.monthlyAmortizationAmount | currency}}</td>\r\n                    </tr>\r\n                    <tr *ngIf=\"isSecondLoanRowNeeded(loan)\">\r\n                        <td></td>\r\n                        <td class=\"text-right\">{{loan.maxCapitalBalanceAmount | currency}}</td>\r\n                        <td></td>\r\n                        <td class=\"text-right\"></td>\r\n                    </tr>                \r\n                </ng-container>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"pt-3\">\r\n        <table class=\"table table-striped\">\r\n            <thead>\r\n                <th class=\"col-sm-8\"></th>\r\n                <th class=\"col-sm-4\"></th>\r\n            </thead>\r\n            <tbody>         \r\n                <tr>\r\n                    <td>Värdering</td>\r\n                    <td>{{m.basis.objectValue | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Värderingsdatum</td>\r\n                    <td>{{m.basis.objectValueDate | date:'shortDate'}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Årsinkomst</td>\r\n                    <td>{{m.basis.currentCombinedYearlyIncomeAmount | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Bolån på andra säkerheter</td>\r\n                    <td>{{m.basis.otherMortageLoansAmount | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>LTV (belåningsgrad)</td>\r\n                    <td>{{m.basis.ltvFraction | percent}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>LTI (skuldkvot)</td>\r\n                    <td>{{m.basis.ltiFraction | number}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Skuld som inte omfattas av amorteringskrav</td>\r\n                    <td>{{m.underlag.skuldEjOmfattasAmorteringskrav | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Skuld som omfattas av amorteringskrav</td>\r\n                    <td>{{m.underlag.skuldOmfattasAmorteringskrav | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Skuld som omfattas av skärpt amorteringskrav</td>\r\n                    <td>{{m.underlag.skuldOmfattasSkarptAmorteringskrav | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Varav alternativregeln</td>\r\n                    <td>{{m.underlag.varavOvanAlternativRegeln | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Total amortering på objektet</td>\r\n                    <td>{{m.underlag.totalAmorteringObjektet | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Totalt amorteringskrav enl. huvudregeln</td>\r\n                    <td>{{m.underlag.totalAmorteringKravObjektetBankenHuvud | currency}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>Totalt amorteringskrav enl. alternativregeln</td>\r\n                    <td>{{m.underlag.totalAmorteringKravObjektetBankenAlternativ | currency}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MlSeAmortizationBasisComponent } from './ml-se-amortization-basis/ml-se-amortization-basis.component';\r\nimport { KycAnswersViewComponent } from './kyc-answers-view/kyc-answers-view.component';\r\nimport { KycAnswersEditorComponent } from './kyc-answers-editor/kyc-answers-editor.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { KreditzDatashareIframeComponent } from './kreditz-datashare-iframe/kreditz-datashare-iframe.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MlSeAmortizationBasisComponent,\r\n    KycAnswersViewComponent,\r\n    KycAnswersEditorComponent,\r\n    KreditzDatashareIframeComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n  exports: [\r\n    MlSeAmortizationBasisComponent,\r\n    KycAnswersViewComponent,\r\n    KycAnswersEditorComponent,\r\n    KreditzDatashareIframeComponent\r\n  ]\r\n})\r\nexport class NtechComponentsModule { }\r\n","/*\r\n * Public API Surface of ntech-components\r\n */\r\nexport * from './lib/ml-se-amortization-basis/ml-se-amortization-basis.component';\r\nexport * from './lib/kyc-answers-view/kyc-answers-view.component';\r\nexport * from './lib/kyc-answers-editor/kyc-answers-editor.component';\r\nexport * from './lib/kyc-questions-overview-base';\r\nexport * from './lib/ntech-components.module';","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'join',\r\n})\r\nexport class JoinPipe implements PipeTransform {\r\n    /**\r\n     * Ex. HouseHildChildren | join:', ':'AgeInYears\r\n     * Above will yield a commaseparated list with the parameters AgeInYears\r\n     * @param input an array with ex. strings, or objects\r\n     * @param separator the separator, ex ', '\r\n     * @param parameterName if array of objects, the name of the parameter to print, ex. 'AgeInYears'\r\n     * @returns\r\n     */\r\n    transform(input: Array<any>, separator: string, parameterName?: string): any {\r\n        if (parameterName) return input.map((obj) => obj[parameterName]).join(separator);\r\n\r\n        return input.join(separator);\r\n    }\r\n}\r\n","import {\r\n    Dictionary,\r\n    getFromDictionary,\r\n    getNumberDictionaryKeys,\r\n    groupByNumber,\r\n    groupByString,\r\n    NumberDictionary,\r\n    StringDictionary,\r\n} from '../common.types';\r\n\r\nexport class ComplexApplicationList {\r\n    constructor(public listName: string, flattendItems: FlattenedComplexApplicationListItem[]) {\r\n        this.rows = {};\r\n        let itemsByNr = groupByNumber(flattendItems, (x) => x.Nr);\r\n        for (let nr of getNumberDictionaryKeys(itemsByNr)) {\r\n            this.rows[nr] = new ComplexApplicationListRow(listName, nr, itemsByNr[nr]);\r\n        }\r\n    }\r\n\r\n    private rows: NumberDictionary<ComplexApplicationListRow>;\r\n\r\n    static createListsFromFlattenedItems(\r\n        items: FlattenedComplexApplicationListItem[]\r\n    ): Dictionary<ComplexApplicationList> {\r\n        let itemsByListName = groupByString(items, (x) => x.ListName);\r\n        let result: Dictionary<ComplexApplicationList> = {};\r\n        for (let listName of Object.keys(itemsByListName)) {\r\n            result[listName] = new ComplexApplicationList(listName, itemsByListName[listName]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static createListFromFlattenedItems(\r\n        listName: string,\r\n        items: FlattenedComplexApplicationListItem[]\r\n    ): ComplexApplicationList {\r\n        let lists = ComplexApplicationList.createListsFromFlattenedItems(items);\r\n        let count = Object.keys(lists).length;\r\n        if (count == 0) {\r\n            return new ComplexApplicationList(listName, []);\r\n        } else if (count > 1) {\r\n            throw new Error('Expected items from exactly one list');\r\n        } else if (!lists[listName]) {\r\n            throw new Error('Expected items from only the list ' + listName);\r\n        } else {\r\n            return lists[listName];\r\n        }\r\n    }\r\n\r\n    public getRow(nr: number, emptyRowOnNotExists: boolean) {\r\n        let actualRow = this.rows[nr];\r\n        return actualRow\r\n            ? actualRow\r\n            : emptyRowOnNotExists\r\n            ? new ComplexApplicationListRow(this.listName, nr, [])\r\n            : null;\r\n    }\r\n\r\n    public getRowNumbers() {\r\n        let rowNrs = getNumberDictionaryKeys<ComplexApplicationListRow>(this.rows);\r\n        rowNrs.sort((a, b) => a - b);\r\n        return rowNrs;\r\n    }\r\n}\r\n\r\nexport class ComplexApplicationListRow {\r\n    constructor(public listName: string, public nr: number, flattendItems: FlattenedComplexApplicationListItem[]) {\r\n        this.uniqueItems = {};\r\n        this.repeatedItems = {};\r\n        for (let item of flattendItems) {\r\n            if (item.IsRepeatable) {\r\n                if (!this.repeatedItems[item.ItemName]) {\r\n                    this.repeatedItems[item.ItemName] = [];\r\n                }\r\n                this.repeatedItems[item.ItemName].push(item.ItemValue);\r\n            } else {\r\n                this.uniqueItems[item.ItemName] = item.ItemValue;\r\n            }\r\n        }\r\n    }\r\n    private uniqueItems: Dictionary<string>;\r\n    private repeatedItems: Dictionary<string[]>;\r\n\r\n    public getUniqueItemNames() {\r\n        return Object.keys(this.uniqueItems ?? {});\r\n    }\r\n\r\n    public getUniqueItem(itemName: string) {\r\n        return this.uniqueItems[itemName];\r\n    }\r\n\r\n    public getUniqueItemBoolean(itemName: string) {\r\n        let rawValue = getFromDictionary(this.uniqueItems, itemName, null);\r\n        if (rawValue === 'true') {\r\n            return true;\r\n        } else if (rawValue === 'false') {\r\n            return false;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public getUniqueItemInteger(itemName: string) {\r\n        let rawValue = getFromDictionary(this.uniqueItems, itemName, null);\r\n        if (rawValue == null) {\r\n            return null;\r\n        }\r\n        return parseInt(rawValue);\r\n    }\r\n\r\n    public getUniqueItemDecimal(itemName: string) {\r\n        let rawValue = getFromDictionary(this.uniqueItems, itemName, null);\r\n        if (rawValue == null) {\r\n            return null;\r\n        }\r\n        return parseFloat(rawValue);\r\n    }\r\n\r\n    public getRepeatedItems(itemName: string) {\r\n        return this.repeatedItems[itemName] || [];\r\n    }\r\n\r\n    public static fromDictionary(listName: string, nr: number, uniqueValues: StringDictionary) {\r\n        let items: FlattenedComplexApplicationListItem[] = uniqueValues\r\n            ? Object.keys(uniqueValues).map((x) => {\r\n                  return {\r\n                      ListName: listName,\r\n                      Nr: nr,\r\n                      ItemName: x,\r\n                      ItemValue: uniqueValues[x],\r\n                      IsRepeatable: false,\r\n                  } as FlattenedComplexApplicationListItem;\r\n              })\r\n            : [];\r\n        return new ComplexApplicationListRow(listName, nr, items);\r\n    }\r\n}\r\n\r\nexport interface FlattenedComplexApplicationListItem {\r\n    ListName: string;\r\n    Nr: number;\r\n    ItemName: string;\r\n    ItemValue: string;\r\n    IsRepeatable: boolean;\r\n}\r\n","import { NullableNumber } from '../common.types';\r\nimport { NTechMath } from './ntech.math';\r\n\r\nexport function computeSingleNotificationEffectiveInterestRate(effectiveInterestRateRoundToDigits: number, initialPaidToCustomerAmount: number, singleNotificationAmount: number, repaymentTimeInDays: number) : NullableNumber\r\n{\r\n    try\r\n    {\r\n        //X = (D / K) ^ (1 / s) - 1\r\n        var fraction = Math.pow(singleNotificationAmount / initialPaidToCustomerAmount, 365 / repaymentTimeInDays) - 1;\r\n        return new NullableNumber(NTechMath.roundToPlaces(100 * fraction, effectiveInterestRateRoundToDigits));\r\n    }\r\n    catch\r\n    {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport class EffectiveInterestRateCalculation {\r\n    private loans: number[][] = [];\r\n    private payments: number[][] = [];\r\n\r\n    constructor(private effectiveInterestRateRoundToDigits: number) {}\r\n\r\n    private getTimeFromMonthNr(monthNr: number): number {\r\n        if (monthNr <= Number.EPSILON) {\r\n            throw new Error('monthNr should start at 1');\r\n        }\r\n        return monthNr / 12;\r\n    }\r\n\r\n    addAdditionalLoan(amount: number, monthNr: number) {\r\n        this.loans.push([amount, this.getTimeFromMonthNr(monthNr)]);\r\n    }\r\n\r\n    addInitialLoan(amount: number) {\r\n        this.loans.push([amount, 0]);\r\n    }\r\n\r\n    addPayment(amount: number, monthNr: number) {\r\n        this.payments.push([amount, this.getTimeFromMonthNr(monthNr)]);\r\n    }\r\n\r\n    calculate(): NullableNumber {\r\n        if (\r\n            this.loans.length == 1 &&\r\n            this.payments.length == 1 &&\r\n            NTechMath.equals(this.loans[0][0], this.payments[0][0])\r\n        ) {\r\n            //This really has not rate as the customer is actually making money here so if anything it should be negative but zero\r\n            //seems way less likely to cause issues in practice.\r\n            return new NullableNumber(0);\r\n        }\r\n\r\n        //See: https://sv.wikipedia.org/wiki/Effektiv_r%C3%A4nta\r\n        let f: (x: number) => number = (x) => {\r\n            let sum = 0;\r\n            for (let loan of this.loans) {\r\n                sum += loan[0] * Math.pow(1 + x, -loan[1]);\r\n            }\r\n            for (let payment of this.payments) {\r\n                sum -= payment[0] * Math.pow(1 + x, -payment[1]);\r\n            }\r\n            return sum;\r\n        };\r\n\r\n        let root = this.findRootUsingBrentsMethod(f, 0, 100000, 1e-8);\r\n\r\n        if (!root) {\r\n            return null;\r\n        }\r\n\r\n        let rate = NTechMath.roundToPlaces(root.value * 100, this.effectiveInterestRateRoundToDigits);\r\n\r\n        return new NullableNumber(rate);\r\n    }\r\n\r\n    private findRootUsingBrentsMethod(\r\n        f: (x: number) => number,\r\n        left: number,\r\n        right: number,\r\n        tolerance: number\r\n    ): NullableNumber {\r\n        let iterationsUsed: number = 0;\r\n        //@ts-ignore TODO remove unused locals\r\n        let errorEstimate: number;\r\n        let maxIterations: number = 75;\r\n\r\n        if (tolerance <= 0.0 + Number.EPSILON) {\r\n            throw new Error('Tolerance must be positive');\r\n        }\r\n\r\n        errorEstimate = Number.MAX_SAFE_INTEGER;\r\n\r\n        // Implementation and notation based on Chapter 4 in\r\n        // \"Algorithms for Minimization without Derivatives\"\r\n        // by Richard Brent.\r\n\r\n        let c: number,\r\n            d: number,\r\n            e: number,\r\n            fa: number,\r\n            fb: number,\r\n            fc: number,\r\n            tol: number,\r\n            m: number,\r\n            p: number,\r\n            q: number,\r\n            r: number,\r\n            s: number;\r\n\r\n        // set up aliases to match Brent's notation\r\n        let a = left;\r\n        let b = right;\r\n        let t = tolerance;\r\n        iterationsUsed = 0;\r\n\r\n        fa = f(a);\r\n        fb = f(b);\r\n\r\n        if (fa * fb + Number.EPSILON > 0.0) {\r\n            return null;\r\n        }\r\n\r\n        let skipInt = false;\r\n        while (true) {\r\n            if (!skipInt) {\r\n                c = a;\r\n                fc = fa;\r\n                d = e = b - a;\r\n            }\r\n            if (Math.abs(fc) < Math.abs(fb) + Number.EPSILON) {\r\n                a = b;\r\n                b = c;\r\n                c = a;\r\n                fa = fb;\r\n                fb = fc;\r\n                fc = fa;\r\n            }\r\n\r\n            iterationsUsed++;\r\n\r\n            tol = 2.0 * t * Math.abs(b) + t;\r\n            errorEstimate = m = 0.5 * (c - b);\r\n            if (Math.abs(m) + Number.EPSILON > tol && !NTechMath.equals(fb, 0.0)) {\r\n                // exact comparison with 0 is OK here\r\n                // See if bisection is forced\r\n                if (Math.abs(e) < tol + Number.EPSILON || Math.abs(fa) <= Math.abs(fb) + Number.EPSILON) {\r\n                    d = e = m;\r\n                } else {\r\n                    s = fb / fa;\r\n                    if (NTechMath.equals(a, c)) {\r\n                        // linear interpolation\r\n                        p = 2.0 * m * s;\r\n                        q = 1.0 - s;\r\n                    } else {\r\n                        // Inverse quadratic interpolation\r\n                        q = fa / fc;\r\n                        r = fb / fc;\r\n                        p = s * (2.0 * m * q * (q - r) - (b - a) * (r - 1.0));\r\n                        q = (q - 1.0) * (r - 1.0) * (s - 1.0);\r\n                    }\r\n                    if (p + Number.EPSILON > 0.0) q = -q;\r\n                    else p = -p;\r\n                    s = e;\r\n                    e = d;\r\n                    if (\r\n                        2.0 * p < 3.0 * m * q - Math.abs(tol * q) + Number.EPSILON &&\r\n                        p < Math.abs(0.5 * s * q) + Number.EPSILON\r\n                    )\r\n                        d = p / q;\r\n                    else d = e = m;\r\n                }\r\n                a = b;\r\n                fa = fb;\r\n                if (Math.abs(d) + Number.EPSILON > tol) b += d;\r\n                else if (m + Number.EPSILON > 0.0) b += tol;\r\n                else b -= tol;\r\n                if (iterationsUsed == maxIterations) return null;\r\n\r\n                fb = f(b);\r\n                if (\r\n                    (fb + Number.EPSILON > 0.0 && fc + Number.EPSILON > 0.0) ||\r\n                    (fb <= 0.0 + Number.EPSILON && fc <= 0.0 + Number.EPSILON)\r\n                )\r\n                    skipInt = false;\r\n                else skipInt = true;\r\n            } else return new NullableNumber(b);\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core'; //From https://medium.com/grensesnittet/loading-status-in-angular-done-right-aeed09cfbea6\r\nimport { HttpResponse, HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { NtechEventService } from './ntech-event.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n/*\r\n\r\n\r\n*/\r\n/*\r\nhttps://github.com/angular/angular/issues/18155\r\nThe fact that you cant pass custom data in request options is so sad.\r\n */\r\nexport const LoaderInterceptorSkipHeader = 'X-NTech-Skip-Loader';\r\n\r\nexport abstract class LoaderInterceptorBase implements HttpInterceptor {\r\n    //NOTE: Dont put a constructor here since this is shared with customer pages which has a different set of injected services\r\n    private requests: HttpRequest<any>[] = [];\r\n\r\n    abstract isLoadingSubject(): BehaviorSubject<boolean>;\r\n\r\n    removeRequest(req: HttpRequest<any>) {\r\n        const i = this.requests.indexOf(req);\r\n        if (i >= 0) {\r\n            this.requests.splice(i, 1);\r\n        }\r\n        this.isLoadingSubject().next(this.requests.length > 0);\r\n    }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        if (req.headers.has(LoaderInterceptorSkipHeader)) {\r\n            const headers = req.headers.delete(LoaderInterceptorSkipHeader);\r\n            return next.handle(req.clone({ headers }));\r\n        } else {\r\n            this.requests.push(req);\r\n\r\n            this.isLoadingSubject().next(true);\r\n            return new Observable((observer) => {\r\n                const subscription = next.handle(req).subscribe(\r\n                    (event) => {\r\n                        if (event instanceof HttpResponse) {\r\n                            this.removeRequest(req);\r\n                            observer.next(event);\r\n                        }\r\n                    },\r\n                    (err) => {\r\n                        this.removeRequest(req);\r\n                        observer.error(err);\r\n                    },\r\n                    () => {\r\n                        this.removeRequest(req);\r\n                        observer.complete();\r\n                    }\r\n                );\r\n                return () => {\r\n                    this.removeRequest(req);\r\n                    subscription.unsubscribe();\r\n                };\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n@Injectable()\r\nexport class LoaderInterceptor extends LoaderInterceptorBase implements HttpInterceptor {\r\n    constructor(private eventService: NtechEventService) {\r\n        super();\r\n    }\r\n\r\n    isLoadingSubject() {\r\n        return this.eventService.isLoading;\r\n    }\r\n}\r\n","export function createMortgagePropertyIdFromCollateralItems(\r\n    getCollateralItem: (name: string) => string,\r\n    includeObjectTypeLabel: boolean\r\n) {\r\n    let v = (n: string) => getCollateralItem(n) ?? `Missing ${n}`;\r\n    let createRawId = () => {\r\n        if (v('objectTypeCode') === 'seBrf') {\r\n            return `${v('objectAddressMunicipality')} ${v('seBrfName')} ${v('seBrfApartmentNr')}`;\r\n        } else if (v('objectTypeCode') === 'seFastighet') {\r\n            return v('objectId');\r\n        } else {\r\n            return v('objectTypeCode');\r\n        }\r\n    };\r\n    let propertyId = createRawId();\r\n    if (includeObjectTypeLabel) {\r\n        return getCollateralItem('objectTypeCode') === 'seBrf' ? `BRF: ${propertyId}` : propertyId;\r\n    } else {\r\n        return propertyId;\r\n    }\r\n}\r\n","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { generateUniqueId } from '../common.types';\r\n\r\nexport abstract class NtechEventServiceBase {\r\n    //NOTE: Dont put a constructor here since this is shared with customer pages which has a different set of injected services\r\n    public isLoading = new BehaviorSubject(false);\r\n\r\n    public applicationEvents: EventEmitter<ApplicationEvent> = new EventEmitter<ApplicationEvent>();\r\n\r\n    public emitApplicationEvent<T>(eventCode: string, customData?: T, context?: string) {\r\n        this.applicationEvents.emit(new ApplicationEvent(eventCode, customData, context));\r\n    }\r\n\r\n    public generateDialogId() {\r\n        return generateUniqueId(10);\r\n    }\r\n\r\n    public signalReloadApplication(applicationNr: string) {\r\n        this.applicationEvents.emit(new ApplicationEvent(ReloadApplicationEventName, applicationNr));\r\n    }\r\n\r\n    public signalReloadApplicationAndClosePopup(applicationNr: string) {\r\n        this.applicationEvents.emit(new ApplicationEvent(ReloadApplicationAndClosePopupEventName, applicationNr));\r\n    }\r\n\r\n    public signalUpdateToggleBlock(toggleBlockId: string, updates: { newTitle?: string }) {\r\n        this.applicationEvents.emit(\r\n            new ApplicationEvent(UpdateToggleBlock, { toggleBlockId, newTitle: updates?.newTitle })\r\n        );\r\n    }\r\n\r\n    public signalReloadCreditComments(creditNr: string) {\r\n        this.applicationEvents.emit(new ApplicationEvent(ReloadCreditCommentsEventName, creditNr));\r\n    }\r\n}\r\n\r\nexport const ReloadApplicationAndClosePopupEventName = 'ReloadUnsecuredLoanApplicationAndClosePopup';\r\nexport const ReloadApplicationEventName = 'ReloadUnsecuredLoanApplication';\r\nexport const UpdateToggleBlock = 'UpdateToggleBlock';\r\nexport const ReloadCreditCommentsEventName = 'ReloadCreditComments';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class NtechEventService extends NtechEventServiceBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    public setCustomPageTitle(title: string, browserTitle: string) {\r\n        this.applicationEvents.emit(\r\n            new ApplicationEvent('setCustomPageTitle', { title: title, browserTitle: browserTitle })\r\n        );\r\n    }\r\n    public setApplicationNr(applicationNr: string) {\r\n        this.applicationEvents.emit(new ApplicationEvent('setApplicationNr', { applicationNr: applicationNr }));\r\n    }\r\n}\r\n\r\nexport class ApplicationEvent {\r\n    constructor(public eventCode: string, public customData?: any, public context?: string) {}\r\n\r\n    public isReloadApplicationEvent() {\r\n        return this.eventCode === ReloadApplicationEventName;\r\n    }\r\n\r\n    public isReloadApplicationAndClosePopupEvent() {\r\n        return this.eventCode === ReloadApplicationAndClosePopupEventName;\r\n    }\r\n}\r\n","import {\r\n    AbstractControl,\r\n    AbstractControlOptions,\r\n    AsyncValidatorFn,\r\n    UntypedFormControl,\r\n    UntypedFormGroup,\r\n    ValidationErrors,\r\n    ValidatorFn,\r\n    Validators,\r\n} from '@angular/forms';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Dictionary } from '../common.types';\r\n\r\n/**\r\n * Internal form handling using reactive forms.\r\n */\r\nexport class FormsHelper {\r\n    constructor(public form: UntypedFormGroup) {}\r\n\r\n    public getFormControl(groupName: string, controlName: string): AbstractControl {\r\n        if (!this.form) {\r\n            return null;\r\n        }\r\n\r\n        return groupName ? this.form?.get(groupName)?.get(controlName) : this.form?.get(controlName);\r\n    }\r\n\r\n    public hasFormControl(groupName: string, controlName: string) {\r\n        return !!this.getFormControl(groupName, controlName);\r\n    }\r\n\r\n    public getValue(controlName: string) {\r\n        let control = this.getFormControl(null, controlName);\r\n        return control?.value;\r\n    }\r\n\r\n    public setValue(controlName: string, value: any) {\r\n        let control = this.getFormControl(null, controlName);\r\n        return control?.setValue(value);\r\n    }\r\n\r\n    public setValue2(groupName: string, controlName: string, value: any) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        return control?.setValue(value);\r\n    }\r\n\r\n    public getFormGroupValue(groupName: string, controlName: string) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        return control?.value;\r\n    }\r\n\r\n    public getFormGroupValue2(groupName1: string, groupName2: string, controlName: string) {\r\n        let group2 = this.getFormControl(groupName1, groupName2);\r\n        return group2?.get(controlName)?.value;\r\n    }\r\n\r\n    public hasError(controlName: string, groupName?: string) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        return control && control.invalid && control.dirty;\r\n    }\r\n\r\n    public hasAnyError(controlName: string, formValidationErrorName: string, groupName?: string) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        return this.hasError(controlName, groupName) || (this.hasNamedValidationError(formValidationErrorName) && control.dirty);\r\n    }\r\n\r\n    public hasErrorStrict(controlName: string, groupName?: string) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        return control && control.invalid;\r\n    }\r\n\r\n    public hasNamedValidationError(validatorName: string) {\r\n        return this.form.errors && this.form.errors[validatorName] === true;\r\n    }\r\n\r\n    public ensureControlOnConditionOnly(\r\n        shouldExist: boolean,\r\n        controlName: string,\r\n        getInitialValue: () => any,\r\n        getValidators: () => ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\r\n        getAsyncValidators?: () => AsyncValidatorFn | AsyncValidatorFn[] | null\r\n    ) {\r\n        if (!shouldExist && this.form.contains(controlName)) {\r\n            this.form.removeControl(controlName);\r\n        } else if (shouldExist) {\r\n            this.addControlIfNotExists(\r\n                controlName,\r\n                getInitialValue(),\r\n                getValidators(),\r\n                getAsyncValidators ? getAsyncValidators() : null\r\n            );\r\n        }\r\n    }\r\n\r\n    public addControlIfNotExists(\r\n        controlName: string,\r\n        initialValue: any,\r\n        validators: ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\r\n        asyncValidators?: AsyncValidatorFn | AsyncValidatorFn[] | null\r\n    ) {\r\n        if (this.form.contains(controlName)) {\r\n            return;\r\n        }\r\n        let control = new UntypedFormControl(initialValue, validators, asyncValidators ? asyncValidators : null);\r\n        this.form.addControl(controlName, control);\r\n    }\r\n\r\n    public addGroupIfNotExists(\r\n        groupName: string,\r\n        controls: NewFormGroupControl[]\r\n    ) {\r\n        if (this.form.contains(groupName)) {\r\n            return null;\r\n        }\r\n        let groupControls: Dictionary<UntypedFormControl> = {};\r\n        for (let control of controls) {\r\n            if (control) {\r\n                //To allow conditionally skipping things with inline logic\r\n                groupControls[control.controlName] = new UntypedFormControl(\r\n                    control.initialValue,\r\n                    control.validators,\r\n                    control.asyncValidators\r\n                );\r\n            }\r\n        }\r\n        let group = new UntypedFormGroup(groupControls);\r\n        this.form.addControl(groupName, group);\r\n        return group;\r\n    }\r\n\r\n    setDisabled(groupName: string, controlName: string, isDisabled: boolean, emitEvent?: boolean) {\r\n        let control = this.getFormControl(groupName, controlName);\r\n        if (!control) {\r\n            return;\r\n        }\r\n        //NOTE: The reason we care about emitEvent is that angular has a \"feature\" (that any sane person would consider a bug)\r\n        //      where changing disabled triggers valueChange. This is supressed by emitEvent: false so we flip the default here from insane way to the sane way.\r\n        if (isDisabled && !control.disabled) {\r\n            control.disable({ emitEvent: !!emitEvent });\r\n        } else if (!isDisabled && control.disabled) {\r\n            control.enable({ emitEvent: !!emitEvent });\r\n        }\r\n    }\r\n\r\n    invalid() {\r\n        return this.form?.invalid;\r\n    }\r\n\r\n    setFormValidator(validate: (control: AbstractControl) => boolean, validatorName?: string) {\r\n        this.setFormValidators([{ validate, validatorName }]);\r\n    }\r\n\r\n    setFormValidators(validators: { validate: (control: AbstractControl) => boolean; validatorName?: string }[]) {\r\n        let actualValidator: ValidatorFn;\r\n        if (validators.length > 1) {\r\n            let actualValidators: ValidatorFn[] = [];\r\n            for (let validator of validators) {\r\n                actualValidators.push(FormsHelper.createFormValidator(validator.validate, validator.validatorName));\r\n            }\r\n            actualValidator = Validators.compose(actualValidators);\r\n        } else {\r\n            actualValidator = FormsHelper.createFormValidator(validators[0].validate, validators[0].validatorName);\r\n        }\r\n        this.form.setValidators(actualValidator);\r\n        this.form.updateValueAndValidity();\r\n    }\r\n\r\n    public ensureGroupedControlOnConditionOnly(\r\n        shouldExist: boolean,\r\n        groupName: string,\r\n        controlName: string,\r\n        getInitialValue: () => any,\r\n        getValidators: () => ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\r\n        getAsyncValidators?: () => AsyncValidatorFn | AsyncValidatorFn[] | null\r\n    ) {\r\n        let group = this.form.controls[groupName] as UntypedFormGroup;\r\n        if (!shouldExist && group?.contains(controlName)) {\r\n            group.removeControl(controlName);\r\n        } else if (shouldExist && group) {\r\n            this.addGroupedControlIfNotExists(\r\n                group,\r\n                controlName,\r\n                getInitialValue(),\r\n                getValidators(),\r\n                getAsyncValidators ? getAsyncValidators() : null\r\n            );\r\n        }\r\n    }\r\n\r\n    private addGroupedControlIfNotExists(\r\n        group: UntypedFormGroup,\r\n        controlName: string,\r\n        initialValue: string,\r\n        validators: ValidatorFn | ValidatorFn[] | AbstractControlOptions | null,\r\n        asyncValidators?: AsyncValidatorFn | AsyncValidatorFn[] | null\r\n    ) {\r\n        if (group.contains(controlName)) {\r\n            return;\r\n        }\r\n        let control = new UntypedFormControl(initialValue, validators, asyncValidators ? asyncValidators : null);\r\n        group.addControl(controlName, control);\r\n    }\r\n\r\n    static createFormValidator(validate: (control: AbstractControl) => boolean, validatorName?: string): ValidatorFn {\r\n        let validateActual: ValidatorFn = (x) => {\r\n            let isValid = validate(x);\r\n            if (isValid) {\r\n                return null;\r\n            } else {\r\n                let errors: Dictionary<boolean> = {};\r\n                errors[validatorName || 'formInvalid'] = true;\r\n                return errors;\r\n            }\r\n        };\r\n        return validateActual;\r\n    }\r\n\r\n    static loadSingleAttachedFileAsDataUrl(attachedFiles: FileList): Promise<{ dataUrl: string; filename: string }> {\r\n        return new Promise<{ dataUrl: string; filename: string }>((resolve, reject) => {\r\n            if (attachedFiles.length == 1) {\r\n                let r = new FileReader();\r\n                var f = attachedFiles[0];\r\n                if (f.size > 10 * 1024 * 1024) {\r\n                    reject('Attached file is too big!');\r\n                }\r\n                r.onloadend = (e) => {\r\n                    let result = {\r\n                        dataUrl: (<any>e.target).result,\r\n                        filename: f.name,\r\n                    };\r\n                    resolve(result);\r\n                };\r\n                r.readAsDataURL(f);\r\n            } else if (attachedFiles.length == 0) {\r\n                reject('No agreement attached!');\r\n            } else {\r\n                reject('Multiple files have been attached. Please reload the page and only attach a single file.');\r\n            }\r\n        });\r\n    }\r\n\r\n    static createValidatorAsync(\r\n        validatorName: string,\r\n        isValid: (value: string) => Observable<boolean>\r\n    ): (control: AbstractControl) => Observable<ValidationErrors> | null {\r\n        return (x) => {\r\n            let isMissing = x.value === '' || x.value === null || x.value === undefined;\r\n            if (isMissing) {\r\n                return of(null);\r\n            }\r\n\r\n            return isValid(x.value).pipe(\r\n                map((y) => {\r\n                    if (y) {\r\n                        return null;\r\n                    } else {\r\n                        let err: Dictionary<any> = {};\r\n                        err[validatorName] = 'invalid';\r\n                        return err;\r\n                    }\r\n                })\r\n            );\r\n        };\r\n    }\r\n}\r\n\r\nexport interface NewFormGroupControl {\r\n    controlName: string;\r\n    initialValue: any;\r\n    validators: ValidatorFn | ValidatorFn[] | AbstractControlOptions | null;\r\n    asyncValidators?: AsyncValidatorFn | AsyncValidatorFn[] | null;\r\n}","import { NTechMath } from './ntech.math';\r\nimport { Injectable } from '@angular/core';\r\nimport { EffectiveInterestRateCalculation, computeSingleNotificationEffectiveInterestRate } from './effective-interest-rate.calculator';\r\nimport { NullableNumber } from '../common.types';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class NTechPaymentPlanService {\r\n    constructor() {}\r\n\r\n    annuityRoundToDigits: number = 2;\r\n    paymentRoundToDigits: number = 2;\r\n    monthCountCapEvenIfNotFullyPaid: NullableNumber = null;\r\n    lastMonthCarryOverStrategyPercentOfAnnuity: NullableNumber = new NullableNumber(10);\r\n    lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount = new NullableNumber(10);\r\n    lastMonthCarryOverStrategyFixedAmount: NullableNumber = null;\r\n    effectiveInterestRateRoundToDigits: number = 2;\r\n\r\n    caclculatePlanWithSinglePaymentWithRepaymentTimeInDays(r: BasicRepaymentTimePaymentPlanRequest, repaymentTimeInDays: number) : PaymentPlan {\r\n        let interestRatePercent = this.getTotalInterestRatePercent(r);\r\n        let loanAmount = this.getLoanAmount(r);\r\n        let capitalAmount = loanAmount + (r.initialFeeCapitalizedAmount ?? 0);        \r\n        let interestOnNotification = NTechMath.roundToPlaces(loanAmount * interestRatePercent / 365.25 / 100 * (repaymentTimeInDays + 1), 2);\r\n        let payment : MonthlyPayment = {\r\n            monthNr: 1,\r\n            initialFee: r.initialFeeOnFirstNotificationAmount ?? 0,\r\n            monthlyFee: r.notificationFee ?? 0,\r\n            capital: capitalAmount,\r\n            interest: interestOnNotification,\r\n            totalAmount: null,\r\n            nonStandardPaymentDays: repaymentTimeInDays\r\n        }        \r\n        payment.totalAmount = payment.initialFee + payment.monthlyFee + payment.interest + payment.capital;\r\n        let plan: PaymentPlan = {\r\n            UsesAnnuities: false,\r\n            LoanAmount: loanAmount,\r\n            LoansToSettleAmount: r.loansToSettleAmount,\r\n            PaidToCustomerAmount: r.paidToCustomerAmount,\r\n            InitialFeeCapitalizedAmount: r.initialFeeCapitalizedAmount,\r\n            InitialFeeWithheldAmount: r.initialFeeWithheldAmount,\r\n            MonthlyFeeAmount: r.notificationFee,\r\n            MonthlyCostExcludingFeesAmount: payment.capital + payment.interest,\r\n            MonthlyCostIncludingFeesAmount: payment.capital + payment.interest + payment.monthlyFee,\r\n            RepaymentTimeInMonths: 1,\r\n            RepaymentTimeInYears: 1,\r\n            MarginInterestRatePercent: r.marginInterestRatePercent,\r\n            ReferenceInterestRatePercent: r.referenceInterestRatePercent,\r\n            TotalInterestRatePercent: interestRatePercent,\r\n            TotalPaidAmount: payment.totalAmount,            \r\n            EffectiveInterstRatePercent: computeSingleNotificationEffectiveInterestRate(this.effectiveInterestRateRoundToDigits, \r\n                loanAmount - r.initialFeeWithheldAmount, payment.totalAmount, repaymentTimeInDays),\r\n            Payments: [payment],\r\n        }\r\n        return plan;\r\n    }\r\n\r\n    private getTotalInterestRatePercent(r: BasicRepaymentTimePaymentPlanRequest) {\r\n        return r.marginInterestRatePercent + r.referenceInterestRatePercent;\r\n    }\r\n\r\n    private getLoanAmount(r: BasicRepaymentTimePaymentPlanRequest) {\r\n        return r.loansToSettleAmount + r.paidToCustomerAmount + r.initialFeeWithheldAmount;\r\n    }\r\n\r\n    calculatePlanWithAnnuitiesFromRepaymentTime(r: RepaymentTimePaymentPlanRequest): PaymentPlan {\r\n        let interestRatePercent = this.getTotalInterestRatePercent(r);\r\n        let loanAmount = this.getLoanAmount(r);\r\n        let initialCapitalDebtAmount = this.computeInitialCapitalDebtAmount(loanAmount, r.initialFeeCapitalizedAmount);\r\n        let annuityAmount = NTechMath.roundToPlaces(\r\n            this.computeAnnuity(interestRatePercent, initialCapitalDebtAmount, r.repaymentTimeInMonths),\r\n            this.annuityRoundToDigits\r\n        );\r\n\r\n        let payments = this.computeMonthlyPayments(\r\n            annuityAmount,\r\n            initialCapitalDebtAmount,\r\n            interestRatePercent,\r\n            r.notificationFee,\r\n            new NullableNumber(r.initialFeeOnFirstNotificationAmount ?? 0)\r\n        );\r\n\r\n        return {\r\n            LoanAmount: loanAmount,\r\n            UsesAnnuities: true,\r\n            LoansToSettleAmount: r.loansToSettleAmount,\r\n            PaidToCustomerAmount: r.paidToCustomerAmount,\r\n            InitialFeeCapitalizedAmount: r.initialFeeCapitalizedAmount,\r\n            InitialFeeWithheldAmount: r.initialFeeWithheldAmount,\r\n            MonthlyFeeAmount: r.notificationFee,\r\n            MonthlyCostExcludingFeesAmount: annuityAmount,\r\n            MonthlyCostIncludingFeesAmount: annuityAmount + r.notificationFee,\r\n            RepaymentTimeInMonths: r.repaymentTimeInMonths,\r\n            RepaymentTimeInYears: Math.ceil(r.repaymentTimeInMonths / 12),\r\n            MarginInterestRatePercent: r.marginInterestRatePercent,\r\n            ReferenceInterestRatePercent: r.referenceInterestRatePercent,\r\n            TotalInterestRatePercent: interestRatePercent,\r\n            TotalPaidAmount: NTechMath.sum(payments, (x) => x.totalAmount),\r\n            EffectiveInterstRatePercent: this.calculateEffectiveInterestRatePercent(\r\n                loanAmount - r.initialFeeWithheldAmount,\r\n                payments\r\n            ),\r\n            Payments: payments,\r\n        };\r\n    }\r\n\r\n    private computeInitialCapitalDebtAmount(loanAmount: number, capitalizedInitialFeeAmount: number) {\r\n        return loanAmount + capitalizedInitialFeeAmount;\r\n    }\r\n\r\n    private computeAnnuity(\r\n        interestRatePercent: number,\r\n        initialCapitalDebtAmount: number,\r\n        repaymentTimeInMonths: number\r\n    ): number {\r\n        if (interestRatePercent < 0.00001) {\r\n            return initialCapitalDebtAmount / repaymentTimeInMonths;\r\n        }\r\n\r\n        let r = interestRatePercent / 100 / 12;\r\n\r\n        let pv = initialCapitalDebtAmount;\r\n        let n = repaymentTimeInMonths;\r\n\r\n        let result = (r * pv) / (1 - Math.pow(1 + r, -n));\r\n\r\n        return result;\r\n    }\r\n\r\n    private getActualAmortizationAmountForMonth(\r\n        monthNr: number,\r\n        standardAmortizationAmount: number,\r\n        remainingCapitalAmount: number\r\n    ): number {\r\n        return Math.min(standardAmortizationAmount, remainingCapitalAmount);\r\n    }\r\n\r\n    private shouldCarryOverRemainingCapitalAmount(\r\n        remainingCapitalAmount: number,\r\n        annuityAmount?: NullableNumber,\r\n        fixedMonthlyCapitalAmount?: NullableNumber\r\n    ): boolean {\r\n        if (remainingCapitalAmount == 0) return false;\r\n\r\n        if ((!annuityAmount && !fixedMonthlyCapitalAmount) || (annuityAmount && fixedMonthlyCapitalAmount))\r\n            throw new Error('Must supply exactly one of annuityAmount and fixedMonthlyCapitalAmount');\r\n\r\n        if (annuityAmount) {\r\n            if (this.lastMonthCarryOverStrategyFixedAmount || this.lastMonthCarryOverStrategyPercentOfAnnuity) {\r\n                if (this.lastMonthCarryOverStrategyFixedAmount && this.lastMonthCarryOverStrategyPercentOfAnnuity) {\r\n                    throw new Error('Not implemented');\r\n                }\r\n\r\n                let lastMonthCarryOverLimit = this.lastMonthCarryOverStrategyPercentOfAnnuity\r\n                    ? (this.lastMonthCarryOverStrategyPercentOfAnnuity.value / 100) * annuityAmount.value\r\n                    : this.lastMonthCarryOverStrategyFixedAmount.value;\r\n\r\n                return remainingCapitalAmount < lastMonthCarryOverLimit;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else if (fixedMonthlyCapitalAmount) {\r\n            if (\r\n                this.lastMonthCarryOverStrategyFixedAmount ||\r\n                this.lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount\r\n            ) {\r\n                if (\r\n                    this.lastMonthCarryOverStrategyFixedAmount &&\r\n                    this.lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount\r\n                ) {\r\n                    throw new Error('Not implemented');\r\n                }\r\n\r\n                let lastMonthCarryOverLimit = this.lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount\r\n                    ? (this.lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount.value / 100) *\r\n                      fixedMonthlyCapitalAmount.value\r\n                    : this.lastMonthCarryOverStrategyFixedAmount.value;\r\n\r\n                return remainingCapitalAmount < lastMonthCarryOverLimit;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            throw new Error('Not implemented');\r\n        }\r\n    }\r\n\r\n    private computeMonthlyPayments(\r\n        annuityAmount: number,\r\n        initialCapitalDebtAmount: number,\r\n        interestRatePercent: number,\r\n        notficationFeeAmount: number,\r\n        initialFeePaidOnFirstNotification?: NullableNumber\r\n    ) {\r\n        let paymentPlan: MonthlyPayment[] = [];\r\n\r\n        let first = true;\r\n        let remainingAmount = initialCapitalDebtAmount;\r\n        let monthNr = 0;\r\n\r\n        while (remainingAmount > 0) {\r\n            monthNr++;\r\n\r\n            let interest = NTechMath.roundToPlaces(\r\n                (remainingAmount * interestRatePercent) / 100 / 12,\r\n                this.paymentRoundToDigits\r\n            );\r\n            let amortization: number = this.getActualAmortizationAmountForMonth(\r\n                monthNr,\r\n                annuityAmount - interest,\r\n                remainingAmount\r\n            );\r\n            if (amortization < 0) {\r\n                amortization = 0;\r\n            }\r\n\r\n            remainingAmount -= amortization;\r\n            var shouldCarryOverAmount = this.shouldCarryOverRemainingCapitalAmount(\r\n                remainingAmount,\r\n                new NullableNumber(annuityAmount),\r\n                null\r\n            );\r\n            if (\r\n                shouldCarryOverAmount ||\r\n                (this.monthCountCapEvenIfNotFullyPaid && this.monthCountCapEvenIfNotFullyPaid.value == monthNr)\r\n            ) {\r\n                amortization += remainingAmount;\r\n                remainingAmount = 0;\r\n            }\r\n\r\n            let p: MonthlyPayment = {\r\n                monthNr: monthNr,\r\n                capital: amortization,\r\n                interest: interest,\r\n                initialFee: first\r\n                    ? initialFeePaidOnFirstNotification\r\n                        ? initialFeePaidOnFirstNotification.value\r\n                        : 0\r\n                    : 0,\r\n                monthlyFee: notficationFeeAmount,\r\n                totalAmount: null,\r\n            };\r\n\r\n            p.totalAmount = p.capital + p.interest + p.initialFee + p.monthlyFee;\r\n\r\n            paymentPlan.push(p);\r\n            first = false;\r\n\r\n            if (monthNr == 500 * 12) {\r\n                throw new Error('Will never be paid with current terms');\r\n            }\r\n        }\r\n        return paymentPlan;\r\n    }\r\n\r\n    private calculateEffectiveInterestRatePercent(initialPaidToCustomerAmount: number, payments: MonthlyPayment[]) {\r\n        let c = new EffectiveInterestRateCalculation(this.effectiveInterestRateRoundToDigits);\r\n\r\n        c.addInitialLoan(initialPaidToCustomerAmount);\r\n        for (let p of payments) {\r\n            c.addPayment(p.totalAmount, p.monthNr);\r\n        }\r\n\r\n        return c.calculate();\r\n    }\r\n}\r\n\r\nexport class BasicRepaymentTimePaymentPlanRequest {\r\n    loansToSettleAmount: number;\r\n    paidToCustomerAmount: number;\r\n    marginInterestRatePercent: number;\r\n    referenceInterestRatePercent: number;\r\n    initialFeeWithheldAmount: number;\r\n    initialFeeCapitalizedAmount: number;\r\n    initialFeeOnFirstNotificationAmount ?: number;\r\n    notificationFee: number;\r\n}\r\n\r\nexport class RepaymentTimePaymentPlanRequest extends BasicRepaymentTimePaymentPlanRequest {\r\n    repaymentTimeInMonths: number;\r\n}\r\n\r\nexport class MonthlyPayment {\r\n    monthNr: number;\r\n    monthlyFee: number;\r\n    initialFee: number;\r\n    interest: number;\r\n    capital: number;\r\n    totalAmount: number;\r\n    nonStandardPaymentDays?: number;\r\n}\r\n\r\nexport class PaymentPlan {\r\n    UsesAnnuities: boolean\r\n    LoanAmount: number;\r\n    LoansToSettleAmount: number;\r\n    PaidToCustomerAmount: number;\r\n    RepaymentTimeInMonths: number;\r\n    RepaymentTimeInYears: number;\r\n    MonthlyCostIncludingFeesAmount: number;\r\n    MonthlyCostExcludingFeesAmount: number;\r\n    MonthlyFeeAmount: number;\r\n    InitialFeeCapitalizedAmount: number;\r\n    InitialFeeWithheldAmount: number;\r\n    MarginInterestRatePercent: number;\r\n    ReferenceInterestRatePercent: number;\r\n    TotalInterestRatePercent: number;\r\n    EffectiveInterstRatePercent: NullableNumber;\r\n    TotalPaidAmount: number;\r\n    Payments: MonthlyPayment[];\r\n}\r\n","import * as moment from 'moment';\r\nimport { AbstractControl, ValidationErrors, Validators } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { Dictionary } from '../common.types';\r\nimport {\r\n    CountrySpecificValidator,\r\n    createCountrySpecificValidator,\r\n} from '../country-specific/country-specific-validator';\r\nimport { ConfigService } from './config.service';\r\nimport { formatNumber } from '@angular/common';\r\nimport { FormsHelper } from './ntech-forms-helper';\r\n\r\nexport abstract class NTechValidationSharedBaseService {\r\n    constructor(private twoLetterClientCountryIsoCode: string) {\r\n        this.perCountry = createCountrySpecificValidator(twoLetterClientCountryIsoCode);\r\n    }\r\n\r\n    private locale: string = 'sv-SE';\r\n\r\n    public perCountry: CountrySpecificValidator;\r\n\r\n    public parseDatetimeOffset(input: string): moment.Moment {\r\n        let m = moment(input, moment.ISO_8601, true);\r\n        if (!m.isValid()) {\r\n            throw new Error('Invalid date');\r\n        }\r\n        return m;\r\n    }\r\n\r\n    public formatInteger(value: number) {\r\n        if (value === undefined || value === null) {\r\n            return '';\r\n        }\r\n        return value.toString();\r\n    }\r\n\r\n    public formatIntegerForDisplay(value: number | string) {\r\n        let n: number;\r\n        if (typeof value === 'string') {\r\n            n = this.parseIntegerOrNull(value);\r\n        } else {\r\n            n = value;\r\n        }\r\n        if (n === undefined || n === null) {\r\n            return '';\r\n        }\r\n        let result = formatNumber(n, this.locale, '1.0-0');\r\n        return result;\r\n    }\r\n\r\n    public formatDecimalForDisplay(value: number | string, nrOfDecimals: number = 2) {\r\n        let n: number;\r\n        if (typeof value === 'string') {\r\n            n = this.parseIntegerOrNull(value);\r\n        } else {\r\n            n = value;\r\n        }\r\n        if (n === undefined || n === null) {\r\n            return '';\r\n        }\r\n        let result = formatNumber(n, this.locale, `1.0-${nrOfDecimals}`);\r\n        return result;\r\n    }\r\n\r\n    public formatIntegerForEdit(value: number) {\r\n        if (value === undefined || value === null) {\r\n            return '';\r\n        }\r\n        return value.toString();\r\n    }\r\n    public formatDateForEdit(value: moment.Moment) {\r\n        if (value === undefined || value === null) {\r\n            return '';\r\n        }\r\n        return value.format('YYYY-MM-DD');\r\n    }\r\n\r\n    public parseInteger(value: string): number {\r\n        return parseInt(this.removeWhitespace(value), 10);\r\n    }\r\n\r\n    public parseIntegerOrNull(value: string, treatEmptyAsZero = false): number | null {\r\n        if (this.isNullOrWhitespace(value)) {\r\n            return treatEmptyAsZero ? 0 : null;\r\n        } else {\r\n            let result = this.parseInteger(value);\r\n            return Number.isNaN(result) ? null : result;\r\n        }\r\n    }\r\n\r\n    public normalizeString(value: string) {\r\n        let s = this.trim(value ?? '');\r\n        return s.length === 0 ? null : s;\r\n    }\r\n\r\n    public isValidEmail(value: string) {\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        return !!value.match(/^([^\\.].*[\\@]+.*[^\\.])$/);\r\n    }\r\n\r\n    //Not an attempt to actually validate, just to help the user from accidently mixing up fields with each other. Use googles phone library if actual validation is important.\r\n    public isValidPhone(value: string) {\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        let digitCount = 0;\r\n        for (let c of value) {\r\n            if (this.isLetter(c)) {\r\n                return false;\r\n            } else if (this.isDigit(c)) {\r\n                digitCount = digitCount + 1;\r\n            }\r\n        }\r\n        return digitCount >= 4;\r\n    }\r\n\r\n    /** https://stackoverflow.com/a/43467144/2928868\r\n     * Note: this is just a simple healthcheck and not a full validator.\r\n     */\r\n    public isValidHttpUrl(value: string) {\r\n        let url;\r\n\r\n        try {\r\n            url = new URL(value);\r\n        } catch (_) {\r\n            return false;\r\n        }\r\n\r\n        return url.protocol === 'http:' || url.protocol === 'https:';\r\n    }\r\n\r\n    private removeWhitespace(s: string): string {\r\n        if (s === null || s === undefined) {\r\n            return s;\r\n        }\r\n        return s.replace(/\\s+/g, '');\r\n    }\r\n\r\n    public getAlwaysInvalidValidator() {\r\n        return this.getValidator('alwaysInvalid', (x) => false);\r\n    }\r\n\r\n    public getEmailValidator(): (control: AbstractControl) => ValidationErrors | null {\r\n        return this.getValidator('email', (x) => this.isValidEmail(x));\r\n    }\r\n\r\n    public getUrlValidator(): (control: AbstractControl) => ValidationErrors | null {\r\n        return this.getValidator('url', (x) => this.isValidHttpUrl(x));\r\n    }\r\n\r\n    private getIntegerValidator(\r\n        name: string,\r\n        minValue: number | null,\r\n        maxValue: number | null,\r\n        allowNegativeValues: boolean\r\n    ) {\r\n        return this.getValidator(name, (x) => {\r\n            let noWhitespaceX = this.removeWhitespace(x);\r\n            let isValidInt = allowNegativeValues\r\n                ? /^(0|([-]?[1-9][0-9]*))$/.test(noWhitespaceX)\r\n                : /^(0|([1-9][0-9]*))$/.test(noWhitespaceX);\r\n            if (!isValidInt) {\r\n                return false;\r\n            }\r\n            if (minValue == null && maxValue == null) {\r\n                return true;\r\n            }\r\n            let v = this.parseInteger(noWhitespaceX);\r\n            if (minValue != null && v < minValue) {\r\n                return false;\r\n            }\r\n            if (maxValue != null && v > maxValue) {\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n\r\n    public getIntegerWithBoundsValidator(minValue: number | null, maxValue: number | null) {\r\n        return this.getIntegerValidator('anyInt', minValue, maxValue, true);\r\n    }\r\n\r\n    public getPositiveIntegerWithBoundsValidator(minValue: number | null, maxValue: number | null) {\r\n        return this.getIntegerValidator('positiveInt', minValue, maxValue, false);\r\n    }\r\n\r\n    public getPositiveIntegerValidator() {\r\n        return this.getPositiveIntegerWithBoundsValidator(null, null);\r\n    }\r\n\r\n    public getPhoneValidator(): (control: AbstractControl) => ValidationErrors | null {\r\n        return this.getValidator('phone', (x) => this.isValidPhone(x));\r\n    }\r\n\r\n    public getBannedValueValidator(validatorName: string, bannedValue: string) {\r\n        return this.getValidator(validatorName, (x) => bannedValue === null || x !== bannedValue);\r\n    }\r\n\r\n    public getBankAccountNrAsyncValidator(\r\n        config: ConfigService,\r\n        validatorName: string,\r\n        isValidBankAccountNr: (nr: string, bankAccountType: string) => Promise<boolean>\r\n    ) {\r\n        var client = config.getClient();\r\n        let bankAccountType: string;\r\n        if (client.BaseCountry == 'SE') {\r\n            bankAccountType = 'BankAccountSe';\r\n        } else if (client.BaseCountry == 'FI') {\r\n            bankAccountType = 'IBANFi';\r\n        } else {\r\n            bankAccountType = 'NotImplemented';\r\n        }\r\n        return {\r\n            defaultBankAccountType: bankAccountType,\r\n            validator: this.getValidatorAsync(validatorName, (x: string) => {\r\n                return new Observable((observer) => {\r\n                    if (x.length < 5) {\r\n                        //Basic sanity check to avoid server calls for no reason.\r\n                        observer.next(false);\r\n                        observer.complete();\r\n                    } else {\r\n                        isValidBankAccountNr(x, bankAccountType).then((x) => {\r\n                            observer.next(x);\r\n                            observer.complete();\r\n                        });\r\n                    }\r\n                });\r\n            }),\r\n        };\r\n    }\r\n\r\n    public isRegularBankAccount(bankAccountNrType: string) {\r\n        return this.perCountry.isRegularBankAccount(bankAccountNrType);\r\n    }\r\n\r\n    private trim(s: string): string {\r\n        if (!s) return s;\r\n        //https://stackoverflow.com/questions/196925/what-is-the-best-way-to-trim-in-javascript\r\n        return s.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n    }\r\n\r\n    public isNullOrWhitespace = (input: any) => {\r\n        if (typeof input === 'undefined' || input == null) return true;\r\n\r\n        if (typeof input === 'string') {\r\n            return this.trim(input).length < 1;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    public isValidPositiveDecimal = (value: string) => {\r\n        return this.isValidDecimal(value, false);\r\n    };\r\n\r\n    public isValidDecimal = (value: string, allowNegativeValues: boolean) => {\r\n        if (this.isNullOrWhitespace(value)) return true;\r\n        var v = this.removeWhitespace(value.toString());\r\n        if (allowNegativeValues) {\r\n            v = v.replace('-', '');\r\n        }\r\n        return /^([0]|[1-9]([0-9])*)([\\.|,]([0-9])+)?$/.test(v);\r\n    };\r\n\r\n    public formatPositiveDecimalForEdit(value: number): string {\r\n        return this.formatDecimalForEdit(value);\r\n    }\r\n\r\n    public formatDecimalForEdit(value: number): string {\r\n        if (this.isNullOrWhitespace(value)) {\r\n            return '';\r\n        }\r\n        return value.toLocaleString('sv-SE', { maximumFractionDigits: 4, minimumFractionDigits: 0 });\r\n    }\r\n\r\n    public parsePositiveDecimalOrNull(n: any) {\r\n        return this.parseDecimalOrNull(n, false);\r\n    }\r\n\r\n    public parseDecimalOrNull(n: any, allowNegativeValues: boolean) {\r\n        if (this.isNullOrWhitespace(n)) {\r\n            return null;\r\n        }\r\n        let tmp = this.removeWhitespace(n.replace(',', '.'));\r\n        if (!this.isValidDecimal(tmp, allowNegativeValues)) {\r\n            return null;\r\n        }\r\n        if (typeof n === 'string') {\r\n            return parseFloat(tmp);\r\n        } else {\r\n            return parseFloat(tmp);\r\n        }\r\n    }\r\n\r\n    public getPositiveDecimalValidator() {\r\n        return this.getValidator('positiveDecimal', this.isValidPositiveDecimal);\r\n    }\r\n\r\n    public getDecimalValidator() {\r\n        return this.getValidator('anyDecimal', (x) => this.isValidDecimal(x, true));\r\n    }\r\n\r\n    public parseDateOnlyOrNull(value: string): string {\r\n        let parse = () => {\r\n            let m = moment(value, 'YYYY-MM-DD', true);\r\n            if (m.isValid()) {\r\n                return m;\r\n            }\r\n            m = moment(value + '-01', 'YYYY-MM-DD', true);\r\n            if (m.isValid()) {\r\n                return m;\r\n            }\r\n            m = moment(value, 'YYYYMMDD', true);\r\n            if (m.isValid()) {\r\n                return m;\r\n            }\r\n            m = moment(value + '01', 'YYYYMMDD', true);\r\n            return m;\r\n        };\r\n        let m = parse();\r\n        if (m.isValid()) {\r\n            return m.format('YYYY-MM-DD');\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public isValidDateOnly(value: string) {\r\n        return this.parseDateOnlyOrNull(value) !== null;\r\n    }\r\n\r\n    public parseDateOnly(value: string) {\r\n        let v = this.parseDateOnlyOrNull(value);\r\n        if (v === null) {\r\n            throw new Error('Invalid date');\r\n        }\r\n        return v;\r\n    }\r\n\r\n    public getDateOnlyValidator() {\r\n        return this.getValidator('dateOnly', (x) => this.isValidDateOnly(x));\r\n    }\r\n\r\n    public getValidator(\r\n        validatorName: string,\r\n        isValid: (value: string) => boolean\r\n    ): (control: AbstractControl) => ValidationErrors | null {\r\n        return (x) => {\r\n            let isMissingOrValid = x.value === '' || x.value === null || x.value === undefined || isValid(x.value);\r\n            if (isMissingOrValid) {\r\n                return null;\r\n            } else {\r\n                let err: Dictionary<any> = {};\r\n                err[validatorName] = 'invalid';\r\n                return err;\r\n            }\r\n        };\r\n    }\r\n\r\n    public getValidatorAsync(\r\n        validatorName: string,\r\n        isValid: (value: string) => Observable<boolean>\r\n    ): (control: AbstractControl) => Observable<ValidationErrors> | null {\r\n        return FormsHelper.createValidatorAsync(validatorName, isValid);\r\n    }\r\n\r\n    public getFormValidatorAsync(\r\n        getFormErrors: () => Promise<ValidationErrors>\r\n    ): (control: AbstractControl) => Observable<ValidationErrors> | null {\r\n        return _ => new Observable((observer) => {\r\n            getFormErrors().then(x => {\r\n                observer.next(x);\r\n            })\r\n        });\r\n    }\r\n\r\n    private isLetter(str: string) {\r\n        return str.length === 1 && str.match(/[a-z]/i);\r\n    }\r\n\r\n    private isDigit(str: string) {\r\n        return str.length === 1 && str.match(/[0-9]/i);\r\n    }\r\n\r\n    public isTextLimitExceeded(txt: string, charLimit: number) {\r\n        if (txt.length > charLimit) return true;\r\n        else return false;\r\n    }\r\n\r\n    public trimLimitChars(txt: string, maxChars: number) {\r\n        if (txt.length > maxChars) {\r\n            txt = txt.substring(0, maxChars) + '...';\r\n        }\r\n        return txt;\r\n    }\r\n\r\n    public clone<T>(value: T): T | null {\r\n        if (!value) {\r\n            return null;\r\n        }\r\n        return JSON.parse(JSON.stringify(value));\r\n    }\r\n\r\n    public isValidOrgnr(value: string) {\r\n        return this.perCountry.isValidOrgnr(value);\r\n    }\r\n\r\n    public isValidCivicNr(value: string) {\r\n        return this.perCountry.isValidCivicNr(value);\r\n    }\r\n\r\n    public getCivicRegNrValidator(options ?: {\r\n        require12DigitCivicRegNrSe: boolean\r\n    }) {\r\n        return this.getValidator('civicRegNr', (x) => {\r\n            let isValidCivicNr = this.isValidCivicNr(x);\r\n\r\n            if(options?.require12DigitCivicRegNrSe && isValidCivicNr && this.twoLetterClientCountryIsoCode === 'SE') {\r\n                return x.replace(/\\D/g, '').length === 12;\r\n            }\r\n\r\n            return isValidCivicNr;\r\n        });\r\n    }\r\n\r\n    public getOrgNrValidator() {\r\n        return this.getValidator('orgnr', (x) => this.isValidOrgnr(x));\r\n    }\r\n\r\n    /**\r\n     * 10d for 10 days or 10m for 10 months\r\n     */\r\n    public parseRepaymentTimeWithPeriodMarker(value: string, allowMissingValue: boolean) : RepaymentTimeWithPeriodMarker {\r\n        let v = (value ?? '').trim();\r\n        if(v.length === 0) {\r\n            return allowMissingValue ? {\r\n                isValid: true,\r\n                isMissingValue: true\r\n            } : {\r\n                isValid: false\r\n            }\r\n        }\r\n        if(!(v.endsWith('m') || v.endsWith('d'))) {\r\n            return {\r\n                isValid: false\r\n            }\r\n        }\r\n        let isDays = v.endsWith('d');\r\n        v = v.substring(0, v.length - 1);\r\n        let parsedValue = this.parseIntegerOrNull(v, false);\r\n        if(parsedValue === null || parsedValue <= 0) {\r\n            return {\r\n                isValid: false\r\n            }\r\n        }\r\n        return {\r\n            isValid: true,\r\n            isMissingValue: false,\r\n            isDays: isDays,\r\n            repaymentTime: parsedValue\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 10d for 10 days or 10m for 10 months\r\n     */\r\n    public formatRepaymentTimeWithPeriodMarkerForStorage(repaymentTime: number, isDays: boolean) {\r\n        if(repaymentTime === undefined || repaymentTime === null) {\r\n            return null;\r\n        } else {\r\n            return `${repaymentTime.toFixed(0)}${isDays ? 'd' : 'm'}`;\r\n        }\r\n    }\r\n\r\n    public formatJsonForDisplay(json: string) {\r\n        if(!json) {\r\n            return json;\r\n        }\r\n        try {\r\n            //Try to indent the json\r\n            return JSON.stringify(JSON.parse(json), null, 2);\r\n        } catch {\r\n            return json;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Makes the field required if the predicate function returns true.\r\n * Use like this:\r\n * getValidators: () => [requiredIfValidator(() => form.form.get('paidToCustomerAmount').value > 0)],\r\n */\r\nexport function requiredIfValidator(predicate: any) {\r\n    return (formControl: any) => {\r\n        if (!formControl.parent) {\r\n            return null;\r\n        }\r\n        if (predicate()) {\r\n            return Validators.required(formControl);\r\n        }\r\n        return null;\r\n    };\r\n}\r\n\r\nexport interface RepaymentTimeWithPeriodMarker {\r\n    isValid: boolean,\r\n    isMissingValue ?: boolean,\r\n    repaymentTime ?: number,\r\n    isDays ?: boolean\r\n}","export namespace NTechMath {\r\n    //Be aware that this can have some strange results due to floating point math. Dont use this if exact result are super important. See https://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-only-if-necessary\r\n    export function roundToPlaces(value: number, places: number) {\r\n        var multiplier = Math.pow(10, places);\r\n\r\n        return Math.round(value * multiplier) / multiplier;\r\n    }\r\n\r\n    export function sum<T>(items: T[], f: (item: T) => number): number {\r\n        let sum = 0;\r\n        for (let i of items) {\r\n            sum += f(i);\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    export function map<TSource, TResult>(items: TSource[], f: (item: TSource) => TResult): TResult[] {\r\n        let r: TResult[] = [];\r\n        for (let i of items) {\r\n            r.push(f(i));\r\n        }\r\n        return r;\r\n    }\r\n\r\n    export function mapI<TSource, TResult>(items: TSource[], f: (item: TSource, index: number) => TResult): TResult[] {\r\n        let r: TResult[] = [];\r\n        let index = 0;\r\n        for (let i of items) {\r\n            r.push(f(i, index));\r\n            index++;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    export function orderBy<TSource>(items: TSource[], f: (x: TSource) => number, descending?: boolean) {\r\n        let directionMultiplier = descending ? -1 : 1;\r\n        let compareFn = (x1: TSource, x2: TSource) => {\r\n            let n1: number = f(x1);\r\n            let n2: number = f(x2);\r\n            if (n1 > n2) {\r\n                return directionMultiplier * 1;\r\n            }\r\n\r\n            if (n1 < n2) {\r\n                return directionMultiplier * -1;\r\n            }\r\n\r\n            return 0;\r\n        };\r\n        let result: TSource[] = items.map((x) => x); //Make a copy since .sort is inplace\r\n        result.sort(compareFn);\r\n        return result;\r\n    }\r\n\r\n    export function equals(n1: number, n2: number) {\r\n        if (n1 === null && n2 === null) {\r\n            return true;\r\n        }\r\n\r\n        return Math.abs(n1 - n2) < Number.EPSILON;\r\n    }\r\n\r\n    export function getRandomIntInclusive(min: number, max: number) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\r\n    }\r\n\r\n    export function isAnyOf(code: string, values: any[]) {\r\n        return values.indexOf(code) >= 0;\r\n    }\r\n}\r\n","import { NTechMath } from './ntech.math';\r\n\r\nexport namespace Randomizer {\r\n    export function anyOf(values: any[]) {\r\n        return values[NTechMath.getRandomIntInclusive(0, values.length - 1)];\r\n    }\r\n\r\n    export function anyNumberBetween(min: number, max: number) {\r\n        return NTechMath.getRandomIntInclusive(min, max);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param min Min value\r\n     * @param max Max value\r\n     * @param dimension Dimension of the result, ex. 1000 gives even thousand, 100 even hundred etc.\r\n     * @returns\r\n     */\r\n    export function anyEvenNumberBetween(min: number, max: number, dimension: number) {\r\n        let value = NTechMath.getRandomIntInclusive(min, max);\r\n        return Math.round(value / dimension) * dimension;\r\n    }\r\n}\r\n","import { Dictionary } from '../common.types';\r\n\r\nexport class SizeAndTimeLimitedCache {\r\n    /*\r\n    This should really be like a red black tree or such ordered by expirationTimeMs\r\n    so items that are replaced all the time dont get randomly evicted when the size cap is hit.\r\n\r\n    Could be added if this turns out to be an issue\r\n    */\r\n    private initialInsertionOrderedEntries: CacheItem[];\r\n    private entryByKey: Dictionary<CacheItem>;\r\n    constructor(private maxCount: number, private maxAgeInMinutes: number) {\r\n        this.initialInsertionOrderedEntries = [];\r\n        this.entryByKey = {};\r\n    }\r\n\r\n    public get<TValue>(key: string): TValue {\r\n        let entry = this.entryByKey[key];\r\n        if (!entry || this.isExpired(entry.expirationTimeMs)) {\r\n            return null;\r\n        }\r\n        return entry.value;\r\n    }\r\n\r\n    public set<TValue>(key: string, value: TValue) {\r\n        let newExpirationTime = new Date().getTime() + this.maxAgeInMinutes * 60 * 1000;\r\n        if (this.entryByKey[key]) {\r\n            //Replace previous entry\r\n            let currentEntry = this.entryByKey[key];\r\n            currentEntry.expirationTimeMs = newExpirationTime;\r\n            currentEntry.value = value;\r\n        } else {\r\n            //Add a new entry\r\n            let entry: CacheItem = { key: key, value: value, expirationTimeMs: newExpirationTime };\r\n            while (\r\n                this.initialInsertionOrderedEntries.length >= this.maxCount &&\r\n                this.initialInsertionOrderedEntries.length > 0\r\n            ) {\r\n                let oldest = this.initialInsertionOrderedEntries[0];\r\n                this.entryByKey[oldest.key] = null;\r\n                this.initialInsertionOrderedEntries.splice(0, 1);\r\n            }\r\n            this.initialInsertionOrderedEntries.push(entry);\r\n            this.entryByKey[entry.key] = entry;\r\n        }\r\n    }\r\n\r\n    private isExpired(expirationTimeMs: number) {\r\n        return expirationTimeMs < new Date().getTime();\r\n    }\r\n}\r\n\r\ninterface CacheItem {\r\n    key: string;\r\n    expirationTimeMs: number;\r\n    value: any;\r\n}\r\n","export type Dictionary<T> = { [index: string]: T };\r\nexport type StringDictionary = Dictionary<string>;\r\nexport type NumberDictionary<T> = { [key: number]: T };\r\n\r\nexport function getOrAddToDictionary<T extends object>(source: Dictionary<T>, key: string, create: () => T): T {\r\n    if (!source[key]) {\r\n        source[key] = create();\r\n    }\r\n    return source[key];\r\n}\r\n\r\nexport function getFromDictionary<T>(source: Dictionary<T>, key: string, defaultValue: T): T {\r\n    if (source[key]) {\r\n        return source[key];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport function distinct<TInput>(i: TInput[]): TInput[] {\r\n    if (!i) {\r\n        return null;\r\n    }\r\n    return i.filter((item, i, ar) => ar.indexOf(item) === i);\r\n}\r\n\r\nexport function groupByString<TInput>(source: TInput[], getKey: (x: TInput) => string): Dictionary<TInput[]> {\r\n    let d: Dictionary<TInput[]> = {};\r\n    for (let item of source || []) {\r\n        let key = getKey(item);\r\n        if (!d[key]) {\r\n            d[key] = [];\r\n        }\r\n        d[key].push(item);\r\n    }\r\n    return d;\r\n}\r\n\r\nexport function groupByNumber<TInput>(source: TInput[], getKey: (x: TInput) => number): NumberDictionary<TInput[]> {\r\n    let d: Dictionary<TInput[]> = {};\r\n    for (let item of source || []) {\r\n        let key = getKey(item);\r\n        if (!d[key]) {\r\n            d[key] = [];\r\n        }\r\n        d[key].push(item);\r\n    }\r\n    return d;\r\n}\r\n\r\nexport function getNumberDictionaryKeys<TInput>(source: NumberDictionary<TInput>): number[] {\r\n    let result: number[] = [];\r\n    if (!source) {\r\n        result;\r\n    }\r\n    for (let key of Object.keys(source)) {\r\n        result.push(parseInt(key));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getNumberDictionaryValues<TInput>(source: NumberDictionary<TInput>): TInput[] {\r\n    let result: TInput[] = [];\r\n    if (!source) {\r\n        result;\r\n    }\r\n    for (let key of getNumberDictionaryKeys(source)) {\r\n        result.push(source[key]);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getDictionaryValues<TInput>(source: Dictionary<TInput>): TInput[] {\r\n    let result: TInput[] = [];\r\n    if (!source) {\r\n        result;\r\n    }\r\n    for (let key of Object.keys(source)) {\r\n        result.push(source[key]);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function orderBy<T>(source: T[], getSortKey: (value: T) => number): T[] {\r\n    return [...source].sort((x, y) => getSortKey(x) - getSortKey(y));\r\n}\r\n\r\nexport function orderByStr<T>(source: T[], getSortKey: (value: T) => string): T[] {\r\n    return [...source].sort((x, y) => getSortKey(x).localeCompare(getSortKey(y)));\r\n}\r\n\r\nexport class NullableNumber {\r\n    constructor(public value: number) {}\r\n}\r\n\r\nclass UniqueIdGenerator {\r\n    alphabet = '23456789abdegjkmnpqrvwxyz';\r\n    generateUniqueId(length: number) {\r\n        var rtn = '';\r\n        for (var i = 0; i < length; i++) {\r\n            rtn += this.alphabet.charAt(Math.floor(Math.random() * this.alphabet.length));\r\n        }\r\n        return rtn;\r\n    }\r\n}\r\nlet uniqueIdGenerator = new UniqueIdGenerator();\r\nexport function generateUniqueId(length: number) {\r\n    return uniqueIdGenerator.generateUniqueId(length);\r\n}\r\n\r\nexport type FileInputEventTarget = EventTarget & { files: FileList };\r\n\r\n//Based on https://github.com/neosmart/UrlBase64/blob/master/UrlBase64/UrlBase64.cs\r\n\r\nexport function toUrlSafeBase64String<T>(data: T): string {\r\n    let encoded = btoa(JSON.stringify(data)).replace('+', '-').replace('/', '_');\r\n    while (encoded[encoded.length - 1] === '=') {\r\n        encoded = encoded.substr(0, encoded.length - 1);\r\n    }\r\n    return encoded;\r\n}\r\n\r\nexport function fromUrlSafeBase64String<T>(data: string): T {\r\n    if (!data) {\r\n        return null;\r\n    }\r\n    let decodeFirstPass = () => {\r\n        let decoded = '';\r\n        for (let c of data) {\r\n            if (c === '_') {\r\n                decoded += '/';\r\n            } else if (c === '-') {\r\n                decoded += '+';\r\n            } else {\r\n                decoded += c;\r\n            }\r\n        }\r\n        switch (decoded.length % 4) {\r\n            case 2:\r\n                return decoded + '==';\r\n            case 3:\r\n                return decoded + '=';\r\n            default:\r\n                return decoded;\r\n        }\r\n    };\r\n\r\n    let d = decodeFirstPass();\r\n    return JSON.parse(atob(d));\r\n}\r\n\r\nexport function parseQueryStringParameters(): StringDictionary {\r\n    let d: StringDictionary = {};\r\n    let query = window.location.search.substring(1);\r\n    let vars = query.split('&');\r\n    if (vars && vars.length > 0 && vars[0].trim().length > 0) {\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            d[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n        }\r\n    }\r\n    return d;\r\n}\r\n\r\nexport function normalizeStringSlashes(input: string, leading: boolean | null, trailing: boolean | null) {\r\n    let result = input;\r\n    if (result.startsWith('/') && leading === false) {\r\n        result = result.substr(1);\r\n    }\r\n    if (result.endsWith('/') && trailing === false) {\r\n        result = result.substr(0, result.length - 1);\r\n    }\r\n    if (!result.startsWith('/') && leading === true) {\r\n        result = '/' + result;\r\n    }\r\n    if (!result.endsWith('/') && trailing === true) {\r\n        result = result + '/';\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function parseTriStateBoolean(value: string): boolean | null {\r\n    return value === 'true' ? true : value === 'false' ? false : null;\r\n}\r\n\r\nexport function stringJoin(separator: string, values: string[]) {\r\n    let s = '';\r\n    for (let value of values || []) {\r\n        if (s.length > 0) {\r\n            s += separator;\r\n        }\r\n        s += value;\r\n    }\r\n    return s;\r\n}\r\n\r\nlet bankAccountNrTypesFallback: Dictionary<string> = {\r\n    BankAccountSe: 'Regular account',\r\n    BankGiroSe: 'Bankgiro',\r\n    PlusGiroSe: 'Plusgiro',\r\n    IBANFi: 'Finnish IBAN',\r\n};\r\nlet bankAccountNrTypesLang: Dictionary<Dictionary<string>> = {\r\n    sv: {\r\n        BankAccountSe: 'Vanligt bankkonto',\r\n        BankGiroSe: 'Bankgiro',\r\n        PlusGiroSe: 'Plusgiro',\r\n    },\r\n};\r\nexport function getBankAccountTypeDropdownOptions(\r\n    baseCountry: string,\r\n    includeEmptyOption: boolean,\r\n    language?: string,\r\n    excludeRegularAccounts?: boolean\r\n) {\r\n    let types: { Code: string; DisplayName: string }[] = [];\r\n    if (includeEmptyOption) {\r\n        types.push({ Code: '', DisplayName: '' });\r\n    }\r\n    if (baseCountry == 'SE') {\r\n        types.push({ Code: 'BankGiroSe', DisplayName: '' });\r\n        types.push({ Code: 'PlusGiroSe', DisplayName: '' });\r\n        if (!excludeRegularAccounts) types.push({ Code: 'BankAccountSe', DisplayName: '' });\r\n    } else if (baseCountry == 'FI') {\r\n        types.push({ Code: 'IBANFi', DisplayName: '' });\r\n    }\r\n\r\n    for (let t of types) {\r\n        let langOverride = language ? bankAccountNrTypesLang[language] : null;\r\n        t.DisplayName = (langOverride ? langOverride[t.Code] : null) || bankAccountNrTypesFallback[t.Code];\r\n    }\r\n\r\n    return types;\r\n}\r\n\r\nexport interface DateOnly {\r\n    yearMonthDay: number;\r\n}\r\n\r\nexport function getDateOnlyParts(d: DateOnly): { year: number; month: number; day: number } | null {\r\n    if (!d) {\r\n        return null;\r\n    }\r\n    let ymd = d.yearMonthDay; //yyyymmdd\r\n    let day = ymd % 100;\r\n    ymd = (ymd - day) / 100; //yyyymm\r\n    let month = ymd % 100;\r\n    let year = (ymd - month) / 100; //yyyy\r\n    return { year, month, day };\r\n}\r\n\r\nexport function dateOnlyToIsoDate(d: DateOnly): string | null {\r\n    let parts = getDateOnlyParts(d);\r\n    if (!parts) return null;\r\n    return `${parts.year}-${String(parts.month).padStart(2, '0')}-${String(parts.day).padStart(2, '0')}`;\r\n}\r\n\r\n// https://stackoverflow.com/questions/12931828/convert-returned-json-object-properties-to-lower-first-camelcase\r\nexport function toCamelCase(o: any) {\r\n    let newO: any;\r\n    let origKey: string;\r\n    let newKey: string;\r\n    let value: any;\r\n    if (o instanceof Array) {\r\n        return o.map(function (value) {\r\n            if (typeof value === \"object\") {\r\n                value = toCamelCase(value)\r\n            }\r\n            return value\r\n        })\r\n    } else {\r\n        newO = {}\r\n        for (origKey in o) {\r\n            if (o.hasOwnProperty(origKey)) {\r\n                newKey = (origKey.charAt(0).toLowerCase() + origKey.slice(1) || origKey).toString()\r\n                value = o[origKey]\r\n                if (value instanceof Array || (value !== null && value.constructor === Object)) {\r\n                    value = toCamelCase(value)\r\n                }\r\n                newO[newKey] = value\r\n            }\r\n        }\r\n    }\r\n    return newO\r\n}\r\n\r\n//https://stackoverflow.com/a/5480605/353526\r\nexport function camelCaseRevier(key: string, value: any) {    \r\n    if (value && typeof value === 'object' && !Array.isArray(value)) {\r\n        let replacement: any = {};\r\n        for (var k in value) {\r\n            if (Object.hasOwnProperty.call(value, k)) {\r\n                replacement[k && k.charAt(0).toLowerCase() + k.substring(1)] = value[k];\r\n            }\r\n        }\r\n        return replacement;\r\n    }\r\n    return value;\r\n  }","import * as moment from 'moment';\r\n\r\nexport interface CountrySpecificValidator {\r\n    isValidCivicNr(input: string): boolean;\r\n    isValidOrgnr(input: string): boolean;\r\n    isValidPaymentFileReferenceNr(bankAccountNrType: string, referenceNr: string): boolean;\r\n    isRegularBankAccount(bankAccountNrType: string): boolean;\r\n}\r\n\r\nexport function createCountrySpecificValidatorUsingCountryIsoCode(\r\n    twoLetterCountryIsoCode: string\r\n): CountrySpecificValidator {\r\n    if (twoLetterCountryIsoCode === 'SE') {\r\n        return new CountrySpecificValidatorSe();\r\n    } else if (twoLetterCountryIsoCode === 'FI') {\r\n        return new CountrySpecificValidatorFi();\r\n    } else {\r\n        throw new Error(`Country ${twoLetterCountryIsoCode} not supported`);\r\n    }\r\n}\r\n\r\nexport function createCountrySpecificValidator(twoLetterClientCountryIsoCode: string): CountrySpecificValidator {\r\n    return createCountrySpecificValidatorUsingCountryIsoCode(twoLetterClientCountryIsoCode);\r\n}\r\n\r\nclass CountrySpecificValidatorFi implements CountrySpecificValidator {\r\n    private civicNrDigits = [\r\n        '0',\r\n        '1',\r\n        '2',\r\n        '3',\r\n        '4',\r\n        '5',\r\n        '6',\r\n        '7',\r\n        '8',\r\n        '9',\r\n        'A',\r\n        'B',\r\n        'C',\r\n        'D',\r\n        'E',\r\n        'F',\r\n        'H',\r\n        'J',\r\n        'K',\r\n        'L',\r\n        'M',\r\n        'N',\r\n        'P',\r\n        'R',\r\n        'S',\r\n        'T',\r\n        'U',\r\n        'V',\r\n        'W',\r\n        'X',\r\n        'Y',\r\n    ];\r\n\r\n    constructor() {}\r\n\r\n    public isRegularBankAccount(bankAccountNrType: string): boolean {\r\n        return false;\r\n    }\r\n\r\n    public isValidCivicNr(value: string) {\r\n        //https://sv.wikipedia.org/wiki/Personnummer#Finland\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        var c = value.trim();\r\n        if (c.length != 11) {\r\n            return false;\r\n        }\r\n\r\n        if (!moment(c.slice(0, 6), 'DDMMYY', true).isValid()) {\r\n            return false;\r\n        }\r\n\r\n        return c[10].toUpperCase() === this.computeCheckDigitCivicNrFi(c);\r\n    }\r\n\r\n    public isValidOrgnr(input: string): boolean {\r\n        throw new Error('Not implemented for country FI');\r\n    }\r\n\r\n    public isValidPaymentFileReferenceNr(bankAccountNrType: string, referenceNr: string): boolean {\r\n        throw new Error('Not implemented for country FI');\r\n    }\r\n\r\n    private computeCheckDigitCivicNrFi(prefix: string) {\r\n        let i = parseInt(prefix.slice(0, 6) + prefix.slice(7, 10), 10) % 31;\r\n        return this.civicNrDigits[i];\r\n    }\r\n}\r\n\r\nclass CountrySpecificValidatorSe implements CountrySpecificValidator {\r\n    public isRegularBankAccount(bankAccountNrType: string): boolean {\r\n        return bankAccountNrType === 'BankAccountSe';\r\n    }\r\n\r\n    public isValidOrgnr(input: string): boolean {\r\n        if (this.isValidCivicNr(input)) {\r\n            //Enskild firma\r\n            return true;\r\n        }\r\n\r\n        if (!input) {\r\n            return false;\r\n        }\r\n\r\n        let digits = input.replace(/\\D/g, '');\r\n\r\n        if (digits.length != 10) {\r\n            return false;\r\n        }\r\n        let mPart = parseInt(digits.substr(2, 2));\r\n        if (mPart < 20) {\r\n            return false;\r\n        }\r\n\r\n        return this.hasValidMod10CheckDigit(digits);\r\n    }\r\n\r\n    public isValidCivicNr(input: string): boolean {\r\n        // Check valid length & form\r\n        if (!input) {\r\n            return false;\r\n        }\r\n\r\n        if (input.indexOf('-') === -1) {\r\n            if (input.length === 10) {\r\n                input = input.slice(0, 6) + '-' + input.slice(6);\r\n            } else {\r\n                input = input.slice(0, 8) + '-' + input.slice(8);\r\n            }\r\n        }\r\n        if (!input.match(/^(\\d{2})(\\d{2})(\\d{2})\\-(\\d{4})|(\\d{4})(\\d{2})(\\d{2})\\-(\\d{4})$/)) {\r\n            return false;\r\n        }\r\n\r\n        input = input.replace('-', '');\r\n        if (input.length === 12) {\r\n            input = input.substring(2);\r\n        }\r\n\r\n        let yearNr = parseInt(!!RegExp.$1 ? RegExp.$1 : RegExp.$5);\r\n        let monthNr = parseInt(!!RegExp.$2 ? RegExp.$2 : RegExp.$6) - 1;\r\n        let dayNr = parseInt(!!RegExp.$3 ? RegExp.$3 : RegExp.$7);\r\n        var d = new Date(yearNr, monthNr, dayNr);\r\n\r\n        // Check valid date\r\n        if (Object.prototype.toString.call(d) !== '[object Date]' || isNaN(d.getTime())) return false;\r\n\r\n        // Check luhn algorithm\r\n        return this.hasValidMod10CheckDigit(input);\r\n    }\r\n\r\n    public isValidPaymentFileReferenceNr(bankAccountNrType: string, referenceNr: string): boolean {\r\n        if (!referenceNr || !bankAccountNrType) {\r\n            return false;\r\n        }\r\n        if (!/^[\\d ]*$/.test(referenceNr)) {\r\n            //digits and whitespace only\r\n            return false;\r\n        }\r\n        let cleanedNr = referenceNr.replace(/\\D/g, '');\r\n        if (bankAccountNrType == 'BankGiroSe' || bankAccountNrType == 'PlusGiroSe') {\r\n            return cleanedNr.length >= 2 && cleanedNr.length <= 25 && this.hasValidMod10CheckDigit(cleanedNr);\r\n        } else {\r\n            throw new Error('Not implemented for ' + bankAccountNrType);\r\n        }\r\n    }\r\n\r\n    private hasValidMod10CheckDigit(digits: string) {\r\n        let sum = 0;\r\n        let parity = digits.length % 2;\r\n        for (var i = 0; i < digits.length; i = i + 1) {\r\n            let digit = parseInt(digits.charAt(i), 10);\r\n            if (i % 2 === parity) {\r\n                digit *= 2;\r\n            }\r\n            if (digit > 9) {\r\n                digit -= 9;\r\n            }\r\n            sum += digit;\r\n        }\r\n        return sum % 10 === 0;\r\n    }\r\n}\r\n","export const sharedQuillSettings = {\r\n    editorOptions: {\r\n        toolbar: [\r\n            [{ header: [1, 2, false] }],\r\n            ['bold', 'italic', 'underline'],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n        ],\r\n    },\r\n    editorFormats: [\r\n        'background',\r\n        'bold',\r\n        'font',\r\n        'code',\r\n        'italic',\r\n        'link',\r\n        'size',\r\n        'strike',\r\n        'script',\r\n        'underline',\r\n        'blockquote',\r\n        'header',\r\n        'indent',\r\n        'list',\r\n        'align',\r\n        'direction',\r\n        'formula',\r\n    ],\r\n};\r\n","var map = {\n\t\"./af\": 5528,\n\t\"./af.js\": 5528,\n\t\"./ar\": 1036,\n\t\"./ar-dz\": 7579,\n\t\"./ar-dz.js\": 7579,\n\t\"./ar-kw\": 9588,\n\t\"./ar-kw.js\": 9588,\n\t\"./ar-ly\": 1650,\n\t\"./ar-ly.js\": 1650,\n\t\"./ar-ma\": 3258,\n\t\"./ar-ma.js\": 3258,\n\t\"./ar-sa\": 4085,\n\t\"./ar-sa.js\": 4085,\n\t\"./ar-tn\": 287,\n\t\"./ar-tn.js\": 287,\n\t\"./ar.js\": 1036,\n\t\"./az\": 9757,\n\t\"./az.js\": 9757,\n\t\"./be\": 9620,\n\t\"./be.js\": 9620,\n\t\"./bg\": 1139,\n\t\"./bg.js\": 1139,\n\t\"./bm\": 4042,\n\t\"./bm.js\": 4042,\n\t\"./bn\": 9641,\n\t\"./bn-bd\": 9126,\n\t\"./bn-bd.js\": 9126,\n\t\"./bn.js\": 9641,\n\t\"./bo\": 494,\n\t\"./bo.js\": 494,\n\t\"./br\": 934,\n\t\"./br.js\": 934,\n\t\"./bs\": 6274,\n\t\"./bs.js\": 6274,\n\t\"./ca\": 5831,\n\t\"./ca.js\": 5831,\n\t\"./cs\": 2354,\n\t\"./cs.js\": 2354,\n\t\"./cv\": 9692,\n\t\"./cv.js\": 9692,\n\t\"./cy\": 8774,\n\t\"./cy.js\": 8774,\n\t\"./da\": 8955,\n\t\"./da.js\": 8955,\n\t\"./de\": 1557,\n\t\"./de-at\": 4954,\n\t\"./de-at.js\": 4954,\n\t\"./de-ch\": 1881,\n\t\"./de-ch.js\": 1881,\n\t\"./de.js\": 1557,\n\t\"./dv\": 6475,\n\t\"./dv.js\": 6475,\n\t\"./el\": 8877,\n\t\"./el.js\": 8877,\n\t\"./en-au\": 454,\n\t\"./en-au.js\": 454,\n\t\"./en-ca\": 7356,\n\t\"./en-ca.js\": 7356,\n\t\"./en-gb\": 456,\n\t\"./en-gb.js\": 456,\n\t\"./en-ie\": 8789,\n\t\"./en-ie.js\": 8789,\n\t\"./en-il\": 5471,\n\t\"./en-il.js\": 5471,\n\t\"./en-in\": 9664,\n\t\"./en-in.js\": 9664,\n\t\"./en-nz\": 7672,\n\t\"./en-nz.js\": 7672,\n\t\"./en-sg\": 805,\n\t\"./en-sg.js\": 805,\n\t\"./eo\": 7390,\n\t\"./eo.js\": 7390,\n\t\"./es\": 1564,\n\t\"./es-do\": 1473,\n\t\"./es-do.js\": 1473,\n\t\"./es-mx\": 2089,\n\t\"./es-mx.js\": 2089,\n\t\"./es-us\": 4156,\n\t\"./es-us.js\": 4156,\n\t\"./es.js\": 1564,\n\t\"./et\": 6513,\n\t\"./et.js\": 6513,\n\t\"./eu\": 7856,\n\t\"./eu.js\": 7856,\n\t\"./fa\": 2378,\n\t\"./fa.js\": 2378,\n\t\"./fi\": 2687,\n\t\"./fi.js\": 2687,\n\t\"./fil\": 32,\n\t\"./fil.js\": 32,\n\t\"./fo\": 6845,\n\t\"./fo.js\": 6845,\n\t\"./fr\": 8875,\n\t\"./fr-ca\": 6425,\n\t\"./fr-ca.js\": 6425,\n\t\"./fr-ch\": 1746,\n\t\"./fr-ch.js\": 1746,\n\t\"./fr.js\": 8875,\n\t\"./fy\": 7037,\n\t\"./fy.js\": 7037,\n\t\"./ga\": 1217,\n\t\"./ga.js\": 1217,\n\t\"./gd\": 7010,\n\t\"./gd.js\": 7010,\n\t\"./gl\": 1931,\n\t\"./gl.js\": 1931,\n\t\"./gom-deva\": 4488,\n\t\"./gom-deva.js\": 4488,\n\t\"./gom-latn\": 8032,\n\t\"./gom-latn.js\": 8032,\n\t\"./gu\": 4984,\n\t\"./gu.js\": 4984,\n\t\"./he\": 9090,\n\t\"./he.js\": 9090,\n\t\"./hi\": 2085,\n\t\"./hi.js\": 2085,\n\t\"./hr\": 8787,\n\t\"./hr.js\": 8787,\n\t\"./hu\": 2901,\n\t\"./hu.js\": 2901,\n\t\"./hy-am\": 9819,\n\t\"./hy-am.js\": 9819,\n\t\"./id\": 4074,\n\t\"./id.js\": 4074,\n\t\"./is\": 715,\n\t\"./is.js\": 715,\n\t\"./it\": 3838,\n\t\"./it-ch\": 7040,\n\t\"./it-ch.js\": 7040,\n\t\"./it.js\": 3838,\n\t\"./ja\": 3180,\n\t\"./ja.js\": 3180,\n\t\"./jv\": 4346,\n\t\"./jv.js\": 4346,\n\t\"./ka\": 5538,\n\t\"./ka.js\": 5538,\n\t\"./kk\": 9772,\n\t\"./kk.js\": 9772,\n\t\"./km\": 7905,\n\t\"./km.js\": 7905,\n\t\"./kn\": 9125,\n\t\"./kn.js\": 9125,\n\t\"./ko\": 9140,\n\t\"./ko.js\": 9140,\n\t\"./ku\": 6780,\n\t\"./ku.js\": 6780,\n\t\"./ky\": 3768,\n\t\"./ky.js\": 3768,\n\t\"./lb\": 4016,\n\t\"./lb.js\": 4016,\n\t\"./lo\": 3169,\n\t\"./lo.js\": 3169,\n\t\"./lt\": 2353,\n\t\"./lt.js\": 2353,\n\t\"./lv\": 3243,\n\t\"./lv.js\": 3243,\n\t\"./me\": 2338,\n\t\"./me.js\": 2338,\n\t\"./mi\": 5555,\n\t\"./mi.js\": 5555,\n\t\"./mk\": 5794,\n\t\"./mk.js\": 5794,\n\t\"./ml\": 3151,\n\t\"./ml.js\": 3151,\n\t\"./mn\": 6458,\n\t\"./mn.js\": 6458,\n\t\"./mr\": 9165,\n\t\"./mr.js\": 9165,\n\t\"./ms\": 8680,\n\t\"./ms-my\": 7477,\n\t\"./ms-my.js\": 7477,\n\t\"./ms.js\": 8680,\n\t\"./mt\": 9684,\n\t\"./mt.js\": 9684,\n\t\"./my\": 285,\n\t\"./my.js\": 285,\n\t\"./nb\": 5922,\n\t\"./nb.js\": 5922,\n\t\"./ne\": 9040,\n\t\"./ne.js\": 9040,\n\t\"./nl\": 5066,\n\t\"./nl-be\": 4460,\n\t\"./nl-be.js\": 4460,\n\t\"./nl.js\": 5066,\n\t\"./nn\": 3693,\n\t\"./nn.js\": 3693,\n\t\"./oc-lnc\": 8676,\n\t\"./oc-lnc.js\": 8676,\n\t\"./pa-in\": 2341,\n\t\"./pa-in.js\": 2341,\n\t\"./pl\": 7416,\n\t\"./pl.js\": 7416,\n\t\"./pt\": 4344,\n\t\"./pt-br\": 113,\n\t\"./pt-br.js\": 113,\n\t\"./pt.js\": 4344,\n\t\"./ro\": 2643,\n\t\"./ro.js\": 2643,\n\t\"./ru\": 1305,\n\t\"./ru.js\": 1305,\n\t\"./sd\": 6095,\n\t\"./sd.js\": 6095,\n\t\"./se\": 4486,\n\t\"./se.js\": 4486,\n\t\"./si\": 8742,\n\t\"./si.js\": 8742,\n\t\"./sk\": 6722,\n\t\"./sk.js\": 6722,\n\t\"./sl\": 3345,\n\t\"./sl.js\": 3345,\n\t\"./sq\": 2416,\n\t\"./sq.js\": 2416,\n\t\"./sr\": 9450,\n\t\"./sr-cyrl\": 501,\n\t\"./sr-cyrl.js\": 501,\n\t\"./sr.js\": 9450,\n\t\"./ss\": 2222,\n\t\"./ss.js\": 2222,\n\t\"./sv\": 9454,\n\t\"./sv.js\": 9454,\n\t\"./sw\": 9638,\n\t\"./sw.js\": 9638,\n\t\"./ta\": 6494,\n\t\"./ta.js\": 6494,\n\t\"./te\": 4435,\n\t\"./te.js\": 4435,\n\t\"./tet\": 5003,\n\t\"./tet.js\": 5003,\n\t\"./tg\": 3706,\n\t\"./tg.js\": 3706,\n\t\"./th\": 6025,\n\t\"./th.js\": 6025,\n\t\"./tk\": 9780,\n\t\"./tk.js\": 9780,\n\t\"./tl-ph\": 2068,\n\t\"./tl-ph.js\": 2068,\n\t\"./tlh\": 9167,\n\t\"./tlh.js\": 9167,\n\t\"./tr\": 2494,\n\t\"./tr.js\": 2494,\n\t\"./tzl\": 8707,\n\t\"./tzl.js\": 8707,\n\t\"./tzm\": 1296,\n\t\"./tzm-latn\": 4532,\n\t\"./tzm-latn.js\": 4532,\n\t\"./tzm.js\": 1296,\n\t\"./ug-cn\": 2086,\n\t\"./ug-cn.js\": 2086,\n\t\"./uk\": 5069,\n\t\"./uk.js\": 5069,\n\t\"./ur\": 9304,\n\t\"./ur.js\": 9304,\n\t\"./uz\": 5115,\n\t\"./uz-latn\": 7609,\n\t\"./uz-latn.js\": 7609,\n\t\"./uz.js\": 5115,\n\t\"./vi\": 4802,\n\t\"./vi.js\": 4802,\n\t\"./x-pseudo\": 5605,\n\t\"./x-pseudo.js\": 5605,\n\t\"./yo\": 8456,\n\t\"./yo.js\": 8456,\n\t\"./zh-cn\": 3272,\n\t\"./zh-cn.js\": 3272,\n\t\"./zh-hk\": 9402,\n\t\"./zh-hk.js\": 9402,\n\t\"./zh-mo\": 8101,\n\t\"./zh-mo.js\": 8101,\n\t\"./zh-tw\": 262,\n\t\"./zh-tw.js\": 262\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6700;"],"names":["RouterModule","routes","AppRoutingModule","_","_2","_3","forRoot","imports","i1","exports","setTheme","AppComponent","constructor","httpClient","ngOnInit","i0","ɵɵdirectiveInject","HttpClient","selectors","decls","vars","template","AppComponent_Template","rf","ctx","ɵɵelement","getLocaleCurrencySymbol","PlatformLocation","registerLocaleData","HttpClientModule","HTTP_INTERCEPTORS","APP_INITIALIZER","DEFAULT_CURRENCY_CODE","LOCALE_ID","BrowserModule","localeFi","localeSv","UnsecuredLoanApplicationsModule","BehaviorSubject","CustomerPagesConfigService","CustomerPagesLoaderInterceptor","MortgageLoanApplicationsModule","MypagesModule","SharedComponentsModule","BrowserAnimationsModule","ToastrModule","ModalModule","KycQuestionsModule","selectedLocale","createCurrencyCode","isInitialized","boostrapLoadingIndicator","document","querySelector","initializeConfig","configService","platform","initialize","cfg","isConfigLoaded","textContent","baseCountry","config","Client","BaseCountry","next","wasBootstrapped","AppModule","ngZone","ngDoBootstrap","app","subscribe","x","run","remove","bootstrap","ɵɵinject","NgZone","provide","useFactory","deps","multi","useValue","useClass","declarations","i2","normalizeStringSlashes","CustomerPagesApiService","isoCountries","post","moduleName","relativeUrl","request","options","normalizedRelativeUrl","url","isAnonymous","result","skipLoadingIndicator","toPromise","handleNTechError","catch","error","errorCode","errorMessage","download","getArchiveDocumentUrl","archiveKey","skipFilename","encodeURIComponent","fetchLoggedInUserDetails","getIsoCountries","_this","_asyncToGenerator","Promise","resolve","parseCivicRegNr","civicRegNr","postLocal","localUrl","factory","ɵfac","providedIn","HttpHeaders","tap","moment","parseQueryStringParameters","LoaderInterceptorSkipHeader","serverData","undefined","withLoadedConfig","queryStringParameters","fetchConfigFromServer","pipe","configResult","hasAuthenticatedRole","roleName","withServerData","AuthenticatedRoles","indexOf","isAuthenticated","IsAuthenticated","getLoginUrl","targetName","targetCustomData","pattern","LoginUrlWithCustomDataPattern","LoginUrlPattern","replace","getQueryStringParameters","isNTechTest","IsTest","uiLanguage","country","userDisplayName","UserDisplayName","getClient","isFeatureEnabled","featureName","ActiveFeatures","toLowerCase","isAnyFeatureEnabled","featureNames","some","af","fn","isMortgageLoansStandardEnabled","isUnsecuredLoansStandardEnabled","isLoansStandardEnabled","getCurrentDateAndTime","CurrentDateAndTime","getEnums","Enums","f","Error","fetchMlWebappSettings","reqHeader","append","headers","requestOptions","responseType","NTechValidationSharedBaseService","CustomerPagesValidationService","CustomerPagesAuthGuard","router","canActivate","route","state","loginTargetName","data","requiredUserRole","hasRequiredFeatures","createUrlTree","getNoAccessUrl","location","href","requireAllTheseFeatures","requireFeatures","requireFeature","requireAnyOfTheseFeatures","requireAnyFeature","Router","NtechEventServiceBase","CustomerPagesEventService","LoaderInterceptorBase","eventService","isLoadingSubject","isLoading","KycOverviewComponent","QuestionsSessionComponent","loggedInRoutes","path","component","publicRoutes","children","KycQuestionsRoutingModule","forChild","CommonModule","ReactiveFormsModule","QuillModule","NtechComponentsModule","KycQuestionsOverviewBase","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r1","m","backUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate","getStaticTranslation","relation_r6","answersViewData","edit","ɵɵtemplate","KycOverviewComponent_div_0_div_7_div_4_kyc_answers_view_1_Template","KycOverviewComponent_div_0_div_7_div_4_kyc_answers_editor_2_Template","ɵɵpureFunction1","_c0","first_r7","KycOverviewComponent_div_0_div_7_div_4_Template","first_r4","ctx_r2","productType_r3","titleTranslationKey","relations","KycOverviewComponent_div_0_div_2_Template","KycOverviewComponent_div_0_div_7_Template","ctx_r0","hideBackUntilAnswered","isUpdateRequired","_c1","ɵɵtextInterpolate1","productTypes","apiService","sharedApiService","fromTarget","queryString","targetUrlPart","language","setup","reload","_this2","customerStatus","getCustomerStatus","reset","_this3","isEditDisabled","setupProductType","isSavings","productType","activeRelations","filter","relationType","startsWith","map","relation","latestAnswers","find","relationId","relationModel","titleText","nrOfDaysSinceAnswer","answers","currentQuestionsTemplate","questionTemplates","activeProducts","onEdit","onCancel","_ref2","apply","arguments","onAnswersSubmitted","_ref3","newCustomerStatus","updateAnswers","_x","getCountries","clientTwoLetterCountryIsoCode","length","push","y","KycOverviewService","i3","features","ɵɵInheritDefinitionFeature","consts","KycOverviewComponent_Template","KycOverviewComponent_div_0_Template","ctx_r3","redirectUrl","ɵɵlistener","QuestionsSessionComponent_div_0_div_9_div_6_Template_button_click_1_listener","$event","ɵɵrestoreView","_r9","ctx_r8","ɵɵnextContext","ɵɵresetView","submitAnswers","ctx_r7","isSavePossible","QuestionsSessionComponent_div_0_div_9_div_6_Template","customer_r5","kycAnswersInitialData","ɵɵtextInterpolate3","fullName","birthDate","isLast_r6","QuestionsSessionComponent_div_0_div_3_Template","QuestionsSessionComponent_div_0_div_9_Template","allowBackToRedirectUrl","customers","staticTranslations","snapshot","params","name","t","s","sessionId","session","loadSession","isActive","isCompleted","customerKey","questionsTemplate","editState","isRedirecting","setTimeout","every","value","evt","preventDefault","isSaving","saveRequest","customerAnswers","handleAnswers","ActivatedRoute","QuestionsSessionComponent_Template","QuestionsSessionComponent_div_0_Template","QuestionsSessionComponent_div_1_Template","QuestionsSessionComponent_div_2_Template","MlShellComponent_a_6_Template_a_click_0_listener","_r2","logOut","MlShellComponent","then","LogoutUrl","ngContentSelectors","_c3","MlShellComponent_Template","ɵɵelementContainerStart","ɵɵprojection","ɵɵelementContainerEnd","MlShellComponent_a_6_Template","_c2","ɵɵpureFunction0","ApplicationCreatedComponent","LoanCalculatorComponent","StartWebapplicationComponent","KycTaskApplicationComponent","OngoingApplicationComponent","OverviewComponent","secureRoutes","openRoutes","MortgageLoanApplicationsRoutingModule","FormsModule","CalculatorTabMoveComponent","CalculatorTabPurchaseComponent","CalculatorTabAdditionalloanComponent","ApplicationWizardShellComponent","ApplicationStepObjectComponent","ApplicationStepApplicantsComponent","ApplicationStepEconomyComponent","ApplicationStepConsentComponent","JoinPipe","NgClass","NgIf","NgSwitch","NgSwitchCase","DecimalPipe","applicationNr","ApplicationCreatedComponent_Template","ApplicationCreatedComponent_div_2_Template","Model","EventEmitter","Validators","FormsHelper","fb","additionalLoanDataChanged","subs","set","settings","initialAdditionalLoanData","isValid","objectValueAmount","getStartValue","MinEstimatedValue","MaxEstimatedValue","currentDebtAmount","MinCurrentMortgageLoanAmount","MaxCurrentMortgageLoanAmount","paidToCustomerAmount","MinAdditionalLoanAmount","MaxAdditionalLoanAmount","group","required","form","currentDebtAmountSliderData","minValue","maxValue","stepSize","tickButtonStepSize","formControlName","objectValueAmountSliderData","paidToCustomerAmountSliderData","emit","valueChanges","invalid","parseInt","getValue","min","max","ngOnDestroy","sub","unsubscribe","UntypedFormBuilder","inputs","outputs","CalculatorTabAdditionalloanComponent_Template","ɵɵpipeBind2","CalculatorAdditionalLoanData","moveDataChanged","initialMoveData","isPayoutRequested","isChecked","CalculatorTabMoveComponent_Template","CalculatorTabMoveComponent_div_22_Template","CalculatorTabMoveComponent_calculator_slider_23_Template","CalculatorMoveData","purchaseDataChanged","initialPurchaseData","objectPriceAmount","ownSavingsAmount","MinCashAmount","MaxCashAmount","objectPriceSliderData","ownSavingsSliderData","CalculatorTabPurchaseComponent_Template","CalculatorPurchaseData","generateUniqueId","getMlApplicationSessionModelStorageKey","LoanCalculatorComponent_div_2_div_9_Template_a_click_1_listener","_r10","ctx_r9","setActiveTab","ɵɵclassProp","currentTabName","LoanCalculatorComponent_div_2_div_10_Template_a_click_1_listener","_r12","ctx_r11","LoanCalculatorComponent_div_2_div_11_Template_a_click_1_listener","_r14","ctx_r13","ctx_r4","LoanCalculatorComponent_div_2_calculator_tab_move_13_Template_calculator_tab_move_moveDataChanged_0_listener","_r16","ctx_r15","onCalculatorMoveDataChanged","ctx_r5","LoanCalculatorComponent_div_2_calculator_tab_purchase_14_Template_calculator_tab_purchase_purchaseDataChanged_0_listener","_r18","ctx_r17","onPurchaseDataChanged","ctx_r6","LoanCalculatorComponent_div_2_calculator_tab_additionalloan_15_Template_calculator_tab_additionalloan_additionalLoanDataChanged_0_listener","_r20","ctx_r19","onCalculatorAdditionalLoanDataChanged","MaxLoanToValuePercent","LoanCalculatorComponent_div_2_div_9_Template","LoanCalculatorComponent_div_2_div_10_Template","LoanCalculatorComponent_div_2_div_11_Template","LoanCalculatorComponent_div_2_calculator_tab_move_13_Template","LoanCalculatorComponent_div_2_calculator_tab_purchase_14_Template","LoanCalculatorComponent_div_2_calculator_tab_additionalloan_15_Template","LoanCalculatorComponent_div_2_div_55_Template","LoanCalculatorComponent_div_2_Template_button_click_57_listener","_r22","ctx_r21","IsMoveTabActive","IsPurchaseTabActive","IsAdditionalLoanTabActive","summary","wishToBorrowAmount","monthlyCostAmount","exampleInterestRate","loanToValueAmount","amortizationRatePercent","loanToValueAmountIsValod","valid","changeDetector","validationService","MortgageLoanWebappSettings","MortgageLoanExternalApplicationSettings","startTab","calculateSummary","creationDate","toISOString","application","Purchase","ObjectPriceAmount","purchaseData","OwnSavingsAmount","ChangeExistingLoan","ObjectValueAmount","moveData","PaidToCustomerAmount","MortgageLoansToSettle","ShouldBeSettled","CurrentDebtAmount","additionalLoanData","localStorage","setItem","JSON","stringify","loginUrl","calculateWishToBorrowAmount","loanToValue","calculateLtv","calculateAmortizationRatePercent","exampleInterest","ExampleInterestRatePercent","interestPayment","amortizationPayment","monthlyCost","ltv","purch","addi","move","detectChanges","tabName","ChangeDetectorRef","LoanCalculatorComponent_Template","LoanCalculatorComponent_div_2_Template","LoanCalculatorComponent_div_3_Template","validLtv","validTabData","Summary","parsePositiveDecimalOrNull","parseInteger","AutoFillInTestEventName","NextStepEventName","ɵɵelementContainer","opt_r13","Code","DisplayName","opt_r24","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_16_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_17_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_18_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_19_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_option_25_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_option_26_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_27_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_28_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_29_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_ng_container_30_Template","ctx_r12","hasError","_c4","employmentCodes","_c5","_c6","_c7","_c8","ApplicationStepApplicantsComponent_ng_container_0_ng_container_6_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_7_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_8_Template","ApplicationStepApplicantsComponent_ng_container_0_option_14_Template","ApplicationStepApplicantsComponent_ng_container_0_option_15_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_16_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_17_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_18_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_19_Template","ApplicationStepApplicantsComponent_ng_container_0_ng_container_33_Template","ApplicationStepApplicantsComponent_ng_container_0_Template_button_click_35_listener","_r26","ctx_r25","_c9","_c10","_c11","_c12","_c13","_c14","_c15","hasFormControl","ctx_r29","formControlName_r28","displayText_r27","ApplicationStepApplicantsComponent_ng_template_1_div_0_Template","employmentFormService","ngOnChanges","changes","applicationEvents","eventCode","autoFillInTest","mainApplicantEmail","getEmailValidator","mainApplicantPhone","getPhoneValidator","mainApplicantEmployment","mainApplicantIncomePerMonthAmount","getPositiveIntegerValidator","hasCoApplicant","h","ensureControlOnConditionOnly","isEmployedSinceEmploymentCode","getDateOnlyValidator","isEmployedToEmploymentCode","isEmployerEmploymentCode","getCivicRegNrValidator","getEmploymentStatuses","a","Applicants","Email","Phone","IsPartOfTheHousehold","IncomePerMonthAmount","parseIntegerOrNull","Employment","normalizeString","EmployedSince","parseDateOnlyOrNull","EmployedTo","Employer","EmployerPhone","CivicRegNr","emitApplicationEvent","generateTestPersons","a1","Persons","Properties","setValue","email","phone","a2","i4","CustomerPagesMortgageLoanApiService","i5","EmploymentFormService","ɵɵNgOnChangesFeature","ApplicationStepApplicantsComponent_Template","ApplicationStepApplicantsComponent_ng_container_0_Template","ApplicationStepApplicantsComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","SeBrfApartmentNr","loan_r20","BankName","CurrentMonthlyAmortizationAmount","InterestRatePercent","ApplicationStepConsentComponent_ng_container_0_ng_container_32_tr_15_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_36_ng_container_3_Template","_r4","ApplicationStepConsentComponent_ng_container_0_ng_container_42_ng_container_1_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_42_ng_container_3_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_42_ng_container_5_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_42_ng_container_6_Template","_r6","ɵɵpipeBind3","HouseholdChildren","ChildBenefitAmount","ɵɵpureFunction2","IncomingChildSupportAmount","OutgoingChildSupportAmount","ctx_r26","getLoanType","loan_r27","LoanType","MonthlyCostAmount","ApplicationStepConsentComponent_ng_container_0_table_46_tr_10_Template","ctx_r18","LoansToSettle","ApplicationStepConsentComponent_ng_container_0_ng_container_8_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_25_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_26_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_27_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_29_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_31_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_32_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_35_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_36_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_41_Template","ApplicationStepConsentComponent_ng_container_0_ng_container_42_Template","ApplicationStepConsentComponent_ng_container_0_table_46_Template","ApplicationStepConsentComponent_ng_container_0_Template_button_click_57_listener","_r29","ctx_r28","ObjectAddressStreet","ObjectTypeCode","ɵɵtextInterpolate2","ObjectAddressZipcode","ObjectAddressCity","getWishedToLoanAmount","getEstimatedValueAmount","getObjectTypeText","ObjectAddressMunicipality","ObjectMonthlyFeeAmount","ObjectOtherMonthlyCostsAmount","ObjectLivingArea","personalDataPolicyUrl","ApplicationStepConsentComponent_ng_template_3_ng_container_2_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_3_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_4_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_5_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_6_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_7_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_8_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_9_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_10_Template","ApplicationStepConsentComponent_ng_template_3_ng_container_11_Template","applicant_r30","isMainApplicant_r31","_c16","getEmploymentType","_c17","_c18","_c19","_c20","_c21","title_r42","value_r43","ApplicationStepConsentComponent_ng_template_5_tr_0_Template","hide_r44","hasGivenConsent","requiredTrue","helper","enums","res","OtherLoanTypes","EmploymentStatuses","forEach","HasConsentedToCreditReport","ApplicationStepConsentComponent_Template","ApplicationStepConsentComponent_ng_container_0_Template","ApplicationStepConsentComponent_ng_template_1_Template","ApplicationStepConsentComponent_ng_template_3_Template","ApplicationStepConsentComponent_ng_template_5_Template","loanTypes","employmentTypes","currentDebt","loan","reduce","amount","typeCode","type","Randomizer","ApplicationStepEconomyComponent_ng_container_0_ng_container_19_div_6_Template","ɵɵpropertyInterpolate","groupName_r12","ApplicationStepEconomyComponent_ng_container_0_ng_container_38_div_12_Template_button_click_2_listener","groupName_r14","$implicit","ctx_r16","removeMortgageLoan","ApplicationStepEconomyComponent_ng_container_0_ng_container_38_div_12_Template","mortgageLoanGroupNames","ApplicationStepEconomyComponent_ng_container_0_div_39_Template_button_click_1_listener","addMortgageLoan","ApplicationStepEconomyComponent_ng_container_0_ng_container_51_div_18_Template_button_click_2_listener","_r27","groupName_r21","removeOtherLoan","ApplicationStepEconomyComponent_ng_container_0_ng_container_51_option_9_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_51_div_18_Template","ctx_r10","otherLoanTypes","otherLoanGroupNames","ApplicationStepEconomyComponent_ng_container_0_div_52_Template_button_click_1_listener","addOtherLoan","ApplicationStepEconomyComponent_ng_container_0_Template_button_click_11_listener","_r31","ctx_r30","removeChild","ApplicationStepEconomyComponent_ng_container_0_Template_button_click_17_listener","ctx_r32","addChild","ApplicationStepEconomyComponent_ng_container_0_ng_container_19_Template","ApplicationStepEconomyComponent_ng_container_0_div_20_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_22_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_23_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_24_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_38_Template","ApplicationStepEconomyComponent_ng_container_0_div_39_Template","ApplicationStepEconomyComponent_ng_container_0_ng_container_51_Template","ApplicationStepEconomyComponent_ng_container_0_div_52_Template","ApplicationStepEconomyComponent_ng_container_0_Template_button_click_54_listener","ctx_r33","childrenGroupNames","ctx_r36","formControlName_r35","displayText_r34","ApplicationStepEconomyComponent_ng_template_1_div_0_Template","baseForm","hasOtherMortgageLoans","hasOtherNonMortgageLoans","internalChildCount","baseHelper","newGroupName","addMortgageLoanFormGroup","takeMortgageLoanSuffix","addOtherLoanFormGroup","takeNonMortgageLoanSuffix","suffix","formGroupName","toString","addedOrNull","addGroupIfNotExists","controlName","initialValue","validators","removeAll","groupName","removeSingle","splice","removeControl","addChildFormGroup","index","getPositiveIntegerWithBoundsValidator","val","Exists","AgeInYears","getFormGroupValue","SharedCustody","otherLoans","currentCount","indexToRemove","groupNameToRemove","nrOfChildren","anyOf","Array","sharedCustody","setValue2","nrOfMortgageLoans","anyEvenNumberBetween","nrNonMortgageLoans","ApplicationStepEconomyComponent_Template","ApplicationStepEconomyComponent_ng_container_0_Template","ApplicationStepEconomyComponent_ng_template_1_Template","nextNonMortgageLoanSuffix","nextMortgageLoanSuffix","toReturn","ApplicationStepObjectComponent_ng_container_0_ng_container_50_div_3_Template_button_click_25_listener","restoredCtx","suffix_r4","removeLoan","ApplicationStepObjectComponent_ng_container_0_ng_container_50_div_3_Template","ApplicationStepObjectComponent_ng_container_0_ng_container_50_Template_button_click_5_listener","_r8","addLoan","loanSuffixes","ApplicationStepObjectComponent_ng_container_0_div_38_Template","ApplicationStepObjectComponent_ng_container_0_ng_container_50_Template","ApplicationStepObjectComponent_ng_container_0_Template_button_click_52_listener","isPurchase","objectAddressStreet","objectAddressZipcode","objectAddressCity","objectAddressMunicipality","objectOtherMonthlyCostsAmount","objectLivingArea","isObjectApartment","shouldMortgageLoansBeSettled","bankName","formatIntegerForEdit","interestRatePercent","formatPositiveDecimalForEdit","currentMonthlyAmortizationAmount","mortgageLoansToSettle","parseDecimalOrNull","ApplicationStepObjectComponent_Template","ApplicationStepObjectComponent_ng_container_0_Template","nextLoanSuffix","initialValues","addControlIfNotExists","getPositiveDecimalValidator","ApplicationWizardShellComponent_div_2_h1_1_Template","ApplicationWizardShellComponent_div_2_h1_2_Template","ApplicationWizardShellComponent_div_2_h1_3_Template","isMoveLoan","isAdditionalLoan","ɵɵstyleProp","stepNr","initialData","i","firstName","FirstName","activeStepNr","ApplicationWizardShellComponent_Template","ApplicationWizardShellComponent_div_2_Template","ApplicationWizardShellInitialData","StartWebapplicationComponent_div_3_application_step_object_2_Template","StartWebapplicationComponent_div_3_application_step_applicants_3_Template","StartWebapplicationComponent_div_3_application_step_economy_4_Template","StartWebapplicationComponent_div_3_application_step_consent_5_Template","wizardInitialData","StartWebapplicationComponent_div_4_div_1_Template_button_click_4_listener","StartWebapplicationComponent_div_4_div_1_Template","StartWebapplicationComponent_div_4_Template_button_click_3_listener","_r11","test","isPopupVisible","configServive","createApplication","newApplication","storageKey","removeItem","sessionStorage","navigateByUrl","ApplicationNr","parse","customData","lastCompletedStep","storeSession","sessionKey","sessionDataRaw","getItem","shared","p","StartWebapplicationComponent_Template","StartWebapplicationComponent_p_2_Template","StartWebapplicationComponent_div_3_Template","StartWebapplicationComponent_div_4_Template","kycInitialData","closeTask","navigate","IsActive","isPossibleToAnswer","IsPossibleToAnswer","isAnswersApproved","IsAnswersApproved","onSave","Customers","customersWithAnswers","CustomerId","customerId","Answers","customer","ApplicantNr","CustomerBirthDate","CustomerShortName","LatestKycQuestionsAnswerDate","LatestQuestions","KycTaskApplicationComponent_Template","KycTaskApplicationComponent_Template_task_page_onClose_2_listener","KycTaskApplicationComponent_ng_container_3_Template","objectSummary","addressText","ɵɵpipeBind1","decisionSummary","loanAmount","OngoingApplicationComponent_div_2_div_9_div_3_Template_div_click_1_listener","task_r8","onTaskClicked","isFirst_r9","getIconClass","isTaskAccepted","headerText","OngoingApplicationComponent_div_2_div_9_div_3_Template","informationTasks","messagesInitialData","OngoingApplicationComponent_div_2_div_5_Template","OngoingApplicationComponent_div_2_div_6_Template","OngoingApplicationComponent_div_2_div_7_Template","OngoingApplicationComponent_div_2_div_8_Template","OngoingApplicationComponent_div_2_div_9_Template","OngoingApplicationComponent_div_2_div_10_Template","titleService","customerPagesApiService","fetchApplication","Application","ObjectSummary","parts","AddressStreet","AddressApartmentNr","AddressSeTaxOfficeApartmentNr","AddressZipCode","AddressCity","join","routePrefix","IsKycTaskActive","IsKycTaskApproved","taskRoute","isApplicationActive","isInitiallyExpanded","isMortgagaeLoan","isInactiveMessagingAllowed","IsInactiveMessagingAllowed","LatestAcceptedDecision","LoanAmount","isReloadApplicationEvent","setTitle","isAccepted","isRejected","isOther","task","Title","OngoingApplicationComponent_Template","OngoingApplicationComponent_div_2_Template","TaskModel","applicationsListData","fetchApplications","isMortgageLoan","applications","Applications","OverviewComponent_Template","OverviewComponent_ng_container_2_Template","nrOfApplicants","useCommonAddress","persons","CustomerMessagesHelper","MypagesShellComponent_div_0_ng_container_2_a_3_Template_a_click_0_listener","_r7","MypagesShellComponent_div_0_ng_container_2_a_3_Template","MypagesShellComponent_div_0_ng_container_2_Template","MypagesShellComponent_customerpages_shell_1_ng_container_1_ul_7_ng_container_1_Template","_r3","MypagesShellComponent_customerpages_shell_1_ng_container_1_a_10_Template_a_click_0_listener","_r15","ctx_r14","MypagesShellComponent_customerpages_shell_1_ng_container_1_ng_container_2_Template","MypagesShellComponent_customerpages_shell_1_ng_container_1_Template_a_click_4_listener","_r17","toggleMobileMenu","MypagesShellComponent_customerpages_shell_1_ng_container_1_ul_7_Template","MypagesShellComponent_customerpages_shell_1_ng_container_1_a_10_Template","isMobileMenuVisible","MypagesShellComponent_customerpages_shell_1_div_2_ng_container_4_Template","MypagesShellComponent_customerpages_shell_1_ng_container_1_Template","MypagesShellComponent_customerpages_shell_1_div_2_Template","ctx_r24","unreadMessagesCount","MypagesShellComponent_ng_template_2_ng_container_0_li_1_span_4_Template","i_r22","routerLink","codeDisplayName","code","ctx_r23","MypagesShellComponent_ng_template_2_ng_container_0_li_1_Template","isVisible","hideMessages_r19","onlyMessages_r20","MypagesShellComponent_ng_template_2_ng_container_0_Template","menuItems","MyPagesMenuItemCode","MypagesShellComponent","hasNoCustomerRelation","addMenuItem","Overview","Loans","addTestMenuItem","SavingsAccounts","Documents","SecureMessage","MyData","setActiveMenuItem","activeMenuItemCode","refreshUnreadMessagesCount","messagesHelper","getSecureMessagesUnreadByCustomerCount","UnreadCount","MypagesShellComponent_Template","MypagesShellComponent_div_0_Template","MypagesShellComponent_customerpages_shell_1_Template","MypagesShellComponent_ng_template_2_Template","MypagesShellComponentInitialData","displayName","MenuItemModel","hideMessages","onlyMessages","NTechMath","nextNotificationDate","UnpaidNotificationsComponent_ng_container_0_p_1_span_1_Template","UnpaidNotificationsComponent_ng_container_0_p_1_span_2_Template","n_r6","creditNr","notificationUrl","r_r15","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_div_33_a_4_Template","nr","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_div_27_Template","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_a_32_Template","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_div_33_Template","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_p_34_Template","directDebit","bankGiro","ocrPaymentReference","balanceAmount","isOverview","reminders","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_Template_div_click_1_listener","isExpanded","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_10_Template","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_div_17_Template","dueDate","isOverdue","UnpaidNotificationsComponent_ng_container_0_div_2_div_1_Template","notifications","UnpaidNotificationsComponent_ng_container_0_p_1_Template","UnpaidNotificationsComponent_ng_container_0_div_2_Template","UnpaidNotificationsComponent","credits","creditsWithFutureNotifications","NextNotificationDate","orderBy","valueOf","c","n","Notifications","IsOpen","notificationId","NotificationId","DueDate","BalanceAmount","IsOverdue","IsDirectDebitActive","PaymentBankGiroNrDisplay","OcrPaymentReferenceDisplay","CreditNr","PdfArchiveKey","Reminders","ReminderNumber","ArchiveKey","MyPagesApiService","UnpaidNotificationsComponent_Template","UnpaidNotificationsComponent_ng_container_0_Template","UnpaidNotificationsComponentInitialData","MyContactinfoComponent","MyDataComponent","MyDocumentsComponent","MyLoansComponent","MyMessagesComponent","MypagesOverviewComponent","MypagesTestpageComponent","LoanComponent","alwaysActiveRoutes","loansOnlyRoutes","MypagesRoutingModule","MypagesOverviewLoansComponent","UlAmortizationPlanComponent","InterestHistoryComponent","CapitalTransactionHistoryComponent","MlAmortizationPlanComponent","r_r3","description","date","CapitalTransactionHistoryComponent_div_0_ng_container_9_tr_1_Template","CapitalTransactionHistoryComponent_div_0_div_10_a_1_Template_a_click_0_listener","showMoreItems","CapitalTransactionHistoryComponent_div_0_div_10_a_1_Template","hasMoreItems","CapitalTransactionHistoryComponent_div_0_ng_container_9_Template","CapitalTransactionHistoryComponent_div_0_div_10_Template","items","capitalTransactionHistory","Transactions","TransactionDate","Amount","getDescription","BusinessEventType","BusinessEventRoleCode","SubAccountCode","businessEventType","businessEventRoleCode","subAccountCode","findIndex","countShown","CapitalTransactionHistoryComponent_Template","CapitalTransactionHistoryComponent_div_0_Template","percent","InterestHistoryComponent_div_0_ng_container_9_tr_1_Template","InterestHistoryComponent_div_0_div_10_a_1_Template_a_click_0_listener","showMoreInterestHistoryItems","InterestHistoryComponent_div_0_div_10_a_1_Template","hasMoreInterestHistoryItems","InterestHistoryComponent_div_0_ng_container_9_Template","InterestHistoryComponent_div_0_div_10_Template","interestHistory","InterestChanges","InterestHistoryComponent_Template","InterestHistoryComponent_div_0_Template","createMortgagePropertyIdFromCollateralItems","LoanComponent_mypages_shell_0_ng_container_2_div_21_Template_a_click_3_listener","ɵɵreference","showAmortizationPlanPopup","LoanComponent_mypages_shell_0_ng_container_2_div_22_Template_a_click_3_listener","credit","UnsecuredLoan","MonthlyPaymentExcludingFee","LoanComponent_mypages_shell_0_ng_container_2_div_23_Template_a_click_3_listener","_r24","getMonthlyPayment","amortizationPlan","NrOfRemainingPayments","SinglePaymentLoanRepaymentDays","formatFixedInterestMonths","MortgageLoan","MortgageLoanInterestRebindMonthCount","MortgageLoanNextInterestRebindDate","getMlPropertyId","a_r25","LastName","getNextFutureNotificationAmount","n_r27","paidDate","initialAmount","LoanComponent_mypages_shell_0_ng_container_2_div_53_ng_container_1_div_1_Template","LoanComponent_mypages_shell_0_ng_container_2_div_53_ng_container_1_Template","paidNotifications","LoanComponent_mypages_shell_0_ng_container_2_div_54_a_1_Template_a_click_0_listener","_r32","ctx_r31","showMorePaidNotifications","LoanComponent_mypages_shell_0_ng_container_2_div_54_a_1_Template","hasMorePaidNotifications","amortizationBasisPdfUrl","LoanComponent_mypages_shell_0_ng_container_2_Template_a_click_10_listener","_r34","showCapitalTransactionsPopup","LoanComponent_mypages_shell_0_ng_container_2_Template_a_click_17_listener","ctx_r35","showInterestHistoryPopup","LoanComponent_mypages_shell_0_ng_container_2_div_21_Template","LoanComponent_mypages_shell_0_ng_container_2_div_22_Template","LoanComponent_mypages_shell_0_ng_container_2_div_23_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_34_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_35_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_36_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_37_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_38_Template","LoanComponent_mypages_shell_0_ng_container_2_tr_43_Template","LoanComponent_mypages_shell_0_ng_container_2_p_49_Template","LoanComponent_mypages_shell_0_ng_container_2_p_52_Template","LoanComponent_mypages_shell_0_ng_container_2_div_53_Template","LoanComponent_mypages_shell_0_ng_container_2_div_54_Template","LoanComponent_mypages_shell_0_ng_container_2_div_55_Template","CapitalBalance","CurrentInterestRatePercent","StartDate","ApplicantsPersonalData","unpaidNotificationsInitialData","hasUnpaidNotifications","LoanComponent_mypages_shell_0_ng_container_2_Template","LoanComponent_mypages_shell_0_ng_container_3_Template","shellInitialData","popup","ctx_r37","ctx_r38","ulAmortizationPlan","ctx_r39","mlAmortizationPlanData","LoanComponent_ng_template_1_Template_button_click_3_listener","_r41","ctx_r40","modalRef","hide","LoanComponent_ng_template_1_interest_history_7_Template","LoanComponent_ng_template_1_capital_transaction_history_8_Template","LoanComponent_ng_template_1_ul_amortization_plan_9_Template","LoanComponent_ng_template_1_ml_amortization_plan_10_Template","title","modalService","fetchCredits","ActiveCredits","fetchLoanAmortizationPlan","amortizationBasisSeData","AmortizationBasis","ClosedDate","InitialAmount","isMl","UsesAnnuities","AnnuityAmount","FixedMonthlyPaymentAmount","popupTemplate","fetchUnsecuredLoansInterestHistory","showPopup","fetchCapitalTransactionHistory","highlightCreditNr","monthCount","CollateralStringItems","show","class","ignoreBackdropClick","futureNotification","AmortizationPlanItems","IsFutureItem","EventTypeCode","CapitalTransaction","InterestTransaction","InitialFeeTransaction","NotificationFeeTransaction","BsModalService","LoanComponent_Template","LoanComponent_mypages_shell_0_Template","LoanComponent_ng_template_1_Template","isTest","maxCountToShow","dateOnlyToIsoDate","LoanAmortizationPlanItem","t_r3","CapitalBefore","MlAmortizationPlanComponent_div_0_ng_container_7_Template_div_click_1_listener","toggleTransactionDetails","MlAmortizationPlanComponent_div_0_ng_container_7_div_10_Template","FutureItemDueDate","capitalAndInterestTransaction","MlAmortizationPlanComponent_div_0_a_9_Template_a_click_0_listener","showMoreTransactions","MlAmortizationPlanComponent_div_0_ng_container_7_Template","MlAmortizationPlanComponent_div_0_a_9_Template","getVisibleTransactions","hasMoreTransactions","PageSize","futureTransactions","annuityAmount","visibleCount","basis","Math","getAmortizationItemDesc","IsWriteOff","toDate","d","MlAmortizationPlanComponent_Template","MlAmortizationPlanComponent_div_0_Template","t_r7","UlAmortizationPlanComponent_div_0_ng_container_18_div_10_div_13_Template","UlAmortizationPlanComponent_div_0_ng_container_18_Template_div_click_1_listener","_r13","UlAmortizationPlanComponent_div_0_ng_container_18_div_10_Template","UlAmortizationPlanComponent_div_0_a_20_Template_a_click_0_listener","UlAmortizationPlanComponent_div_0_div_7_Template","UlAmortizationPlanComponent_div_0_p_9_Template","UlAmortizationPlanComponent_div_0_p_10_Template","UlAmortizationPlanComponent_div_0_p_11_Template","UlAmortizationPlanComponent_div_0_ng_container_18_Template","UlAmortizationPlanComponent_div_0_a_20_Template","singlePaymentLoanRepaymentDays","UlAmortizationPlanComponent_Template","UlAmortizationPlanComponent_div_0_Template","Address","Street","Zipcode","City","Country","MyContactinfoComponent_mypages_shell_0_div_1_div_11_Template_button_click_1_listener","beginEdit","editForm","MyContactinfoComponent_mypages_shell_0_div_1_div_12_Template_button_click_1_listener","onCancelEdit","MyContactinfoComponent_mypages_shell_0_div_1_div_12_Template_button_click_3_listener","MyContactinfoComponent_mypages_shell_0_div_1_ng_container_7_Template","MyContactinfoComponent_mypages_shell_0_div_1_ng_container_8_Template","MyContactinfoComponent_mypages_shell_0_div_1_div_11_Template","MyContactinfoComponent_mypages_shell_0_div_1_div_12_Template","MyContactinfoComponent_mypages_shell_0_div_1_input_19_Template","MyContactinfoComponent_mypages_shell_0_div_1_p_20_Template","MyContactinfoComponent_mypages_shell_0_div_1_input_25_Template","MyContactinfoComponent_mypages_shell_0_div_1_p_26_Template","dummyViewForm","MyContactinfoComponent_mypages_shell_0_div_1_Template","toastr","fetchCustomerInfo","newEmail","newPhone","properties","Name","Value","updateCustomerValues","success","ToastrService","MyContactinfoComponent_Template","MyContactinfoComponent_mypages_shell_0_Template","MyDataComponent_mypages_shell_0_Template_tr_click_12_listener","goToKycOverview","MyDataComponent_Template","MyDataComponent_mypages_shell_0_Template","MyDocumentsComponent_mypages_shell_0_tr_14_ng_container_5_Template","MyDocumentsComponent_mypages_shell_0_tr_14_ng_container_9_Template","document_r6","Date","Product","ProductId","Url","ɵɵpureFunction3","TypeCode","Context","MyDocumentsComponent_mypages_shell_0_tr_14_Template","documents","product_r9","MyDocumentsComponent_ng_template_1_ng_container_1_Template","MyDocumentsComponent_ng_template_1_ng_container_2_Template","context_r15","code_r14","MyDocumentsComponent_ng_template_3_ng_container_1_Template","MyDocumentsComponent_ng_template_3_ng_container_2_Template","MyDocumentsComponent_ng_template_3_ng_container_3_Template","MyDocumentsComponent_ng_template_3_ng_container_4_Template","MyDocumentsComponent_ng_template_3_ng_container_5_Template","product_r13","products","loadLoans","all","sortDocuments","fetchCreditDocuments","addLoanDocument","MyDocumentsComponent_Template","MyDocumentsComponent_mypages_shell_0_Template","MyDocumentsComponent_ng_template_1_Template","MyDocumentsComponent_ng_template_3_Template","ProductCode","Loan","DocumentTypeCode","DocumentContext","DocumentArchiveKey","DocumentDate","sort","getDictionaryValues","block_r4","propertyId","loan_r9","capitalBalanceAmount","MyLoansComponent_mypages_shell_0_ng_container_4_p_1_Template","MyLoansComponent_mypages_shell_0_ng_container_4_p_2_Template","MyLoansComponent_mypages_shell_0_ng_container_4_tr_5_Template","loans","loan_r12","getInactiveCreditText","MyLoansComponent_mypages_shell_0_ng_container_5_tr_3_Template","block_r10","MyLoansComponent_mypages_shell_0_ng_container_4_Template","MyLoansComponent_mypages_shell_0_ng_container_5_Template","MyLoansComponent_mypages_shell_0_table_6_Template","loanBlocks","inactiveLoans","inactiveLoanBlocks","getMlLoanBlocks","InactiveCredits","status","Status","endDate","EndDate","blocks","CollateralId","creditEndDateText","format","MyLoansComponent_Template","MyLoansComponent_mypages_shell_0_Template","SecureMessagesEditListComponentInitialData","channel_r3","uiId","uiText","MyMessagesComponent_mypages_shell_0_option_9_Template","MyMessagesComponent_mypages_shell_0_option_10_Template","messageForm","channels","messageListInitialData","getSecureMessages","skip","take","CustomerChannels","channelUiId","channel","addChannel","ChannelType","ChannelId","findChannel","setActiveChannel","channelType","channelId","removeActiveChannel","MyMessagesComponent_Template","MyMessagesComponent_mypages_shell_0_Template","seChannelNames","generalName","trimEnd","Credit_UnsecuredLoan","Credit_MortgageLoan","SavingsAccount_StandardAccount","Application_UnsecuredLoan","pageSize","getLoanLink","totalBalanceAmount","sum","activeCredits","MypagesOverviewLoansComponent_Template","MypagesOverviewLoansComponent_ng_container_0_Template","MypagesOverviewComponent_mypages_shell_0_mypages_overview_loans_5_Template","isStandardLoansActive","MypagesOverviewComponent_Template","MypagesOverviewComponent_mypages_shell_0_Template","MypagesTestpageComponent_Template","MypagesTestpageComponent_mypages_shell_0_Template","toCamelCase","includeCustomerPersonalData","includeInactiveLoans","CustomerInfo","ApplicationsListComponent_div_1_ng_container_4_Template","ApplicationsListComponent_div_1_ng_container_5_Template","ApplicationsListComponent_div_1_ng_container_6_Template","activeApplications","rejectedOrCancelledApplications","loanCreatedApplications","a_r13","unreadCount","ApplicationsListComponent_ng_template_2_div_0_tr_7_Template_tr_click_0_listener","navigateToApplication","ApplicationsListComponent_ng_template_2_div_0_tr_7_span_5_Template","applicationDate","ApplicationsListComponent_ng_template_2_div_0_tr_7_Template","ɵɵclassMap","paddingClass_r10","title_r9","applications_r7","ApplicationsListComponent_ng_template_2_div_0_Template","ApplicationsListComponent","unreadCounts","getUnreadCounts","ApplicationDate","IsRejected","IsCancelled","IsFinalDecisionMade","routePath","lookups","hasCustomerRelation","ApplicationsListComponent_Template","ApplicationsListComponent_div_0_Template","ApplicationsListComponent_div_1_Template","ApplicationsListComponent_ng_template_2_Template","CalculatorSliderComponent","sliderOptions","floor","ceil","step","showSelectionBar","translate","label","tickSlider","isUp","v","CalculatorSliderComponent_Template","CalculatorSliderComponent_Template_button_click_2_listener","CalculatorSliderComponent_Template_button_click_8_listener","CalculatorSliderInitialData","singleApplicationNr","paging","markAsRead","getFilter","skipCount","takeCount","onlyTheseChannelTypes","onlyThisChannel","markAsReadByCustomerContext","markAsReadContextName","sendSecureMessage","text","textFormat","attachedFile","attachedFileAsDataUrl","dataUrl","attachedFileName","getMarkAsReadContextName","getMyPagesChannelTypes","getApplicationChannelType","nrOfUnreadMessages","CustomerPagesApplicationMessagesComponent_div_0_div_11_Template_secure_messages_edit_list_messagesLoaded_1_listener","onMessagesLoaded","CustomerPagesApplicationMessagesComponent_div_0_Template_div_click_1_listener","toggleExpanded","CustomerPagesApplicationMessagesComponent_div_0_span_5_Template","CustomerPagesApplicationMessagesComponent_div_0_div_11_Template","CustomerPagesApplicationMessagesComponent","CustomerPagesApplicationMessagesComponent_Template","CustomerPagesApplicationMessagesComponent_div_0_Template","CustomerPagesApplicationMessagesInitialData","tmp_0_0","Skinning","LogoUrl","CustomerpagesShellComponent_div_13_div_1_button_4_Template_button_click_0_listener","f_r6","executeTestFunction","displayText","CustomerpagesShellComponent_div_13_div_1_button_4_Template","functionCalls","CustomerpagesShellComponent_div_13_div_1_Template","CustomerpagesShellComponent_div_13_Template_button_click_3_listener","isTestPopupVisible","CustomerpagesShellComponent","execute","CustomerpagesShellComponent_Template","CustomerpagesShellComponent_img_5_Template","CustomerpagesShellComponent_img_6_Template","CustomerpagesShellComponent_div_12_Template","CustomerpagesShellComponent_div_13_Template","wideNavigation","logoRouterLink","tmp_2_0","tmp_3_0","skipBodyLayout","CustomerpagesShellInitialData","sharedQuillSettings","SecureMessagesEditListComponent_ng_container_0_div_1_div_11_Template_span_click_3_listener","removeDocument","SecureMessagesEditListComponent_ng_container_0_div_1_Template_button_click_8_listener","selectFileToAttach","SecureMessagesEditListComponent_ng_container_0_div_1_div_11_Template","SecureMessagesEditListComponent_ng_container_0_div_1_Template_input_change_12_listener","onFileAttached","SecureMessagesEditListComponent_ng_container_0_div_1_Template_button_click_16_listener","sendMessage","quillEditorOptions","quillEditorFormats","message_r13","Text","sanitizeHtml","ɵɵsanitizeHtml","getAttachmentUrl","a_r21","SecureMessagesEditListComponent_ng_container_0_div_3_small_6_Template","SecureMessagesEditListComponent_ng_container_0_div_3_p_9_Template","SecureMessagesEditListComponent_ng_container_0_div_3_div_10_Template","SecureMessagesEditListComponent_ng_container_0_div_3_ng_container_11_Template","CreationDate","getMessageClass","IsFromCustomer","isHtml","CustomerMessageAttachedDocuments","SecureMessagesEditListComponent_ng_container_0_div_4_Template_a_click_1_listener","_r23","ctx_r22","loadMoreMessages","SecureMessagesEditListComponent_ng_container_0_div_1_Template","SecureMessagesEditListComponent_ng_container_0_div_3_Template","SecureMessagesEditListComponent_ng_container_0_div_4_Template","showSendMessageForm","messages","hasMoreMessages","SecureMessagesEditListComponent","sanitizer","messagesLoaded","editorOptions","editorFormats","loadMessages","createMessageHelper","getSingleApplicationNr","messagesResponse","message","addMessages","Messages","TotalMessageCount","sendChannel","bypassSecurityTrustHtml","TextFormat","fileInput","nativeElement","click","isFromCustomer","includeDirection","showSendMessage","target","loadSingleAttachedFileAsDataUrl","files","filename","fileInputForm","DomSanitizer","viewQuery","SecureMessagesEditListComponent_Query","SecureMessagesEditListComponent_ng_container_0_Template","totalCount","isSingleApplication","codes","isNullOrWhitespace","TaskPageComponent","TaskKycQuestionsComponent","NgxSliderModule","parseTriStateBoolean","stringJoin","i18nIsoCountries","answer_r6","questionText","answerText","TaskKycQuestionsComponent_div_0_div_6_div_2_div_5_Template","customer_r4","TaskKycQuestionsComponent_div_0_div_6_div_2_Template","view","TaskKycQuestionsComponent_div_0_div_7_div_2_div_21_Template_button_click_4_listener","citizenCountry_r13","customer_r8","removeCitizenCountry","getCountryDisplayName","opt_r17","TaskKycQuestionsComponent_div_0_div_7_div_2_ng_container_25_option_1_Template","isCitizenCountrySelected","TaskKycQuestionsComponent_div_0_div_7_div_2_div_30_Template_button_click_3_listener","taxCountry_r21","removeTaxCountry","opt_r25","TaskKycQuestionsComponent_div_0_div_7_div_2_ng_container_34_option_1_Template","isTaxCountrySelected","TaskKycQuestionsComponent_div_0_div_7_div_2_div_21_Template","TaskKycQuestionsComponent_div_0_div_7_div_2_ng_container_25_Template","TaskKycQuestionsComponent_div_0_div_7_div_2_div_30_Template","TaskKycQuestionsComponent_div_0_div_7_div_2_ng_container_34_Template","isPepFormControlName","hasErrorStrict","getQuestionText","citizenCountries","citizenCountriesFormControlName","getCountryDropdownOptions","taxCountries","taxCountriesFormControlName","TaskKycQuestionsComponent_div_0_div_7_div_2_Template","TaskKycQuestionsComponent_div_0_div_7_Template_button_click_4_listener","_r30","TaskKycQuestionsComponent_div_0_div_6_Template","TaskKycQuestionsComponent_div_0_div_7_Template","registerLocale","require","twoLetterIsoCode","lang","getName","select","twoLetterIsoCodes","Object","keys","getAlpha2Codes","isEditPossible","QuestionCode","AnswerText","applicantDisplayName","applicant","CustomerEditModel","parseCommaSeparatedList","AnswerCode","addCitizenCountryValue","addTaxCountryValue","isEditAllowed","isConfirmAllowed","QuestionText","isPep","applicantNr","split","trim","TaskKycQuestionsComponent_Template","TaskKycQuestionsComponent_div_0_Template","isoCode","TaskKycQuestionsComponentInitialData","onClose","close","isStandalonePage","TaskPageComponent_Template","TaskPageComponent_Template_button_click_4_listener","getDocumentUrl","unsignedAgreementPdfArchiveKey","signedAgreementPdfArchiveKey","applicant_r4","signatureUrl","CustomerPagesAgreementComponent_div_0_tr_17_a_4_Template","hasSigned","CustomerPagesAgreementComponent_div_0_div_3_Template","CustomerPagesAgreementComponent_div_0_div_4_Template","CustomerPagesAgreementComponent_div_0_tr_17_Template","applicants","CustomerPagesAgreementComponent","SignedAgreementArchiveKey","UnsignedAgreementArchiveKey","ApplicantStatusByApplicantNr","applicantStatus","HasSigned","IsPossibleToSign","SignatureUrl","CustomerPagesApplicationsApiService","CustomerPagesAgreementComponent_Template","CustomerPagesAgreementComponent_div_0_Template","CustomerPagesAgreementInitialData","ComplexApplicationListRow","offerItems","getUniqueItemInteger","currencySymbol","cost_r20","getUniqueItemDecimal","getUniqueItem","CustomerPagesApplicationOfferComponent_div_0_tr_32_span_5_Template","CustomerPagesApplicationOfferComponent_div_0_tr_32_span_6_Template","CustomerPagesApplicationOfferComponent_div_0_tr_32_span_7_Template","CustomerPagesApplicationOfferComponent_div_0_div_33_Template_button_click_3_listener","_r25","rejectOffer","CustomerPagesApplicationOfferComponent_div_0_div_33_Template_button_click_6_listener","acceptOffer","CustomerPagesApplicationOfferComponent_div_0_h1_1_Template","CustomerPagesApplicationOfferComponent_div_0_h1_2_Template","CustomerPagesApplicationOfferComponent_div_0_p_3_Template","CustomerPagesApplicationOfferComponent_div_0_h1_4_Template","CustomerPagesApplicationOfferComponent_div_0_p_5_Template","CustomerPagesApplicationOfferComponent_div_0_tr_20_Template","CustomerPagesApplicationOfferComponent_div_0_tr_21_Template","CustomerPagesApplicationOfferComponent_div_0_tr_22_Template","CustomerPagesApplicationOfferComponent_div_0_tr_23_Template","CustomerPagesApplicationOfferComponent_div_0_tr_24_Template","CustomerPagesApplicationOfferComponent_div_0_tr_25_Template","CustomerPagesApplicationOfferComponent_div_0_tr_26_Template","CustomerPagesApplicationOfferComponent_div_0_tr_27_Template","CustomerPagesApplicationOfferComponent_div_0_tr_28_Template","CustomerPagesApplicationOfferComponent_div_0_tr_29_Template","CustomerPagesApplicationOfferComponent_div_0_tr_30_Template","CustomerPagesApplicationOfferComponent_div_0_tr_31_Template","CustomerPagesApplicationOfferComponent_div_0_tr_32_Template","CustomerPagesApplicationOfferComponent_div_0_div_33_Template","hasRejectedOffer","toggleInitialData","firstNotificationCosts","isPossibleToDecide","CustomerPagesApplicationOfferComponent","generalApiService","customCosts","firstNotificationCode","fromDictionary","getUniqueItemNames","endsWith","onExpandedToggled","toggleBlockId","setCustomerCreditDecisionCode","signalReloadApplication","CustomerPagesApplicationOfferComponent_Template","CustomerPagesApplicationOfferComponent_div_0_Template","CustomerPagesApplicationOfferInitialData","from","of","getBankAccountTypeDropdownOptions","createCountrySpecificValidatorUsingCountryIsoCode","CustomerPagesBankaccountsComponent_div_0_div_11_Template_button_click_1_listener","beginEditNewLoan","CustomerPagesBankaccountsComponent_div_0_div_12_Template_button_click_1_listener","onCancelNewLoan","CustomerPagesBankaccountsComponent_div_0_div_12_Template_button_click_3_listener","onSaveNewLoan","paidToCustomerForm","paidToCustomer","account","getAccountNrDisplay","CustomerPagesBankaccountsComponent_div_0_div_23_div_10_Template_button_click_1_listener","beginEditLoansToSettle","CustomerPagesBankaccountsComponent_div_0_div_23_div_11_Template_button_click_1_listener","onCancelLoansToSettle","CustomerPagesBankaccountsComponent_div_0_div_23_div_11_Template_button_click_3_listener","onSaveLoansToSettle","loansToSettleForm","CustomerPagesBankaccountsComponent_div_0_div_23_div_10_Template","CustomerPagesBankaccountsComponent_div_0_div_23_div_11_Template","isPossibleToEditLoansToSettleBankAccounts","loan_r22","getAccountTypeDisplay","t_r33","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_10_option_2_Template","getPossibleBankAccountNrTypes","hasNamedValidationError","ctx_r27","currentSettlementPaymentReferenceType","settlementPaymentReference","settlementPaymentMessage","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_9_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_10_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_15_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_16_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_18_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_19_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_20_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_div_21_Template","getOtherLoanTypeDisplayName","loanType","CustomerPagesBankaccountsComponent_div_0_div_24_div_2_Template","CustomerPagesBankaccountsComponent_div_0_div_24_div_3_Template","loansToSettle","CustomerPagesBankaccountsComponent_div_0_div_25_Template_button_click_1_listener","_r42","ctx_r41","approveBankAccounts","isPossibleToConfirm","CustomerPagesBankaccountsComponent_div_0_div_11_Template","CustomerPagesBankaccountsComponent_div_0_div_12_Template","CustomerPagesBankaccountsComponent_div_0_div_21_Template","CustomerPagesBankaccountsComponent_div_0_div_22_Template","CustomerPagesBankaccountsComponent_div_0_div_23_Template","CustomerPagesBankaccountsComponent_div_0_div_24_Template","CustomerPagesBankaccountsComponent_div_0_div_25_Template","isPossibleToEditPaidToCustomerBankAccount","isBankAccountsConfirmed","RefTypeReference","RefTypeMessage","CustomerPagesBankaccountsComponent","bankAccountRequest","PaidToCustomer","BankAccountNr","bankAccountNr","bankAccountNrType","BankAccountNrType","Nr","validateBankAccountNrsBatch","IsPossibleToEditPaidToCustomerBankAccount","IsPossibleToEditLoansToSettleBankAccounts","IsAccepted","ViewAccount","ValidatedAccountsByKey","paidToCustomerAccountValid","IsValid","settleAccountsValid","SettlementPaymentReference","SettlementPaymentMessage","bankAccountValidator","createValidatorAsync","b","editBankAccounts","refType","minLength","countryValidator","setAsyncValidators","errors","errorName","settlementPaymentReferenceType","isValidPaymentFileReferenceNr","loanViewOrEditNr","hasRef","hasMsg","Accounts","confirmBankAccounts","signalReloadApplicationAndClosePopup","CustomerPagesBankaccountsComponent_Template","CustomerPagesBankaccountsComponent_div_0_Template","parsedAccount","ValidAccount","DisplayNr","accountNrType","CustomerPagesBankAccountsInitialData","CustomerPagesDirectDebitComponent_div_0_div_11_Template_button_click_1_listener","beginEditAccount","CustomerPagesDirectDebitComponent_div_0_div_12_Template_button_click_1_listener","onCancelAccount","CustomerPagesDirectDebitComponent_div_0_div_12_Template_button_click_3_listener","onSaveAccount","model","selectedAccountNrDisplay","selectedAccountOwnerDisplayName","a_r15","CustomerPagesDirectDebitComponent_div_0_div_14_div_13_option_2_Template","CustomerPagesDirectDebitComponent_div_0_div_14_div_7_Template","CustomerPagesDirectDebitComponent_div_0_div_14_div_13_Template","CustomerPagesDirectDebitComponent_div_0_div_15_Template_button_click_1_listener","confirmDirectDebitAccountAndOwner","isPossibleToConfirmAccount","CustomerPagesDirectDebitComponent_div_0_div_11_Template","CustomerPagesDirectDebitComponent_div_0_div_12_Template","CustomerPagesDirectDebitComponent_div_0_div_13_Template","CustomerPagesDirectDebitComponent_div_0_div_14_Template","CustomerPagesDirectDebitComponent_div_0_div_15_Template","isDirectDebitAccountConfirmed","unsignedDirectDebitConsentFileArchiveKey","signedDirectDebitConsentFileArchiveKey","ctx_r20","signatureSessionUrl","CustomerPagesDirectDebitComponent_div_1_div_11_Template","CustomerPagesDirectDebitComponent_div_1_div_12_Template","CustomerPagesDirectDebitComponent_div_1_a_29_Template","accountOwner","CustomerPagesDirectDebitComponent","CustomerInfoByApplicantNr","BirthDate","initialAccount","getInitialDirectDebitBankAccountNr","selectedAccountOwnerName","AccountOwnerApplicantNr","DirectDebitBankAccountNr","preSelected","accountOwnerNr","HasConfirmedAccountInfo","UnsignedDirectDebitConsentFileArchiveKey","SignedDirectDebitConsentFileArchiveKey","SignatureSessionUrl","PaidToCustomerBankAccountNr","setupAccountForm","selectedBankAccount","selectedAccountOwner","resetEditForm","selectedAccountNr","saveDirectDebitAccountInfo","onSuccess","confirmDirectDebitAccountInfo","CustomerPagesDirectDebitComponent_Template","CustomerPagesDirectDebitComponent_div_0_Template","CustomerPagesDirectDebitComponent_div_1_Template","DirectDebitInitialData","ShellComponent","ShellComponent_Template","ShellComponent_img_5_Template","ShellComponent_img_6_Template","ShellComponent_Template_a_click_10_listener","ShellComponent_div_15_Template","tmp_1_0","UpdateToggleBlock","TaskToggleBlockComponent_div_0_Template_div_click_1_listener","TaskToggleBlockComponent_div_0_div_9_Template","TaskToggleBlockComponent","eventData","newTitle","NtechEventService","TaskToggleBlockComponent_Template","TaskToggleBlockComponent_div_0_Template","TaskToggleBlockInitialData","CustomerPagesApplicationTasksComponent_div_0_table_6_tr_7_Template_tr_click_0_listener","_r5","task_r3","support","openTask","getTaskRowClass","CustomerPagesApplicationTasksComponent_div_0_table_6_tr_7_Template","tasks","CustomerPagesApplicationTasksComponent_div_0_table_6_Template","displayState","CustomerPagesApplicationTasksComponent","isTaskInactive","isKycTask","CustomerPagesApplicationTasksComponent_Template","CustomerPagesApplicationTasksComponent_div_0_Template","taskGroup_r9","text_r11","CustomerPagesApplicationComponent_div_2_div_3_customer_pages_application_offer_1_div_3_p_2_Template","texts","CustomerPagesApplicationComponent_div_2_div_3_customer_pages_application_offer_1_div_3_Template","offerInitialData","getFilteredTaskGroups","focusedState","CustomerPagesApplicationComponent_div_2_div_3_customer_pages_application_offer_1_Template","CustomerPagesApplicationComponent_div_2_div_3_p_2_Template","isWaitingForOffer","taskGroup_r13","text_r15","CustomerPagesApplicationComponent_div_2_div_4_p_2_Template","CustomerPagesApplicationComponent_div_2_div_3_Template","CustomerPagesApplicationComponent_div_2_div_4_Template","CustomerPagesApplicationComponent_div_2_div_5_Template","normalState","agreementInitialData","bankAccountsInitialData","directDebitInitialData","CustomerPagesApplicationComponent_div_3_Template_task_page_onClose_1_listener","_r21","CustomerPagesApplicationComponent_div_3_customer_pages_agreement_2_Template","CustomerPagesApplicationComponent_div_3_customer_pages_bankaccounts_3_Template","CustomerPagesApplicationComponent_div_3_customer_pages_direct_debit_4_Template","CustomerPagesApplicationComponent","currentlyOpenTask","hasAcceptedOffer","CurrentOffer","OfferItems","IsFutureOfferPossible","isPossibleToDecideOffer","IsPossibleToDecide","betweenOfferAndSignatureTaskGroup","TaskGroup","signatureTaskGroup","paymentTaskGroup","taskGroups","addTask","isTaskOpenable","createOpenTask","parentTask","KycTask","BankAccountsTask","AgreementTask","DirectDebitTask","getDirectDebitTask","betweenOfferAndSignatureDisplayState","hasBetweenOfferAndSignatureReachedVisible","hasBetweenOfferAndSignatureReachedActive","hasBetweenOfferAndSignatureBeenCompleted","areAllTasksAccepted","setupBetweenOfferAndSignatureGroup","setupSignatureGroup","isDisplayNormalAndHasAllTasksAccepted","isReloadApplicationAndClosePopupEvent","createKycQuestionSession","CustomerPagesApplicationComponent_Template","CustomerPagesApplicationComponent_div_2_Template","CustomerPagesApplicationComponent_div_3_Template","CustomerPagesApplicationComponent_div_4_Template","CustomerPagesApplicationReloadEvent","EventName","initiallyOpenTaskCode","signatureDisplayState","hasSignatureReachedVisible","hasSignatureReachedActive","hasSignatureBeenCompleted","OpenTaskModel","currentDateAndTime","objective_r17","PreApplicationApplicantsComponent_div_2_div_13_option_5_Template","loanObjectives","opt_r18","PreApplicationApplicantsComponent_div_2_ng_container_9_Template","PreApplicationApplicantsComponent_div_2_ng_container_10_Template","PreApplicationApplicantsComponent_div_2_ng_container_11_Template","PreApplicationApplicantsComponent_div_2_ng_container_12_Template","PreApplicationApplicantsComponent_div_2_div_13_Template","PreApplicationApplicantsComponent_div_2_option_18_Template","PreApplicationApplicantsComponent_div_2_option_19_Template","PreApplicationApplicantsComponent_div_2_ng_container_20_Template","PreApplicationApplicantsComponent_div_2_ng_container_21_Template","PreApplicationApplicantsComponent_div_2_ng_container_22_Template","PreApplicationApplicantsComponent_div_2_ng_container_23_Template","PreApplicationApplicantsComponent_div_2_option_28_Template","PreApplicationApplicantsComponent_div_2_option_37_Template","PreApplicationApplicantsComponent_div_2_Template_button_click_43_listener","formControlName_r23","displayText_r22","options_r21","placeholder","PreApplicationApplicantsComponent_ng_template_3_div_0_Template","PreApplicationApplicantsComponent","storageService","formBuilder","shellData","setupTestFunctions","preApplicationId","isEnabled","getUlStandardWebApplicationSettings","load","formFields","require12DigitCivicRegNrSe","vs","loanObjective","incomePerMonthAmount","employment","employer","employerPhone","employedSince","employedTo","hasLegalOrFinancialGuardian","claimsToBeGuarantor","save","_this4","_ref","testPersons","UlStandardPreApplicationService","i6","PreApplicationApplicantsComponent_Template","PreApplicationApplicantsComponent_div_2_Template","PreApplicationApplicantsComponent_ng_template_3_Template","PreApplicationCalculatorComponent_div_2_div_44_Template","PreApplicationCalculatorComponent_div_2_Template_button_click_46_listener","getLoanAmount","loanAmountSliderData","formatRepaymentTimeForDisplay","getRepaymentTime","repaymentTimeSliderData","calculatedPaymentPlan","TotalPaidAmount","ɵɵtextInterpolate8","MarginInterestRatePercent","getTermsBoxPaymentPlanInitialFee","getTermsBoxNotificationFee","EffectiveInterstRatePercent","MonthlyCostIncludingFeesAmount","PreApplicationCalculatorComponent","paymentPlanService","hasNoActiveProducts","loanAmounts","repaymentTimes","recalculatePaymentPlan","repaymentTime","basicRequest","loansToSettleAmount","marginInterestRatePercent","exampleMarginInterestRatePercent","referenceInterestRatePercent","initialFeeWithheldAmount","exampleInitialFeeWithheldAmount","initialFeeCapitalizedAmount","exampleInitialFeeCapitalizedAmount","initialFeeOnFirstNotificationAmount","exampleInitialFeeOnFirstNotificationAmount","notificationFee","exampleNotificationFee","isDays","caclculatePlanWithSinglePaymentWithRepaymentTimeInDays","calculatePlanWithAnnuitiesFromRepaymentTime","repaymentTimeInMonths","getItemByIndex","rawValue","parseRepaymentTimeWithPeriodMarker","InitialFeeCapitalizedAmount","InitialFeeWithheldAmount","Payments","initialFee","monthlyFee","beginPreApplication","requestedLoanAmount","requestedRepaymentTime","formatRepaymentTimeWithPeriodMarkerForStorage","NTechPaymentPlanService","PreApplicationCalculatorComponent_Template","PreApplicationCalculatorComponent_div_2_Template","PreApplicationCalculatorComponent_div_3_Template","BankSharingMessageCode","kzData","waiting","waitSeconds","PreApplicationDatashareComponent_div_6_Template_button_click_4_listener","simulateShareSucess","PreApplicationDatashareComponent_div_6_Template_button_click_6_listener","simulateShareFailed","PreApplicationDatashareComponent","dataSharingSettings","dataSharing","providerName","applicant1","useMock","caseId","kreditzCaseId","clientId","iFrameClientId","testCivicRegNr","fetchDataForMonths","fetchMonthCount","onMessage","hideUi","authenticationCancelled","userFlowCompleted","now","startTime","lastPollTime","reScheduleWait","kzMockData","onShareFailed","onBankDataShared","hasAccountData","exists","delete","hasAccountSharingDataArrived","PreApplicationDatashareComponent_Template","PreApplicationDatashareComponent_p_2_Template","PreApplicationDatashareComponent_div_3_Template","PreApplicationDatashareComponent_div_4_Template","PreApplicationDatashareComponent_div_5_Template","PreApplicationDatashareComponent_div_6_Template","opt_r16","groupName_r17","PreApplicationEconomyComponent_div_3_label_37_Template_input_click_1_listener","_r19","setHasOtherLoans","PreApplicationEconomyComponent_div_3_label_38_Template_input_click_1_listener","PreApplicationEconomyComponent_div_3_label_40_Template_input_click_1_listener","PreApplicationEconomyComponent_div_3_label_41_Template_input_click_1_listener","opt_r29","PreApplicationEconomyComponent_div_3_ng_container_42_div_18_Template_button_click_2_listener","groupName_r26","PreApplicationEconomyComponent_div_3_ng_container_42_option_9_Template","PreApplicationEconomyComponent_div_3_ng_container_42_div_18_Template","PreApplicationEconomyComponent_div_3_div_43_Template_button_click_1_listener","PreApplicationEconomyComponent_div_3_option_13_Template","PreApplicationEconomyComponent_div_3_option_14_Template","PreApplicationEconomyComponent_div_3_ng_container_15_Template","PreApplicationEconomyComponent_div_3_ng_container_16_Template","PreApplicationEconomyComponent_div_3_Template_button_click_23_listener","_r36","PreApplicationEconomyComponent_div_3_Template_button_click_29_listener","PreApplicationEconomyComponent_div_3_ng_container_31_Template","PreApplicationEconomyComponent_div_3_ng_container_32_Template","PreApplicationEconomyComponent_div_3_label_37_Template","PreApplicationEconomyComponent_div_3_label_38_Template","PreApplicationEconomyComponent_div_3_label_40_Template","PreApplicationEconomyComponent_div_3_label_41_Template","PreApplicationEconomyComponent_div_3_ng_container_42_Template","PreApplicationEconomyComponent_div_3_div_43_Template","PreApplicationEconomyComponent_div_3_Template_button_click_52_listener","housingTypes","getHasOtherLoans","formControlName_r40","displayText_r39","PreApplicationEconomyComponent_ng_template_4_div_0_Template","PreApplicationEconomyComponent","initialApplication","nextOtherLoanSuffix","isOtherLoansTouched","HousingTypes","isDataSharingEnabled","finalApplication","childBenefitAmount","housingCostPerMonthAmount","otherHouseholdFixedCostsAmount","housing","householdChildren","ageInYears","hasConsentedToCreditReport","shouldSendToDataShare","scoringResult","preScoreApplication","preScoreResultId","isAcceptRecommended","createResult","takeOtherLoanSuffix","hasOtherLoans","nrOfOtherLoans","PreApplicationEconomyComponent_Template","PreApplicationEconomyComponent_div_2_Template","PreApplicationEconomyComponent_div_3_Template","PreApplicationEconomyComponent_ng_template_4_Template","PreApplicationReceivedComponent","PreApplicationReceivedComponent_Template","PreApplicationReceivedComponent_div_2_Template","SizeAndTimeLimitedCache","nPreCredit","validateBankAccountNrsCache","customerDecisionCode","answerKycQuestions","answersByApplicantNr","isConfirmedKycQuestionAnswers","DirectDebitAccountOwnerApplicantNr","getValidateBankAccountNrCacheKey","validateBankAccountNrsBatchRaw","accounts","requestKey","fromCacheResult","anyNotInCache","key","cacheHit","get","initialModel","applicationRequest","requestedAmount","housingType","requestedRepaymentTimeInDays","requestedRepaymentTimeInMonths","monthlyIncomeAmount","employmentStatus","employerName","hasConsentedToShareBankAccountData","dataShareProviderName","dataShareSessionId","householdOtherLoans","otherLoan","shouldBeSettled","child","scoringVariables","persistResult","civicRegNrResult","toFixed","UnsecuredLoanApplicationsRoutingModule","NgForOf","environment","production","enableProdMode","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","err","console","iframeUrl","ɵɵsanitizeResourceUrl","KreditzDatashareIframeComponent","onIFrameMessageEvent","event","origin","includes","parsedData","case_id","emitMessage","isHidden","bankSelected","authenticationStarted","authenticationFinished","separator","addQueryParameter","bypassSecurityTrustResourceUrl","hostBindings","KreditzDatashareIframeComponent_HostBindings","ɵɵresolveWindow","KreditzDatashareIframeComponent_ng_container_0_Template","KycAnswersEditorComponent_div_0_button_9_Template_button_click_0_listener","KycAnswersEditorComponent_div_0_button_10_Template_button_click_0_listener","cancel","option_r15","getTranslation","translations","KycAnswersEditorComponent_div_0_ng_container_12_div_1_option_5_Template","question_r9","headerTranslations","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_3_p_5_Template_button_click_2_listener","countryCode_r21","removeCountryOption","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_3_p_5_Template","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_3_Template_select_change_6_listener","_r28","onCountryOptionChanged","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_3_ng_container_10_Template","optionsHeaderTranslations","optionsKey","countriesExceptChosen","countryOptions","getQuestionOptionFormKey","option_r31","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_4_div_4_Template","KycAnswersEditorComponent_div_0_ng_container_12_div_1_Template","KycAnswersEditorComponent_div_0_ng_container_12_div_2_Template","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_3_Template","KycAnswersEditorComponent_div_0_ng_container_12_ng_container_4_Template","isYesNoQuestion","KycAnswersEditorComponent_div_0_div_1_Template","KycAnswersEditorComponent_div_0_button_9_Template","KycAnswersEditorComponent_div_0_button_10_Template","KycAnswersEditorComponent_div_0_ng_container_12_Template","isSubmitEnabled","isCancelEnabled","questions","KycAnswersEditorComponent","saveAnswers","sv","fi","yes","no","unsecuredLoan","savingsAccount","selectCountry","loadAndReorderCountries","formValidators","question","option","isYes","selectedCountries","setValidators","validate","questionsVersion","version","parseAnswers","selectedOption","questionCode","answerCode","optionCodes","optionTexts","countryCode","currentValue","patch","patchValue","chosenCountries","preferredTranslation","availableTranslations","_this5","countries","getOrderedCountryDropdownOptionsFromIsoCountries","KycAnswersEditorComponent_Template","KycAnswersEditorComponent_div_0_Template","getOrderedCountryDropdownOptions","getDisplayName","getCountryIsoCode","defaultChoiceCountryCodes","orderedCountries","orderByStr","userLanguage","translatedNameByLang2","commonName","iso2Name","source","getSortKey","localeCompare","KycAnswersViewComponent_div_0_div_7_Template_button_click_1_listener","answer_r8","KycAnswersViewComponent_div_0_ng_container_8_div_2_Template","KycAnswersViewComponent_div_0_div_1_Template","KycAnswersViewComponent_div_0_div_7_Template","KycAnswersViewComponent_div_0_ng_container_8_Template","KycAnswersViewComponent_div_0_ng_container_9_Template","showEditButton","hasAnswers","KycAnswersViewComponent","KycAnswersViewComponent_Template","KycAnswersViewComponent_div_0_Template","languages","explanationText","explanationTextUpdate","back","loanTitle","savingsTitle","kyc","clientCountry","getRelationTypeTranslationKey","onLanguageChanged","loan_r2","maxCapitalBalanceAmount","MlSeAmortizationBasisComponent_div_0_ng_container_19_span_4_Template","MlSeAmortizationBasisComponent_div_0_ng_container_19_tr_13_Template","currentCapitalBalanceAmount","getRuleDescription","monthlyAmortizationAmount","isSecondLoanRowNeeded","MlSeAmortizationBasisComponent_div_0_ng_container_19_Template","balanceDate","propertyIdWithLabel","objectValue","objectValueDate","currentCombinedYearlyIncomeAmount","otherMortageLoansAmount","ltvFraction","ltiFraction","underlag","skuldEjOmfattasAmorteringskrav","skuldOmfattasAmorteringskrav","skuldOmfattasSkarptAmorteringskrav","varavOvanAlternativRegeln","totalAmorteringObjektet","totalAmorteringKravObjektetBankenHuvud","totalAmorteringKravObjektetBankenAlternativ","MlSeAmortizationBasisComponent","amortizationBasis","amorteringsunderlag","ruleCode","isUsingAlternateRule","MlSeAmortizationBasisComponent_Template","MlSeAmortizationBasisComponent_div_0_Template","transform","input","parameterName","obj","pure","getFromDictionary","getNumberDictionaryKeys","groupByNumber","groupByString","ComplexApplicationList","listName","flattendItems","rows","itemsByNr","createListsFromFlattenedItems","itemsByListName","ListName","createListFromFlattenedItems","lists","count","getRow","emptyRowOnNotExists","actualRow","getRowNumbers","rowNrs","uniqueItems","repeatedItems","item","IsRepeatable","ItemName","ItemValue","itemName","getUniqueItemBoolean","parseFloat","getRepeatedItems","uniqueValues","NullableNumber","computeSingleNotificationEffectiveInterestRate","effectiveInterestRateRoundToDigits","initialPaidToCustomerAmount","singleNotificationAmount","repaymentTimeInDays","fraction","pow","roundToPlaces","EffectiveInterestRateCalculation","payments","getTimeFromMonthNr","monthNr","Number","EPSILON","addAdditionalLoan","addInitialLoan","addPayment","calculate","equals","payment","root","findRootUsingBrentsMethod","rate","left","right","tolerance","iterationsUsed","errorEstimate","maxIterations","MAX_SAFE_INTEGER","e","fa","fc","tol","q","r","skipInt","abs","HttpResponse","Observable","requests","removeRequest","req","intercept","has","handle","clone","observer","subscription","complete","LoaderInterceptor","getCollateralItem","includeObjectTypeLabel","createRawId","context","ApplicationEvent","generateDialogId","ReloadApplicationEventName","ReloadApplicationAndClosePopupEventName","signalUpdateToggleBlock","updates","signalReloadCreditComments","ReloadCreditCommentsEventName","setCustomPageTitle","browserTitle","setApplicationNr","UntypedFormControl","UntypedFormGroup","getFormControl","control","getFormGroupValue2","groupName1","groupName2","group2","dirty","hasAnyError","formValidationErrorName","validatorName","shouldExist","getInitialValue","getValidators","getAsyncValidators","contains","asyncValidators","addControl","controls","groupControls","setDisabled","isDisabled","emitEvent","disabled","disable","enable","setFormValidator","setFormValidators","actualValidator","actualValidators","validator","createFormValidator","compose","updateValueAndValidity","ensureGroupedControlOnConditionOnly","addGroupedControlIfNotExists","validateActual","attachedFiles","reject","FileReader","size","onloadend","readAsDataURL","isMissing","annuityRoundToDigits","paymentRoundToDigits","monthCountCapEvenIfNotFullyPaid","lastMonthCarryOverStrategyPercentOfAnnuity","lastMonthCarryOverStrategyPercentOfFixedMonthlyCapitalAmount","lastMonthCarryOverStrategyFixedAmount","getTotalInterestRatePercent","capitalAmount","interestOnNotification","capital","interest","totalAmount","nonStandardPaymentDays","plan","LoansToSettleAmount","MonthlyFeeAmount","MonthlyCostExcludingFeesAmount","RepaymentTimeInMonths","RepaymentTimeInYears","ReferenceInterestRatePercent","TotalInterestRatePercent","initialCapitalDebtAmount","computeInitialCapitalDebtAmount","computeAnnuity","computeMonthlyPayments","calculateEffectiveInterestRatePercent","capitalizedInitialFeeAmount","pv","getActualAmortizationAmountForMonth","standardAmortizationAmount","remainingCapitalAmount","shouldCarryOverRemainingCapitalAmount","fixedMonthlyCapitalAmount","lastMonthCarryOverLimit","notficationFeeAmount","initialFeePaidOnFirstNotification","paymentPlan","first","remainingAmount","amortization","shouldCarryOverAmount","BasicRepaymentTimePaymentPlanRequest","RepaymentTimePaymentPlanRequest","MonthlyPayment","PaymentPlan","createCountrySpecificValidator","formatNumber","twoLetterClientCountryIsoCode","locale","isValidPositiveDecimal","isValidDecimal","allowNegativeValues","removeWhitespace","perCountry","parseDatetimeOffset","ISO_8601","formatInteger","formatIntegerForDisplay","formatDecimalForDisplay","nrOfDecimals","formatDateForEdit","treatEmptyAsZero","isNaN","isValidEmail","match","isValidPhone","digitCount","isLetter","isDigit","isValidHttpUrl","URL","protocol","getAlwaysInvalidValidator","getValidator","getUrlValidator","getIntegerValidator","noWhitespaceX","isValidInt","getIntegerWithBoundsValidator","getBannedValueValidator","bannedValue","getBankAccountNrAsyncValidator","isValidBankAccountNr","client","bankAccountType","defaultBankAccountType","getValidatorAsync","isRegularBankAccount","formatDecimalForEdit","toLocaleString","maximumFractionDigits","minimumFractionDigits","tmp","getDecimalValidator","isValidDateOnly","parseDateOnly","isMissingOrValid","getFormValidatorAsync","getFormErrors","str","isTextLimitExceeded","txt","charLimit","trimLimitChars","maxChars","substring","isValidOrgnr","isValidCivicNr","getOrgNrValidator","allowMissingValue","isMissingValue","parsedValue","formatJsonForDisplay","json","requiredIfValidator","predicate","formControl","parent","places","multiplier","round","mapI","descending","directionMultiplier","compareFn","x1","x2","n1","n2","getRandomIntInclusive","random","isAnyOf","values","anyNumberBetween","dimension","maxCount","maxAgeInMinutes","initialInsertionOrderedEntries","entryByKey","entry","isExpired","expirationTimeMs","newExpirationTime","getTime","currentEntry","oldest","getOrAddToDictionary","create","defaultValue","distinct","ar","getKey","getNumberDictionaryValues","UniqueIdGenerator","alphabet","rtn","charAt","uniqueIdGenerator","toUrlSafeBase64String","encoded","btoa","substr","fromUrlSafeBase64String","decodeFirstPass","decoded","atob","query","window","search","pair","decodeURIComponent","leading","trailing","bankAccountNrTypesFallback","BankAccountSe","BankGiroSe","PlusGiroSe","IBANFi","bankAccountNrTypesLang","includeEmptyOption","excludeRegularAccounts","types","langOverride","getDateOnlyParts","ymd","yearMonthDay","day","month","year","String","padStart","o","newO","origKey","newKey","hasOwnProperty","slice","camelCaseRevier","isArray","replacement","k","call","twoLetterCountryIsoCode","CountrySpecificValidatorSe","CountrySpecificValidatorFi","civicNrDigits","toUpperCase","computeCheckDigitCivicNrFi","referenceNr","prefix","digits","mPart","hasValidMod10CheckDigit","yearNr","RegExp","$1","$5","$2","$6","dayNr","$3","$7","prototype","cleanedNr","parity","digit","toolbar","header","list"],"sourceRoot":"webpack:///","x_google_ignoreList":[159]}